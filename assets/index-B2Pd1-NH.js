(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function t_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var td={exports:{}},Na={},nd={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function YE(){if(rg)return De;rg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function P(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,D={};function z(L,b,ye){this.props=L,this.context=b,this.refs=D,this.updater=ye||F}z.prototype.isReactComponent={},z.prototype.setState=function(L,b){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,b,"setState")},z.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function W(){}W.prototype=z.prototype;function J(L,b,ye){this.props=L,this.context=b,this.refs=D,this.updater=ye||F}var Y=J.prototype=new W;Y.constructor=J,q(Y,z.prototype),Y.isPureReactComponent=!0;var G=Array.isArray,oe=Object.prototype.hasOwnProperty,se={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function A(L,b,ye){var Te,ke={},xe=null,Be=null;if(b!=null)for(Te in b.ref!==void 0&&(Be=b.ref),b.key!==void 0&&(xe=""+b.key),b)oe.call(b,Te)&&!N.hasOwnProperty(Te)&&(ke[Te]=b[Te]);var be=arguments.length-2;if(be===1)ke.children=ye;else if(1<be){for(var qe=Array(be),Tt=0;Tt<be;Tt++)qe[Tt]=arguments[Tt+2];ke.children=qe}if(L&&L.defaultProps)for(Te in be=L.defaultProps,be)ke[Te]===void 0&&(ke[Te]=be[Te]);return{$$typeof:r,type:L,key:xe,ref:Be,props:ke,_owner:se.current}}function R(L,b){return{$$typeof:r,type:L.type,key:b,ref:L.ref,props:L.props,_owner:L._owner}}function O(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function k(L){var b={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ye){return b[ye]})}var V=/\/+/g;function T(L,b){return typeof L=="object"&&L!==null&&L.key!=null?k(""+L.key):b.toString(36)}function we(L,b,ye,Te,ke){var xe=typeof L;(xe==="undefined"||xe==="boolean")&&(L=null);var Be=!1;if(L===null)Be=!0;else switch(xe){case"string":case"number":Be=!0;break;case"object":switch(L.$$typeof){case r:case e:Be=!0}}if(Be)return Be=L,ke=ke(Be),L=Te===""?"."+T(Be,0):Te,G(ke)?(ye="",L!=null&&(ye=L.replace(V,"$&/")+"/"),we(ke,b,ye,"",function(Tt){return Tt})):ke!=null&&(O(ke)&&(ke=R(ke,ye+(!ke.key||Be&&Be.key===ke.key?"":(""+ke.key).replace(V,"$&/")+"/")+L)),b.push(ke)),1;if(Be=0,Te=Te===""?".":Te+":",G(L))for(var be=0;be<L.length;be++){xe=L[be];var qe=Te+T(xe,be);Be+=we(xe,b,ye,qe,ke)}else if(qe=P(L),typeof qe=="function")for(L=qe.call(L),be=0;!(xe=L.next()).done;)xe=xe.value,qe=Te+T(xe,be++),Be+=we(xe,b,ye,qe,ke);else if(xe==="object")throw b=String(L),Error("Objects are not valid as a React child (found: "+(b==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return Be}function Ne(L,b,ye){if(L==null)return L;var Te=[],ke=0;return we(L,Te,"","",function(xe){return b.call(ye,xe,ke++)}),Te}function ze(L){if(L._status===-1){var b=L._result;b=b(),b.then(function(ye){(L._status===0||L._status===-1)&&(L._status=1,L._result=ye)},function(ye){(L._status===0||L._status===-1)&&(L._status=2,L._result=ye)}),L._status===-1&&(L._status=0,L._result=b)}if(L._status===1)return L._result.default;throw L._result}var Pe={current:null},re={transition:null},fe={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:re,ReactCurrentOwner:se};function ae(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Ne,forEach:function(L,b,ye){Ne(L,function(){b.apply(this,arguments)},ye)},count:function(L){var b=0;return Ne(L,function(){b++}),b},toArray:function(L){return Ne(L,function(b){return b})||[]},only:function(L){if(!O(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},De.Component=z,De.Fragment=t,De.Profiler=o,De.PureComponent=J,De.StrictMode=s,De.Suspense=g,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,De.act=ae,De.cloneElement=function(L,b,ye){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Te=q({},L.props),ke=L.key,xe=L.ref,Be=L._owner;if(b!=null){if(b.ref!==void 0&&(xe=b.ref,Be=se.current),b.key!==void 0&&(ke=""+b.key),L.type&&L.type.defaultProps)var be=L.type.defaultProps;for(qe in b)oe.call(b,qe)&&!N.hasOwnProperty(qe)&&(Te[qe]=b[qe]===void 0&&be!==void 0?be[qe]:b[qe])}var qe=arguments.length-2;if(qe===1)Te.children=ye;else if(1<qe){be=Array(qe);for(var Tt=0;Tt<qe;Tt++)be[Tt]=arguments[Tt+2];Te.children=be}return{$$typeof:r,type:L.type,key:ke,ref:xe,props:Te,_owner:Be}},De.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},De.createElement=A,De.createFactory=function(L){var b=A.bind(null,L);return b.type=L,b},De.createRef=function(){return{current:null}},De.forwardRef=function(L){return{$$typeof:m,render:L}},De.isValidElement=O,De.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:ze}},De.memo=function(L,b){return{$$typeof:_,type:L,compare:b===void 0?null:b}},De.startTransition=function(L){var b=re.transition;re.transition={};try{L()}finally{re.transition=b}},De.unstable_act=ae,De.useCallback=function(L,b){return Pe.current.useCallback(L,b)},De.useContext=function(L){return Pe.current.useContext(L)},De.useDebugValue=function(){},De.useDeferredValue=function(L){return Pe.current.useDeferredValue(L)},De.useEffect=function(L,b){return Pe.current.useEffect(L,b)},De.useId=function(){return Pe.current.useId()},De.useImperativeHandle=function(L,b,ye){return Pe.current.useImperativeHandle(L,b,ye)},De.useInsertionEffect=function(L,b){return Pe.current.useInsertionEffect(L,b)},De.useLayoutEffect=function(L,b){return Pe.current.useLayoutEffect(L,b)},De.useMemo=function(L,b){return Pe.current.useMemo(L,b)},De.useReducer=function(L,b,ye){return Pe.current.useReducer(L,b,ye)},De.useRef=function(L){return Pe.current.useRef(L)},De.useState=function(L){return Pe.current.useState(L)},De.useSyncExternalStore=function(L,b,ye){return Pe.current.useSyncExternalStore(L,b,ye)},De.useTransition=function(){return Pe.current.useTransition()},De.version="18.3.1",De}var ig;function Jd(){return ig||(ig=1,nd.exports=YE()),nd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg;function XE(){if(sg)return Na;sg=1;var r=Jd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,_){var E,S={},P=null,F=null;_!==void 0&&(P=""+_),g.key!==void 0&&(P=""+g.key),g.ref!==void 0&&(F=g.ref);for(E in g)s.call(g,E)&&!l.hasOwnProperty(E)&&(S[E]=g[E]);if(m&&m.defaultProps)for(E in g=m.defaultProps,g)S[E]===void 0&&(S[E]=g[E]);return{$$typeof:e,type:m,key:P,ref:F,props:S,_owner:o.current}}return Na.Fragment=t,Na.jsx=h,Na.jsxs=h,Na}var og;function JE(){return og||(og=1,td.exports=XE()),td.exports}var w=JE(),X=Jd();const ZE=t_(X);var ku={},rd={exports:{}},Jt={},id={exports:{}},sd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function eT(){return ag||(ag=1,(function(r){function e(re,fe){var ae=re.length;re.push(fe);e:for(;0<ae;){var L=ae-1>>>1,b=re[L];if(0<o(b,fe))re[L]=fe,re[ae]=b,ae=L;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var fe=re[0],ae=re.pop();if(ae!==fe){re[0]=ae;e:for(var L=0,b=re.length,ye=b>>>1;L<ye;){var Te=2*(L+1)-1,ke=re[Te],xe=Te+1,Be=re[xe];if(0>o(ke,ae))xe<b&&0>o(Be,ke)?(re[L]=Be,re[xe]=ae,L=xe):(re[L]=ke,re[Te]=ae,L=Te);else if(xe<b&&0>o(Be,ae))re[L]=Be,re[xe]=ae,L=xe;else break e}}return fe}function o(re,fe){var ae=re.sortIndex-fe.sortIndex;return ae!==0?ae:re.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],_=[],E=1,S=null,P=3,F=!1,q=!1,D=!1,z=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(re){for(var fe=t(_);fe!==null;){if(fe.callback===null)s(_);else if(fe.startTime<=re)s(_),fe.sortIndex=fe.expirationTime,e(g,fe);else break;fe=t(_)}}function G(re){if(D=!1,Y(re),!q)if(t(g)!==null)q=!0,ze(oe);else{var fe=t(_);fe!==null&&Pe(G,fe.startTime-re)}}function oe(re,fe){q=!1,D&&(D=!1,W(A),A=-1),F=!0;var ae=P;try{for(Y(fe),S=t(g);S!==null&&(!(S.expirationTime>fe)||re&&!k());){var L=S.callback;if(typeof L=="function"){S.callback=null,P=S.priorityLevel;var b=L(S.expirationTime<=fe);fe=r.unstable_now(),typeof b=="function"?S.callback=b:S===t(g)&&s(g),Y(fe)}else s(g);S=t(g)}if(S!==null)var ye=!0;else{var Te=t(_);Te!==null&&Pe(G,Te.startTime-fe),ye=!1}return ye}finally{S=null,P=ae,F=!1}}var se=!1,N=null,A=-1,R=5,O=-1;function k(){return!(r.unstable_now()-O<R)}function V(){if(N!==null){var re=r.unstable_now();O=re;var fe=!0;try{fe=N(!0,re)}finally{fe?T():(se=!1,N=null)}}else se=!1}var T;if(typeof J=="function")T=function(){J(V)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ne=we.port2;we.port1.onmessage=V,T=function(){Ne.postMessage(null)}}else T=function(){z(V,0)};function ze(re){N=re,se||(se=!0,T())}function Pe(re,fe){A=z(function(){re(r.unstable_now())},fe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){q||F||(q=!0,ze(oe))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return P},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(re){switch(P){case 1:case 2:case 3:var fe=3;break;default:fe=P}var ae=P;P=fe;try{return re()}finally{P=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ae=P;P=re;try{return fe()}finally{P=ae}},r.unstable_scheduleCallback=function(re,fe,ae){var L=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?L+ae:L):ae=L,re){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=ae+b,re={id:E++,callback:fe,priorityLevel:re,startTime:ae,expirationTime:b,sortIndex:-1},ae>L?(re.sortIndex=ae,e(_,re),t(g)===null&&re===t(_)&&(D?(W(A),A=-1):D=!0,Pe(G,ae-L))):(re.sortIndex=b,e(g,re),q||F||(q=!0,ze(oe))),re},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(re){var fe=P;return function(){var ae=P;P=fe;try{return re.apply(this,arguments)}finally{P=ae}}}})(sd)),sd}var lg;function tT(){return lg||(lg=1,id.exports=eT()),id.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function nT(){if(ug)return Jt;ug=1;var r=Jd(),e=tT();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},S={};function P(n){return g.call(S,n)?!0:g.call(E,n)?!1:_.test(n)?S[n]=!0:(E[n]=!0,!1)}function F(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,i,a,c){if(i===null||typeof i>"u"||F(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function D(n,i,a,c,d,f,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=f,this.removeEmptyString=v}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){z[n]=new D(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];z[i]=new D(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){z[n]=new D(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){z[n]=new D(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){z[n]=new D(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){z[n]=new D(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){z[n]=new D(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){z[n]=new D(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){z[n]=new D(n,5,!1,n.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function J(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(W,J);z[i]=new D(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(W,J);z[i]=new D(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(W,J);z[i]=new D(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){z[n]=new D(n,1,!1,n.toLowerCase(),null,!1,!1)}),z.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){z[n]=new D(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y(n,i,a,c){var d=z.hasOwnProperty(i)?z[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(q(i,a,d,c)&&(a=null),c||d===null?P(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var G=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),se=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),k=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),ze=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),re=Symbol.iterator;function fe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,L;function b(n){if(L===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);L=i&&i[1]||""}return`
`+L+n}var ye=!1;function Te(n,i){if(!n||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var c=$}Reflect.construct(n,[],i)}else{try{i.call()}catch($){c=$}n.call(i.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),f=c.stack.split(`
`),v=d.length-1,C=f.length-1;1<=v&&0<=C&&d[v]!==f[C];)C--;for(;1<=v&&0<=C;v--,C--)if(d[v]!==f[C]){if(v!==1||C!==1)do if(v--,C--,0>C||d[v]!==f[C]){var x=`
`+d[v].replace(" at new "," at ");return n.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",n.displayName)),x}while(1<=v&&0<=C);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?b(n):""}function ke(n){switch(n.tag){case 5:return b(n.type);case 16:return b("Lazy");case 13:return b("Suspense");case 19:return b("SuspenseList");case 0:case 2:case 15:return n=Te(n.type,!1),n;case 11:return n=Te(n.type.render,!1),n;case 1:return n=Te(n.type,!0),n;default:return""}}function xe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case se:return"Portal";case R:return"Profiler";case A:return"StrictMode";case T:return"Suspense";case we:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case O:return(n._context.displayName||"Context")+".Provider";case V:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ne:return i=n.displayName||null,i!==null?i:xe(n.type)||"Memo";case ze:i=n._payload,n=n._init;try{return xe(n(i))}catch{}}return null}function Be(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(i);case 8:return i===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tt(n){var i=qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,f.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function jr(n){n._valueTracker||(n._valueTracker=Tt(n))}function Oi(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function On(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ur(n,i){var a=i.checked;return ae({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ks(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=be(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function zr(n,i){i=i.checked,i!=null&&Y(n,"checked",i,!1)}function hr(n,i){zr(n,i);var a=be(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?ot(n,i.type,a):i.hasOwnProperty("defaultValue")&&ot(n,i.type,be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function Mi(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ot(n,i,a){(i!=="number"||On(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Ve=Array.isArray;function qt(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+be(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Br(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Li(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Ve(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:be(a)}}function dl(n,i){var a=be(i.value),c=be(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function $r(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Uo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cs(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Uo(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Hr,fl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Hr=Hr||document.createElement("div"),Hr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Hr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function bi(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pl=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(n){pl.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Wr[i]=Wr[n]})});function qr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Wr.hasOwnProperty(n)&&Wr[n]?(""+i).trim():i+"px"}function Rs(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=qr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var zo=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wn(n,i){if(i){if(zo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ps(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gr=null;function Ns(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var dr=null,fr=null,at=null;function Bo(n){if(n=ma(n)){if(typeof dr!="function")throw Error(t(280));var i=n.stateNode;i&&(i=zl(i),dr(n.stateNode,n.type,i))}}function Kr(n){fr?at?at.push(n):at=[n]:fr=n}function Qr(){if(fr){var n=fr,i=at;if(at=fr=null,Bo(n),i)for(n=0;n<i.length;n++)Bo(i[n])}}function ml(n,i){return n(i)}function gl(){}var Mn=!1;function yl(n,i,a){if(Mn)return n(i,a);Mn=!0;try{return ml(n,i,a)}finally{Mn=!1,(fr!==null||at!==null)&&(gl(),Qr())}}function Fi(n,i){var a=n.stateNode;if(a===null)return null;var c=zl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Yr=!1;if(m)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Yr=!1}function _l(n,i,a,c,d,f,v,C,x){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(ee){this.onError(ee)}}var pr=!1,Ln=null,xs=!1,cn=null,vl={onError:function(n){pr=!0,Ln=n}};function wl(n,i,a,c,d,f,v,C,x){pr=!1,Ln=null,_l.apply(vl,arguments)}function $o(n,i,a,c,d,f,v,C,x){if(wl.apply(this,arguments),pr){if(pr){var $=Ln;pr=!1,Ln=null}else throw Error(t(198));xs||(xs=!0,cn=$)}}function En(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Ho(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function El(n){if(En(n)!==n)throw Error(t(188))}function Tl(n){var i=n.alternate;if(!i){if(i=En(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return El(d),n;if(f===c)return El(d),i;f=f.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=f;else{for(var v=!1,C=d.child;C;){if(C===a){v=!0,a=d,c=f;break}if(C===c){v=!0,c=d,a=f;break}C=C.sibling}if(!v){for(C=f.child;C;){if(C===a){v=!0,a=f,c=d;break}if(C===c){v=!0,c=f,a=d;break}C=C.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Il(n){return n=Tl(n),n!==null?ji(n):null}function ji(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=ji(n);if(i!==null)return i;n=n.sibling}return null}var Wo=e.unstable_scheduleCallback,Ds=e.unstable_cancelCallback,Ui=e.unstable_shouldYield,mr=e.unstable_requestPaint,Xe=e.unstable_now,Dc=e.unstable_getCurrentPriorityLevel,Vs=e.unstable_ImmediatePriority,qo=e.unstable_UserBlockingPriority,zi=e.unstable_NormalPriority,Go=e.unstable_LowPriority,Os=e.unstable_IdlePriority,Bi=null,en=null;function Sl(n){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Bi,n,void 0,(n.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:$i,bn=Math.log,hn=Math.LN2;function $i(n){return n>>>=0,n===0?32:31-(bn(n)/hn|0)|0}var Fn=64,Jr=4194304;function He(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function gr(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,f=n.pingedLanes,v=a&268435455;if(v!==0){var C=v&~d;C!==0?c=He(C):(f&=v,f!==0&&(c=He(f)))}else v=a&~d,v!==0?c=He(v):f!==0&&(c=He(f));if(c===0)return 0;if(i!==0&&i!==c&&(i&d)===0&&(d=c&-c,f=i&-i,d>=f||d===16&&(f&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-tn(i),d=1<<a,c|=n[a],i&=~d;return c}function Hi(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wi(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes;0<f;){var v=31-tn(f),C=1<<v,x=d[v];x===-1?((C&a)===0||(C&c)!==0)&&(d[v]=Hi(C,i)):x<=i&&(n.expiredLanes|=C),f&=~C}}function Ko(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Qo(){var n=Fn;return Fn<<=1,(Fn&4194240)===0&&(Fn=64),n}function Yo(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function qi(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-tn(i),n[i]=a}function Vc(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-tn(a),f=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~f}}function Xo(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-tn(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Fe=0;function jn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Jo,Ms,Zo,ea,ta,Un=!1,Ls=[],zn=null,Bn=null,Ct=null,Gi=new Map,yr=new Map,nn=[],Al="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zr(n,i){switch(n){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Gi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yr.delete(i.pointerId)}}function Tn(n,i,a,c,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},i!==null&&(i=ma(i),i!==null&&Ms(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function kl(n,i,a,c,d){switch(i){case"focusin":return zn=Tn(zn,n,i,a,c,d),!0;case"dragenter":return Bn=Tn(Bn,n,i,a,c,d),!0;case"mouseover":return Ct=Tn(Ct,n,i,a,c,d),!0;case"pointerover":var f=d.pointerId;return Gi.set(f,Tn(Gi.get(f)||null,n,i,a,c,d)),!0;case"gotpointercapture":return f=d.pointerId,yr.set(f,Tn(yr.get(f)||null,n,i,a,c,d)),!0}return!1}function bs(n){var i=Xi(n.target);if(i!==null){var a=En(i);if(a!==null){if(i=a.tag,i===13){if(i=Ho(a),i!==null){n.blockedOn=i,ta(n.priority,function(){Zo(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ke(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Fs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Gr=c,a.target.dispatchEvent(c),Gr=null}else return i=ma(a),i!==null&&Ms(i),n.blockedOn=a,!1;i.shift()}return!0}function Cl(n,i,a){Ke(n)&&a.delete(i)}function Oc(){Un=!1,zn!==null&&Ke(zn)&&(zn=null),Bn!==null&&Ke(Bn)&&(Bn=null),Ct!==null&&Ke(Ct)&&(Ct=null),Gi.forEach(Cl),yr.forEach(Cl)}function ei(n,i){n.blockedOn===i&&(n.blockedOn=null,Un||(Un=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Oc)))}function ti(n){function i(d){return ei(d,n)}if(0<Ls.length){ei(Ls[0],n);for(var a=1;a<Ls.length;a++){var c=Ls[a];c.blockedOn===n&&(c.blockedOn=null)}}for(zn!==null&&ei(zn,n),Bn!==null&&ei(Bn,n),Ct!==null&&ei(Ct,n),Gi.forEach(i),yr.forEach(i),a=0;a<nn.length;a++)c=nn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<nn.length&&(a=nn[0],a.blockedOn===null);)bs(a),a.blockedOn===null&&nn.shift()}var _r=G.ReactCurrentBatchConfig,vr=!0;function $n(n,i,a,c){var d=Fe,f=_r.transition;_r.transition=null;try{Fe=1,na(n,i,a,c)}finally{Fe=d,_r.transition=f}}function Rl(n,i,a,c){var d=Fe,f=_r.transition;_r.transition=null;try{Fe=4,na(n,i,a,c)}finally{Fe=d,_r.transition=f}}function na(n,i,a,c){if(vr){var d=Fs(n,i,a,c);if(d===null)Wc(n,i,c,Hn,a),Zr(n,c);else if(kl(d,n,i,a,c))c.stopPropagation();else if(Zr(n,c),i&4&&-1<Al.indexOf(n)){for(;d!==null;){var f=ma(d);if(f!==null&&Jo(f),f=Fs(n,i,a,c),f===null&&Wc(n,i,c,Hn,a),f===d)break;d=f}d!==null&&c.stopPropagation()}else Wc(n,i,c,null,a)}}var Hn=null;function Fs(n,i,a,c){if(Hn=null,n=Ns(c),n=Xi(n),n!==null)if(i=En(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Ho(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Hn=n,null}function js(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dc()){case Vs:return 1;case qo:return 4;case zi:case Go:return 16;case Os:return 536870912;default:return 16}default:return 16}}var rn=null,Us=null,wr=null;function Pl(){if(wr)return wr;var n,i=Us,a=i.length,c,d="value"in rn?rn.value:rn.textContent,f=d.length;for(n=0;n<a&&i[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===d[f-c];c++);return wr=d.slice(n,1<c?1-c:void 0)}function Ki(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Wn(){return!0}function ra(){return!1}function Ot(n){function i(a,c,d,f,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(f):f[C]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Wn:ra,this.isPropagationStopped=ra,this}return ae(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),i}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qi=Ot(qn),ni=ae({},qn,{view:0,detail:0}),zs=Ot(ni),Bs,$s,sn,Yi=ae({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ce,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==sn&&(sn&&n.type==="mousemove"?(Bs=n.screenX-sn.screenX,$s=n.screenY-sn.screenY):$s=Bs=0,sn=n),Bs)},movementY:function(n){return"movementY"in n?n.movementY:$s}}),ia=Ot(Yi),Nl=ae({},Yi,{dataTransfer:0}),xl=Ot(Nl),Hs=ae({},ni,{relatedTarget:0}),Rt=Ot(Hs),Dl=ae({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Vl=Ot(Dl),ri=ae({},qn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Ot(ri),p=ae({},qn,{data:0}),y=Ot(p),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=H[n])?!!i[n]:!1}function Ce(){return ie}var ct=ae({},ni,{key:function(n){if(n.key){var i=I[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ki(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?U[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ce,charCode:function(n){return n.type==="keypress"?Ki(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ki(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ge=Ot(ct),ft=ae({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),on=Ot(ft),Er=ae({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ce}),Gn=Ot(Er),Kn=ae({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ws=Ot(Kn),sa=ae({},Yi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Hw=Ot(sa),Ww=[9,13,27,32],Mc=m&&"CompositionEvent"in window,oa=null;m&&"documentMode"in document&&(oa=document.documentMode);var qw=m&&"TextEvent"in window&&!oa,Qf=m&&(!Mc||oa&&8<oa&&11>=oa),Yf=" ",Xf=!1;function Jf(n,i){switch(n){case"keyup":return Ww.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qs=!1;function Gw(n,i){switch(n){case"compositionend":return Zf(i);case"keypress":return i.which!==32?null:(Xf=!0,Yf);case"textInput":return n=i.data,n===Yf&&Xf?null:n;default:return null}}function Kw(n,i){if(qs)return n==="compositionend"||!Mc&&Jf(n,i)?(n=Pl(),wr=Us=rn=null,qs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Qf&&i.locale!=="ko"?null:i.data;default:return null}}var Qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ep(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Qw[n.type]:i==="textarea"}function tp(n,i,a,c){Kr(c),i=Fl(i,"onChange"),0<i.length&&(a=new Qi("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var aa=null,la=null;function Yw(n){vp(n,0)}function Ol(n){var i=Xs(n);if(Oi(i))return n}function Xw(n,i){if(n==="change")return i}var np=!1;if(m){var Lc;if(m){var bc="oninput"in document;if(!bc){var rp=document.createElement("div");rp.setAttribute("oninput","return;"),bc=typeof rp.oninput=="function"}Lc=bc}else Lc=!1;np=Lc&&(!document.documentMode||9<document.documentMode)}function ip(){aa&&(aa.detachEvent("onpropertychange",sp),la=aa=null)}function sp(n){if(n.propertyName==="value"&&Ol(la)){var i=[];tp(i,la,n,Ns(n)),yl(Yw,i)}}function Jw(n,i,a){n==="focusin"?(ip(),aa=i,la=a,aa.attachEvent("onpropertychange",sp)):n==="focusout"&&ip()}function Zw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ol(la)}function eE(n,i){if(n==="click")return Ol(i)}function tE(n,i){if(n==="input"||n==="change")return Ol(i)}function nE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var In=typeof Object.is=="function"?Object.is:nE;function ua(n,i){if(In(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(i,d)||!In(n[d],i[d]))return!1}return!0}function op(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ap(n,i){var a=op(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=op(a)}}function lp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?lp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function up(){for(var n=window,i=On();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=On(n.document)}return i}function Fc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function rE(n){var i=up(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&lp(a.ownerDocument.documentElement,a)){if(c!==null&&Fc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!n.extend&&f>c&&(d=c,c=f,f=d),d=ap(a,f);var v=ap(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),f>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var iE=m&&"documentMode"in document&&11>=document.documentMode,Gs=null,jc=null,ca=null,Uc=!1;function cp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uc||Gs==null||Gs!==On(c)||(c=Gs,"selectionStart"in c&&Fc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ca&&ua(ca,c)||(ca=c,c=Fl(jc,"onSelect"),0<c.length&&(i=new Qi("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Gs)))}function Ml(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ks={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionend:Ml("Transition","TransitionEnd")},zc={},hp={};m&&(hp=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Ll(n){if(zc[n])return zc[n];if(!Ks[n])return n;var i=Ks[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in hp)return zc[n]=i[a];return n}var dp=Ll("animationend"),fp=Ll("animationiteration"),pp=Ll("animationstart"),mp=Ll("transitionend"),gp=new Map,yp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(n,i){gp.set(n,i),l(i,[n])}for(var Bc=0;Bc<yp.length;Bc++){var $c=yp[Bc],sE=$c.toLowerCase(),oE=$c[0].toUpperCase()+$c.slice(1);ii(sE,"on"+oE)}ii(dp,"onAnimationEnd"),ii(fp,"onAnimationIteration"),ii(pp,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(mp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function _p(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,$o(c,i,void 0,n),n.currentTarget=null}function vp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var f=void 0;if(i)for(var v=c.length-1;0<=v;v--){var C=c[v],x=C.instance,$=C.currentTarget;if(C=C.listener,x!==f&&d.isPropagationStopped())break e;_p(d,C,$),f=x}else for(v=0;v<c.length;v++){if(C=c[v],x=C.instance,$=C.currentTarget,C=C.listener,x!==f&&d.isPropagationStopped())break e;_p(d,C,$),f=x}}}if(xs)throw n=cn,xs=!1,cn=null,n}function Je(n,i){var a=i[Xc];a===void 0&&(a=i[Xc]=new Set);var c=n+"__bubble";a.has(c)||(wp(i,n,2,!1),a.add(c))}function Hc(n,i,a){var c=0;i&&(c|=4),wp(a,n,c,i)}var bl="_reactListening"+Math.random().toString(36).slice(2);function da(n){if(!n[bl]){n[bl]=!0,s.forEach(function(a){a!=="selectionchange"&&(aE.has(a)||Hc(a,!1,n),Hc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[bl]||(i[bl]=!0,Hc("selectionchange",!1,i))}}function wp(n,i,a,c){switch(js(i)){case 1:var d=$n;break;case 4:d=Rl;break;default:d=na}a=d.bind(null,i,a,n),d=void 0,!Yr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Wc(n,i,a,c,d){var f=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var x=v.tag;if((x===3||x===4)&&(x=v.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;v=v.return}for(;C!==null;){if(v=Xi(C),v===null)return;if(x=v.tag,x===5||x===6){c=f=v;continue e}C=C.parentNode}}c=c.return}yl(function(){var $=f,ee=Ns(a),te=[];e:{var Z=gp.get(n);if(Z!==void 0){var le=Qi,de=n;switch(n){case"keypress":if(Ki(a)===0)break e;case"keydown":case"keyup":le=Ge;break;case"focusin":de="focus",le=Rt;break;case"focusout":de="blur",le=Rt;break;case"beforeblur":case"afterblur":le=Rt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Gn;break;case dp:case fp:case pp:le=Vl;break;case mp:le=Ws;break;case"scroll":le=zs;break;case"wheel":le=Hw;break;case"copy":case"cut":case"paste":le=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=on}var pe=(i&4)!==0,ht=!pe&&n==="scroll",j=pe?Z!==null?Z+"Capture":null:Z;pe=[];for(var M=$,B;M!==null;){B=M;var ne=B.stateNode;if(B.tag===5&&ne!==null&&(B=ne,j!==null&&(ne=Fi(M,j),ne!=null&&pe.push(fa(M,ne,B)))),ht)break;M=M.return}0<pe.length&&(Z=new le(Z,de,null,a,ee),te.push({event:Z,listeners:pe}))}}if((i&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",Z&&a!==Gr&&(de=a.relatedTarget||a.fromElement)&&(Xi(de)||de[Tr]))break e;if((le||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,le?(de=a.relatedTarget||a.toElement,le=$,de=de?Xi(de):null,de!==null&&(ht=En(de),de!==ht||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=$),le!==de)){if(pe=ia,ne="onMouseLeave",j="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(pe=on,ne="onPointerLeave",j="onPointerEnter",M="pointer"),ht=le==null?Z:Xs(le),B=de==null?Z:Xs(de),Z=new pe(ne,M+"leave",le,a,ee),Z.target=ht,Z.relatedTarget=B,ne=null,Xi(ee)===$&&(pe=new pe(j,M+"enter",de,a,ee),pe.target=B,pe.relatedTarget=ht,ne=pe),ht=ne,le&&de)t:{for(pe=le,j=de,M=0,B=pe;B;B=Qs(B))M++;for(B=0,ne=j;ne;ne=Qs(ne))B++;for(;0<M-B;)pe=Qs(pe),M--;for(;0<B-M;)j=Qs(j),B--;for(;M--;){if(pe===j||j!==null&&pe===j.alternate)break t;pe=Qs(pe),j=Qs(j)}pe=null}else pe=null;le!==null&&Ep(te,Z,le,pe,!1),de!==null&&ht!==null&&Ep(te,ht,de,pe,!0)}}e:{if(Z=$?Xs($):window,le=Z.nodeName&&Z.nodeName.toLowerCase(),le==="select"||le==="input"&&Z.type==="file")var me=Xw;else if(ep(Z))if(np)me=tE;else{me=Zw;var _e=Jw}else(le=Z.nodeName)&&le.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(me=eE);if(me&&(me=me(n,$))){tp(te,me,a,ee);break e}_e&&_e(n,Z,$),n==="focusout"&&(_e=Z._wrapperState)&&_e.controlled&&Z.type==="number"&&ot(Z,"number",Z.value)}switch(_e=$?Xs($):window,n){case"focusin":(ep(_e)||_e.contentEditable==="true")&&(Gs=_e,jc=$,ca=null);break;case"focusout":ca=jc=Gs=null;break;case"mousedown":Uc=!0;break;case"contextmenu":case"mouseup":case"dragend":Uc=!1,cp(te,a,ee);break;case"selectionchange":if(iE)break;case"keydown":case"keyup":cp(te,a,ee)}var ve;if(Mc)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else qs?Jf(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Qf&&a.locale!=="ko"&&(qs||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&qs&&(ve=Pl()):(rn=ee,Us="value"in rn?rn.value:rn.textContent,qs=!0)),_e=Fl($,Ie),0<_e.length&&(Ie=new y(Ie,n,null,a,ee),te.push({event:Ie,listeners:_e}),ve?Ie.data=ve:(ve=Zf(a),ve!==null&&(Ie.data=ve)))),(ve=qw?Gw(n,a):Kw(n,a))&&($=Fl($,"onBeforeInput"),0<$.length&&(ee=new y("onBeforeInput","beforeinput",null,a,ee),te.push({event:ee,listeners:$}),ee.data=ve))}vp(te,i)})}function fa(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Fl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Fi(n,a),f!=null&&c.unshift(fa(n,f,d)),f=Fi(n,i),f!=null&&c.push(fa(n,f,d))),n=n.return}return c}function Qs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ep(n,i,a,c,d){for(var f=i._reactName,v=[];a!==null&&a!==c;){var C=a,x=C.alternate,$=C.stateNode;if(x!==null&&x===c)break;C.tag===5&&$!==null&&(C=$,d?(x=Fi(a,f),x!=null&&v.unshift(fa(a,x,C))):d||(x=Fi(a,f),x!=null&&v.push(fa(a,x,C)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var lE=/\r\n?/g,uE=/\u0000|\uFFFD/g;function Tp(n){return(typeof n=="string"?n:""+n).replace(lE,`
`).replace(uE,"")}function jl(n,i,a){if(i=Tp(i),Tp(n)!==i&&a)throw Error(t(425))}function Ul(){}var qc=null,Gc=null;function Kc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Qc=typeof setTimeout=="function"?setTimeout:void 0,cE=typeof clearTimeout=="function"?clearTimeout:void 0,Ip=typeof Promise=="function"?Promise:void 0,hE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ip<"u"?function(n){return Ip.resolve(null).then(n).catch(dE)}:Qc;function dE(n){setTimeout(function(){throw n})}function Yc(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),ti(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);ti(i)}function si(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Sp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Ys,pa="__reactProps$"+Ys,Tr="__reactContainer$"+Ys,Xc="__reactEvents$"+Ys,fE="__reactListeners$"+Ys,pE="__reactHandles$"+Ys;function Xi(n){var i=n[Qn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Tr]||a[Qn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Sp(n);n!==null;){if(a=n[Qn])return a;n=Sp(n)}return i}n=a,a=n.parentNode}return null}function ma(n){return n=n[Qn]||n[Tr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Xs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function zl(n){return n[pa]||null}var Jc=[],Js=-1;function oi(n){return{current:n}}function Ze(n){0>Js||(n.current=Jc[Js],Jc[Js]=null,Js--)}function Qe(n,i){Js++,Jc[Js]=n.current,n.current=i}var ai={},Mt=oi(ai),Gt=oi(!1),Ji=ai;function Zs(n,i){var a=n.type.contextTypes;if(!a)return ai;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=i[f];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Kt(n){return n=n.childContextTypes,n!=null}function Bl(){Ze(Gt),Ze(Mt)}function Ap(n,i,a){if(Mt.current!==ai)throw Error(t(168));Qe(Mt,i),Qe(Gt,a)}function kp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,Be(n)||"Unknown",d));return ae({},a,c)}function $l(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ai,Ji=Mt.current,Qe(Mt,n),Qe(Gt,Gt.current),!0}function Cp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=kp(n,i,Ji),c.__reactInternalMemoizedMergedChildContext=n,Ze(Gt),Ze(Mt),Qe(Mt,n)):Ze(Gt),Qe(Gt,a)}var Ir=null,Hl=!1,Zc=!1;function Rp(n){Ir===null?Ir=[n]:Ir.push(n)}function mE(n){Hl=!0,Rp(n)}function li(){if(!Zc&&Ir!==null){Zc=!0;var n=0,i=Fe;try{var a=Ir;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ir=null,Hl=!1}catch(d){throw Ir!==null&&(Ir=Ir.slice(n+1)),Wo(Vs,li),d}finally{Fe=i,Zc=!1}}return null}var eo=[],to=0,Wl=null,ql=0,dn=[],fn=0,Zi=null,Sr=1,Ar="";function es(n,i){eo[to++]=ql,eo[to++]=Wl,Wl=n,ql=i}function Pp(n,i,a){dn[fn++]=Sr,dn[fn++]=Ar,dn[fn++]=Zi,Zi=n;var c=Sr;n=Ar;var d=32-tn(c)-1;c&=~(1<<d),a+=1;var f=32-tn(i)+d;if(30<f){var v=d-d%5;f=(c&(1<<v)-1).toString(32),c>>=v,d-=v,Sr=1<<32-tn(i)+d|a<<d|c,Ar=f+n}else Sr=1<<f|a<<d|c,Ar=n}function eh(n){n.return!==null&&(es(n,1),Pp(n,1,0))}function th(n){for(;n===Wl;)Wl=eo[--to],eo[to]=null,ql=eo[--to],eo[to]=null;for(;n===Zi;)Zi=dn[--fn],dn[fn]=null,Ar=dn[--fn],dn[fn]=null,Sr=dn[--fn],dn[fn]=null}var an=null,ln=null,nt=!1,Sn=null;function Np(n,i){var a=yn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function xp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,an=n,ln=si(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,an=n,ln=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Zi!==null?{id:Sr,overflow:Ar}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=yn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,an=n,ln=null,!0):!1;default:return!1}}function nh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function rh(n){if(nt){var i=ln;if(i){var a=i;if(!xp(n,i)){if(nh(n))throw Error(t(418));i=si(a.nextSibling);var c=an;i&&xp(n,i)?Np(c,a):(n.flags=n.flags&-4097|2,nt=!1,an=n)}}else{if(nh(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,an=n}}}function Dp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;an=n}function Gl(n){if(n!==an)return!1;if(!nt)return Dp(n),nt=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Kc(n.type,n.memoizedProps)),i&&(i=ln)){if(nh(n))throw Vp(),Error(t(418));for(;i;)Np(n,i),i=si(i.nextSibling)}if(Dp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){ln=si(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}ln=null}}else ln=an?si(n.stateNode.nextSibling):null;return!0}function Vp(){for(var n=ln;n;)n=si(n.nextSibling)}function no(){ln=an=null,nt=!1}function ih(n){Sn===null?Sn=[n]:Sn.push(n)}var gE=G.ReactCurrentBatchConfig;function ga(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,f=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===f?i.ref:(i=function(v){var C=d.refs;v===null?delete C[f]:C[f]=v},i._stringRef=f,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Kl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Op(n){var i=n._init;return i(n._payload)}function Mp(n){function i(j,M){if(n){var B=j.deletions;B===null?(j.deletions=[M],j.flags|=16):B.push(M)}}function a(j,M){if(!n)return null;for(;M!==null;)i(j,M),M=M.sibling;return null}function c(j,M){for(j=new Map;M!==null;)M.key!==null?j.set(M.key,M):j.set(M.index,M),M=M.sibling;return j}function d(j,M){return j=gi(j,M),j.index=0,j.sibling=null,j}function f(j,M,B){return j.index=B,n?(B=j.alternate,B!==null?(B=B.index,B<M?(j.flags|=2,M):B):(j.flags|=2,M)):(j.flags|=1048576,M)}function v(j){return n&&j.alternate===null&&(j.flags|=2),j}function C(j,M,B,ne){return M===null||M.tag!==6?(M=Qh(B,j.mode,ne),M.return=j,M):(M=d(M,B),M.return=j,M)}function x(j,M,B,ne){var me=B.type;return me===N?ee(j,M,B.props.children,ne,B.key):M!==null&&(M.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ze&&Op(me)===M.type)?(ne=d(M,B.props),ne.ref=ga(j,M,B),ne.return=j,ne):(ne=_u(B.type,B.key,B.props,null,j.mode,ne),ne.ref=ga(j,M,B),ne.return=j,ne)}function $(j,M,B,ne){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=Yh(B,j.mode,ne),M.return=j,M):(M=d(M,B.children||[]),M.return=j,M)}function ee(j,M,B,ne,me){return M===null||M.tag!==7?(M=ls(B,j.mode,ne,me),M.return=j,M):(M=d(M,B),M.return=j,M)}function te(j,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Qh(""+M,j.mode,B),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case oe:return B=_u(M.type,M.key,M.props,null,j.mode,B),B.ref=ga(j,null,M),B.return=j,B;case se:return M=Yh(M,j.mode,B),M.return=j,M;case ze:var ne=M._init;return te(j,ne(M._payload),B)}if(Ve(M)||fe(M))return M=ls(M,j.mode,B,null),M.return=j,M;Kl(j,M)}return null}function Z(j,M,B,ne){var me=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return me!==null?null:C(j,M,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case oe:return B.key===me?x(j,M,B,ne):null;case se:return B.key===me?$(j,M,B,ne):null;case ze:return me=B._init,Z(j,M,me(B._payload),ne)}if(Ve(B)||fe(B))return me!==null?null:ee(j,M,B,ne,null);Kl(j,B)}return null}function le(j,M,B,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return j=j.get(B)||null,C(M,j,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case oe:return j=j.get(ne.key===null?B:ne.key)||null,x(M,j,ne,me);case se:return j=j.get(ne.key===null?B:ne.key)||null,$(M,j,ne,me);case ze:var _e=ne._init;return le(j,M,B,_e(ne._payload),me)}if(Ve(ne)||fe(ne))return j=j.get(B)||null,ee(M,j,ne,me,null);Kl(M,ne)}return null}function de(j,M,B,ne){for(var me=null,_e=null,ve=M,Ie=M=0,At=null;ve!==null&&Ie<B.length;Ie++){ve.index>Ie?(At=ve,ve=null):At=ve.sibling;var $e=Z(j,ve,B[Ie],ne);if($e===null){ve===null&&(ve=At);break}n&&ve&&$e.alternate===null&&i(j,ve),M=f($e,M,Ie),_e===null?me=$e:_e.sibling=$e,_e=$e,ve=At}if(Ie===B.length)return a(j,ve),nt&&es(j,Ie),me;if(ve===null){for(;Ie<B.length;Ie++)ve=te(j,B[Ie],ne),ve!==null&&(M=f(ve,M,Ie),_e===null?me=ve:_e.sibling=ve,_e=ve);return nt&&es(j,Ie),me}for(ve=c(j,ve);Ie<B.length;Ie++)At=le(ve,j,Ie,B[Ie],ne),At!==null&&(n&&At.alternate!==null&&ve.delete(At.key===null?Ie:At.key),M=f(At,M,Ie),_e===null?me=At:_e.sibling=At,_e=At);return n&&ve.forEach(function(yi){return i(j,yi)}),nt&&es(j,Ie),me}function pe(j,M,B,ne){var me=fe(B);if(typeof me!="function")throw Error(t(150));if(B=me.call(B),B==null)throw Error(t(151));for(var _e=me=null,ve=M,Ie=M=0,At=null,$e=B.next();ve!==null&&!$e.done;Ie++,$e=B.next()){ve.index>Ie?(At=ve,ve=null):At=ve.sibling;var yi=Z(j,ve,$e.value,ne);if(yi===null){ve===null&&(ve=At);break}n&&ve&&yi.alternate===null&&i(j,ve),M=f(yi,M,Ie),_e===null?me=yi:_e.sibling=yi,_e=yi,ve=At}if($e.done)return a(j,ve),nt&&es(j,Ie),me;if(ve===null){for(;!$e.done;Ie++,$e=B.next())$e=te(j,$e.value,ne),$e!==null&&(M=f($e,M,Ie),_e===null?me=$e:_e.sibling=$e,_e=$e);return nt&&es(j,Ie),me}for(ve=c(j,ve);!$e.done;Ie++,$e=B.next())$e=le(ve,j,Ie,$e.value,ne),$e!==null&&(n&&$e.alternate!==null&&ve.delete($e.key===null?Ie:$e.key),M=f($e,M,Ie),_e===null?me=$e:_e.sibling=$e,_e=$e);return n&&ve.forEach(function(QE){return i(j,QE)}),nt&&es(j,Ie),me}function ht(j,M,B,ne){if(typeof B=="object"&&B!==null&&B.type===N&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case oe:e:{for(var me=B.key,_e=M;_e!==null;){if(_e.key===me){if(me=B.type,me===N){if(_e.tag===7){a(j,_e.sibling),M=d(_e,B.props.children),M.return=j,j=M;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ze&&Op(me)===_e.type){a(j,_e.sibling),M=d(_e,B.props),M.ref=ga(j,_e,B),M.return=j,j=M;break e}a(j,_e);break}else i(j,_e);_e=_e.sibling}B.type===N?(M=ls(B.props.children,j.mode,ne,B.key),M.return=j,j=M):(ne=_u(B.type,B.key,B.props,null,j.mode,ne),ne.ref=ga(j,M,B),ne.return=j,j=ne)}return v(j);case se:e:{for(_e=B.key;M!==null;){if(M.key===_e)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){a(j,M.sibling),M=d(M,B.children||[]),M.return=j,j=M;break e}else{a(j,M);break}else i(j,M);M=M.sibling}M=Yh(B,j.mode,ne),M.return=j,j=M}return v(j);case ze:return _e=B._init,ht(j,M,_e(B._payload),ne)}if(Ve(B))return de(j,M,B,ne);if(fe(B))return pe(j,M,B,ne);Kl(j,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,M!==null&&M.tag===6?(a(j,M.sibling),M=d(M,B),M.return=j,j=M):(a(j,M),M=Qh(B,j.mode,ne),M.return=j,j=M),v(j)):a(j,M)}return ht}var ro=Mp(!0),Lp=Mp(!1),Ql=oi(null),Yl=null,io=null,sh=null;function oh(){sh=io=Yl=null}function ah(n){var i=Ql.current;Ze(Ql),n._currentValue=i}function lh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function so(n,i){Yl=n,sh=io=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(Qt=!0),n.firstContext=null)}function pn(n){var i=n._currentValue;if(sh!==n)if(n={context:n,memoizedValue:i,next:null},io===null){if(Yl===null)throw Error(t(308));io=n,Yl.dependencies={lanes:0,firstContext:n}}else io=io.next=n;return i}var ts=null;function uh(n){ts===null?ts=[n]:ts.push(n)}function bp(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,uh(i)):(a.next=d.next,d.next=a),i.interleaved=a,kr(n,c)}function kr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ui=!1;function ch(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Cr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function ci(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ue&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,kr(n,a)}return d=c.interleaved,d===null?(i.next=i,uh(c)):(i.next=d.next,d.next=i),c.interleaved=i,kr(n,a)}function Xl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Xo(n,a)}}function jp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?d=f=i:f=f.next=i}else d=f=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Jl(n,i,a,c){var d=n.updateQueue;ui=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var x=C,$=x.next;x.next=null,v===null?f=$:v.next=$,v=x;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,C=ee.lastBaseUpdate,C!==v&&(C===null?ee.firstBaseUpdate=$:C.next=$,ee.lastBaseUpdate=x))}if(f!==null){var te=d.baseState;v=0,ee=$=x=null,C=f;do{var Z=C.lane,le=C.eventTime;if((c&Z)===Z){ee!==null&&(ee=ee.next={eventTime:le,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var de=n,pe=C;switch(Z=i,le=a,pe.tag){case 1:if(de=pe.payload,typeof de=="function"){te=de.call(le,te,Z);break e}te=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=pe.payload,Z=typeof de=="function"?de.call(le,te,Z):de,Z==null)break e;te=ae({},te,Z);break e;case 2:ui=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,Z=d.effects,Z===null?d.effects=[C]:Z.push(C))}else le={eventTime:le,lane:Z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ee===null?($=ee=le,x=te):ee=ee.next=le,v|=Z;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);if(ee===null&&(x=te),d.baseState=x,d.firstBaseUpdate=$,d.lastBaseUpdate=ee,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else f===null&&(d.shared.lanes=0);is|=v,n.lanes=v,n.memoizedState=te}}function Up(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ya={},Yn=oi(ya),_a=oi(ya),va=oi(ya);function ns(n){if(n===ya)throw Error(t(174));return n}function hh(n,i){switch(Qe(va,i),Qe(_a,n),Qe(Yn,ya),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Cs(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Cs(i,n)}Ze(Yn),Qe(Yn,i)}function oo(){Ze(Yn),Ze(_a),Ze(va)}function zp(n){ns(va.current);var i=ns(Yn.current),a=Cs(i,n.type);i!==a&&(Qe(_a,n),Qe(Yn,a))}function dh(n){_a.current===n&&(Ze(Yn),Ze(_a))}var rt=oi(0);function Zl(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var fh=[];function ph(){for(var n=0;n<fh.length;n++)fh[n]._workInProgressVersionPrimary=null;fh.length=0}var eu=G.ReactCurrentDispatcher,mh=G.ReactCurrentBatchConfig,rs=0,it=null,vt=null,It=null,tu=!1,wa=!1,Ea=0,yE=0;function Lt(){throw Error(t(321))}function gh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!In(n[a],i[a]))return!1;return!0}function yh(n,i,a,c,d,f){if(rs=f,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,eu.current=n===null||n.memoizedState===null?EE:TE,n=a(c,d),wa){f=0;do{if(wa=!1,Ea=0,25<=f)throw Error(t(301));f+=1,It=vt=null,i.updateQueue=null,eu.current=IE,n=a(c,d)}while(wa)}if(eu.current=iu,i=vt!==null&&vt.next!==null,rs=0,It=vt=it=null,tu=!1,i)throw Error(t(300));return n}function _h(){var n=Ea!==0;return Ea=0,n}function Xn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?it.memoizedState=It=n:It=It.next=n,It}function mn(){if(vt===null){var n=it.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var i=It===null?it.memoizedState:It.next;if(i!==null)It=i,vt=n;else{if(n===null)throw Error(t(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},It===null?it.memoizedState=It=n:It=It.next=n}return It}function Ta(n,i){return typeof i=="function"?i(n):i}function vh(n){var i=mn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=vt,d=c.baseQueue,f=a.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}c.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,c=c.baseState;var C=v=null,x=null,$=f;do{var ee=$.lane;if((rs&ee)===ee)x!==null&&(x=x.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var te={lane:ee,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};x===null?(C=x=te,v=c):x=x.next=te,it.lanes|=ee,is|=ee}$=$.next}while($!==null&&$!==f);x===null?v=c:x.next=C,In(c,i.memoizedState)||(Qt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=x,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do f=d.lane,it.lanes|=f,is|=f,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function wh(n){var i=mn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,f=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do f=n(f,v.action),v=v.next;while(v!==d);In(f,i.memoizedState)||(Qt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,c]}function Bp(){}function $p(n,i){var a=it,c=mn(),d=i(),f=!In(c.memoizedState,d);if(f&&(c.memoizedState=d,Qt=!0),c=c.queue,Eh(qp.bind(null,a,c,n),[n]),c.getSnapshot!==i||f||It!==null&&It.memoizedState.tag&1){if(a.flags|=2048,Ia(9,Wp.bind(null,a,c,d,i),void 0,null),St===null)throw Error(t(349));(rs&30)!==0||Hp(a,i,d)}return d}function Hp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Wp(n,i,a,c){i.value=a,i.getSnapshot=c,Gp(i)&&Kp(n)}function qp(n,i,a){return a(function(){Gp(i)&&Kp(n)})}function Gp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!In(n,a)}catch{return!0}}function Kp(n){var i=kr(n,1);i!==null&&Rn(i,n,1,-1)}function Qp(n){var i=Xn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:n},i.queue=n,n=n.dispatch=wE.bind(null,it,n),[i.memoizedState,n]}function Ia(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=it.updateQueue,i===null?(i={lastEffect:null,stores:null},it.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Yp(){return mn().memoizedState}function nu(n,i,a,c){var d=Xn();it.flags|=n,d.memoizedState=Ia(1|i,a,void 0,c===void 0?null:c)}function ru(n,i,a,c){var d=mn();c=c===void 0?null:c;var f=void 0;if(vt!==null){var v=vt.memoizedState;if(f=v.destroy,c!==null&&gh(c,v.deps)){d.memoizedState=Ia(i,a,f,c);return}}it.flags|=n,d.memoizedState=Ia(1|i,a,f,c)}function Xp(n,i){return nu(8390656,8,n,i)}function Eh(n,i){return ru(2048,8,n,i)}function Jp(n,i){return ru(4,2,n,i)}function Zp(n,i){return ru(4,4,n,i)}function em(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function tm(n,i,a){return a=a!=null?a.concat([n]):null,ru(4,4,em.bind(null,i,n),a)}function Th(){}function nm(n,i){var a=mn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&gh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function rm(n,i){var a=mn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&gh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function im(n,i,a){return(rs&21)===0?(n.baseState&&(n.baseState=!1,Qt=!0),n.memoizedState=a):(In(a,i)||(a=Qo(),it.lanes|=a,is|=a,n.baseState=!0),i)}function _E(n,i){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=mh.transition;mh.transition={};try{n(!1),i()}finally{Fe=a,mh.transition=c}}function sm(){return mn().memoizedState}function vE(n,i,a){var c=pi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},om(n))am(i,a);else if(a=bp(n,i,a,c),a!==null){var d=Ht();Rn(a,n,c,d),lm(a,i,c)}}function wE(n,i,a){var c=pi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(om(n))am(i,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,C=f(v,a);if(d.hasEagerState=!0,d.eagerState=C,In(C,v)){var x=i.interleaved;x===null?(d.next=d,uh(i)):(d.next=x.next,x.next=d),i.interleaved=d;return}}catch{}finally{}a=bp(n,i,d,c),a!==null&&(d=Ht(),Rn(a,n,c,d),lm(a,i,c))}}function om(n){var i=n.alternate;return n===it||i!==null&&i===it}function am(n,i){wa=tu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function lm(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Xo(n,a)}}var iu={readContext:pn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},EE={readContext:pn,useCallback:function(n,i){return Xn().memoizedState=[n,i===void 0?null:i],n},useContext:pn,useEffect:Xp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,nu(4194308,4,em.bind(null,i,n),a)},useLayoutEffect:function(n,i){return nu(4194308,4,n,i)},useInsertionEffect:function(n,i){return nu(4,2,n,i)},useMemo:function(n,i){var a=Xn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Xn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=vE.bind(null,it,n),[c.memoizedState,n]},useRef:function(n){var i=Xn();return n={current:n},i.memoizedState=n},useState:Qp,useDebugValue:Th,useDeferredValue:function(n){return Xn().memoizedState=n},useTransition:function(){var n=Qp(!1),i=n[0];return n=_E.bind(null,n[1]),Xn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=it,d=Xn();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),St===null)throw Error(t(349));(rs&30)!==0||Hp(c,i,a)}d.memoizedState=a;var f={value:a,getSnapshot:i};return d.queue=f,Xp(qp.bind(null,c,f,n),[n]),c.flags|=2048,Ia(9,Wp.bind(null,c,f,a,i),void 0,null),a},useId:function(){var n=Xn(),i=St.identifierPrefix;if(nt){var a=Ar,c=Sr;a=(c&~(1<<32-tn(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ea++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=yE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},TE={readContext:pn,useCallback:nm,useContext:pn,useEffect:Eh,useImperativeHandle:tm,useInsertionEffect:Jp,useLayoutEffect:Zp,useMemo:rm,useReducer:vh,useRef:Yp,useState:function(){return vh(Ta)},useDebugValue:Th,useDeferredValue:function(n){var i=mn();return im(i,vt.memoizedState,n)},useTransition:function(){var n=vh(Ta)[0],i=mn().memoizedState;return[n,i]},useMutableSource:Bp,useSyncExternalStore:$p,useId:sm,unstable_isNewReconciler:!1},IE={readContext:pn,useCallback:nm,useContext:pn,useEffect:Eh,useImperativeHandle:tm,useInsertionEffect:Jp,useLayoutEffect:Zp,useMemo:rm,useReducer:wh,useRef:Yp,useState:function(){return wh(Ta)},useDebugValue:Th,useDeferredValue:function(n){var i=mn();return vt===null?i.memoizedState=n:im(i,vt.memoizedState,n)},useTransition:function(){var n=wh(Ta)[0],i=mn().memoizedState;return[n,i]},useMutableSource:Bp,useSyncExternalStore:$p,useId:sm,unstable_isNewReconciler:!1};function An(n,i){if(n&&n.defaultProps){i=ae({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Ih(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ae({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var su={isMounted:function(n){return(n=n._reactInternals)?En(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Ht(),d=pi(n),f=Cr(c,d);f.payload=i,a!=null&&(f.callback=a),i=ci(n,f,d),i!==null&&(Rn(i,n,d,c),Xl(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Ht(),d=pi(n),f=Cr(c,d);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=ci(n,f,d),i!==null&&(Rn(i,n,d,c),Xl(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Ht(),c=pi(n),d=Cr(a,c);d.tag=2,i!=null&&(d.callback=i),i=ci(n,d,c),i!==null&&(Rn(i,n,c,a),Xl(i,n,c))}};function um(n,i,a,c,d,f,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,f,v):i.prototype&&i.prototype.isPureReactComponent?!ua(a,c)||!ua(d,f):!0}function cm(n,i,a){var c=!1,d=ai,f=i.contextType;return typeof f=="object"&&f!==null?f=pn(f):(d=Kt(i)?Ji:Mt.current,c=i.contextTypes,f=(c=c!=null)?Zs(n,d):ai),i=new i(a,f),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=su,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=f),i}function hm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&su.enqueueReplaceState(i,i.state,null)}function Sh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},ch(n);var f=i.contextType;typeof f=="object"&&f!==null?d.context=pn(f):(f=Kt(i)?Ji:Mt.current,d.context=Zs(n,f)),d.state=n.memoizedState,f=i.getDerivedStateFromProps,typeof f=="function"&&(Ih(n,i,f,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&su.enqueueReplaceState(d,d.state,null),Jl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function ao(n,i){try{var a="",c=i;do a+=ke(c),c=c.return;while(c);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:n,source:i,stack:d,digest:null}}function Ah(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function kh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var SE=typeof WeakMap=="function"?WeakMap:Map;function dm(n,i,a){a=Cr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){du||(du=!0,zh=c),kh(n,i)},a}function fm(n,i,a){a=Cr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){kh(n,i)}}var f=n.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){kh(n,i),typeof c!="function"&&(di===null?di=new Set([this]):di.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function pm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new SE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=FE.bind(null,n,i,a),i.then(n,n))}function mm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function gm(n,i,a,c,d){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Cr(-1,1),i.tag=2,ci(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var AE=G.ReactCurrentOwner,Qt=!1;function $t(n,i,a,c){i.child=n===null?Lp(i,null,a,c):ro(i,n.child,a,c)}function ym(n,i,a,c,d){a=a.render;var f=i.ref;return so(i,d),c=yh(n,i,a,c,f,d),a=_h(),n!==null&&!Qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Rr(n,i,d)):(nt&&a&&eh(i),i.flags|=1,$t(n,i,c,d),i.child)}function _m(n,i,a,c,d){if(n===null){var f=a.type;return typeof f=="function"&&!Kh(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=f,vm(n,i,f,c,d)):(n=_u(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(f=n.child,(n.lanes&d)===0){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:ua,a(v,c)&&n.ref===i.ref)return Rr(n,i,d)}return i.flags|=1,n=gi(f,c),n.ref=i.ref,n.return=i,i.child=n}function vm(n,i,a,c,d){if(n!==null){var f=n.memoizedProps;if(ua(f,c)&&n.ref===i.ref)if(Qt=!1,i.pendingProps=c=f,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Qt=!0);else return i.lanes=n.lanes,Rr(n,i,d)}return Ch(n,i,a,c,d)}function wm(n,i,a){var c=i.pendingProps,d=c.children,f=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(uo,un),un|=a;else{if((a&1073741824)===0)return n=f!==null?f.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Qe(uo,un),un|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Qe(uo,un),un|=c}else f!==null?(c=f.baseLanes|a,i.memoizedState=null):c=a,Qe(uo,un),un|=c;return $t(n,i,d,a),i.child}function Em(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Ch(n,i,a,c,d){var f=Kt(a)?Ji:Mt.current;return f=Zs(i,f),so(i,d),a=yh(n,i,a,c,f,d),c=_h(),n!==null&&!Qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Rr(n,i,d)):(nt&&c&&eh(i),i.flags|=1,$t(n,i,a,d),i.child)}function Tm(n,i,a,c,d){if(Kt(a)){var f=!0;$l(i)}else f=!1;if(so(i,d),i.stateNode===null)au(n,i),cm(i,a,c),Sh(i,a,c,d),c=!0;else if(n===null){var v=i.stateNode,C=i.memoizedProps;v.props=C;var x=v.context,$=a.contextType;typeof $=="object"&&$!==null?$=pn($):($=Kt(a)?Ji:Mt.current,$=Zs(i,$));var ee=a.getDerivedStateFromProps,te=typeof ee=="function"||typeof v.getSnapshotBeforeUpdate=="function";te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==c||x!==$)&&hm(i,v,c,$),ui=!1;var Z=i.memoizedState;v.state=Z,Jl(i,c,v,d),x=i.memoizedState,C!==c||Z!==x||Gt.current||ui?(typeof ee=="function"&&(Ih(i,a,ee,c),x=i.memoizedState),(C=ui||um(i,a,C,c,Z,x,$))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=x),v.props=c,v.state=x,v.context=$,c=C):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,Fp(n,i),C=i.memoizedProps,$=i.type===i.elementType?C:An(i.type,C),v.props=$,te=i.pendingProps,Z=v.context,x=a.contextType,typeof x=="object"&&x!==null?x=pn(x):(x=Kt(a)?Ji:Mt.current,x=Zs(i,x));var le=a.getDerivedStateFromProps;(ee=typeof le=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==te||Z!==x)&&hm(i,v,c,x),ui=!1,Z=i.memoizedState,v.state=Z,Jl(i,c,v,d);var de=i.memoizedState;C!==te||Z!==de||Gt.current||ui?(typeof le=="function"&&(Ih(i,a,le,c),de=i.memoizedState),($=ui||um(i,a,$,c,Z,de,x)||!1)?(ee||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,de,x),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,de,x)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=de),v.props=c,v.state=de,v.context=x,c=$):(typeof v.componentDidUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Z===n.memoizedState||(i.flags|=1024),c=!1)}return Rh(n,i,a,c,f,d)}function Rh(n,i,a,c,d,f){Em(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return d&&Cp(i,a,!1),Rr(n,i,f);c=i.stateNode,AE.current=i;var C=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=ro(i,n.child,null,f),i.child=ro(i,null,C,f)):$t(n,i,C,f),i.memoizedState=c.state,d&&Cp(i,a,!0),i.child}function Im(n){var i=n.stateNode;i.pendingContext?Ap(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Ap(n,i.context,!1),hh(n,i.containerInfo)}function Sm(n,i,a,c,d){return no(),ih(d),i.flags|=256,$t(n,i,a,c),i.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function Nh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Am(n,i,a){var c=i.pendingProps,d=rt.current,f=!1,v=(i.flags&128)!==0,C;if((C=v)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(f=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Qe(rt,d&1),n===null)return rh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(v=c.children,n=c.fallback,f?(c=i.mode,f=i.child,v={mode:"hidden",children:v},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=v):f=vu(v,c,0,null),n=ls(n,c,a,null),f.return=i,n.return=i,f.sibling=n,i.child=f,i.child.memoizedState=Nh(a),i.memoizedState=Ph,n):xh(i,v));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return kE(n,i,v,c,C,d,a);if(f){f=c.fallback,v=i.mode,d=n.child,C=d.sibling;var x={mode:"hidden",children:c.children};return(v&1)===0&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=x,i.deletions=null):(c=gi(d,x),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?f=gi(C,f):(f=ls(f,v,a,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,v=n.child.memoizedState,v=v===null?Nh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},f.memoizedState=v,f.childLanes=n.childLanes&~a,i.memoizedState=Ph,c}return f=n.child,n=f.sibling,c=gi(f,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function xh(n,i){return i=vu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ou(n,i,a,c){return c!==null&&ih(c),ro(i,n.child,null,a),n=xh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function kE(n,i,a,c,d,f,v){if(a)return i.flags&256?(i.flags&=-257,c=Ah(Error(t(422))),ou(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(f=c.fallback,d=i.mode,c=vu({mode:"visible",children:c.children},d,0,null),f=ls(f,d,v,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,(i.mode&1)!==0&&ro(i,n.child,null,v),i.child.memoizedState=Nh(v),i.memoizedState=Ph,f);if((i.mode&1)===0)return ou(n,i,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,f=Error(t(419)),c=Ah(f,c,void 0),ou(n,i,v,c)}if(C=(v&n.childLanes)!==0,Qt||C){if(c=St,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|v))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,kr(n,d),Rn(c,n,d,-1))}return Gh(),c=Ah(Error(t(421))),ou(n,i,v,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=jE.bind(null,n),d._reactRetry=i,null):(n=f.treeContext,ln=si(d.nextSibling),an=i,nt=!0,Sn=null,n!==null&&(dn[fn++]=Sr,dn[fn++]=Ar,dn[fn++]=Zi,Sr=n.id,Ar=n.overflow,Zi=i),i=xh(i,c.children),i.flags|=4096,i)}function km(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),lh(n.return,i,a)}function Dh(n,i,a,c,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=d)}function Cm(n,i,a){var c=i.pendingProps,d=c.revealOrder,f=c.tail;if($t(n,i,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&km(n,a,i);else if(n.tag===19)km(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Qe(rt,c),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&Zl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Dh(i,!1,d,a,f);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Zl(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Dh(i,!0,a,null,f);break;case"together":Dh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function au(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Rr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),is|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=gi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=gi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function CE(n,i,a){switch(i.tag){case 3:Im(i),no();break;case 5:zp(i);break;case 1:Kt(i.type)&&$l(i);break;case 4:hh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;Qe(Ql,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Qe(rt,rt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Am(n,i,a):(Qe(rt,rt.current&1),n=Rr(n,i,a),n!==null?n.sibling:null);Qe(rt,rt.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Cm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(rt,rt.current),c)break;return null;case 22:case 23:return i.lanes=0,wm(n,i,a)}return Rr(n,i,a)}var Rm,Vh,Pm,Nm;Rm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Vh=function(){},Pm=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,ns(Yn.current);var f=null;switch(a){case"input":d=Ur(n,d),c=Ur(n,c),f=[];break;case"select":d=ae({},d,{value:void 0}),c=ae({},c,{value:void 0}),f=[];break;case"textarea":d=Br(n,d),c=Br(n,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ul)}wn(a,c);var v;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var C=d[$];for(v in C)C.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?f||(f=[]):(f=f||[]).push($,null));for($ in c){var x=c[$];if(C=d!=null?d[$]:void 0,c.hasOwnProperty($)&&x!==C&&(x!=null||C!=null))if($==="style")if(C){for(v in C)!C.hasOwnProperty(v)||x&&x.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in x)x.hasOwnProperty(v)&&C[v]!==x[v]&&(a||(a={}),a[v]=x[v])}else a||(f||(f=[]),f.push($,a)),a=x;else $==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,C=C?C.__html:void 0,x!=null&&C!==x&&(f=f||[]).push($,x)):$==="children"?typeof x!="string"&&typeof x!="number"||(f=f||[]).push($,""+x):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(x!=null&&$==="onScroll"&&Je("scroll",n),f||C===x||(f=[])):(f=f||[]).push($,x))}a&&(f=f||[]).push("style",a);var $=f;(i.updateQueue=$)&&(i.flags|=4)}},Nm=function(n,i,a,c){a!==c&&(i.flags|=4)};function Sa(n,i){if(!nt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function bt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function RE(n,i,a){var c=i.pendingProps;switch(th(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(i),null;case 1:return Kt(i.type)&&Bl(),bt(i),null;case 3:return c=i.stateNode,oo(),Ze(Gt),Ze(Mt),ph(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Gl(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Sn!==null&&(Hh(Sn),Sn=null))),Vh(n,i),bt(i),null;case 5:dh(i);var d=ns(va.current);if(a=i.type,n!==null&&i.stateNode!=null)Pm(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return bt(i),null}if(n=ns(Yn.current),Gl(i)){c=i.stateNode,a=i.type;var f=i.memoizedProps;switch(c[Qn]=i,c[pa]=f,n=(i.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(d=0;d<ha.length;d++)Je(ha[d],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":ks(c,f),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},Je("invalid",c);break;case"textarea":Li(c,f),Je("invalid",c)}wn(a,f),d=null;for(var v in f)if(f.hasOwnProperty(v)){var C=f[v];v==="children"?typeof C=="string"?c.textContent!==C&&(f.suppressHydrationWarning!==!0&&jl(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(f.suppressHydrationWarning!==!0&&jl(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(v)&&C!=null&&v==="onScroll"&&Je("scroll",c)}switch(a){case"input":jr(c),Mi(c,f,!0);break;case"textarea":jr(c),$r(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Ul)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Uo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Qn]=i,n[pa]=c,Rm(n,i,!1,!1),i.stateNode=n;e:{switch(v=Ps(a,c),a){case"dialog":Je("cancel",n),Je("close",n),d=c;break;case"iframe":case"object":case"embed":Je("load",n),d=c;break;case"video":case"audio":for(d=0;d<ha.length;d++)Je(ha[d],n);d=c;break;case"source":Je("error",n),d=c;break;case"img":case"image":case"link":Je("error",n),Je("load",n),d=c;break;case"details":Je("toggle",n),d=c;break;case"input":ks(n,c),d=Ur(n,c),Je("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ae({},c,{value:void 0}),Je("invalid",n);break;case"textarea":Li(n,c),d=Br(n,c),Je("invalid",n);break;default:d=c}wn(a,d),C=d;for(f in C)if(C.hasOwnProperty(f)){var x=C[f];f==="style"?Rs(n,x):f==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&fl(n,x)):f==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&bi(n,x):typeof x=="number"&&bi(n,""+x):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?x!=null&&f==="onScroll"&&Je("scroll",n):x!=null&&Y(n,f,x,v))}switch(a){case"input":jr(n),Mi(n,c,!1);break;case"textarea":jr(n),$r(n);break;case"option":c.value!=null&&n.setAttribute("value",""+be(c.value));break;case"select":n.multiple=!!c.multiple,f=c.value,f!=null?qt(n,!!c.multiple,f,!1):c.defaultValue!=null&&qt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Ul)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return bt(i),null;case 6:if(n&&i.stateNode!=null)Nm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=ns(va.current),ns(Yn.current),Gl(i)){if(c=i.stateNode,a=i.memoizedProps,c[Qn]=i,(f=c.nodeValue!==a)&&(n=an,n!==null))switch(n.tag){case 3:jl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&jl(c.nodeValue,a,(n.mode&1)!==0)}f&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Qn]=i,i.stateNode=c}return bt(i),null;case 13:if(Ze(rt),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&ln!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Vp(),no(),i.flags|=98560,f=!1;else if(f=Gl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(t(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));f[Qn]=i}else no(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;bt(i),f=!1}else Sn!==null&&(Hh(Sn),Sn=null),f=!0;if(!f)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(rt.current&1)!==0?wt===0&&(wt=3):Gh())),i.updateQueue!==null&&(i.flags|=4),bt(i),null);case 4:return oo(),Vh(n,i),n===null&&da(i.stateNode.containerInfo),bt(i),null;case 10:return ah(i.type._context),bt(i),null;case 17:return Kt(i.type)&&Bl(),bt(i),null;case 19:if(Ze(rt),f=i.memoizedState,f===null)return bt(i),null;if(c=(i.flags&128)!==0,v=f.rendering,v===null)if(c)Sa(f,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(v=Zl(n),v!==null){for(i.flags|=128,Sa(f,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)f=a,n=c,f.flags&=14680066,v=f.alternate,v===null?(f.childLanes=0,f.lanes=n,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=v.childLanes,f.lanes=v.lanes,f.child=v.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=v.memoizedProps,f.memoizedState=v.memoizedState,f.updateQueue=v.updateQueue,f.type=v.type,n=v.dependencies,f.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(rt,rt.current&1|2),i.child}n=n.sibling}f.tail!==null&&Xe()>co&&(i.flags|=128,c=!0,Sa(f,!1),i.lanes=4194304)}else{if(!c)if(n=Zl(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Sa(f,!0),f.tail===null&&f.tailMode==="hidden"&&!v.alternate&&!nt)return bt(i),null}else 2*Xe()-f.renderingStartTime>co&&a!==1073741824&&(i.flags|=128,c=!0,Sa(f,!1),i.lanes=4194304);f.isBackwards?(v.sibling=i.child,i.child=v):(a=f.last,a!==null?a.sibling=v:i.child=v,f.last=v)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Xe(),i.sibling=null,a=rt.current,Qe(rt,c?a&1|2:a&1),i):(bt(i),null);case 22:case 23:return qh(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(un&1073741824)!==0&&(bt(i),i.subtreeFlags&6&&(i.flags|=8192)):bt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function PE(n,i){switch(th(i),i.tag){case 1:return Kt(i.type)&&Bl(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return oo(),Ze(Gt),Ze(Mt),ph(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return dh(i),null;case 13:if(Ze(rt),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));no()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ze(rt),null;case 4:return oo(),null;case 10:return ah(i.type._context),null;case 22:case 23:return qh(),null;case 24:return null;default:return null}}var lu=!1,Ft=!1,NE=typeof WeakSet=="function"?WeakSet:Set,he=null;function lo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,i,c)}else a.current=null}function Oh(n,i,a){try{a()}catch(c){lt(n,i,c)}}var xm=!1;function xE(n,i){if(qc=vr,n=up(),Fc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,C=-1,x=-1,$=0,ee=0,te=n,Z=null;t:for(;;){for(var le;te!==a||d!==0&&te.nodeType!==3||(C=v+d),te!==f||c!==0&&te.nodeType!==3||(x=v+c),te.nodeType===3&&(v+=te.nodeValue.length),(le=te.firstChild)!==null;)Z=te,te=le;for(;;){if(te===n)break t;if(Z===a&&++$===d&&(C=v),Z===f&&++ee===c&&(x=v),(le=te.nextSibling)!==null)break;te=Z,Z=te.parentNode}te=le}a=C===-1||x===-1?null:{start:C,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gc={focusedElem:n,selectionRange:a},vr=!1,he=i;he!==null;)if(i=he,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,he=n;else for(;he!==null;){i=he;try{var de=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var pe=de.memoizedProps,ht=de.memoizedState,j=i.stateNode,M=j.getSnapshotBeforeUpdate(i.elementType===i.type?pe:An(i.type,pe),ht);j.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var B=i.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){lt(i,i.return,ne)}if(n=i.sibling,n!==null){n.return=i.return,he=n;break}he=i.return}return de=xm,xm=!1,de}function Aa(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var f=d.destroy;d.destroy=void 0,f!==void 0&&Oh(i,a,f)}d=d.next}while(d!==c)}}function uu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Mh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Dm(n){var i=n.alternate;i!==null&&(n.alternate=null,Dm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Qn],delete i[pa],delete i[Xc],delete i[fE],delete i[pE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Vm(n){return n.tag===5||n.tag===3||n.tag===4}function Om(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Vm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Lh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ul));else if(c!==4&&(n=n.child,n!==null))for(Lh(n,i,a),n=n.sibling;n!==null;)Lh(n,i,a),n=n.sibling}function bh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(bh(n,i,a),n=n.sibling;n!==null;)bh(n,i,a),n=n.sibling}var Pt=null,kn=!1;function hi(n,i,a){for(a=a.child;a!==null;)Mm(n,i,a),a=a.sibling}function Mm(n,i,a){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Bi,a)}catch{}switch(a.tag){case 5:Ft||lo(a,i);case 6:var c=Pt,d=kn;Pt=null,hi(n,i,a),Pt=c,kn=d,Pt!==null&&(kn?(n=Pt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(kn?(n=Pt,a=a.stateNode,n.nodeType===8?Yc(n.parentNode,a):n.nodeType===1&&Yc(n,a),ti(n)):Yc(Pt,a.stateNode));break;case 4:c=Pt,d=kn,Pt=a.stateNode.containerInfo,kn=!0,hi(n,i,a),Pt=c,kn=d;break;case 0:case 11:case 14:case 15:if(!Ft&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,v=f.destroy;f=f.tag,v!==void 0&&((f&2)!==0||(f&4)!==0)&&Oh(a,i,v),d=d.next}while(d!==c)}hi(n,i,a);break;case 1:if(!Ft&&(lo(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){lt(a,i,C)}hi(n,i,a);break;case 21:hi(n,i,a);break;case 22:a.mode&1?(Ft=(c=Ft)||a.memoizedState!==null,hi(n,i,a),Ft=c):hi(n,i,a);break;default:hi(n,i,a)}}function Lm(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new NE),i.forEach(function(c){var d=UE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Cn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var f=n,v=i,C=v;e:for(;C!==null;){switch(C.tag){case 5:Pt=C.stateNode,kn=!1;break e;case 3:Pt=C.stateNode.containerInfo,kn=!0;break e;case 4:Pt=C.stateNode.containerInfo,kn=!0;break e}C=C.return}if(Pt===null)throw Error(t(160));Mm(f,v,d),Pt=null,kn=!1;var x=d.alternate;x!==null&&(x.return=null),d.return=null}catch($){lt(d,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)bm(i,n),i=i.sibling}function bm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cn(i,n),Jn(n),c&4){try{Aa(3,n,n.return),uu(3,n)}catch(pe){lt(n,n.return,pe)}try{Aa(5,n,n.return)}catch(pe){lt(n,n.return,pe)}}break;case 1:Cn(i,n),Jn(n),c&512&&a!==null&&lo(a,a.return);break;case 5:if(Cn(i,n),Jn(n),c&512&&a!==null&&lo(a,a.return),n.flags&32){var d=n.stateNode;try{bi(d,"")}catch(pe){lt(n,n.return,pe)}}if(c&4&&(d=n.stateNode,d!=null)){var f=n.memoizedProps,v=a!==null?a.memoizedProps:f,C=n.type,x=n.updateQueue;if(n.updateQueue=null,x!==null)try{C==="input"&&f.type==="radio"&&f.name!=null&&zr(d,f),Ps(C,v);var $=Ps(C,f);for(v=0;v<x.length;v+=2){var ee=x[v],te=x[v+1];ee==="style"?Rs(d,te):ee==="dangerouslySetInnerHTML"?fl(d,te):ee==="children"?bi(d,te):Y(d,ee,te,$)}switch(C){case"input":hr(d,f);break;case"textarea":dl(d,f);break;case"select":var Z=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var le=f.value;le!=null?qt(d,!!f.multiple,le,!1):Z!==!!f.multiple&&(f.defaultValue!=null?qt(d,!!f.multiple,f.defaultValue,!0):qt(d,!!f.multiple,f.multiple?[]:"",!1))}d[pa]=f}catch(pe){lt(n,n.return,pe)}}break;case 6:if(Cn(i,n),Jn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,f=n.memoizedProps;try{d.nodeValue=f}catch(pe){lt(n,n.return,pe)}}break;case 3:if(Cn(i,n),Jn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ti(i.containerInfo)}catch(pe){lt(n,n.return,pe)}break;case 4:Cn(i,n),Jn(n);break;case 13:Cn(i,n),Jn(n),d=n.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(Uh=Xe())),c&4&&Lm(n);break;case 22:if(ee=a!==null&&a.memoizedState!==null,n.mode&1?(Ft=($=Ft)||ee,Cn(i,n),Ft=$):Cn(i,n),Jn(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!ee&&(n.mode&1)!==0)for(he=n,ee=n.child;ee!==null;){for(te=he=ee;he!==null;){switch(Z=he,le=Z.child,Z.tag){case 0:case 11:case 14:case 15:Aa(4,Z,Z.return);break;case 1:lo(Z,Z.return);var de=Z.stateNode;if(typeof de.componentWillUnmount=="function"){c=Z,a=Z.return;try{i=c,de.props=i.memoizedProps,de.state=i.memoizedState,de.componentWillUnmount()}catch(pe){lt(c,a,pe)}}break;case 5:lo(Z,Z.return);break;case 22:if(Z.memoizedState!==null){Um(te);continue}}le!==null?(le.return=Z,he=le):Um(te)}ee=ee.sibling}e:for(ee=null,te=n;;){if(te.tag===5){if(ee===null){ee=te;try{d=te.stateNode,$?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(C=te.stateNode,x=te.memoizedProps.style,v=x!=null&&x.hasOwnProperty("display")?x.display:null,C.style.display=qr("display",v))}catch(pe){lt(n,n.return,pe)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=$?"":te.memoizedProps}catch(pe){lt(n,n.return,pe)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===n)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===n)break e;for(;te.sibling===null;){if(te.return===null||te.return===n)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Cn(i,n),Jn(n),c&4&&Lm(n);break;case 21:break;default:Cn(i,n),Jn(n)}}function Jn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Vm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(bi(d,""),c.flags&=-33);var f=Om(n);bh(n,f,d);break;case 3:case 4:var v=c.stateNode.containerInfo,C=Om(n);Lh(n,C,v);break;default:throw Error(t(161))}}catch(x){lt(n,n.return,x)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function DE(n,i,a){he=n,Fm(n)}function Fm(n,i,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,f=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||lu;if(!v){var C=d.alternate,x=C!==null&&C.memoizedState!==null||Ft;C=lu;var $=Ft;if(lu=v,(Ft=x)&&!$)for(he=d;he!==null;)v=he,x=v.child,v.tag===22&&v.memoizedState!==null?zm(d):x!==null?(x.return=v,he=x):zm(d);for(;f!==null;)he=f,Fm(f),f=f.sibling;he=d,lu=C,Ft=$}jm(n)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,he=f):jm(n)}}function jm(n){for(;he!==null;){var i=he;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Ft||uu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Ft)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:An(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=i.updateQueue;f!==null&&Up(i,f,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Up(i,v,a)}break;case 5:var C=i.stateNode;if(a===null&&i.flags&4){a=C;var x=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var ee=$.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&ti(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||i.flags&512&&Mh(i)}catch(Z){lt(i,i.return,Z)}}if(i===n){he=null;break}if(a=i.sibling,a!==null){a.return=i.return,he=a;break}he=i.return}}function Um(n){for(;he!==null;){var i=he;if(i===n){he=null;break}var a=i.sibling;if(a!==null){a.return=i.return,he=a;break}he=i.return}}function zm(n){for(;he!==null;){var i=he;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{uu(4,i)}catch(x){lt(i,a,x)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(x){lt(i,d,x)}}var f=i.return;try{Mh(i)}catch(x){lt(i,f,x)}break;case 5:var v=i.return;try{Mh(i)}catch(x){lt(i,v,x)}}}catch(x){lt(i,i.return,x)}if(i===n){he=null;break}var C=i.sibling;if(C!==null){C.return=i.return,he=C;break}he=i.return}}var VE=Math.ceil,cu=G.ReactCurrentDispatcher,Fh=G.ReactCurrentOwner,gn=G.ReactCurrentBatchConfig,Ue=0,St=null,pt=null,Nt=0,un=0,uo=oi(0),wt=0,ka=null,is=0,hu=0,jh=0,Ca=null,Yt=null,Uh=0,co=1/0,Pr=null,du=!1,zh=null,di=null,fu=!1,fi=null,pu=0,Ra=0,Bh=null,mu=-1,gu=0;function Ht(){return(Ue&6)!==0?Xe():mu!==-1?mu:mu=Xe()}function pi(n){return(n.mode&1)===0?1:(Ue&2)!==0&&Nt!==0?Nt&-Nt:gE.transition!==null?(gu===0&&(gu=Qo()),gu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:js(n.type)),n)}function Rn(n,i,a,c){if(50<Ra)throw Ra=0,Bh=null,Error(t(185));qi(n,a,c),((Ue&2)===0||n!==St)&&(n===St&&((Ue&2)===0&&(hu|=a),wt===4&&mi(n,Nt)),Xt(n,c),a===1&&Ue===0&&(i.mode&1)===0&&(co=Xe()+500,Hl&&li()))}function Xt(n,i){var a=n.callbackNode;Wi(n,i);var c=gr(n,n===St?Nt:0);if(c===0)a!==null&&Ds(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Ds(a),i===1)n.tag===0?mE($m.bind(null,n)):Rp($m.bind(null,n)),hE(function(){(Ue&6)===0&&li()}),a=null;else{switch(jn(c)){case 1:a=Vs;break;case 4:a=qo;break;case 16:a=zi;break;case 536870912:a=Os;break;default:a=zi}a=Xm(a,Bm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Bm(n,i){if(mu=-1,gu=0,(Ue&6)!==0)throw Error(t(327));var a=n.callbackNode;if(ho()&&n.callbackNode!==a)return null;var c=gr(n,n===St?Nt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=yu(n,c);else{i=c;var d=Ue;Ue|=2;var f=Wm();(St!==n||Nt!==i)&&(Pr=null,co=Xe()+500,os(n,i));do try{LE();break}catch(C){Hm(n,C)}while(!0);oh(),cu.current=f,Ue=d,pt!==null?i=0:(St=null,Nt=0,i=wt)}if(i!==0){if(i===2&&(d=Ko(n),d!==0&&(c=d,i=$h(n,d))),i===1)throw a=ka,os(n,0),mi(n,c),Xt(n,Xe()),a;if(i===6)mi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!OE(d)&&(i=yu(n,c),i===2&&(f=Ko(n),f!==0&&(c=f,i=$h(n,f))),i===1))throw a=ka,os(n,0),mi(n,c),Xt(n,Xe()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:as(n,Yt,Pr);break;case 3:if(mi(n,c),(c&130023424)===c&&(i=Uh+500-Xe(),10<i)){if(gr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Ht(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Qc(as.bind(null,n,Yt,Pr),i);break}as(n,Yt,Pr);break;case 4:if(mi(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var v=31-tn(c);f=1<<v,v=i[v],v>d&&(d=v),c&=~f}if(c=d,c=Xe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*VE(c/1960))-c,10<c){n.timeoutHandle=Qc(as.bind(null,n,Yt,Pr),c);break}as(n,Yt,Pr);break;case 5:as(n,Yt,Pr);break;default:throw Error(t(329))}}}return Xt(n,Xe()),n.callbackNode===a?Bm.bind(null,n):null}function $h(n,i){var a=Ca;return n.current.memoizedState.isDehydrated&&(os(n,i).flags|=256),n=yu(n,i),n!==2&&(i=Yt,Yt=a,i!==null&&Hh(i)),n}function Hh(n){Yt===null?Yt=n:Yt.push.apply(Yt,n)}function OE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],f=d.getSnapshot;d=d.value;try{if(!In(f(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function mi(n,i){for(i&=~jh,i&=~hu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-tn(i),c=1<<a;n[a]=-1,i&=~c}}function $m(n){if((Ue&6)!==0)throw Error(t(327));ho();var i=gr(n,0);if((i&1)===0)return Xt(n,Xe()),null;var a=yu(n,i);if(n.tag!==0&&a===2){var c=Ko(n);c!==0&&(i=c,a=$h(n,c))}if(a===1)throw a=ka,os(n,0),mi(n,i),Xt(n,Xe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,as(n,Yt,Pr),Xt(n,Xe()),null}function Wh(n,i){var a=Ue;Ue|=1;try{return n(i)}finally{Ue=a,Ue===0&&(co=Xe()+500,Hl&&li())}}function ss(n){fi!==null&&fi.tag===0&&(Ue&6)===0&&ho();var i=Ue;Ue|=1;var a=gn.transition,c=Fe;try{if(gn.transition=null,Fe=1,n)return n()}finally{Fe=c,gn.transition=a,Ue=i,(Ue&6)===0&&li()}}function qh(){un=uo.current,Ze(uo)}function os(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,cE(a)),pt!==null)for(a=pt.return;a!==null;){var c=a;switch(th(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Bl();break;case 3:oo(),Ze(Gt),Ze(Mt),ph();break;case 5:dh(c);break;case 4:oo();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:ah(c.type._context);break;case 22:case 23:qh()}a=a.return}if(St=n,pt=n=gi(n.current,null),Nt=un=i,wt=0,ka=null,jh=hu=is=0,Yt=Ca=null,ts!==null){for(i=0;i<ts.length;i++)if(a=ts[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,f=a.pending;if(f!==null){var v=f.next;f.next=d,c.next=v}a.pending=c}ts=null}return n}function Hm(n,i){do{var a=pt;try{if(oh(),eu.current=iu,tu){for(var c=it.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}tu=!1}if(rs=0,It=vt=it=null,wa=!1,Ea=0,Fh.current=null,a===null||a.return===null){wt=1,ka=i,pt=null;break}e:{var f=n,v=a.return,C=a,x=i;if(i=Nt,C.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var $=x,ee=C,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var le=mm(v);if(le!==null){le.flags&=-257,gm(le,v,C,f,i),le.mode&1&&pm(f,$,i),i=le,x=$;var de=i.updateQueue;if(de===null){var pe=new Set;pe.add(x),i.updateQueue=pe}else de.add(x);break e}else{if((i&1)===0){pm(f,$,i),Gh();break e}x=Error(t(426))}}else if(nt&&C.mode&1){var ht=mm(v);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),gm(ht,v,C,f,i),ih(ao(x,C));break e}}f=x=ao(x,C),wt!==4&&(wt=2),Ca===null?Ca=[f]:Ca.push(f),f=v;do{switch(f.tag){case 3:f.flags|=65536,i&=-i,f.lanes|=i;var j=dm(f,x,i);jp(f,j);break e;case 1:C=x;var M=f.type,B=f.stateNode;if((f.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(di===null||!di.has(B)))){f.flags|=65536,i&=-i,f.lanes|=i;var ne=fm(f,C,i);jp(f,ne);break e}}f=f.return}while(f!==null)}Gm(a)}catch(me){i=me,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function Wm(){var n=cu.current;return cu.current=iu,n===null?iu:n}function Gh(){(wt===0||wt===3||wt===2)&&(wt=4),St===null||(is&268435455)===0&&(hu&268435455)===0||mi(St,Nt)}function yu(n,i){var a=Ue;Ue|=2;var c=Wm();(St!==n||Nt!==i)&&(Pr=null,os(n,i));do try{ME();break}catch(d){Hm(n,d)}while(!0);if(oh(),Ue=a,cu.current=c,pt!==null)throw Error(t(261));return St=null,Nt=0,wt}function ME(){for(;pt!==null;)qm(pt)}function LE(){for(;pt!==null&&!Ui();)qm(pt)}function qm(n){var i=Ym(n.alternate,n,un);n.memoizedProps=n.pendingProps,i===null?Gm(n):pt=i,Fh.current=null}function Gm(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=RE(a,i,un),a!==null){pt=a;return}}else{if(a=PE(a,i),a!==null){a.flags&=32767,pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,pt=null;return}}if(i=i.sibling,i!==null){pt=i;return}pt=i=n}while(i!==null);wt===0&&(wt=5)}function as(n,i,a){var c=Fe,d=gn.transition;try{gn.transition=null,Fe=1,bE(n,i,a,c)}finally{gn.transition=d,Fe=c}return null}function bE(n,i,a,c){do ho();while(fi!==null);if((Ue&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var f=a.lanes|a.childLanes;if(Vc(n,f),n===St&&(pt=St=null,Nt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||fu||(fu=!0,Xm(zi,function(){return ho(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=gn.transition,gn.transition=null;var v=Fe;Fe=1;var C=Ue;Ue|=4,Fh.current=null,xE(n,a),bm(a,n),rE(Gc),vr=!!qc,Gc=qc=null,n.current=a,DE(a),mr(),Ue=C,Fe=v,gn.transition=f}else n.current=a;if(fu&&(fu=!1,fi=n,pu=d),f=n.pendingLanes,f===0&&(di=null),Sl(a.stateNode),Xt(n,Xe()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(du)throw du=!1,n=zh,zh=null,n;return(pu&1)!==0&&n.tag!==0&&ho(),f=n.pendingLanes,(f&1)!==0?n===Bh?Ra++:(Ra=0,Bh=n):Ra=0,li(),null}function ho(){if(fi!==null){var n=jn(pu),i=gn.transition,a=Fe;try{if(gn.transition=null,Fe=16>n?16:n,fi===null)var c=!1;else{if(n=fi,fi=null,pu=0,(Ue&6)!==0)throw Error(t(331));var d=Ue;for(Ue|=4,he=n.current;he!==null;){var f=he,v=f.child;if((he.flags&16)!==0){var C=f.deletions;if(C!==null){for(var x=0;x<C.length;x++){var $=C[x];for(he=$;he!==null;){var ee=he;switch(ee.tag){case 0:case 11:case 15:Aa(8,ee,f)}var te=ee.child;if(te!==null)te.return=ee,he=te;else for(;he!==null;){ee=he;var Z=ee.sibling,le=ee.return;if(Dm(ee),ee===$){he=null;break}if(Z!==null){Z.return=le,he=Z;break}he=le}}}var de=f.alternate;if(de!==null){var pe=de.child;if(pe!==null){de.child=null;do{var ht=pe.sibling;pe.sibling=null,pe=ht}while(pe!==null)}}he=f}}if((f.subtreeFlags&2064)!==0&&v!==null)v.return=f,he=v;else e:for(;he!==null;){if(f=he,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Aa(9,f,f.return)}var j=f.sibling;if(j!==null){j.return=f.return,he=j;break e}he=f.return}}var M=n.current;for(he=M;he!==null;){v=he;var B=v.child;if((v.subtreeFlags&2064)!==0&&B!==null)B.return=v,he=B;else e:for(v=M;he!==null;){if(C=he,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:uu(9,C)}}catch(me){lt(C,C.return,me)}if(C===v){he=null;break e}var ne=C.sibling;if(ne!==null){ne.return=C.return,he=ne;break e}he=C.return}}if(Ue=d,li(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Bi,n)}catch{}c=!0}return c}finally{Fe=a,gn.transition=i}}return!1}function Km(n,i,a){i=ao(a,i),i=dm(n,i,1),n=ci(n,i,1),i=Ht(),n!==null&&(qi(n,1,i),Xt(n,i))}function lt(n,i,a){if(n.tag===3)Km(n,n,a);else for(;i!==null;){if(i.tag===3){Km(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(di===null||!di.has(c))){n=ao(a,n),n=fm(i,n,1),i=ci(i,n,1),n=Ht(),i!==null&&(qi(i,1,n),Xt(i,n));break}}i=i.return}}function FE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Ht(),n.pingedLanes|=n.suspendedLanes&a,St===n&&(Nt&a)===a&&(wt===4||wt===3&&(Nt&130023424)===Nt&&500>Xe()-Uh?os(n,0):jh|=a),Xt(n,i)}function Qm(n,i){i===0&&((n.mode&1)===0?i=1:(i=Jr,Jr<<=1,(Jr&130023424)===0&&(Jr=4194304)));var a=Ht();n=kr(n,i),n!==null&&(qi(n,i,a),Xt(n,a))}function jE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Qm(n,a)}function UE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Qm(n,a)}var Ym;Ym=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Gt.current)Qt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return Qt=!1,CE(n,i,a);Qt=(n.flags&131072)!==0}else Qt=!1,nt&&(i.flags&1048576)!==0&&Pp(i,ql,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;au(n,i),n=i.pendingProps;var d=Zs(i,Mt.current);so(i,a),d=yh(null,i,c,n,d,a);var f=_h();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Kt(c)?(f=!0,$l(i)):f=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ch(i),d.updater=su,i.stateNode=d,d._reactInternals=i,Sh(i,c,n,a),i=Rh(null,i,c,!0,f,a)):(i.tag=0,nt&&f&&eh(i),$t(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(au(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=BE(c),n=An(c,n),d){case 0:i=Ch(null,i,c,n,a);break e;case 1:i=Tm(null,i,c,n,a);break e;case 11:i=ym(null,i,c,n,a);break e;case 14:i=_m(null,i,c,An(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:An(c,d),Ch(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:An(c,d),Tm(n,i,c,d,a);case 3:e:{if(Im(i),n===null)throw Error(t(387));c=i.pendingProps,f=i.memoizedState,d=f.element,Fp(n,i),Jl(i,c,null,a);var v=i.memoizedState;if(c=v.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){d=ao(Error(t(423)),i),i=Sm(n,i,c,a,d);break e}else if(c!==d){d=ao(Error(t(424)),i),i=Sm(n,i,c,a,d);break e}else for(ln=si(i.stateNode.containerInfo.firstChild),an=i,nt=!0,Sn=null,a=Lp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(no(),c===d){i=Rr(n,i,a);break e}$t(n,i,c,a)}i=i.child}return i;case 5:return zp(i),n===null&&rh(i),c=i.type,d=i.pendingProps,f=n!==null?n.memoizedProps:null,v=d.children,Kc(c,d)?v=null:f!==null&&Kc(c,f)&&(i.flags|=32),Em(n,i),$t(n,i,v,a),i.child;case 6:return n===null&&rh(i),null;case 13:return Am(n,i,a);case 4:return hh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ro(i,null,c,a):$t(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:An(c,d),ym(n,i,c,d,a);case 7:return $t(n,i,i.pendingProps,a),i.child;case 8:return $t(n,i,i.pendingProps.children,a),i.child;case 12:return $t(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,f=i.memoizedProps,v=d.value,Qe(Ql,c._currentValue),c._currentValue=v,f!==null)if(In(f.value,v)){if(f.children===d.children&&!Gt.current){i=Rr(n,i,a);break e}}else for(f=i.child,f!==null&&(f.return=i);f!==null;){var C=f.dependencies;if(C!==null){v=f.child;for(var x=C.firstContext;x!==null;){if(x.context===c){if(f.tag===1){x=Cr(-1,a&-a),x.tag=2;var $=f.updateQueue;if($!==null){$=$.shared;var ee=$.pending;ee===null?x.next=x:(x.next=ee.next,ee.next=x),$.pending=x}}f.lanes|=a,x=f.alternate,x!==null&&(x.lanes|=a),lh(f.return,a,i),C.lanes|=a;break}x=x.next}}else if(f.tag===10)v=f.type===i.type?null:f.child;else if(f.tag===18){if(v=f.return,v===null)throw Error(t(341));v.lanes|=a,C=v.alternate,C!==null&&(C.lanes|=a),lh(v,a,i),v=f.sibling}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===i){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}$t(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,so(i,a),d=pn(d),c=c(d),i.flags|=1,$t(n,i,c,a),i.child;case 14:return c=i.type,d=An(c,i.pendingProps),d=An(c.type,d),_m(n,i,c,d,a);case 15:return vm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:An(c,d),au(n,i),i.tag=1,Kt(c)?(n=!0,$l(i)):n=!1,so(i,a),cm(i,c,d),Sh(i,c,d,a),Rh(null,i,c,!0,n,a);case 19:return Cm(n,i,a);case 22:return wm(n,i,a)}throw Error(t(156,i.tag))};function Xm(n,i){return Wo(n,i)}function zE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(n,i,a,c){return new zE(n,i,a,c)}function Kh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function BE(n){if(typeof n=="function")return Kh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===Ne)return 14}return 2}function gi(n,i){var a=n.alternate;return a===null?(a=yn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function _u(n,i,a,c,d,f){var v=2;if(c=n,typeof n=="function")Kh(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case N:return ls(a.children,d,f,i);case A:v=8,d|=8;break;case R:return n=yn(12,a,i,d|2),n.elementType=R,n.lanes=f,n;case T:return n=yn(13,a,i,d),n.elementType=T,n.lanes=f,n;case we:return n=yn(19,a,i,d),n.elementType=we,n.lanes=f,n;case Pe:return vu(a,d,f,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case O:v=10;break e;case k:v=9;break e;case V:v=11;break e;case Ne:v=14;break e;case ze:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=yn(v,a,i,d),i.elementType=n,i.type=c,i.lanes=f,i}function ls(n,i,a,c){return n=yn(7,n,c,i),n.lanes=a,n}function vu(n,i,a,c){return n=yn(22,n,c,i),n.elementType=Pe,n.lanes=a,n.stateNode={isHidden:!1},n}function Qh(n,i,a){return n=yn(6,n,null,i),n.lanes=a,n}function Yh(n,i,a){return i=yn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function $E(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yo(0),this.expirationTimes=Yo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yo(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Xh(n,i,a,c,d,f,v,C,x){return n=new $E(n,i,a,C,x),i===1?(i=1,f===!0&&(i|=8)):i=0,f=yn(3,null,null,i),n.current=f,f.stateNode=n,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ch(f),n}function HE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Jm(n){if(!n)return ai;n=n._reactInternals;e:{if(En(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Kt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Kt(a))return kp(n,a,i)}return i}function Zm(n,i,a,c,d,f,v,C,x){return n=Xh(a,c,!0,n,d,f,v,C,x),n.context=Jm(null),a=n.current,c=Ht(),d=pi(a),f=Cr(c,d),f.callback=i??null,ci(a,f,d),n.current.lanes=d,qi(n,d,c),Xt(n,c),n}function wu(n,i,a,c){var d=i.current,f=Ht(),v=pi(d);return a=Jm(a),i.context===null?i.context=a:i.pendingContext=a,i=Cr(f,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=ci(d,i,v),n!==null&&(Rn(n,d,v,f),Xl(n,d,v)),v}function Eu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function eg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Jh(n,i){eg(n,i),(n=n.alternate)&&eg(n,i)}function WE(){return null}var tg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Zh(n){this._internalRoot=n}Tu.prototype.render=Zh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));wu(n,i,null,null)},Tu.prototype.unmount=Zh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ss(function(){wu(null,n,null,null)}),i[Tr]=null}};function Tu(n){this._internalRoot=n}Tu.prototype.unstable_scheduleHydration=function(n){if(n){var i=ea();n={blockedOn:null,target:n,priority:i};for(var a=0;a<nn.length&&i!==0&&i<nn[a].priority;a++);nn.splice(a,0,n),a===0&&bs(n)}};function ed(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Iu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ng(){}function qE(n,i,a,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var $=Eu(v);f.call($)}}var v=Zm(i,c,n,0,null,!1,!1,"",ng);return n._reactRootContainer=v,n[Tr]=v.current,da(n.nodeType===8?n.parentNode:n),ss(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var $=Eu(x);C.call($)}}var x=Xh(n,0,!1,null,null,!1,!1,"",ng);return n._reactRootContainer=x,n[Tr]=x.current,da(n.nodeType===8?n.parentNode:n),ss(function(){wu(i,x,a,c)}),x}function Su(n,i,a,c,d){var f=a._reactRootContainer;if(f){var v=f;if(typeof d=="function"){var C=d;d=function(){var x=Eu(v);C.call(x)}}wu(i,v,n,d)}else v=qE(a,i,n,d,c);return Eu(v)}Jo=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=He(i.pendingLanes);a!==0&&(Xo(i,a|1),Xt(i,Xe()),(Ue&6)===0&&(co=Xe()+500,li()))}break;case 13:ss(function(){var c=kr(n,1);if(c!==null){var d=Ht();Rn(c,n,1,d)}}),Jh(n,1)}},Ms=function(n){if(n.tag===13){var i=kr(n,134217728);if(i!==null){var a=Ht();Rn(i,n,134217728,a)}Jh(n,134217728)}},Zo=function(n){if(n.tag===13){var i=pi(n),a=kr(n,i);if(a!==null){var c=Ht();Rn(a,n,i,c)}Jh(n,i)}},ea=function(){return Fe},ta=function(n,i){var a=Fe;try{return Fe=n,i()}finally{Fe=a}},dr=function(n,i,a){switch(i){case"input":if(hr(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=zl(c);if(!d)throw Error(t(90));Oi(c),hr(c,d)}}}break;case"textarea":dl(n,a);break;case"select":i=a.value,i!=null&&qt(n,!!a.multiple,i,!1)}},ml=Wh,gl=ss;var GE={usingClientEntryPoint:!1,Events:[ma,Xs,zl,Kr,Qr,Wh]},Pa={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KE={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Il(n),n===null?null:n.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||WE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{Bi=Au.inject(KE),en=Au}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GE,Jt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(i))throw Error(t(200));return HE(n,i,null,a)},Jt.createRoot=function(n,i){if(!ed(n))throw Error(t(299));var a=!1,c="",d=tg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Xh(n,1,!1,null,null,a,!1,c,d),n[Tr]=i.current,da(n.nodeType===8?n.parentNode:n),new Zh(i)},Jt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Il(i),n=n===null?null:n.stateNode,n},Jt.flushSync=function(n){return ss(n)},Jt.hydrate=function(n,i,a){if(!Iu(i))throw Error(t(200));return Su(null,n,i,!0,a)},Jt.hydrateRoot=function(n,i,a){if(!ed(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,f="",v=tg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Zm(i,null,n,1,a??null,d,!1,f,v),n[Tr]=i.current,da(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Tu(i)},Jt.render=function(n,i,a){if(!Iu(i))throw Error(t(200));return Su(null,n,i,!1,a)},Jt.unmountComponentAtNode=function(n){if(!Iu(n))throw Error(t(40));return n._reactRootContainer?(ss(function(){Su(null,null,n,!1,function(){n._reactRootContainer=null,n[Tr]=null})}),!0):!1},Jt.unstable_batchedUpdates=Wh,Jt.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Iu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Su(n,i,a,!1,c)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var cg;function rT(){if(cg)return rd.exports;cg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rd.exports=nT(),rd.exports}var hg;function iT(){if(hg)return ku;hg=1;var r=rT();return ku.createRoot=r.createRoot,ku.hydrateRoot=r.hydrateRoot,ku}var sT=iT();const oT=t_(sT),aT={appTitle:"Film Keres",movies:"Filmek",tvShows:"Sorozatok",theaters:"Mozi",searchMoviePlaceholder:"Film keresse...",searchTvPlaceholder:"Sorozat keresse...",watchlist:"Watchlist",filters:"Szrk",clearFilters:"Trls",sortBy:"Rendezs",sortMostPopular:"Legnpszerbb",sortBestRated:"Legjobb rtkels",sortNewest:"Legjabb",sortTitleAZ:"Cm (A-Z)",minimumRating:"Minimum rtkels",ratingAny:"Mindegy",releaseYear:"Megjelens ve",yearFrom:"vtl",yearTo:"vig",categories:"Kategrik",ageRating:"Korosztly",all:"Mind",streamingProviders:"Streaming szolgltatk",certKN:"Korhatr nlkl",cert6:"6 ven fellieknek",cert12:"12 ven fellieknek",cert16:"16 ven fellieknek",cert18:"18 ven fellieknek",certG:"Minden korosztlynak",certPG:"Szli felgyelettel",certPG13:"13 v felett",certR:"17 v alatt szlvel",certNC17:"18 v felett",tvShow:"Sorozat",movie:"Film",noMoviesFound:"Nem talltunk filmeket a megadott szrkkel.",noTvShowsFound:"Nem talltunk sorozatokat a megadott szrkkel.",tryDifferentFilters:"Prbld meg mdostani a keressi feltteleket.",loadingMovies:"Filmek betltse...",loadingTvShows:"Sorozatok betltse...",loadMoreMovies:"Tbb film betltse",loadMoreTvShows:"Tbb sorozat betltse",trailer:"Elzetes",inWatchlist:"Watchlistben",addToWatchlist:"Watchlisthez",minutes:"perc",seasons:"vad",episodes:"epizd",noDescription:"Nincs elrhet lers.",availableOnStreaming:"Elrhet streaming szolgltatknl:",withSubscription:"Elfizetssel:",rentable:"Klcsnzhet:",purchasable:"Megvsrolhat:",noStreamingProviders:"Jelenleg nincs elrhet streaming szolgltat.",viewOnJustWatch:"Megtekints a JustWatch-on",list:"Lista",add:"Hozzads",searchAnyMovieOrTv:"Keress brmilyen filmet vagy sorozatot...",search:"Keress",searching:"Keress...",noSearchResults:"Nincs tallat a keressre.",searchAnyInterest:"Keress r brmilyen filmre vagy sorozatra, ami rdekel!",addEvenIfNotAvailable:"Akkor is hozzadhatod, ha mg nem rhet el streamingnl.",checkingAvailability:"Elrhetsg ellenrzse...",watchlistEmpty:"A watchlist res.",clickAddTab:'Kattints a "+ Hozzads" flre filmek keresshez!',checking:"Ellenrzs...",available:"Elrhet",notAvailable:"Nem elrhet",addedOn:"Hozzadva",checkedToday:"Ma ellenrizve",checkedYesterday:"Tegnap ellenrizve",checkedDaysAgo:"{days} napja ellenrizve",checkedOnDate:"{date}-kor ellenrizve",refreshAvailability:"Elrhetsg frisstse",markAsWatched:"Megjells ltottknt",markAsUnwatched:"Megjells nem ltottknt",removeFromList:"Eltvolts a listbl",watchOn:"Megnzs",language:"Nyelv",hungarian:"Magyar",english:"English",signIn:"Bejelentkezs",signOut:"Kijelentkezs",syncingWatchlist:"Watchlist szinkronizls...",favorites:"Kedvencek",like:"Kedvelem",love:"Imdom",liked:"Kedvelt",loved:"Imdott",noFavorites:"Mg nincsenek kedvenceid.",filterAll:"sszes",trending:"Felkapott",nowPlaying:"Most a mozikban",upcoming:"Hamarosan",onTheAir:"Most adsban",showFilters:"Szrk megjelentse",hideFilters:"Szrk elrejtse",browseMode:"Lista tpusa",browseStreaming:"Streaming",browseTrending:"Felkapott",browseTheaters:"Mozikban",browseUpcoming:"Hamarosan",city:"Vros",allCities:"sszes vros",date:"Dtum",allDates:"sszes nap",today:"Ma",tomorrow:"Holnap"},lT={appTitle:"Movie Search",movies:"Movies",tvShows:"TV Shows",theaters:"In Theaters",searchMoviePlaceholder:"Search movies...",searchTvPlaceholder:"Search TV shows...",watchlist:"Watchlist",filters:"Filters",clearFilters:"Clear",sortBy:"Sort by",sortMostPopular:"Most Popular",sortBestRated:"Highest Rated",sortNewest:"Newest",sortTitleAZ:"Title (A-Z)",minimumRating:"Minimum Rating",ratingAny:"Any",releaseYear:"Release Year",yearFrom:"From",yearTo:"To",categories:"Categories",ageRating:"Age Rating",all:"All",streamingProviders:"Streaming Providers",certKN:"No age restriction",cert6:"Ages 6 and up",cert12:"Ages 12 and up",cert16:"Ages 16 and up",cert18:"Ages 18 and up",certG:"General Audience",certPG:"Parental Guidance",certPG13:"Ages 13 and up",certR:"Restricted",certNC17:"Adults Only",tvShow:"TV Show",movie:"Movie",noMoviesFound:"No movies found with the current filters.",noTvShowsFound:"No TV shows found with the current filters.",tryDifferentFilters:"Try adjusting your search criteria.",loadingMovies:"Loading movies...",loadingTvShows:"Loading TV shows...",loadMoreMovies:"Load more movies",loadMoreTvShows:"Load more TV shows",trailer:"Trailer",inWatchlist:"In Watchlist",addToWatchlist:"Add to Watchlist",minutes:"min",seasons:"seasons",episodes:"episodes",noDescription:"No description available.",availableOnStreaming:"Available on streaming platforms:",withSubscription:"With subscription:",rentable:"Rent:",purchasable:"Buy:",noStreamingProviders:"Currently not available on streaming platforms.",viewOnJustWatch:"View on JustWatch",list:"List",add:"Add",searchAnyMovieOrTv:"Search for any movie or TV show...",search:"Search",searching:"Searching...",noSearchResults:"No results found.",searchAnyInterest:"Search for any movie or TV show you're interested in!",addEvenIfNotAvailable:"You can add it even if it's not streaming yet.",checkingAvailability:"Checking availability...",watchlistEmpty:"Your watchlist is empty.",clickAddTab:'Click "+ Add" tab to search for movies!',checking:"Checking...",available:"Available",notAvailable:"Not Available",addedOn:"Added",checkedToday:"Checked today",checkedYesterday:"Checked yesterday",checkedDaysAgo:"Checked {days} days ago",checkedOnDate:"Checked on {date}",refreshAvailability:"Refresh availability",markAsWatched:"Mark as watched",markAsUnwatched:"Mark as unwatched",removeFromList:"Remove from list",watchOn:"Watch on",language:"Language",hungarian:"Magyar",english:"English",signIn:"Sign In",signOut:"Sign Out",syncingWatchlist:"Syncing watchlist...",favorites:"Favorites",like:"Like",love:"Love",liked:"Liked",loved:"Loved",noFavorites:"No favorites yet.",filterAll:"All",trending:"Trending",nowPlaying:"Now Playing",upcoming:"Coming Soon",onTheAir:"On The Air",showFilters:"Show Filters",hideFilters:"Hide Filters",browseMode:"Browse",browseStreaming:"Streaming",browseTrending:"Trending",browseTheaters:"In Theaters",browseUpcoming:"Coming Soon",city:"City",allCities:"All cities",date:"Date",allDates:"All dates",today:"Today",tomorrow:"Tomorrow"},uT={hu:aT,en:lT},n_=X.createContext(void 0),r_="movie-search-language";function cT(){if(typeof window<"u"){const r=localStorage.getItem(r_);if(r==="hu"||r==="en")return r;if(navigator.language.toLowerCase().startsWith("hu"))return"hu"}return"en"}function hT({children:r}){const[e,t]=X.useState(cT);X.useEffect(()=>{localStorage.setItem(r_,e),document.documentElement.lang=e},[e]);const s=l=>{t(l)},o=l=>uT[e][l]||l;return w.jsx(n_.Provider,{value:{language:e,setLanguage:s,t:o},children:r})}function cr(){const r=X.useContext(n_);if(!r)throw new Error("useI18n must be used within an I18nProvider");return r}const dT=()=>{};var dg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},fT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},s_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,E=l>>2,S=(l&3)<<4|m>>4;let P=(m&15)<<2|_>>6,F=_&63;g||(F=64,h||(P=64)),s.push(t[E],t[S],t[P],t[F])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(i_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):fT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||_==null||S==null)throw new pT;const P=l<<2|m>>4;if(s.push(P),_!==64){const F=m<<4&240|_>>2;if(s.push(F),S!==64){const q=_<<6&192|S;s.push(q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class pT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mT=function(r){const e=i_(r);return s_.encodeByteArray(e,!0)},qu=function(r){return mT(r).replace(/\./g,"")},o_=function(r){try{return s_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=()=>gT().__FIREBASE_DEFAULTS__,_T=()=>{if(typeof process>"u"||typeof dg>"u")return;const r=dg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},vT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&o_(r[1]);return e&&JSON.parse(e)},fc=()=>{try{return dT()||yT()||_T()||vT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},a_=r=>{var e,t;return(t=(e=fc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},wT=r=>{const e=a_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},l_=()=>{var r;return(r=fc())==null?void 0:r.config},u_=r=>{var e;return(e=fc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function c_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[qu(JSON.stringify(t)),qu(JSON.stringify(h)),""].join(".")}const Ma={};function IT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ma))Ma[e]?r.emulator.push(e):r.prod.push(e);return r}function ST(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let fg=!1;function h_(r,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||Ma[r]===e||Ma[r]||fg)return;Ma[r]=e;function t(P){return`__firebase__banner__${P}`}const s="__firebase__banner",l=IT().prod.length>0;function h(){const P=document.getElementById(s);P&&P.remove()}function m(P){P.style.display="flex",P.style.background="#7faaf0",P.style.position="fixed",P.style.bottom="5px",P.style.left="5px",P.style.padding=".5em",P.style.borderRadius="5px",P.style.alignItems="center"}function g(P,F){P.setAttribute("width","24"),P.setAttribute("id",F),P.setAttribute("height","24"),P.setAttribute("viewBox","0 0 24 24"),P.setAttribute("fill","none"),P.style.marginLeft="-6px"}function _(){const P=document.createElement("span");return P.style.cursor="pointer",P.style.marginLeft="16px",P.style.fontSize="24px",P.innerHTML=" &times;",P.onclick=()=>{fg=!0,h()},P}function E(P,F){P.setAttribute("id",F),P.innerText="Learn more",P.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",P.setAttribute("target","__blank"),P.style.paddingLeft="5px",P.style.textDecoration="underline"}function S(){const P=ST(s),F=t("text"),q=document.getElementById(F)||document.createElement("span"),D=t("learnmore"),z=document.getElementById(D)||document.createElement("a"),W=t("preprendIcon"),J=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(P.created){const Y=P.element;m(Y),E(z,D);const G=_();g(J,W),Y.append(J,q,z,G),document.body.appendChild(Y)}l?(q.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function kT(){var e;const r=(e=fc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function PT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NT(){const r=Bt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function xT(){return!kT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DT(){try{return typeof indexedDB=="object"}catch{return!1}}function VT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="FirebaseError";class Fr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=OT,Object.setPrototypeOf(this,Fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,el.prototype.create)}}class el{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?MT(l,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Fr(o,m,s)}}function MT(r,e){return r.replace(LT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const LT=/\{\$([^}]+)}/g;function bT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ys(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(pg(l)&&pg(h)){if(!ys(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function pg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function FT(r,e){const t=new jT(r,e);return t.subscribe.bind(t)}class jT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");UT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=od),o.error===void 0&&(o.error=od),o.complete===void 0&&(o.complete=od);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(r){return r&&r._delegate?r._delegate:r}class _s{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new ET;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($T(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);s===m&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:BT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BT(r){return r===us?void 0:r}function $T(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const WT={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},qT=Oe.INFO,GT={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},KT=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=GT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zd{constructor(e){this.name=e,this._logLevel=qT,this._logHandler=KT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const QT=(r,e)=>e.some(t=>r instanceof t);let mg,gg;function YT(){return mg||(mg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XT(){return gg||(gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d_=new WeakMap,Ed=new WeakMap,f_=new WeakMap,ad=new WeakMap,ef=new WeakMap;function JT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ii(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&d_.set(t,r)}).catch(()=>{}),ef.set(e,r),e}function ZT(r){if(Ed.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Ed.set(r,e)}let Td={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ed.get(r);if(e==="objectStoreNames")return r.objectStoreNames||f_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ii(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function e0(r){Td=r(Td)}function t0(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(ld(this),e,...t);return f_.set(s,e.sort?e.sort():[e]),Ii(s)}:XT().includes(r)?function(...e){return r.apply(ld(this),e),Ii(d_.get(this))}:function(...e){return Ii(r.apply(ld(this),e))}}function n0(r){return typeof r=="function"?t0(r):(r instanceof IDBTransaction&&ZT(r),QT(r,YT())?new Proxy(r,Td):r)}function Ii(r){if(r instanceof IDBRequest)return JT(r);if(ad.has(r))return ad.get(r);const e=n0(r);return e!==r&&(ad.set(r,e),ef.set(e,r)),e}const ld=r=>ef.get(r);function r0(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=Ii(h);return s&&h.addEventListener("upgradeneeded",g=>{s(Ii(h.result),g.oldVersion,g.newVersion,Ii(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const i0=["get","getKey","getAll","getAllKeys","count"],s0=["put","add","delete","clear"],ud=new Map;function yg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ud.get(e))return ud.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=s0.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||i0.includes(t)))return;const l=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return ud.set(e,l),l}e0(r=>({...r,get:(e,t,s)=>yg(e,t)||r.get(e,t,s),has:(e,t)=>!!yg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(a0(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function a0(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Id="@firebase/app",_g="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Zd("@firebase/app"),l0="@firebase/app-compat",u0="@firebase/analytics-compat",c0="@firebase/analytics",h0="@firebase/app-check-compat",d0="@firebase/app-check",f0="@firebase/auth",p0="@firebase/auth-compat",m0="@firebase/database",g0="@firebase/data-connect",y0="@firebase/database-compat",_0="@firebase/functions",v0="@firebase/functions-compat",w0="@firebase/installations",E0="@firebase/installations-compat",T0="@firebase/messaging",I0="@firebase/messaging-compat",S0="@firebase/performance",A0="@firebase/performance-compat",k0="@firebase/remote-config",C0="@firebase/remote-config-compat",R0="@firebase/storage",P0="@firebase/storage-compat",N0="@firebase/firestore",x0="@firebase/ai",D0="@firebase/firestore-compat",V0="firebase",O0="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="[DEFAULT]",M0={[Id]:"fire-core",[l0]:"fire-core-compat",[c0]:"fire-analytics",[u0]:"fire-analytics-compat",[d0]:"fire-app-check",[h0]:"fire-app-check-compat",[f0]:"fire-auth",[p0]:"fire-auth-compat",[m0]:"fire-rtdb",[g0]:"fire-data-connect",[y0]:"fire-rtdb-compat",[_0]:"fire-fn",[v0]:"fire-fn-compat",[w0]:"fire-iid",[E0]:"fire-iid-compat",[T0]:"fire-fcm",[I0]:"fire-fcm-compat",[S0]:"fire-perf",[A0]:"fire-perf-compat",[k0]:"fire-rc",[C0]:"fire-rc-compat",[R0]:"fire-gcs",[P0]:"fire-gcs-compat",[N0]:"fire-fst",[D0]:"fire-fst-compat",[x0]:"fire-vertex","fire-js":"fire-js",[V0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=new Map,L0=new Map,Ad=new Map;function vg(r,e){try{r.container.addComponent(e)}catch(t){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function So(r){const e=r.name;if(Ad.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Ad.set(e,r);for(const t of Gu.values())vg(t,r);for(const t of L0.values())vg(t,r);return!0}function tf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Pn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new el("app","Firebase",b0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=O0;function p_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Sd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Si.create("bad-app-name",{appName:String(o)});if(t||(t=l_()),!t)throw Si.create("no-options");const l=Gu.get(o);if(l){if(ys(t,l.options)&&ys(s,l.config))return l;throw Si.create("duplicate-app",{appName:o})}const h=new HT(o);for(const g of Ad.values())h.addComponent(g);const m=new F0(t,s,h);return Gu.set(o,m),m}function m_(r=Sd){const e=Gu.get(r);if(!e&&r===Sd&&l_())return p_();if(!e)throw Si.create("no-app",{appName:r});return e}function Ai(r,e,t){let s=M0[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(h.join(" "));return}So(new _s(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="firebase-heartbeat-database",U0=1,Ba="firebase-heartbeat-store";let cd=null;function g_(){return cd||(cd=r0(j0,U0,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ba)}catch(t){console.warn(t)}}}}).catch(r=>{throw Si.create("idb-open",{originalErrorMessage:r.message})})),cd}async function z0(r){try{const t=(await g_()).transaction(Ba),s=await t.objectStore(Ba).get(y_(r));return await t.done,s}catch(e){if(e instanceof Fr)Or.warn(e.message);else{const t=Si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(t.message)}}}async function wg(r,e){try{const s=(await g_()).transaction(Ba,"readwrite");await s.objectStore(Ba).put(e,y_(r)),await s.done}catch(t){if(t instanceof Fr)Or.warn(t.message);else{const s=Si.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Or.warn(s.message)}}}function y_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=1024,$0=30;class H0{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new q0(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Eg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>$0){const h=G0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Or.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Eg(),{heartbeatsToSend:s,unsentEntries:o}=W0(this._heartbeatsCache.heartbeats),l=qu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Or.warn(t),""}}}function Eg(){return new Date().toISOString().substring(0,10)}function W0(r,e=B0){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Tg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Tg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class q0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DT()?VT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await z0(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Tg(r){return qu(JSON.stringify({version:2,heartbeats:r})).length}function G0(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(r){So(new _s("platform-logger",e=>new o0(e),"PRIVATE")),So(new _s("heartbeat",e=>new H0(e),"PRIVATE")),Ai(Id,_g,r),Ai(Id,_g,"esm2020"),Ai("fire-js","")}K0("");function __(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q0=__,v_=new el("auth","Firebase",__());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Zd("@firebase/auth");function Y0(r,...e){Ku.logLevel<=Oe.WARN&&Ku.warn(`Auth (${Vo}): ${r}`,...e)}function Lu(r,...e){Ku.logLevel<=Oe.ERROR&&Ku.error(`Auth (${Vo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(r,...e){throw rf(r,...e)}function Dn(r,...e){return rf(r,...e)}function nf(r,e,t){const s={...Q0(),[e]:t};return new el("auth","Firebase",s).create(e,{appName:r.name})}function ds(r){return nf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function X0(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ar(r,"argument-error"),nf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return v_.create(r,...e)}function Se(r,e,...t){if(!r)throw rf(e,...t)}function xr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Lu(e),new Error(e)}function Mr(r,e){r||xr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function J0(){return Ig()==="http:"||Ig()==="https:"}function Ig(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J0()||RT()||"connection"in navigator)?navigator.onLine:!0}function e1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mr(t>e,"Short delay should be less than long delay!"),this.isMobile=AT()||PT()}get(){return Z0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(r,e){Mr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],r1=new nl(3e4,6e4);function of(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Oo(r,e,t,s,o={}){return E_(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const m=tl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:g,...l};return CT()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Do(r.emulatorConfig.host)&&(_.credentials="include"),w_.fetch()(await T_(r,r.config.apiHost,t,m),_)})}async function E_(r,e,t){r._canInitEmulator=!1;const s={...t1,...e};try{const o=new s1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Cu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Cu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Cu(r,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw nf(r,E,_);ar(r,E)}}catch(o){if(o instanceof Fr)throw o;ar(r,"network-request-failed",{message:String(o)})}}async function i1(r,e,t,s,o={}){const l=await Oo(r,e,t,s,o);return"mfaPendingCredential"in l&&ar(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function T_(r,e,t,s){const o=`${e}${t}?${s}`,l=r,h=l.config.emulator?sf(r.config,o):`${r.config.apiScheme}://${o}`;return n1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class s1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Dn(this.auth,"network-request-failed")),r1.get())})}}function Cu(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Dn(r,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(r,e){return Oo(r,"POST","/v1/accounts:delete",e)}async function Qu(r,e){return Oo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a1(r,e=!1){const t=Wt(r),s=await t.getIdToken(e),o=af(s);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:La(hd(o.auth_time)),issuedAtTime:La(hd(o.iat)),expirationTime:La(hd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function hd(r){return Number(r)*1e3}function af(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{const o=o_(t);return o?JSON.parse(o):(Lu("Failed to decode base64 JWT payload"),null)}catch(o){return Lu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Sg(r){const e=af(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Fr&&l1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function l1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=La(this.lastLoginAt),this.creationTime=La(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(r){var S;const e=r.auth,t=await r.getIdToken(),s=await $a(r,Qu(e,{idToken:t}));Se(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const l=(S=o.providerUserInfo)!=null&&S.length?I_(o.providerUserInfo):[],h=h1(r.providerData,l),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),_=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Cd(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,E)}async function c1(r){const e=Wt(r);await Yu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h1(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function I_(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(r,e){const t=await E_(r,{},async()=>{const s=tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await T_(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&Do(r.emulatorConfig.host)&&(g.credentials="include"),w_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function f1(r,e){return Oo(r,"POST","/v2/accounts:revokeToken",of(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=Sg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await d1(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new yo;return s&&(Se(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Nn{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new u1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await $a(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return a1(this,e)}reload(){return c1(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Yu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(ds(this.auth));const e=await this.getIdToken();return await $a(this,o1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:S,emailVerified:P,isAnonymous:F,providerData:q,stsTokenManager:D}=t;Se(S&&D,e,"internal-error");const z=yo.fromJSON(this.name,D);Se(typeof S=="string",e,"internal-error"),_i(s,e.name),_i(o,e.name),Se(typeof P=="boolean",e,"internal-error"),Se(typeof F=="boolean",e,"internal-error"),_i(l,e.name),_i(h,e.name),_i(m,e.name),_i(g,e.name),_i(_,e.name),_i(E,e.name);const W=new Nn({uid:S,auth:e,email:o,emailVerified:P,displayName:s,isAnonymous:F,photoURL:h,phoneNumber:l,tenantId:m,stsTokenManager:z,createdAt:_,lastLoginAt:E});return q&&Array.isArray(q)&&(W.providerData=q.map(J=>({...J}))),g&&(W._redirectEventId=g),W}static async _fromIdTokenResponse(e,t,s=!1){const o=new yo;o.updateFromServerResponse(t);const l=new Nn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Yu(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?I_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new yo;m.updateFromIdToken(s);const g=new Nn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Cd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=new Map;function Dr(r){Mr(r instanceof Function,"Expected a class definition");let e=Ag.get(r);return e?(Mr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ag.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}S_.type="NONE";const kg=S_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(r,e,t){return`firebase:${r}:${e}:${t}`}class _o{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=bu(this.userKey,o.apiKey,l),this.fullPersistenceKey=bu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qu(this.auth,{idToken:e}).catch(()=>{});return t?Nn._fromGetAccountInfoResponse(this.auth,t,e):null}return Nn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new _o(Dr(kg),e,s);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||Dr(kg);const h=bu(s,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const E=await _._get(h);if(E){let S;if(typeof E=="string"){const P=await Qu(e,{idToken:E}).catch(()=>{});if(!P)break;S=await Nn._fromGetAccountInfoResponse(e,P,E)}else S=Nn._fromJSON(e,E);_!==l&&(m=S),l=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new _o(l,e,s):(l=g[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(h)}catch{}})),new _o(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(R_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(A_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(N_(e))return"Blackberry";if(x_(e))return"Webos";if(k_(e))return"Safari";if((e.includes("chrome/")||C_(e))&&!e.includes("edge/"))return"Chrome";if(P_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function A_(r=Bt()){return/firefox\//i.test(r)}function k_(r=Bt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function C_(r=Bt()){return/crios\//i.test(r)}function R_(r=Bt()){return/iemobile/i.test(r)}function P_(r=Bt()){return/android/i.test(r)}function N_(r=Bt()){return/blackberry/i.test(r)}function x_(r=Bt()){return/webos/i.test(r)}function lf(r=Bt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function p1(r=Bt()){var e;return lf(r)&&!!((e=window.navigator)!=null&&e.standalone)}function m1(){return NT()&&document.documentMode===10}function D_(r=Bt()){return lf(r)||P_(r)||x_(r)||N_(r)||/windows phone/i.test(r)||R_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(r,e=[]){let t;switch(r){case"Browser":t=Cg(Bt());break;case"Worker":t=`${Cg(Bt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,m)=>{try{const g=e(l);h(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(r,e={}){return Oo(r,"GET","/v2/passwordPolicy",of(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=6;class v1{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rg(this),this.idTokenSubscription=new Rg(this),this.beforeStateQueue=new g1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dr(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qu(this,{idToken:e}),s=await Nn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Pn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=e1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(ds(this));const t=e?Wt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y1(this),t=new v1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new el("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await f1(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Dr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[Dr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Y0(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function pc(r){return Wt(r)}class Rg{constructor(e){this.auth=e,this.observer=null,this.addObserver=FT(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function E1(r){uf=r}function T1(r){return uf.loadJS(r)}function I1(){return uf.gapiScript}function S1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(r,e){const t=tf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ys(l,e??{}))return o;ar(o,"already-initialized")}return t.initialize({options:e})}function k1(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Dr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function C1(r,e,t){const s=pc(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=O_(e),{host:h,port:m}=R1(e),g=m===null?"":`:${m}`,_={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(ys(_,s.config.emulator)&&ys(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Do(h)?(c_(`${l}//${h}${g}`),h_("Auth",!0)):P1()}function O_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function R1(r){const e=O_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Pg(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:Pg(h)}}}function Pg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function P1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xr("not implemented")}_getIdTokenResponse(e){return xr("not implemented")}_linkToIdToken(e,t){return xr("not implemented")}_getReauthenticationResolver(e){return xr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(r,e){return i1(r,"POST","/v1/accounts:signInWithIdp",of(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="http://localhost";class vs extends M_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new vs(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return vo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,vo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vo(e,t)}buildRequest(){const e={requestUri:N1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends cf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends rl{constructor(){super("facebook.com")}static credential(e){return vs._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vs._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Nr.credential(t,s)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends rl{constructor(){super("github.com")}static credential(e){return vs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends rl{constructor(){super("twitter.com")}static credential(e,t){return vs._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ei.credential(t,s)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Nn._fromIdTokenResponse(e,s,o),h=Ng(s);return new Ao({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Ng(s);return new Ao({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Ng(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends Fr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Xu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Xu(e,t,s,o)}}function L_(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Xu._fromErrorAndOperation(r,l,e,s):l})}async function x1(r,e,t=!1){const s=await $a(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ao._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(r,e,t=!1){const{auth:s}=r;if(Pn(s.app))return Promise.reject(ds(s));const o="reauthenticate";try{const l=await $a(r,L_(s,o,e,r),t);Se(l.idToken,s,"internal-error");const h=af(l.idToken);Se(h,s,"internal-error");const{sub:m}=h;return Se(r.uid===m,s,"user-mismatch"),Ao._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ar(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(r,e,t=!1){if(Pn(r.app))return Promise.reject(ds(r));const s="signIn",o=await L_(r,s,e),l=await Ao._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}function O1(r,e,t,s){return Wt(r).onIdTokenChanged(e,t,s)}function M1(r,e,t){return Wt(r).beforeAuthStateChanged(e,t)}function L1(r,e,t,s){return Wt(r).onAuthStateChanged(e,t,s)}function b1(r){return Wt(r).signOut()}const Ju="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ju,"1"),this.storage.removeItem(Ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=1e3,j1=10;class F_ extends b_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);m1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,j1):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},F1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}F_.type="LOCAL";const U1=F_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends b_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}j_.type="SESSION";const U_=j_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new mc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,l)),g=await z1(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,g)=>{const _=hf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(S){const P=S;if(P.data.eventId===_)switch(P.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(P.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(){return window}function $1(r){tr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}async function H1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function q1(){return z_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="firebaseLocalStorageDb",G1=1,Zu="firebaseLocalStorage",$_="fbase_key";class il{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gc(r,e){return r.transaction([Zu],e?"readwrite":"readonly").objectStore(Zu)}function K1(){const r=indexedDB.deleteDatabase(B_);return new il(r).toPromise()}function Rd(){const r=indexedDB.open(B_,G1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Zu,{keyPath:$_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Zu)?e(s):(s.close(),await K1(),e(await Rd()))})})}async function xg(r,e,t){const s=gc(r,!0).put({[$_]:e,value:t});return new il(s).toPromise()}async function Q1(r,e){const t=gc(r,!1).get(e),s=await new il(t).toPromise();return s===void 0?null:s.value}function Dg(r,e){const t=gc(r,!0).delete(e);return new il(t).toPromise()}const Y1=800,X1=3;class H_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>X1)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mc._getInstance(q1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await H1(),!this.activeServiceWorker)return;this.sender=new B1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rd();return await xg(e,Ju,"1"),await Dg(e,Ju),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>xg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>Q1(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=gc(o,!1).getAll();return new il(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Y1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H_.type="LOCAL";const J1=H_;new nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(r,e){return e?Dr(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends M_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Z1(r){return V1(r.auth,new df(r),r.bypassAuthState)}function eI(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),D1(t,new df(r),r.bypassAuthState)}async function tI(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),x1(t,new df(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z1;case"linkViaPopup":case"linkViaRedirect":return tI;case"reauthViaPopup":case"reauthViaRedirect":return eI;default:ar(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new nl(2e3,1e4);async function rI(r,e,t){if(Pn(r.app))return Promise.reject(Dn(r,"operation-not-supported-in-this-environment"));const s=pc(r);X0(r,e,cf);const o=W_(s,t);return new cs(s,"signInViaPopup",e,o).executeNotNull()}class cs extends q_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,cs.currentPopupAction&&cs.currentPopupAction.cancel(),cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nI.get())};e()}}cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="pendingRedirect",Fu=new Map;class sI extends q_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Fu.get(this.auth._key());if(!e){try{const s=await oI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Fu.set(this.auth._key(),e)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oI(r,e){const t=uI(e),s=lI(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function aI(r,e){Fu.set(r._key(),e)}function lI(r){return Dr(r._redirectPersistence)}function uI(r){return bu(iI,r.config.apiKey,r.name)}async function cI(r,e,t=!1){if(Pn(r.app))return Promise.reject(ds(r));const s=pc(r),o=W_(s,e),h=await new sI(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=600*1e3;class dI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!G_(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Dn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vg(e))}saveEventToCache(e){this.cachedEventUids.add(Vg(e)),this.lastProcessedEventTime=Date.now()}}function Vg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function G_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(r,e={}){return Oo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gI=/^https?/;async function yI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await pI(r);for(const t of e)try{if(_I(t))return}catch{}ar(r,"unauthorized-domain")}function _I(r){const e=kd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!gI.test(t))return!1;if(mI.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new nl(3e4,6e4);function Og(){const r=tr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function wI(r){return new Promise((e,t)=>{var o,l,h;function s(){Og(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Og(),t(Dn(r,"network-request-failed"))},timeout:vI.get()})}if((l=(o=tr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=tr().gapi)!=null&&h.load)s();else{const m=S1("iframefcb");return tr()[m]=()=>{gapi.load?s():t(Dn(r,"network-request-failed"))},T1(`${I1()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw ju=null,e})}let ju=null;function EI(r){return ju=ju||wI(r),ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new nl(5e3,15e3),II="__/auth/iframe",SI="emulator/auth/iframe",AI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CI(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?sf(e,SI):`https://${r.config.authDomain}/${II}`,s={apiKey:e.apiKey,appName:r.name,v:Vo},o=kI.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${tl(s).slice(1)}`}async function RI(r){const e=await EI(r),t=tr().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:CI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AI,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Dn(r,"network-request-failed"),m=tr().setTimeout(()=>{l(h)},TI.get());function g(){tr().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NI=500,xI=600,DI="_blank",VI="http://localhost";class Mg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OI(r,e,t,s=NI,o=xI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...PI,width:s.toString(),height:o.toString(),top:l,left:h},_=Bt().toLowerCase();t&&(m=C_(_)?DI:t),A_(_)&&(e=e||VI,g.scrollbars="yes");const E=Object.entries(g).reduce((P,[F,q])=>`${P}${F}=${q},`,"");if(p1(_)&&m!=="_self")return MI(e||"",m),new Mg(null);const S=window.open(e||"",m,E);Se(S,r,"popup-blocked");try{S.focus()}catch{}return new Mg(S)}function MI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="__/auth/handler",bI="emulator/auth/handler",FI=encodeURIComponent("fac");async function Lg(r,e,t,s,o,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Vo,eventId:o};if(e instanceof cf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",bT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))h[E]=S}if(e instanceof rl){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),_=g?`#${FI}=${encodeURIComponent(g)}`:"";return`${jI(r)}?${tl(m).slice(1)}${_}`}function jI({config:r}){return r.emulator?sf(r,bI):`https://${r.authDomain}/${LI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="webStorageSupport";class UI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U_,this._completeRedirectFn=cI,this._overrideRedirectResult=aI}async _openPopup(e,t,s,o){var h;Mr((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Lg(e,t,s,kd(),o);return OI(e,l,hf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await Lg(e,t,s,kd(),o);return $1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Mr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await RI(e),s=new dI(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dd,{type:dd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[dd];l!==void 0&&t(!!l),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return D_()||k_()||lf()}}const zI=UI;var bg="@firebase/auth",Fg="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HI(r){So(new _s("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V_(r)},_=new w1(s,o,l,g);return k1(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),So(new _s("auth-internal",e=>{const t=pc(e.getProvider("auth").getImmediate());return(s=>new BI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(bg,Fg,$I(r)),Ai(bg,Fg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=300,qI=u_("authIdTokenMaxAge")||WI;let jg=null;const GI=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>qI)return;const o=t==null?void 0:t.token;jg!==o&&(jg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function KI(r=m_()){const e=tf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=A1(r,{popupRedirectResolver:zI,persistence:[J1,U1,U_]}),s=u_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=GI(l.toString());M1(t,h,()=>h(t.currentUser)),O1(t,m=>h(m))}}const o=a_("auth");return o&&C1(t,`http://${o}`),t}function QI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}E1({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Dn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",QI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HI("Browser");var YI="firebase",XI="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(YI,XI,"app");var Ug=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,K_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function R(){}R.prototype=A.prototype,N.F=A.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(O,k,V){for(var T=Array(arguments.length-2),we=2;we<arguments.length;we++)T[we-2]=arguments[we];return A.prototype[k].apply(O,T)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,A,R){R||(R=0);const O=Array(16);if(typeof A=="string")for(var k=0;k<16;++k)O[k]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(k=0;k<16;++k)O[k]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=N.g[0],R=N.g[1],k=N.g[2];let V=N.g[3],T;T=A+(V^R&(k^V))+O[0]+3614090360&4294967295,A=R+(T<<7&4294967295|T>>>25),T=V+(k^A&(R^k))+O[1]+3905402710&4294967295,V=A+(T<<12&4294967295|T>>>20),T=k+(R^V&(A^R))+O[2]+606105819&4294967295,k=V+(T<<17&4294967295|T>>>15),T=R+(A^k&(V^A))+O[3]+3250441966&4294967295,R=k+(T<<22&4294967295|T>>>10),T=A+(V^R&(k^V))+O[4]+4118548399&4294967295,A=R+(T<<7&4294967295|T>>>25),T=V+(k^A&(R^k))+O[5]+1200080426&4294967295,V=A+(T<<12&4294967295|T>>>20),T=k+(R^V&(A^R))+O[6]+2821735955&4294967295,k=V+(T<<17&4294967295|T>>>15),T=R+(A^k&(V^A))+O[7]+4249261313&4294967295,R=k+(T<<22&4294967295|T>>>10),T=A+(V^R&(k^V))+O[8]+1770035416&4294967295,A=R+(T<<7&4294967295|T>>>25),T=V+(k^A&(R^k))+O[9]+2336552879&4294967295,V=A+(T<<12&4294967295|T>>>20),T=k+(R^V&(A^R))+O[10]+4294925233&4294967295,k=V+(T<<17&4294967295|T>>>15),T=R+(A^k&(V^A))+O[11]+2304563134&4294967295,R=k+(T<<22&4294967295|T>>>10),T=A+(V^R&(k^V))+O[12]+1804603682&4294967295,A=R+(T<<7&4294967295|T>>>25),T=V+(k^A&(R^k))+O[13]+4254626195&4294967295,V=A+(T<<12&4294967295|T>>>20),T=k+(R^V&(A^R))+O[14]+2792965006&4294967295,k=V+(T<<17&4294967295|T>>>15),T=R+(A^k&(V^A))+O[15]+1236535329&4294967295,R=k+(T<<22&4294967295|T>>>10),T=A+(k^V&(R^k))+O[1]+4129170786&4294967295,A=R+(T<<5&4294967295|T>>>27),T=V+(R^k&(A^R))+O[6]+3225465664&4294967295,V=A+(T<<9&4294967295|T>>>23),T=k+(A^R&(V^A))+O[11]+643717713&4294967295,k=V+(T<<14&4294967295|T>>>18),T=R+(V^A&(k^V))+O[0]+3921069994&4294967295,R=k+(T<<20&4294967295|T>>>12),T=A+(k^V&(R^k))+O[5]+3593408605&4294967295,A=R+(T<<5&4294967295|T>>>27),T=V+(R^k&(A^R))+O[10]+38016083&4294967295,V=A+(T<<9&4294967295|T>>>23),T=k+(A^R&(V^A))+O[15]+3634488961&4294967295,k=V+(T<<14&4294967295|T>>>18),T=R+(V^A&(k^V))+O[4]+3889429448&4294967295,R=k+(T<<20&4294967295|T>>>12),T=A+(k^V&(R^k))+O[9]+568446438&4294967295,A=R+(T<<5&4294967295|T>>>27),T=V+(R^k&(A^R))+O[14]+3275163606&4294967295,V=A+(T<<9&4294967295|T>>>23),T=k+(A^R&(V^A))+O[3]+4107603335&4294967295,k=V+(T<<14&4294967295|T>>>18),T=R+(V^A&(k^V))+O[8]+1163531501&4294967295,R=k+(T<<20&4294967295|T>>>12),T=A+(k^V&(R^k))+O[13]+2850285829&4294967295,A=R+(T<<5&4294967295|T>>>27),T=V+(R^k&(A^R))+O[2]+4243563512&4294967295,V=A+(T<<9&4294967295|T>>>23),T=k+(A^R&(V^A))+O[7]+1735328473&4294967295,k=V+(T<<14&4294967295|T>>>18),T=R+(V^A&(k^V))+O[12]+2368359562&4294967295,R=k+(T<<20&4294967295|T>>>12),T=A+(R^k^V)+O[5]+4294588738&4294967295,A=R+(T<<4&4294967295|T>>>28),T=V+(A^R^k)+O[8]+2272392833&4294967295,V=A+(T<<11&4294967295|T>>>21),T=k+(V^A^R)+O[11]+1839030562&4294967295,k=V+(T<<16&4294967295|T>>>16),T=R+(k^V^A)+O[14]+4259657740&4294967295,R=k+(T<<23&4294967295|T>>>9),T=A+(R^k^V)+O[1]+2763975236&4294967295,A=R+(T<<4&4294967295|T>>>28),T=V+(A^R^k)+O[4]+1272893353&4294967295,V=A+(T<<11&4294967295|T>>>21),T=k+(V^A^R)+O[7]+4139469664&4294967295,k=V+(T<<16&4294967295|T>>>16),T=R+(k^V^A)+O[10]+3200236656&4294967295,R=k+(T<<23&4294967295|T>>>9),T=A+(R^k^V)+O[13]+681279174&4294967295,A=R+(T<<4&4294967295|T>>>28),T=V+(A^R^k)+O[0]+3936430074&4294967295,V=A+(T<<11&4294967295|T>>>21),T=k+(V^A^R)+O[3]+3572445317&4294967295,k=V+(T<<16&4294967295|T>>>16),T=R+(k^V^A)+O[6]+76029189&4294967295,R=k+(T<<23&4294967295|T>>>9),T=A+(R^k^V)+O[9]+3654602809&4294967295,A=R+(T<<4&4294967295|T>>>28),T=V+(A^R^k)+O[12]+3873151461&4294967295,V=A+(T<<11&4294967295|T>>>21),T=k+(V^A^R)+O[15]+530742520&4294967295,k=V+(T<<16&4294967295|T>>>16),T=R+(k^V^A)+O[2]+3299628645&4294967295,R=k+(T<<23&4294967295|T>>>9),T=A+(k^(R|~V))+O[0]+4096336452&4294967295,A=R+(T<<6&4294967295|T>>>26),T=V+(R^(A|~k))+O[7]+1126891415&4294967295,V=A+(T<<10&4294967295|T>>>22),T=k+(A^(V|~R))+O[14]+2878612391&4294967295,k=V+(T<<15&4294967295|T>>>17),T=R+(V^(k|~A))+O[5]+4237533241&4294967295,R=k+(T<<21&4294967295|T>>>11),T=A+(k^(R|~V))+O[12]+1700485571&4294967295,A=R+(T<<6&4294967295|T>>>26),T=V+(R^(A|~k))+O[3]+2399980690&4294967295,V=A+(T<<10&4294967295|T>>>22),T=k+(A^(V|~R))+O[10]+4293915773&4294967295,k=V+(T<<15&4294967295|T>>>17),T=R+(V^(k|~A))+O[1]+2240044497&4294967295,R=k+(T<<21&4294967295|T>>>11),T=A+(k^(R|~V))+O[8]+1873313359&4294967295,A=R+(T<<6&4294967295|T>>>26),T=V+(R^(A|~k))+O[15]+4264355552&4294967295,V=A+(T<<10&4294967295|T>>>22),T=k+(A^(V|~R))+O[6]+2734768916&4294967295,k=V+(T<<15&4294967295|T>>>17),T=R+(V^(k|~A))+O[13]+1309151649&4294967295,R=k+(T<<21&4294967295|T>>>11),T=A+(k^(R|~V))+O[4]+4149444226&4294967295,A=R+(T<<6&4294967295|T>>>26),T=V+(R^(A|~k))+O[11]+3174756917&4294967295,V=A+(T<<10&4294967295|T>>>22),T=k+(A^(V|~R))+O[2]+718787259&4294967295,k=V+(T<<15&4294967295|T>>>17),T=R+(V^(k|~A))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(k+(T<<21&4294967295|T>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+V&4294967295}s.prototype.v=function(N,A){A===void 0&&(A=N.length);const R=A-this.blockSize,O=this.C;let k=this.h,V=0;for(;V<A;){if(k==0)for(;V<=R;)o(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<A;)if(O[k++]=N.charCodeAt(V++),k==this.blockSize){o(this,O),k=0;break}}else for(;V<A;)if(O[k++]=N[V++],k==this.blockSize){o(this,O),k=0;break}}this.h=k,this.o+=A},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;A=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=A&255,A/=256;for(this.v(N),N=Array(16),A=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)N[A++]=this.g[R]>>>O&255;return N};function l(N,A){var R=m;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=A(N)}function h(N,A){this.h=A;const R=[];let O=!0;for(let k=N.length-1;k>=0;k--){const V=N[k]|0;O&&V==A||(R[k]=V,O=!1)}this.g=R}var m={};function g(N){return-128<=N&&N<128?l(N,function(A){return new h([A|0],A<0?-1:0)}):new h([N|0],N<0?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return S;if(N<0)return z(_(-N));const A=[];let R=1;for(let O=0;N>=R;O++)A[O]=N/R|0,R*=4294967296;return new h(A,0)}function E(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return z(E(N.substring(1),A));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=_(Math.pow(A,8));let O=S;for(let V=0;V<N.length;V+=8){var k=Math.min(8,N.length-V);const T=parseInt(N.substring(V,V+k),A);k<8?(k=_(Math.pow(A,k)),O=O.j(k).add(_(T))):(O=O.j(R),O=O.add(_(T)))}return O}var S=g(0),P=g(1),F=g(16777216);r=h.prototype,r.m=function(){if(D(this))return-z(this).m();let N=0,A=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);N+=(O>=0?O:4294967296+O)*A,A*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(q(this))return"0";if(D(this))return"-"+z(this).toString(N);const A=_(Math.pow(N,6));var R=this;let O="";for(;;){const k=G(R,A).g;R=W(R,k.j(A));let V=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=k,q(R))return V+O;for(;V.length<6;)V="0"+V;O=V+O}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function q(N){if(N.h!=0)return!1;for(let A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function D(N){return N.h==-1}r.l=function(N){return N=W(this,N),D(N)?-1:q(N)?0:1};function z(N){const A=N.g.length,R=[];for(let O=0;O<A;O++)R[O]=~N.g[O];return new h(R,~N.h).add(P)}r.abs=function(){return D(this)?z(this):this},r.add=function(N){const A=Math.max(this.g.length,N.g.length),R=[];let O=0;for(let k=0;k<=A;k++){let V=O+(this.i(k)&65535)+(N.i(k)&65535),T=(V>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);O=T>>>16,V&=65535,T&=65535,R[k]=T<<16|V}return new h(R,R[R.length-1]&-2147483648?-1:0)};function W(N,A){return N.add(z(A))}r.j=function(N){if(q(this)||q(N))return S;if(D(this))return D(N)?z(this).j(z(N)):z(z(this).j(N));if(D(N))return z(this.j(z(N)));if(this.l(F)<0&&N.l(F)<0)return _(this.m()*N.m());const A=this.g.length+N.g.length,R=[];for(var O=0;O<2*A;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let k=0;k<N.g.length;k++){const V=this.i(O)>>>16,T=this.i(O)&65535,we=N.i(k)>>>16,Ne=N.i(k)&65535;R[2*O+2*k]+=T*Ne,J(R,2*O+2*k),R[2*O+2*k+1]+=V*Ne,J(R,2*O+2*k+1),R[2*O+2*k+1]+=T*we,J(R,2*O+2*k+1),R[2*O+2*k+2]+=V*we,J(R,2*O+2*k+2)}for(N=0;N<A;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=A;N<2*A;N++)R[N]=0;return new h(R,0)};function J(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function Y(N,A){this.g=N,this.h=A}function G(N,A){if(q(A))throw Error("division by zero");if(q(N))return new Y(S,S);if(D(N))return A=G(z(N),A),new Y(z(A.g),z(A.h));if(D(A))return A=G(N,z(A)),new Y(z(A.g),A.h);if(N.g.length>30){if(D(N)||D(A))throw Error("slowDivide_ only works with positive integers.");for(var R=P,O=A;O.l(N)<=0;)R=oe(R),O=oe(O);var k=se(R,1),V=se(O,1);for(O=se(O,2),R=se(R,2);!q(O);){var T=V.add(O);T.l(N)<=0&&(k=k.add(R),V=T),O=se(O,1),R=se(R,1)}return A=W(N,k.j(A)),new Y(k,A)}for(k=S;N.l(A)>=0;){for(R=Math.max(1,Math.floor(N.m()/A.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),V=_(R),T=V.j(A);D(T)||T.l(N)>0;)R-=O,V=_(R),T=V.j(A);q(V)&&(V=P),k=k.add(V),N=W(N,T)}return new Y(k,N)}r.B=function(N){return G(this,N).h},r.and=function(N){const A=Math.max(this.g.length,N.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)&N.i(O);return new h(R,this.h&N.h)},r.or=function(N){const A=Math.max(this.g.length,N.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)|N.i(O);return new h(R,this.h|N.h)},r.xor=function(N){const A=Math.max(this.g.length,N.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)^N.i(O);return new h(R,this.h^N.h)};function oe(N){const A=N.g.length+1,R=[];for(let O=0;O<A;O++)R[O]=N.i(O)<<1|N.i(O-1)>>>31;return new h(R,N.h)}function se(N,A){const R=A>>5;A%=32;const O=N.g.length-R,k=[];for(let V=0;V<O;V++)k[V]=A>0?N.i(V+R)>>>A|N.i(V+R+1)<<32-A:N.i(V+R);return new h(k,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,K_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,ki=h}).apply(typeof Ug<"u"?Ug:typeof self<"u"?self:typeof window<"u"?window:{});var Ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q_,xa,Y_,Uu,Pd,X_,J_,Z_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ru=="object"&&Ru];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function o(u,p){if(p)e:{var y=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var U=u[I];if(!(U in y))break e;y=y[U]}u=u[u.length-1],I=y[u],p=p(I),p!=I&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var y=[],I;for(I in p)Object.prototype.hasOwnProperty.call(p,I)&&y.push([I,p[I]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function g(u,p,y){return u.call.apply(u.bind,arguments)}function _(u,p,y){return _=g,_.apply(null,arguments)}function E(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function S(u,p){function y(){}y.prototype=p.prototype,u.Z=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(I,U,H){for(var ie=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)ie[Ce-2]=arguments[Ce];return p.prototype[U].apply(I,ie)}}var P=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function F(u){const p=u.length;if(p>0){const y=Array(p);for(let I=0;I<p;I++)y[I]=u[I];return y}return[]}function q(u,p){for(let I=1;I<arguments.length;I++){const U=arguments[I];var y=typeof U;if(y=y!="object"?y:U?Array.isArray(U)?"array":y:"null",y=="array"||y=="object"&&typeof U.length=="number"){y=u.length||0;const H=U.length||0;u.length=y+H;for(let ie=0;ie<H;ie++)u[y+ie]=U[ie]}else u.push(U)}}class D{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function z(u){h.setTimeout(()=>{throw u},0)}function W(){var u=N;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class J{constructor(){this.h=this.g=null}add(p,y){const I=Y.get();I.set(p,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Y=new D(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,se=!1,N=new J,A=()=>{const u=Promise.resolve(void 0);oe=()=>{u.then(R)}};function R(){for(var u;u=W();){try{u.h.call(u.g)}catch(y){z(y)}var p=Y;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}se=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};h.addEventListener("test",y,p),h.removeEventListener("test",y,p)}catch{}return u})();function T(u){return/^[\s\xa0]*$/.test(u)}function we(u,p){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}S(we,k),we.prototype.init=function(u,p){const y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),ze=0;function Pe(u,p,y,I,U){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!I,this.ha=U,this.key=++ze,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fe(u,p,y){for(const I in u)p.call(y,u[I],I,u)}function ae(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function L(u){const p={};for(const y in u)p[y]=u[y];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(u,p){let y,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(y in I)u[y]=I[y];for(let H=0;H<b.length;H++)y=b[H],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,p,y,I,U){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ie=xe(u,p,I,U);return ie>-1?(p=u[ie],y||(p.fa=!1)):(p=new Pe(p,this.src,H,!!I,U),p.fa=y,u.push(p)),p};function ke(u,p){const y=p.type;if(y in u.g){var I=u.g[y],U=Array.prototype.indexOf.call(I,p,void 0),H;(H=U>=0)&&Array.prototype.splice.call(I,U,1),H&&(re(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function xe(u,p,y,I){for(let U=0;U<u.length;++U){const H=u[U];if(!H.da&&H.listener==p&&H.capture==!!y&&H.ha==I)return U}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),be={};function qe(u,p,y,I,U){if(Array.isArray(p)){for(let H=0;H<p.length;H++)qe(u,p[H],y,I,U);return null}return y=Mi(y),u&&u[Ne]?u.J(p,y,m(I)?!!I.capture:!1,U):Tt(u,p,y,!1,I,U)}function Tt(u,p,y,I,U,H){if(!p)throw Error("Invalid event type");const ie=m(U)?!!U.capture:!!U;let Ce=zr(u);if(Ce||(u[Be]=Ce=new Te(u)),y=Ce.add(p,y,I,ie,H),y.proxy)return y;if(I=jr(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)V||(U=ie),U===void 0&&(U=!1),u.addEventListener(p.toString(),I,U);else if(u.attachEvent)u.attachEvent(Ur(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function jr(){function u(y){return p.call(u.src,u.listener,y)}const p=ks;return u}function Oi(u,p,y,I,U){if(Array.isArray(p))for(var H=0;H<p.length;H++)Oi(u,p[H],y,I,U);else I=m(I)?!!I.capture:!!I,y=Mi(y),u&&u[Ne]?(u=u.i,H=String(p).toString(),H in u.g&&(p=u.g[H],y=xe(p,y,I,U),y>-1&&(re(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete u.g[H],u.h--)))):u&&(u=zr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=xe(p,y,I,U)),(y=u>-1?p[u]:null)&&On(y))}function On(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Ne])ke(p.i,u);else{var y=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(y,I,u.capture):p.detachEvent?p.detachEvent(Ur(y),I):p.addListener&&p.removeListener&&p.removeListener(I),(y=zr(p))?(ke(y,u),y.h==0&&(y.src=null,p[Be]=null)):re(u)}}}function Ur(u){return u in be?be[u]:be[u]="on"+u}function ks(u,p){if(u.da)u=!0;else{p=new we(p,this);const y=u.listener,I=u.ha||u.src;u.fa&&On(u),u=y.call(I,p)}return u}function zr(u){return u=u[Be],u instanceof Te?u:null}var hr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mi(u){return typeof u=="function"?u:(u[hr]||(u[hr]=function(p){return u.handleEvent(p)}),u[hr])}function ot(){O.call(this),this.i=new Te(this),this.M=this,this.G=null}S(ot,O),ot.prototype[Ne]=!0,ot.prototype.removeEventListener=function(u,p,y,I){Oi(this,u,p,y,I)};function Ve(u,p){var y,I=u.G;if(I)for(y=[];I;I=I.G)y.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new k(p,u);else if(p instanceof k)p.target=p.target||u;else{var U=p;p=new k(I,u),ye(p,U)}U=!0;let H,ie;if(y)for(ie=y.length-1;ie>=0;ie--)H=p.g=y[ie],U=qt(H,I,!0,p)&&U;if(H=p.g=u,U=qt(H,I,!0,p)&&U,U=qt(H,I,!1,p)&&U,y)for(ie=0;ie<y.length;ie++)H=p.g=y[ie],U=qt(H,I,!1,p)&&U}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const y=u.g[p];for(let I=0;I<y.length;I++)re(y[I]);delete u.g[p],u.h--}}this.G=null},ot.prototype.J=function(u,p,y,I){return this.i.add(String(u),p,!1,y,I)},ot.prototype.K=function(u,p,y,I){return this.i.add(String(u),p,!0,y,I)};function qt(u,p,y,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let U=!0;for(let H=0;H<p.length;++H){const ie=p[H];if(ie&&!ie.da&&ie.capture==y){const Ce=ie.listener,ct=ie.ha||ie.src;ie.fa&&ke(u.i,ie),U=Ce.call(ct,I)!==!1&&U}}return U&&!I.defaultPrevented}function Br(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(u,p||0)}function Li(u){u.g=Br(()=>{u.g=null,u.i&&(u.i=!1,Li(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class dl extends O{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Li(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(u){O.call(this),this.h=u,this.g={}}S($r,O);var Uo=[];function Cs(u){fe(u.g,function(p,y){this.g.hasOwnProperty(y)&&On(p)},u),u.g={}}$r.prototype.N=function(){$r.Z.N.call(this),Cs(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hr=h.JSON.stringify,fl=h.JSON.parse,bi=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Wr(){}function pl(){}var qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rs(){k.call(this,"d")}S(Rs,k);function zo(){k.call(this,"c")}S(zo,k);var wn={},Ps=null;function Gr(){return Ps=Ps||new ot}wn.Ia="serverreachability";function Ns(u){k.call(this,wn.Ia,u)}S(Ns,k);function dr(u){const p=Gr();Ve(p,new Ns(p))}wn.STAT_EVENT="statevent";function fr(u,p){k.call(this,wn.STAT_EVENT,u),this.stat=p}S(fr,k);function at(u){const p=Gr();Ve(p,new fr(p,u))}wn.Ja="timingevent";function Bo(u,p){k.call(this,wn.Ja,u),this.size=p}S(Bo,k);function Kr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Qr(){this.g=!0}Qr.prototype.ua=function(){this.g=!1};function ml(u,p,y,I,U,H){u.info(function(){if(u.g)if(H){var ie="",Ce=H.split("&");for(let Ge=0;Ge<Ce.length;Ge++){var ct=Ce[Ge].split("=");if(ct.length>1){const ft=ct[0];ct=ct[1];const on=ft.split("_");ie=on.length>=2&&on[1]=="type"?ie+(ft+"="+ct+"&"):ie+(ft+"=redacted&")}}}else ie=null;else ie=H;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+p+`
`+y+`
`+ie})}function gl(u,p,y,I,U,H,ie){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+p+`
`+y+`
`+H+" "+ie})}function Mn(u,p,y,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Fi(u,y)+(I?" "+I:"")})}function yl(u,p){u.info(function(){return"TIMEOUT: "+p})}Qr.prototype.info=function(){};function Fi(u,p){if(!u.g)return p;if(!p)return null;try{const H=JSON.parse(p);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var y=H[u];if(!(y.length<2)){var I=y[1];if(Array.isArray(I)&&!(I.length<1)){var U=I[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ie=1;ie<I.length;ie++)I[ie]=""}}}}return Hr(H)}catch{return p}}var Yr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_l;function pr(){}S(pr,Wr),pr.prototype.g=function(){return new XMLHttpRequest},_l=new pr;function Ln(u){return encodeURIComponent(String(u))}function xs(u){var p=1;u=u.split(":");const y=[];for(;p>0&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function cn(u,p,y,I){this.j=u,this.i=p,this.l=y,this.S=I||1,this.V=new $r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vl}function vl(){this.i=null,this.g="",this.h=!1}var wl={},$o={};function En(u,p,y){u.M=1,u.A=gr(hn(p)),u.u=y,u.R=!0,Ho(u,null)}function Ho(u,p){u.F=Date.now(),ji(u),u.B=hn(u.A);var y=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),ea(y.i,"t",I),u.C=0,y=u.j.L,u.h=new vl,u.g=Nl(u.j,y?p:null,!u.u),u.P>0&&(u.O=new dl(_(u.Y,u,u.g),u.P)),p=u.V,y=u.g,I=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Uo[0]=U.toString()),U=Uo);for(let H=0;H<U.length;H++){const ie=qe(y,U[H],I||p.handleEvent,!1,p.h||p);if(!ie)break;p.g[ie.key]=ie}p=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),dr(),ml(u.i,u.v,u.B,u.l,u.S,u.u)}cn.prototype.ba=function(u){u=u.target;const p=this.O;p&&$n(u)==3?p.j():this.Y(u)},cn.prototype.Y=function(u){try{if(u==this.g)e:{const Ce=$n(this.g),ct=this.g.ya(),Ge=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Rl(this.g)))){this.K||Ce!=4||ct==7||(ct==8||Ge<=0?dr(3):dr(2)),Ds(this);var p=this.g.ca();this.X=p;var y=El(this);if(this.o=p==200,gl(this.i,this.v,this.B,this.l,this.S,Ce,p),this.o){if(this.U&&!this.L){t:{if(this.g){var I,U=this.g;if((I=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(I)){var H=I;break t}}H=null}if(u=H)Mn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xe(this,u);else{this.o=!1,this.m=3,at(12),mr(this),Ui(this);break e}}if(this.R){u=!0;let ft;for(;!this.K&&this.C<y.length;)if(ft=Il(this,y),ft==$o){Ce==4&&(this.m=4,at(14),u=!1),Mn(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==wl){this.m=4,at(15),Mn(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Mn(this.i,this.l,ft,null),Xe(this,ft);if(Tl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||y.length!=0||this.h.h||(this.m=1,at(16),u=!1),this.o=this.o&&u,!u)Mn(this.i,this.l,y,"[Invalid Chunked Response]"),mr(this),Ui(this);else if(y.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Qi(ie),ie.P=!0,at(11))}}else Mn(this.i,this.l,y,null),Xe(this,y);Ce==4&&mr(this),this.o&&!this.K&&(Ce==4?Bs(this.j,this):(this.o=!1,ji(this)))}else na(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),mr(this),Ui(this)}}}catch{}finally{}};function El(u){if(!Tl(u))return u.g.la();const p=Rl(u.g);if(p==="")return"";let y="";const I=p.length,U=$n(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return mr(u),Ui(u),"";u.h.i=new h.TextDecoder}for(let H=0;H<I;H++)u.h.h=!0,y+=u.h.i.decode(p[H],{stream:!(U&&H==I-1)});return p.length=0,u.h.g+=y,u.C=0,u.h.g}function Tl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Il(u,p){var y=u.C,I=p.indexOf(`
`,y);return I==-1?$o:(y=Number(p.substring(y,I)),isNaN(y)?wl:(I+=1,I+y>p.length?$o:(p=p.slice(I,I+y),u.C=I+y,p)))}cn.prototype.cancel=function(){this.K=!0,mr(this)};function ji(u){u.T=Date.now()+u.H,Wo(u,u.H)}function Wo(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Kr(_(u.aa,u),p)}function Ds(u){u.D&&(h.clearTimeout(u.D),u.D=null)}cn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(yl(this.i,this.B),this.M!=2&&(dr(),at(17)),mr(this),this.m=2,Ui(this)):Wo(this,this.T-u)};function Ui(u){u.j.I==0||u.K||Bs(u.j,u)}function mr(u){Ds(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Cs(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Xe(u,p){try{var y=u.j;if(y.I!=0&&(y.g==u||Go(y.h,u))){if(!u.L&&Go(y.h,u)&&y.I==3){try{var I=y.Ba.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)zs(y),rn(y);else break e;qn(y),at(18)}}else y.xa=U[1],0<y.xa-y.K&&U[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Kr(_(y.Va,y),6e3));zi(y.h)<=1&&y.ta&&(y.ta=void 0)}else sn(y,11)}else if((u.L||y.g==u)&&zs(y),!T(p))for(U=y.Ba.g.parse(p),p=0;p<U.length;p++){let Ge=U[p];const ft=Ge[0];if(!(ft<=y.K))if(y.K=ft,Ge=Ge[1],y.I==2)if(Ge[0]=="c"){y.M=Ge[1],y.ba=Ge[2];const on=Ge[3];on!=null&&(y.ka=on,y.j.info("VER="+y.ka));const Er=Ge[4];Er!=null&&(y.za=Er,y.j.info("SVER="+y.za));const Gn=Ge[5];Gn!=null&&typeof Gn=="number"&&Gn>0&&(I=1.5*Gn,y.O=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const Kn=u.g;if(Kn){const Ws=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var H=I.h;H.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Os(H,H.h),H.h=null))}if(I.G){const sa=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;sa&&(I.wa=sa,He(I.J,I.G,sa))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),I=y;var ie=u;if(I.na=ia(I,I.L?I.ba:null,I.W),ie.L){Bi(I.h,ie);var Ce=ie,ct=I.O;ct&&(Ce.H=ct),Ce.D&&(Ds(Ce),ji(Ce)),I.g=ie}else Ot(I);y.i.length>0&&wr(y)}else Ge[0]!="stop"&&Ge[0]!="close"||sn(y,7);else y.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?sn(y,7):js(y):Ge[0]!="noop"&&y.l&&y.l.qa(Ge),y.A=0)}}dr(4)}catch{}}var Dc=class{constructor(u,p){this.g=u,this.map=p}};function Vs(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function zi(u){return u.h?1:u.g?u.g.size:0}function Go(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Os(u,p){u.g?u.g.add(p):u.h=p}function Bi(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Vs.prototype.cancel=function(){if(this.i=en(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function en(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.G);return p}return F(u.i)}var Sl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tn(u,p){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const I=u[y].indexOf("=");let U,H=null;I>=0?(U=u[y].substring(0,I),H=u[y].substring(I+1)):U=u[y],p(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function bn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof bn?(this.l=u.l,$i(this,u.j),this.o=u.o,this.g=u.g,Fn(this,u.u),this.h=u.h,Jr(this,ta(u.i)),this.m=u.m):u&&(p=String(u).match(Sl))?(this.l=!1,$i(this,p[1]||"",!0),this.o=Hi(p[2]||""),this.g=Hi(p[3]||"",!0),Fn(this,p[4]),this.h=Hi(p[5]||"",!0),Jr(this,p[6]||"",!0),this.m=Hi(p[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}bn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Wi(p,Qo,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Wi(p,Qo,!0),"@"),u.push(Ln(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Wi(y,y.charAt(0)=="/"?qi:Yo,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Wi(y,Xo)),u.join("")},bn.prototype.resolve=function(u){const p=hn(this);let y=!!u.j;y?$i(p,u.j):y=!!u.o,y?p.o=u.o:y=!!u.g,y?p.g=u.g:y=u.u!=null;var I=u.h;if(y)Fn(p,u.u);else if(y=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var U=p.h.lastIndexOf("/");U!=-1&&(I=p.h.slice(0,U+1)+I)}if(U=I,U==".."||U==".")I="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){I=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let ie=0;ie<U.length;){const Ce=U[ie++];Ce=="."?I&&ie==U.length&&H.push(""):Ce==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),I&&ie==U.length&&H.push("")):(H.push(Ce),I=!0)}I=H.join("/")}else I=U}return y?p.h=I:y=u.i.toString()!=="",y?Jr(p,ta(u.i)):y=!!u.m,y&&(p.m=u.m),p};function hn(u){return new bn(u)}function $i(u,p,y){u.j=y?Hi(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Fn(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Jr(u,p,y){p instanceof Fe?(u.i=p,Ls(u.i,u.l)):(y||(p=Wi(p,Vc)),u.i=new Fe(p,u.l))}function He(u,p,y){u.i.set(p,y)}function gr(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Hi(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Wi(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Ko),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ko(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qo=/[#\/\?@]/g,Yo=/[#\?:]/g,qi=/[#\?]/g,Vc=/[#\?@]/g,Xo=/#/g;function Fe(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function jn(u){u.g||(u.g=new Map,u.h=0,u.i&&tn(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=Fe.prototype,r.add=function(u,p){jn(this),this.i=null,u=Un(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function Jo(u,p){jn(u),p=Un(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ms(u,p){return jn(u),p=Un(u,p),u.g.has(p)}r.forEach=function(u,p){jn(this),this.g.forEach(function(y,I){y.forEach(function(U){u.call(p,U,I,this)},this)},this)};function Zo(u,p){jn(u);let y=[];if(typeof p=="string")Ms(u,p)&&(y=y.concat(u.g.get(Un(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)y=y.concat(u[p]);return y}r.set=function(u,p){return jn(this),this.i=null,u=Un(this,u),Ms(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=Zo(this,u),u.length>0?String(u[0]):p):p};function ea(u,p,y){Jo(u,p),y.length>0&&(u.i=null,u.g.set(Un(u,p),F(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let I=0;I<p.length;I++){var y=p[I];const U=Ln(y);y=Zo(this,y);for(let H=0;H<y.length;H++){let ie=U;y[H]!==""&&(ie+="="+Ln(y[H])),u.push(ie)}}return this.i=u.join("&")};function ta(u){const p=new Fe;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Un(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Ls(u,p){p&&!u.j&&(jn(u),u.i=null,u.g.forEach(function(y,I){const U=I.toLowerCase();I!=U&&(Jo(this,I),ea(this,U,y))},u)),u.j=p}function zn(u,p){const y=new Qr;if(h.Image){const I=new Image;I.onload=E(Ct,y,"TestLoadImage: loaded",!0,p,I),I.onerror=E(Ct,y,"TestLoadImage: error",!1,p,I),I.onabort=E(Ct,y,"TestLoadImage: abort",!1,p,I),I.ontimeout=E(Ct,y,"TestLoadImage: timeout",!1,p,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function Bn(u,p){const y=new Qr,I=new AbortController,U=setTimeout(()=>{I.abort(),Ct(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(H=>{clearTimeout(U),H.ok?Ct(y,"TestPingServer: ok",!0,p):Ct(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),Ct(y,"TestPingServer: error",!1,p)})}function Ct(u,p,y,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(y)}catch{}}function Gi(){this.g=new bi}function yr(u){this.i=u.Sb||null,this.h=u.ab||!1}S(yr,Wr),yr.prototype.g=function(){return new nn(this.i,this.h)};function nn(u,p){ot.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(nn,ot),r=nn.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Tn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Tn(this)),this.g&&(this.readyState=3,Tn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Al(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Al(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Zr(this):Tn(this),this.readyState==3&&Al(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Zr(this))},r.Na=function(u){this.g&&(this.response=u,Zr(this))},r.ga=function(){this.g&&Zr(this)};function Zr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Tn(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function Tn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(nn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function kl(u){let p="";return fe(u,function(y,I){p+=I,p+=":",p+=y,p+=`\r
`}),p}function bs(u,p,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=kl(y),typeof u=="string"?y!=null&&Ln(y):He(u,p,y))}function Ke(u){ot.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Ke,ot);var Cl=/^https?$/i,Oc=["POST","PUT"];r=Ke.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_l.g(),this.g.onreadystatechange=P(_(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(H){ei(this,H);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)y.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())y.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Oc,p,void 0)>=0)||I||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of y)this.g.setRequestHeader(H,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){ei(this,H)}};function ei(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,ti(u),vr(u)}function ti(u){u.A||(u.A=!0,Ve(u,"complete"),Ve(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ve(this,"complete"),Ve(this,"abort"),vr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vr(this,!0)),Ke.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?_r(this):this.Xa())},r.Xa=function(){_r(this)};function _r(u){if(u.h&&typeof l<"u"){if(u.v&&$n(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ve(u,"readystatechange"),$n(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var I;if(I=H===0){let ie=String(u.D).match(Sl)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),I=!Cl.test(ie?ie.toLowerCase():"")}y=I}if(y)Ve(u,"complete"),Ve(u,"success");else{u.o=6;try{var U=$n(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",ti(u)}}finally{vr(u)}}}}function vr(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,p||Ve(u,"ready");try{y.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function $n(u){return u.g?u.g.readyState:0}r.ca=function(){try{return $n(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),fl(p)}};function Rl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function na(u){const p={};u=(u.g&&$n(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(T(u[I]))continue;var y=xs(u[I]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=p[U]||[];p[U]=H,H.push(y)}ae(p,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hn(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function Fs(u){this.za=0,this.i=[],this.j=new Qr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hn("baseRetryDelayMs",5e3,u),this.Za=Hn("retryDelaySeedMs",1e4,u),this.Ta=Hn("forwardChannelMaxRetries",2,u),this.va=Hn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Vs(u&&u.concurrentRequestLimit),this.Ba=new Gi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Fs.prototype,r.ka=8,r.I=1,r.connect=function(u,p,y,I){at(0),this.W=u,this.H=p||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.J=ia(this,null,this.W),wr(this)};function js(u){if(Us(u),u.I==3){var p=u.V++,y=hn(u.J);if(He(y,"SID",u.M),He(y,"RID",p),He(y,"TYPE","terminate"),Wn(u,y),p=new cn(u,u.j,p),p.M=2,p.A=gr(hn(y)),y=!1,h.navigator&&h.navigator.sendBeacon)try{y=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&h.Image&&(new Image().src=p.A,y=!0),y||(p.g=Nl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),ji(p)}Yi(u)}function rn(u){u.g&&(Qi(u),u.g.cancel(),u.g=null)}function Us(u){rn(u),u.v&&(h.clearTimeout(u.v),u.v=null),zs(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function wr(u){if(!qo(u.h)&&!u.m){u.m=!0;var p=u.Ea;oe||A(),se||(oe(),se=!0),N.add(p,u),u.D=0}}function Pl(u,p){return zi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Kr(_(u.Ea,u,p),$s(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new cn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=L(H),ye(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=ra(this,U,p),y=hn(this.J),He(y,"RID",u),He(y,"CVER",22),this.G&&He(y,"X-HTTP-Session-Id",this.G),Wn(this,y),H&&(this.R?p="headers="+Ln(kl(H))+"&"+p:this.u&&bs(y,this.u,H)),Os(this.h,U),this.Ra&&He(y,"TYPE","init"),this.S?(He(y,"$req",p),He(y,"SID","null"),U.U=!0,En(U,y,null)):En(U,y,p),this.I=2}}else this.I==3&&(u?Ki(this,u):this.i.length==0||qo(this.h)||Ki(this))};function Ki(u,p){var y;p?y=p.l:y=u.V++;const I=hn(u.J);He(I,"SID",u.M),He(I,"RID",y),He(I,"AID",u.K),Wn(u,I),u.u&&u.o&&bs(I,u.u,u.o),y=new cn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),p&&(u.i=p.G.concat(u.i)),p=ra(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Os(u.h,y),En(y,I,p)}function Wn(u,p){u.H&&fe(u.H,function(y,I){He(p,I,y)}),u.l&&fe({},function(y,I){He(p,I,y)})}function ra(u,p,y){y=Math.min(u.i.length,y);const I=u.l?_(u.l.Ka,u.l,u):null;e:{var U=u.i;let Ce=-1;for(;;){const ct=["count="+y];Ce==-1?y>0?(Ce=U[0].g,ct.push("ofs="+Ce)):Ce=0:ct.push("ofs="+Ce);let Ge=!0;for(let ft=0;ft<y;ft++){var H=U[ft].g;const on=U[ft].map;if(H-=Ce,H<0)Ce=Math.max(0,U[ft].g-100),Ge=!1;else try{H="req"+H+"_"||"";try{var ie=on instanceof Map?on:Object.entries(on);for(const[Er,Gn]of ie){let Kn=Gn;m(Gn)&&(Kn=Hr(Gn)),ct.push(H+Er+"="+encodeURIComponent(Kn))}}catch(Er){throw ct.push(H+"type="+encodeURIComponent("_badmap")),Er}}catch{I&&I(on)}}if(Ge){ie=ct.join("&");break e}}ie=void 0}return u=u.i.splice(0,y),p.G=u,ie}function Ot(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;oe||A(),se||(oe(),se=!0),N.add(p,u),u.A=0}}function qn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Kr(_(u.Da,u),$s(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ni(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Kr(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),rn(this),ni(this))};function Qi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ni(u){u.g=new cn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=hn(u.na);He(p,"RID","rpc"),He(p,"SID",u.M),He(p,"AID",u.K),He(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(p,"TO",u.ia),He(p,"TYPE","xmlhttp"),Wn(u,p),u.u&&u.o&&bs(p,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=gr(hn(p)),y.u=null,y.R=!0,Ho(y,u)}r.Va=function(){this.C!=null&&(this.C=null,rn(this),qn(this),at(19))};function zs(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Bs(u,p){var y=null;if(u.g==p){zs(u),Qi(u),u.g=null;var I=2}else if(Go(u.h,p))y=p.G,Bi(u.h,p),I=1;else return;if(u.I!=0){if(p.o)if(I==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var U=u.D;I=Gr(),Ve(I,new Bo(I,y)),wr(u)}else Ot(u);else if(U=p.m,U==3||U==0&&p.X>0||!(I==1&&Pl(u,p)||I==2&&qn(u)))switch(y&&y.length>0&&(p=u.h,p.i=p.i.concat(y)),U){case 1:sn(u,5);break;case 4:sn(u,10);break;case 3:sn(u,6);break;default:sn(u,2)}}}function $s(u,p){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*p}function sn(u,p){if(u.j.info("Error code "+p),p==2){var y=_(u.bb,u),I=u.Ua;const U=!I;I=new bn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||$i(I,"https"),gr(I),U?zn(I.toString(),y):Bn(I.toString(),y)}else at(2);u.I=0,u.l&&u.l.pa(p),Yi(u),Us(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Yi(u){if(u.I=0,u.ja=[],u.l){const p=en(u.h);(p.length!=0||u.i.length!=0)&&(q(u.ja,p),q(u.ja,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.oa()}}function ia(u,p,y){var I=y instanceof bn?hn(y):new bn(y);if(I.g!="")p&&(I.g=p+"."+I.g),Fn(I,I.u);else{var U=h.location;I=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;const H=new bn(null);I&&$i(H,I),p&&(H.g=p),U&&Fn(H,U),y&&(H.h=y),I=H}return y=u.G,p=u.wa,y&&p&&He(I,y,p),He(I,"VER",u.ka),Wn(u,I),I}function Nl(u,p,y){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Ke(new yr({ab:y})):new Ke(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xl(){}r=xl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Hs(){}Hs.prototype.g=function(u,p){return new Rt(u,p)};function Rt(u,p){ot.call(this),this.g=new Fs(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!T(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!T(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ri(this)}S(Rt,ot),Rt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){js(this.g)},Rt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=Hr(u),u=y);p.i.push(new Dc(p.Ya++,u)),p.I==3&&wr(p)},Rt.prototype.N=function(){this.g.l=null,delete this.j,js(this.g),delete this.g,Rt.Z.N.call(this)};function Dl(u){Rs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}S(Dl,Rs);function Vl(){zo.call(this),this.status=1}S(Vl,zo);function ri(u){this.g=u}S(ri,xl),ri.prototype.ra=function(){Ve(this.g,"a")},ri.prototype.qa=function(u){Ve(this.g,new Dl(u))},ri.prototype.pa=function(u){Ve(this.g,new Vl)},ri.prototype.oa=function(){Ve(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,Z_=function(){return new Hs},J_=function(){return Gr()},X_=wn,Pd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,Uu=Yr,Xr.COMPLETE="complete",Y_=Xr,pl.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",ot.prototype.listen=ot.prototype.J,xa=pl,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,Q_=Ke}).apply(typeof Ru<"u"?Ru:typeof self<"u"?self:typeof window<"u"?window:{});const zg="@firebase/firestore",Bg="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new Zd("@firebase/firestore");function fo(){return ws.logLevel}function ue(r,...e){if(ws.logLevel<=Oe.DEBUG){const t=e.map(ff);ws.debug(`Firestore (${Mo}): ${r}`,...t)}}function Lr(r,...e){if(ws.logLevel<=Oe.ERROR){const t=e.map(ff);ws.error(`Firestore (${Mo}): ${r}`,...t)}}function ko(r,...e){if(ws.logLevel<=Oe.WARN){const t=e.map(ff);ws.warn(`Firestore (${Mo}): ${r}`,...t)}}function ff(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,ev(r,s,t)}function ev(r,e,t){let s=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Lr(s),new Error(s)}function We(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||ev(e,o,s)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Fr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ut.UNAUTHENTICATED)))}shutdown(){}}class ZI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class eS{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new fs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new fs,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new fs)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new tv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class tS{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nS{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new tS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ut.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $g{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const s=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $g(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $g(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=iS(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Me(r,e){return r<e?-1:r>e?1:0}function Nd(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return fd(o)===fd(l)?Me(o,l):fd(o)?1:-1}return Me(r.length,e.length)}const sS=55296,oS=57343;function fd(r){const e=r.charCodeAt(0);return e>=sS&&e<=oS}function Co(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="__name__";class Zn{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ee(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Zn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zn?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Zn.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const s=Zn.isNumericId(e),o=Zn.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Zn.extractNumericId(e).compare(Zn.extractNumericId(t)):Nd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}}class Ye extends Zn{construct(e,t,s){return new Ye(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const aS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Zn{construct(e,t,s){return new Dt(e,t,s)}static isValidIdentifier(e){return aS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hg}static keyField(){return new Dt([Hg])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ce(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(l(),o++)}if(l(),h)throw new ce(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Ye.fromString(e))}static fromName(e){return new ge(Ye.fromString(e).popFirst(5))}static empty(){return new ge(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(r,e,t){if(!t)throw new ce(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function lS(r,e,t,s){if(e===!0&&s===!0)throw new ce(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Wg(r){if(!ge.isDocumentKey(r))throw new ce(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function qg(r){if(ge.isDocumentKey(r))throw new ce(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function rv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function yc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee(12329,{type:typeof r})}function ps(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yc(r);throw new ce(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r,e){const t={typeString:r};return e&&(t.value=e),t}function sl(r,e){if(!rv(r))throw new ce(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ce(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=-62135596800,Kg=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Kg);return new et(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Gg)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kg}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sl(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:yt("string",et._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new et(0,0))}static max(){return new Ae(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=-1;function uS(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(s===1e9?new et(t+1,0):new et(t,s));return new Ri(o,ge.empty(),e)}function cS(r){return new Ri(r.readTime,r.key,Ha)}class Ri{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ri(Ae.min(),ge.empty(),Ha)}static max(){return new Ri(Ae.max(),ge.empty(),Ha)}}function hS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==dS)throw r;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,s)=>{t(e)}))}static reject(e){return new Q(((t,s)=>{s(e)}))}static waitFor(e){return new Q(((t,s)=>{let o=0,l=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=Q.resolve(!1);for(const s of e)t=t.next((o=>o?Q.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new Q(((s,o)=>{const l=e.length,h=new Array(l);let m=0;for(let g=0;g<l;g++){const _=g;t(e[_]).next((E=>{h[_]=E,++m,m===l&&s(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new Q(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function pS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function bo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_c.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=-1;function vc(r){return r==null}function ec(r){return r===0&&1/r==-1/0}function mS(r){return typeof r=="number"&&Number.isInteger(r)&&!ec(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="";function gS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Qg(e)),e=yS(r.get(t),e);return Qg(e)}function yS(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case iv:t+="";break;default:t+=l}}return t}function Qg(r){return r+iv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ts(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function sv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||xt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pu(this.root,e,this.comparator,!0)}}class Pu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??xt.RED,this.left=o??xt.EMPTY,this.right=l??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new xt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xg(this.data.getIterator())}getIteratorFrom(e){return new Xg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class Xg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new xn([])}unionWith(e){let t=new Et(Dt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ov("Invalid base64 string: "+l):l}})(e);return new Vt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const _S=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(r){if(We(!!r,39018),typeof r=="string"){let e=0;const t=_S.exec(r);if(We(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(r.seconds),nanos:dt(r.nanos)}}function dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ni(r){return typeof r=="string"?Vt.fromBase64String(r):Vt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="server_timestamp",lv="__type__",uv="__previous_value__",cv="__local_write_time__";function gf(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[lv])==null?void 0:s.stringValue)===av}function wc(r){const e=r.mapValue.fields[uv];return gf(e)?wc(e):e}function Wa(r){const e=Pi(r.mapValue.fields[cv].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t,s,o,l,h,m,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=E}}const tc="(default)";class qa{constructor(e,t){this.projectId=e,this.database=t||tc}static empty(){return new qa("","")}get isDefaultDatabase(){return this.database===tc}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="__type__",wS="__max__",Nu={mapValue:{}},dv="__vector__",nc="value";function xi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?gf(r)?4:TS(r)?9007199254740991:ES(r)?10:11:Ee(28295,{value:r})}function lr(r,e){if(r===e)return!0;const t=xi(r);if(t!==xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Wa(r).isEqual(Wa(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Pi(o.timestampValue),m=Pi(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ni(o.bytesValue).isEqual(Ni(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return dt(o.geoPointValue.latitude)===dt(l.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return dt(o.integerValue)===dt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=dt(o.doubleValue),m=dt(l.doubleValue);return h===m?ec(h)===ec(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return Co(r.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(Yg(h)!==Yg(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!lr(h[g],m[g])))return!1;return!0})(r,e);default:return Ee(52216,{left:r})}}function Ga(r,e){return(r.values||[]).find((t=>lr(t,e)))!==void 0}function Ro(r,e){if(r===e)return 0;const t=xi(r),s=xi(e);if(t!==s)return Me(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const m=dt(l.integerValue||l.doubleValue),g=dt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return Jg(r.timestampValue,e.timestampValue);case 4:return Jg(Wa(r),Wa(e));case 5:return Nd(r.stringValue,e.stringValue);case 6:return(function(l,h){const m=Ni(l),g=Ni(h);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const m=l.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=Me(m[_],g[_]);if(E!==0)return E}return Me(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const m=Me(dt(l.latitude),dt(h.latitude));return m!==0?m:Me(dt(l.longitude),dt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Zg(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var P,F,q,D;const m=l.fields||{},g=h.fields||{},_=(P=m[nc])==null?void 0:P.arrayValue,E=(F=g[nc])==null?void 0:F.arrayValue,S=Me(((q=_==null?void 0:_.values)==null?void 0:q.length)||0,((D=E==null?void 0:E.values)==null?void 0:D.length)||0);return S!==0?S:Zg(_,E)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Nu.mapValue&&h===Nu.mapValue)return 0;if(l===Nu.mapValue)return 1;if(h===Nu.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let S=0;S<g.length&&S<E.length;++S){const P=Nd(g[S],E[S]);if(P!==0)return P;const F=Ro(m[g[S]],_[E[S]]);if(F!==0)return F}return Me(g.length,E.length)})(r.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function Jg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=Pi(r),s=Pi(e),o=Me(t.seconds,s.seconds);return o!==0?o:Me(t.nanos,s.nanos)}function Zg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Ro(t[o],s[o]);if(l)return l}return Me(t.length,s.length)}function Po(r){return xd(r)}function xd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=Pi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ni(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ge.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=xd(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${xd(t.fields[h])}`;return o+"}"})(r.mapValue):Ee(61005,{value:r})}function zu(r){switch(xi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wc(r);return e?16+zu(e):16;case 5:return 2*r.stringValue.length;case 6:return Ni(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+zu(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ts(s.fields,((l,h)=>{o+=l.length+zu(h)})),o})(r.mapValue);default:throw Ee(13486,{value:r})}}function ey(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Dd(r){return!!r&&"integerValue"in r}function yf(r){return!!r&&"arrayValue"in r}function ty(r){return!!r&&"nullValue"in r}function ny(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Bu(r){return!!r&&"mapValue"in r}function ES(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[hv])==null?void 0:s.stringValue)===dv}function ba(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ts(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=ba(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ba(r.arrayValue.values[t]);return e}return{...r}}function TS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===wS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Bu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ba(t)}setAll(e){let t=Dt.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}h?s[m.lastSegment()]=ba(h):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Bu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Bu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ts(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new _n(ba(this.value))}}function fv(r){const e=[];return Ts(r.fields,((t,s)=>{const o=new Dt([t]);if(Bu(s)){const l=fv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t,s,o,l,h,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new zt(e,0,Ae.min(),Ae.min(),Ae.min(),_n.empty(),0)}static newFoundDocument(e,t,s,o){return new zt(e,1,t,Ae.min(),s,o,0)}static newNoDocument(e,t){return new zt(e,2,t,Ae.min(),Ae.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new zt(e,3,t,Ae.min(),Ae.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t){this.position=e,this.inclusive=t}}function ry(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ge.comparator(ge.fromName(h.referenceValue),t.key):s=Ro(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function iy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!lr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function IS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{}class gt extends pv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new AS(e,t,s):t==="array-contains"?new RS(e,s):t==="in"?new PS(e,s):t==="not-in"?new NS(e,s):t==="array-contains-any"?new xS(e,s):new gt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new kS(e,s):new CS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&xi(this.value)===xi(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends pv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Vn(e,t)}matches(e){return mv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mv(r){return r.op==="and"}function gv(r){return SS(r)&&mv(r)}function SS(r){for(const e of r.filters)if(e instanceof Vn)return!1;return!0}function Vd(r){if(r instanceof gt)return r.field.canonicalString()+r.op.toString()+Po(r.value);if(gv(r))return r.filters.map((e=>Vd(e))).join(",");{const e=r.filters.map((t=>Vd(t))).join(",");return`${r.op}(${e})`}}function yv(r,e){return r instanceof gt?(function(s,o){return o instanceof gt&&s.op===o.op&&s.field.isEqual(o.field)&&lr(s.value,o.value)})(r,e):r instanceof Vn?(function(s,o){return o instanceof Vn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,m)=>l&&yv(h,o.filters[m])),!0):!1})(r,e):void Ee(19439)}function _v(r){return r instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Po(t.value)}`})(r):r instanceof Vn?(function(t){return t.op.toString()+" {"+t.getFilters().map(_v).join(" ,")+"}"})(r):"Filter"}class AS extends gt{constructor(e,t,s){super(e,t,s),this.key=ge.fromName(s.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class kS extends gt{constructor(e,t){super(e,"in",t),this.keys=vv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class CS extends gt{constructor(e,t){super(e,"not-in",t),this.keys=vv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function vv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ge.fromName(s.referenceValue)))}class RS extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yf(t)&&Ga(t.arrayValue,this.value)}}class PS extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ga(this.value.arrayValue,t)}}class NS extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ga(this.value.arrayValue,t)}}class xS extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ga(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t=null,s=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Te=null}}function sy(r,e=null,t=[],s=[],o=null,l=null,h=null){return new DS(r,e,t,s,o,l,h)}function _f(r){const e=Re(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Vd(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),vc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Po(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Po(s))).join(",")),e.Te=t}return e.Te}function vf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!IS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!yv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!iy(r.startAt,e.startAt)&&iy(r.endAt,e.endAt)}function Od(r){return ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t=null,s=[],o=[],l=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VS(r,e,t,s,o,l,h,m){return new ol(r,e,t,s,o,l,h,m)}function wf(r){return new ol(r)}function oy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function wv(r){return r.collectionGroup!==null}function Fa(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Et(Dt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ic(l,s))})),t.has(Dt.keyField().canonicalString())||e.Ie.push(new ic(Dt.keyField(),s))}return e.Ie}function nr(r){const e=Re(r);return e.Ee||(e.Ee=OS(e,Fa(r))),e.Ee}function OS(r,e){if(r.limitType==="F")return sy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new ic(o.field,l)}));const t=r.endAt?new rc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new rc(r.startAt.position,r.startAt.inclusive):null;return sy(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Md(r,e){const t=r.filters.concat([e]);return new ol(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ld(r,e,t){return new ol(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ec(r,e){return vf(nr(r),nr(e))&&r.limitType===e.limitType}function Ev(r){return`${_f(nr(r))}|lt:${r.limitType}`}function po(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>_v(o))).join(", ")}]`),vc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Po(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Po(o))).join(",")),`Target(${s})`})(nr(r))}; limitType=${r.limitType})`}function Tc(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ge.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Fa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,g){const _=ry(h,m,g);return h.inclusive?_<=0:_<0})(s.startAt,Fa(s),o)||s.endAt&&!(function(h,m,g){const _=ry(h,m,g);return h.inclusive?_>=0:_>0})(s.endAt,Fa(s),o))})(r,e)}function MS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Tv(r){return(e,t)=>{let s=!1;for(const o of Fa(r)){const l=LS(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function LS(r,e,t){const s=r.field.isKeyField()?ge.comparator(e.key,t.key):(function(l,h,m){const g=h.data.field(l),_=m.data.field(l);return g!==null&&_!==null?Ro(g,_):Ee(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return sv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new st(ge.comparator);function br(){return bS}const Iv=new st(ge.comparator);function Da(...r){let e=Iv;for(const t of r)e=e.insert(t.key,t);return e}function Sv(r){let e=Iv;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function hs(){return ja()}function Av(){return ja()}function ja(){return new Is((r=>r.toString()),((r,e)=>r.isEqual(e)))}const FS=new st(ge.comparator),jS=new Et(ge.comparator);function Le(...r){let e=jS;for(const t of r)e=e.add(t);return e}const US=new Et(Me);function zS(){return US}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function kv(r){return{integerValue:""+r}}function BS(r,e){return mS(e)?kv(e):Ef(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(){this._=void 0}}function $S(r,e,t){return r instanceof sc?(function(o,l){const h={fields:{[lv]:{stringValue:av},[cv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&gf(l)&&(l=wc(l)),l&&(h.fields[uv]=l),{mapValue:h}})(t,e):r instanceof Ka?Rv(r,e):r instanceof Qa?Pv(r,e):(function(o,l){const h=Cv(o,l),m=ay(h)+ay(o.Ae);return Dd(h)&&Dd(o.Ae)?kv(m):Ef(o.serializer,m)})(r,e)}function HS(r,e,t){return r instanceof Ka?Rv(r,e):r instanceof Qa?Pv(r,e):t}function Cv(r,e){return r instanceof oc?(function(s){return Dd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class sc extends Ic{}class Ka extends Ic{constructor(e){super(),this.elements=e}}function Rv(r,e){const t=Nv(e);for(const s of r.elements)t.some((o=>lr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Qa extends Ic{constructor(e){super(),this.elements=e}}function Pv(r,e){let t=Nv(e);for(const s of r.elements)t=t.filter((o=>!lr(o,s)));return{arrayValue:{values:t}}}class oc extends Ic{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ay(r){return dt(r.integerValue||r.doubleValue)}function Nv(r){return yf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function WS(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Ka&&o instanceof Ka||s instanceof Qa&&o instanceof Qa?Co(s.elements,o.elements,lr):s instanceof oc&&o instanceof oc?lr(s.Ae,o.Ae):s instanceof sc&&o instanceof sc})(r.transform,e.transform)}class qS{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Sc{}function xv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Tf(r.key,rr.none()):new al(r.key,r.data,rr.none());{const t=r.data,s=_n.empty();let o=new Et(Dt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ss(r.key,s,new xn(o.toArray()),rr.none())}}function GS(r,e,t){r instanceof al?(function(o,l,h){const m=o.value.clone(),g=uy(o.fieldTransforms,l,h.transformResults);m.setAll(g),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Ss?(function(o,l,h){if(!$u(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=uy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(Dv(o)),g.setAll(m),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ua(r,e,t,s){return r instanceof al?(function(l,h,m,g){if(!$u(l.precondition,h))return m;const _=l.value.clone(),E=cy(l.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ss?(function(l,h,m,g){if(!$u(l.precondition,h))return m;const _=cy(l.fieldTransforms,g,h),E=h.data;return E.setAll(Dv(l)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((S=>S.field)))})(r,e,t,s):(function(l,h,m){return $u(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,t)}function KS(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=Cv(s.transform,o||null);l!=null&&(t===null&&(t=_n.empty()),t.set(s.field,l))}return t||null}function ly(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Co(s,o,((l,h)=>WS(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class al extends Sc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ss extends Sc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Dv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function uy(r,e,t){const s=new Map;We(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);s.set(l.field,HS(h,m,t[o]))}return s}function cy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,$S(l,h,e))}return s}class Tf extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QS extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&GS(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ua(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ua(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Av();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const g=xv(h,m);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,((t,s)=>ly(t,s)))&&Co(this.baseMutations,e.baseMutations,((t,s)=>ly(t,s)))}}class If{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return FS})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new If(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,je;function ZS(r){switch(r){case K.OK:return Ee(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ee(15467,{code:r})}}function Vv(r){if(r===void 0)return Lr("GRPC error has no .code"),K.UNKNOWN;switch(r){case mt.OK:return K.OK;case mt.CANCELLED:return K.CANCELLED;case mt.UNKNOWN:return K.UNKNOWN;case mt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case mt.INTERNAL:return K.INTERNAL;case mt.UNAVAILABLE:return K.UNAVAILABLE;case mt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case mt.NOT_FOUND:return K.NOT_FOUND;case mt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case mt.ABORTED:return K.ABORTED;case mt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case mt.DATA_LOSS:return K.DATA_LOSS;default:return Ee(39323,{code:r})}}(je=mt||(mt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=new ki([4294967295,4294967295],0);function hy(r){const e=eA().encode(r),t=new K_;return t.update(e),new Uint8Array(t.digest())}function dy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ki([t,s],0),new ki([o,l],0)]}class Sf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Va(`Invalid padding: ${t}`);if(s<0)throw new Va(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Va(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Va(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ki.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(ki.fromNumber(s)));return o.compare(tA)===1&&(o=new ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=hy(e),[s,o]=dy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Sf(l,o,t);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=hy(e),[s,o]=dy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,ll.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ac(Ae.min(),o,new st(Me),br(),Le())}}class ll{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ll(s,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Ov{constructor(e,t){this.targetId=e,this.Ce=t}}class Mv{constructor(e,t,s=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class fy{constructor(){this.ve=0,this.Fe=py(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),s=Le();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ee(38017,{changeType:l})}})),new ll(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=py()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nA{constructor(e){this.Ge=e,this.ze=new Map,this.je=br(),this.Je=xu(),this.He=xu(),this.Ye=new st(Me)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Od(l))if(s===0){const h=new ge(l.path);this.et(t,h,zt.newNoDocument(h,Ae.min()))}else We(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=Ni(s).toUint8Array()}catch(g){if(g instanceof ov)return ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Sf(h,o,l)}catch(g){return ko(g instanceof Va?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const m=this.ot(h);if(m){if(l.current&&Od(m.target)){const g=new ge(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,zt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=Le();this.He.forEach(((l,h)=>{let m=!0;h.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Ac(e,t,this.Ye,this.je,s);return this.je=br(),this.Je=xu(),this.He=xu(),this.Ye=new st(Me),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new fy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Et(Me),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Et(Me),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function xu(){return new st(ge.comparator)}function py(){return new st(ge.comparator)}const rA={asc:"ASCENDING",desc:"DESCENDING"},iA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sA={and:"AND",or:"OR"};class oA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bd(r,e){return r.useProto3Json||vc(e)?e:{value:e}}function ac(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function aA(r,e){return ac(r,e.toTimestamp())}function ir(r){return We(!!r,49232),Ae.fromTimestamp((function(t){const s=Pi(t);return new et(s.seconds,s.nanos)})(r))}function Af(r,e){return Fd(r,e).canonicalString()}function Fd(r,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function bv(r){const e=Ye.fromString(r);return We(Bv(e),10190,{key:e.toString()}),e}function jd(r,e){return Af(r.databaseId,e.path)}function pd(r,e){const t=bv(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ge(jv(t))}function Fv(r,e){return Af(r.databaseId,e)}function lA(r){const e=bv(r);return e.length===4?Ye.emptyPath():jv(e)}function Ud(r){return new Ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function jv(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function my(r,e,t){return{name:jd(r,e),fields:t.value.mapValue.fields}}function uA(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ee(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(_,E){return _.useProto3Json?(We(E===void 0||typeof E=="string",58123),Vt.fromBase64String(E||"")):(We(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Vt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(_){const E=_.code===void 0?K.UNKNOWN:Vv(_.code);return new ce(E,_.message||"")})(h);t=new Mv(s,o,l,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=pd(r,s.document.name),l=ir(s.document.updateTime),h=s.document.createTime?ir(s.document.createTime):Ae.min(),m=new _n({mapValue:{fields:s.document.fields}}),g=zt.newFoundDocument(o,l,h,m),_=s.targetIds||[],E=s.removedTargetIds||[];t=new Hu(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=pd(r,s.document),l=s.readTime?ir(s.readTime):Ae.min(),h=zt.newNoDocument(o,l),m=s.removedTargetIds||[];t=new Hu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=pd(r,s.document),l=s.removedTargetIds||[];t=new Hu([],l,o,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new JS(o,l),m=s.targetId;t=new Ov(m,h)}}return t}function cA(r,e){let t;if(e instanceof al)t={update:my(r,e.key,e.value)};else if(e instanceof Tf)t={delete:jd(r,e.key)};else if(e instanceof Ss)t={update:my(r,e.key,e.data),updateMask:vA(e.fieldMask)};else{if(!(e instanceof QS))return Ee(16599,{Vt:e.type});t={verify:jd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const m=h.transform;if(m instanceof sc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ka)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Qa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof oc)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Ee(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:aA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)})(r,e.precondition)),t}function hA(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?ir(o.updateTime):ir(l);return h.isEqual(Ae.min())&&(h=ir(l)),new qS(h,o.transformResults||[])})(t,e)))):[]}function dA(r,e){return{documents:[Fv(r,e.path)]}}function fA(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Fv(r,o);const l=(function(_){if(_.length!==0)return zv(Vn.create(_,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(_){if(_.length!==0)return _.map((E=>(function(P){return{field:mo(P.field),direction:gA(P.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=bd(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function pA(r){let e=lA(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){We(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(S){const P=Uv(S);return P instanceof Vn&&gv(P)?P.getFilters():[P]})(t.where));let h=[];t.orderBy&&(h=(function(S){return S.map((P=>(function(q){return new ic(go(q.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(P)))})(t.orderBy));let m=null;t.limit&&(m=(function(S){let P;return P=typeof S=="object"?S.value:S,vc(P)?null:P})(t.limit));let g=null;t.startAt&&(g=(function(S){const P=!!S.before,F=S.values||[];return new rc(F,P)})(t.startAt));let _=null;return t.endAt&&(_=(function(S){const P=!S.before,F=S.values||[];return new rc(F,P)})(t.endAt)),VS(e,o,h,l,m,"F",g,_)}function mA(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Uv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=go(t.unaryFilter.field);return gt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=go(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=go(t.unaryFilter.field);return gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=go(t.unaryFilter.field);return gt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(r):r.fieldFilter!==void 0?(function(t){return gt.create(go(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Vn.create(t.compositeFilter.filters.map((s=>Uv(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(r):Ee(30097,{filter:r})}function gA(r){return rA[r]}function yA(r){return iA[r]}function _A(r){return sA[r]}function mo(r){return{fieldPath:r.canonicalString()}}function go(r){return Dt.fromServerFormat(r.fieldPath)}function zv(r){return r instanceof gt?(function(t){if(t.op==="=="){if(ny(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NAN"}};if(ty(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ny(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NAN"}};if(ty(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(t.field),op:yA(t.op),value:t.value}}})(r):r instanceof Vn?(function(t){const s=t.getFilters().map((o=>zv(o)));return s.length===1?s[0]:{compositeFilter:{op:_A(t.op),filters:s}}})(r):Ee(54877,{filter:r})}function vA(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Bv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t,s,o,l=Ae.min(),h=Ae.min(),m=Vt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.yt=e}}function EA(r){const e=pA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.Cn=new IA}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Ri.min())}updateCollectionGroup(e,t,s){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class IA{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Et(Ye.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Et(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$v=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt($v,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new No(0)}static cr(){return new No(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="LruGarbageCollector",SA=1048576;function _y([r,e],[t,s]){const o=Me(r,t);return o===0?Me(e,s):o}class AA{constructor(e){this.Ir=e,this.buffer=new Et(_y),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();_y(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kA{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(yy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bo(t)?ue(yy,"Ignoring IndexedDB error during garbage collection: ",t):await Lo(t)}await this.Vr(3e5)}))}}class CA{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(_c.ce);const s=new AA(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(gy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,m,g,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(s=S,m=Date.now(),this.removeTargets(e,s,t)))).next((S=>(l=S,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(_=Date.now(),fo()<=Oe.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${S} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:S}))))}}function RA(r,e){return new CA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.changes=new Is((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Q.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Ua(s.mutation,o,xn.empty(),et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Le()){const o=hs();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=Da();return l.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=hs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Le())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,s,o){let l=br();const h=ja(),m=(function(){return ja()})();return t.forEach(((g,_)=>{const E=s.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Ss)?l=l.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),Ua(E.mutation,_,E.mutation.getFieldMask(),et.now())):h.set(_.key,xn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((_,E)=>h.set(_,E))),t.forEach(((_,E)=>m.set(_,new NA(E,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=ja();let o=new st(((h,m)=>h-m)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let E=s.get(g)||xn.empty();E=m.applyToLocalView(_,E),s.set(g,E);const S=(o.get(m.batchId)||Le()).add(g);o=o.insert(m.batchId,S)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,S=Av();E.forEach((P=>{if(!l.has(P)){const F=xv(t.get(P),s.get(P));F!==null&&S.set(P,F),l=l.add(P)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,S))}return Q.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):Q.resolve(hs());let m=Ha,g=l;return h.next((_=>Q.forEach(_,((E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),l.get(E)?Q.resolve():this.remoteDocumentCache.getEntry(e,E).next((P=>{g=g.insert(E,P)}))))).next((()=>this.populateOverlays(e,_,l))).next((()=>this.computeViews(e,g,_,Le()))).next((E=>({batchId:m,changes:Sv(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((s=>{let o=Da();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Da();return this.indexManager.getCollectionParents(e,l).next((m=>Q.forEach(m,(g=>{const _=(function(S,P){return new ol(P,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,s,o).next((E=>{E.forEach(((S,P)=>{h=h.insert(S,P)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,zt.newInvalidDocument(E)))}));let m=Da();return h.forEach(((g,_)=>{const E=l.get(g);E!==void 0&&Ua(E.mutation,_,xn.empty(),et.now()),Tc(t,_)&&(m=m.insert(g,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ir(o.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:EA(o.bundledQuery),readTime:ir(o.readTime)}})(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.overlays=new st(ge.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const s=hs();return Q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),Q.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),Q.resolve()}getOverlaysForCollection(e,t,s){const o=hs(),l=t.length+1,h=new ge(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new st(((_,E)=>_-E));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>s){let E=l.get(_.largestBatchId);E===null&&(E=hs(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=hs(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,E)=>m.set(_,E))),!(m.size()>=o)););return Q.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new XS(t,s));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this.Qr=new Et(kt.$r),this.Ur=new Et(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new kt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new kt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ge(new Ye([])),s=new kt(t,e),o=new kt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ge(new Ye([])),s=new kt(t,e),o=new kt(t,e+1);let l=Le();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new kt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ge.comparator(e.key,t.key)||Me(e.Yr,t.Yr)}static Kr(e,t){return Me(e.Yr,t.Yr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Et(kt.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new YS(l,t,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new kt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Q.resolve(h)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return Q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?mf:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);l.push(m)})),Q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Et(Me);return t.forEach((o=>{const l=new kt(o,0),h=new kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(m=>{s=s.add(m.Yr)}))})),Q.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ge.isDocumentKey(l)||(l=l.child(""));const h=new kt(new ge(l),0);let m=new Et(Me);return this.Zr.forEachWhile((g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)}),h),Q.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Q.forEach(t.mutations,(o=>{const l=new kt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new kt(t,0),o=this.Zr.firstAfterOrEqual(s);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.ri=e,this.docs=(function(){return new st(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Q.resolve(s?s.document.mutableCopy():zt.newInvalidDocument(t))}getEntries(e,t){let s=br();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():zt.newInvalidDocument(o))})),Q.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=br();const h=t.path,m=new ge(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||hS(cS(E),s)<=0||(o.has(E.key)||Tc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Q.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ee(9500)}ii(e,t){return Q.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new bA(this)}getSize(e){return Q.resolve(this.size)}}class bA extends PA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.persistence=e,this.si=new Is((t=>_f(t)),vf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new kf,this.targetCount=0,this.ai=No.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new No(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),Q.waitFor(l).next((()=>o))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Q.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Q.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),Q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Q.resolve(s)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t){this.ui={},this.overlays={},this.ci=new _c(0),this.li=!1,this.li=!0,this.hi=new OA,this.referenceDelegate=e(this),this.Pi=new FA(this),this.indexManager=new TA,this.remoteDocumentCache=(function(o){return new LA(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new wA(t),this.Ii=new DA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new MA(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const o=new jA(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return Q.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class jA extends fS{constructor(e){super(),this.currentSequenceNumber=e}}class Cf{constructor(e){this.persistence=e,this.Ri=new kf,this.Vi=null}static mi(e){return new Cf(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Q.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(s=>{const o=ge.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class lc{constructor(e,t){this.persistence=e,this.pi=new Is((s=>gS(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=RA(this,t)}static mi(e,t){return new lc(e,t)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return Q.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?Q.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(s++,l.removeEntry(h,Ae.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zu(e.data.value)),t}br(e,t,s){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Q.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Rf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xT()?8:pS(Bt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new UA;return this.Ss(e,t,h).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(fo()<=Oe.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(fo()<=Oe.DEBUG&&ue("QueryEngine","Query:",po(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(fo()<=Oe.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nr(t))):Q.resolve())}ys(e,t){if(oy(t))return Q.resolve(null);let s=nr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ld(t,null,"F"),s=nr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Le(...l);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const _=this.Ds(t,m);return this.Cs(t,_,h,g.readTime)?this.ys(e,Ld(t,null,"F")):this.vs(e,_,t,g)}))))})))))}ws(e,t,s,o){return oy(t)||o.isEqual(Ae.min())?Q.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?Q.resolve(null):(fo()<=Oe.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(t)),this.vs(e,h,t,uS(o,Ha)).next((m=>m)))}))}Ds(e,t){let s=new Et(Tv(e));return t.forEach(((o,l)=>{Tc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return fo()<=Oe.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",po(t)),this.ps.getDocumentsMatchingQuery(e,t,Ri.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="LocalStore",BA=3e8;class $A{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new st(Me),this.xs=new Is((l=>_f(l)),vf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function HA(r,e,t,s){return new $A(r,e,t,s)}async function Wv(r,e){const t=Re(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],m=[];let g=Le();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of l){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function WA(r,e){const t=Re(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,E){const S=_.batch,P=S.keys();let F=Q.resolve();return P.forEach((q=>{F=F.next((()=>E.getEntry(g,q))).next((D=>{const z=_.docVersions.get(q);We(z!==null,48541),D.version.compareTo(z)<0&&(S.applyToRemoteDocument(D,_),D.isValidDocument()&&(D.setReadTime(_.commitVersion),E.addEntry(D)))}))})),F.next((()=>m.mutationQueue.removeMutationBatch(g,S)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=Le();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function qv(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function qA(r,e){const t=Re(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((E,S)=>{const P=o.get(S);if(!P)return;m.push(t.Pi.removeMatchingKeys(l,E.removedDocuments,S).next((()=>t.Pi.addMatchingKeys(l,E.addedDocuments,S))));let F=P.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?F=F.withResumeToken(Vt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(E.resumeToken,s)),o=o.insert(S,F),(function(D,z,W){return D.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=BA?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(P,F,E)&&m.push(t.Pi.updateTargetData(l,F))}));let g=br(),_=Le();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),m.push(GA(l,h,e.documentUpdates).next((E=>{g=E.ks,_=E.qs}))),!s.isEqual(Ae.min())){const E=t.Pi.getLastRemoteSnapshotVersion(l).next((S=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));m.push(E)}return Q.waitFor(m).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,_))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function GA(r,e,t){let s=Le(),o=Le();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=br();return t.forEach(((m,g)=>{const _=l.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):ue(Pf,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function KA(r,e){const t=Re(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=mf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function QA(r,e){const t=Re(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,Q.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Ti(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function zd(r,e,t){const s=Re(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!bo(h))throw h;ue(Pf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function vy(r,e,t){const s=Re(r);let o=Ae.min(),l=Le();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,_,E){const S=Re(g),P=S.xs.get(E);return P!==void 0?Q.resolve(S.Ms.get(P)):S.Pi.getTargetData(_,E)})(s,h,nr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:Le()))).next((m=>(YA(s,MS(e),m),{documents:m,Qs:l})))))}function YA(r,e,t){let s=r.Os.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class wy{constructor(){this.activeTargetIds=zS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XA{constructor(){this.Mo=new wy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="ConnectivityMonitor";class Ty{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(Ey,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(Ey,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function Bd(){return Du===null?Du=(function(){return 268435456+Math.round(2147483648*Math.random())})():Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="RestConnection",ZA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ek{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===tc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=Bd(),m=this.zo(e,t.toUriEncodedString());ue(md,`Sending RPC '${e}' ${h}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:_}=new URL(m),E=Do(_);return this.Jo(e,m,g,s,E).then((S=>(ue(md,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw ko(md,`RPC '${e}' ${h} failed with error: `,S,"url: ",m,"request:",s),S}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=ZA[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class nk extends ek{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=Bd();return new Promise(((m,g)=>{const _=new Q_;_.setWithCredentials(!0),_.listenOnce(Y_.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Uu.NO_ERROR:const S=_.getResponseJson();ue(jt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),m(S);break;case Uu.TIMEOUT:ue(jt,`RPC '${e}' ${h} timed out`),g(new ce(K.DEADLINE_EXCEEDED,"Request time out"));break;case Uu.HTTP_ERROR:const P=_.getStatus();if(ue(jt,`RPC '${e}' ${h} failed with status:`,P,"response text:",_.getResponseText()),P>0){let F=_.getResponseJson();Array.isArray(F)&&(F=F[0]);const q=F==null?void 0:F.error;if(q&&q.status&&q.message){const D=(function(W){const J=W.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(J)>=0?J:K.UNKNOWN})(q.status);g(new ce(D,q.message))}else g(new ce(K.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new ce(K.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ue(jt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);ue(jt,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",E,s,15)}))}T_(e,t,s){const o=Bd(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Z_(),m=J_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const E=l.join("");ue(jt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const S=h.createWebChannel(E,g);this.I_(S);let P=!1,F=!1;const q=new tk({Yo:z=>{F?ue(jt,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(P||(ue(jt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),P=!0),ue(jt,`RPC '${e}' stream ${o} sending:`,z),S.send(z))},Zo:()=>S.close()}),D=(z,W,J)=>{z.listen(W,(Y=>{try{J(Y)}catch(G){setTimeout((()=>{throw G}),0)}}))};return D(S,xa.EventType.OPEN,(()=>{F||(ue(jt,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),D(S,xa.EventType.CLOSE,(()=>{F||(F=!0,ue(jt,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(S))})),D(S,xa.EventType.ERROR,(z=>{F||(F=!0,ko(jt,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),q.a_(new ce(K.UNAVAILABLE,"The operation could not be completed")))})),D(S,xa.EventType.MESSAGE,(z=>{var W;if(!F){const J=z.data[0];We(!!J,16349);const Y=J,G=(Y==null?void 0:Y.error)||((W=Y[0])==null?void 0:W.error);if(G){ue(jt,`RPC '${e}' stream ${o} received error:`,G);const oe=G.status;let se=(function(R){const O=mt[R];if(O!==void 0)return Vv(O)})(oe),N=G.message;se===void 0&&(se=K.INTERNAL,N="Unknown error status: "+oe+" with message "+G.message),F=!0,q.a_(new ce(se,N)),S.close()}else ue(jt,`RPC '${e}' stream ${o} received:`,J),q.u_(J)}})),D(m,X_.STAT_EVENT,(z=>{z.stat===Pd.PROXY?ue(jt,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Pd.NOPROXY&&ue(jt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(r){return new oA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="PersistentStream";class Kv{constructor(e,t,s,o,l,h,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Gv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ce(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(Iy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(Iy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rk extends Kv{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=uA(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?ir(h.readTime):Ae.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Ud(this.serializer),t.addTarget=(function(l,h){let m;const g=h.target;if(m=Od(g)?{documents:dA(l,g)}:{query:fA(l,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Lv(l,h.resumeToken);const _=bd(l,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(Ae.min())>0){m.readTime=ac(l,h.snapshotVersion.toTimestamp());const _=bd(l,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const s=mA(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Ud(this.serializer),t.removeTarget=e,this.q_(t)}}class ik extends Kv{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=hA(e.writeResults,e.commitTime),s=ir(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Ud(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>cA(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{}class ok extends sk{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,Fd(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(K.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,Fd(t,s),o,h,m,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ce(K.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ak{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Lr(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="RemoteStore";class lk{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{As(this)&&(ue(Es,"Restarting streams for network reachability change."),await(async function(g){const _=Re(g);_.Ea.add(4),await ul(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Cc(_)})(this))}))})),this.Ra=new ak(s,o)}}async function Cc(r){if(As(r))for(const e of r.da)await e(!0)}async function ul(r){for(const e of r.da)await e(!1)}function Qv(r,e){const t=Re(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vf(t)?Df(t):Fo(t).O_()&&xf(t,e))}function Nf(r,e){const t=Re(r),s=Fo(t);t.Ia.delete(e),s.O_()&&Yv(t,e),t.Ia.size===0&&(s.O_()?s.L_():As(t)&&t.Ra.set("Unknown"))}function xf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fo(r).Y_(e)}function Yv(r,e){r.Va.Ue(e),Fo(r).Z_(e)}function Df(r){r.Va=new nA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Fo(r).start(),r.Ra.ua()}function Vf(r){return As(r)&&!Fo(r).x_()&&r.Ia.size>0}function As(r){return Re(r).Ea.size===0}function Xv(r){r.Va=void 0}async function uk(r){r.Ra.set("Online")}async function ck(r){r.Ia.forEach(((e,t)=>{xf(r,e)}))}async function hk(r,e){Xv(r),Vf(r)?(r.Ra.ha(e),Df(r)):r.Ra.set("Unknown")}async function dk(r,e,t){if(r.Ra.set("Online"),e instanceof Mv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(s){ue(Es,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await uc(r,s)}else if(e instanceof Hu?r.Va.Ze(e):e instanceof Ov?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ae.min()))try{const s=await qv(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const m=l.Va.Tt(h);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ia.get(_);E&&l.Ia.set(_,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,_)=>{const E=l.Ia.get(g);if(!E)return;l.Ia.set(g,E.withResumeToken(Vt.EMPTY_BYTE_STRING,E.snapshotVersion)),Yv(l,g);const S=new Ti(E.target,g,_,E.sequenceNumber);xf(l,S)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(s){ue(Es,"Failed to raise snapshot:",s),await uc(r,s)}}async function uc(r,e,t){if(!bo(e))throw e;r.Ea.add(1),await ul(r),r.Ra.set("Offline"),t||(t=()=>qv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Es,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Cc(r)}))}function Jv(r,e){return e().catch((t=>uc(r,t,e)))}async function Rc(r){const e=Re(r),t=Di(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mf;for(;fk(e);)try{const o=await KA(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,pk(e,o)}catch(o){await uc(e,o)}Zv(e)&&ew(e)}function fk(r){return As(r)&&r.Ta.length<10}function pk(r,e){r.Ta.push(e);const t=Di(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Zv(r){return As(r)&&!Di(r).x_()&&r.Ta.length>0}function ew(r){Di(r).start()}async function mk(r){Di(r).ra()}async function gk(r){const e=Di(r);for(const t of r.Ta)e.ea(t.mutations)}async function yk(r,e,t){const s=r.Ta.shift(),o=If.from(s,e,t);await Jv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Rc(r)}async function _k(r,e){e&&Di(r).X_&&await(async function(s,o){if((function(h){return ZS(h)&&h!==K.ABORTED})(o.code)){const l=s.Ta.shift();Di(s).B_(),await Jv(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Rc(s)}})(r,e),Zv(r)&&ew(r)}async function Sy(r,e){const t=Re(r);t.asyncQueue.verifyOperationInProgress(),ue(Es,"RemoteStore received new credentials");const s=As(t);t.Ea.add(3),await ul(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cc(t)}async function vk(r,e){const t=Re(r);e?(t.Ea.delete(2),await Cc(t)):e||(t.Ea.add(2),await ul(t),t.Ra.set("Unknown"))}function Fo(r){return r.ma||(r.ma=(function(t,s,o){const l=Re(t);return l.sa(),new rk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:uk.bind(null,r),t_:ck.bind(null,r),r_:hk.bind(null,r),H_:dk.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Vf(r)?Df(r):r.Ra.set("Unknown")):(await r.ma.stop(),Xv(r))}))),r.ma}function Di(r){return r.fa||(r.fa=(function(t,s,o){const l=Re(t);return l.sa(),new ik(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:mk.bind(null,r),r_:_k.bind(null,r),ta:gk.bind(null,r),na:yk.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Rc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Es,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,m=new Of(e,t,h,o,l);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mf(r,e){if(Lr("AsyncQueue",`${e}: ${r}`),bo(r))return new ce(K.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ge.comparator(t.key,s.key):(t,s)=>ge.comparator(t.key,s.key),this.keyedMap=Da(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new wo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.ga=new st(ge.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class xo{constructor(e,t,s,o,l,h,m,g,_){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new xo(e,t,wo.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ec(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Ek{constructor(){this.queries=ky(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),l=o.queries;o.queries=ky(),l.forEach(((h,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new ce(K.ABORTED,"Firestore shutting down"))}}function ky(){return new Is((r=>Ev(r)),Ec)}async function Tk(r,e){const t=Re(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new wk,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Mf(h,`Initialization of query '${po(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Lf(t)}async function Ik(r,e){const t=Re(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Sk(r,e){const t=Re(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&Lf(t)}function Ak(r,e,t){const s=Re(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Lf(r){r.Ca.forEach((e=>{e.next()}))}var $d,Cy;(Cy=$d||($d={})).Ma="default",Cy.Cache="cache";class kk{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new xo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$d.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this.key=e}}class nw{constructor(e){this.key=e}}class Ck{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=Tv(e),this.tu=new wo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Ay,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,S)=>{const P=o.get(E),F=Tc(this.query,S)?S:null,q=!!P&&this.mutatedKeys.has(P.key),D=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let z=!1;P&&F?P.data.isEqual(F.data)?q!==D&&(s.track({type:3,doc:F}),z=!0):this.su(P,F)||(s.track({type:2,doc:F}),z=!0,(g&&this.eu(F,g)>0||_&&this.eu(F,_)<0)&&(m=!0)):!P&&F?(s.track({type:0,doc:F}),z=!0):P&&!F&&(s.track({type:1,doc:P}),z=!0,(g||_)&&(m=!0)),z&&(F?(h=h.add(F),l=D?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,S)=>(function(F,q){const D=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:z})}};return D(F)-D(q)})(E.type,S.type)||this.eu(E.doc,S.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,h.length!==0||_?{snapshot:new xo(this.query,e.tu,l,h,e.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ay,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new nw(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new tw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bf="SyncEngine";class Rk{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Pk{constructor(e){this.key=e,this.hu=!1}}class Nk{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Is((m=>Ev(m)),Ec),this.Iu=new Map,this.Eu=new Set,this.du=new st(ge.comparator),this.Au=new Map,this.Ru=new kf,this.Vu={},this.mu=new Map,this.fu=No.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xk(r,e,t=!0){const s=lw(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await rw(s,e,t,!0),o}async function Dk(r,e){const t=lw(r);await rw(t,e,!0,!1)}async function rw(r,e,t,s){const o=await QA(r.localStore,nr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return s&&(m=await Vk(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Qv(r.remoteStore,o),m}async function Vk(r,e,t,s,o){r.pu=(S,P,F)=>(async function(D,z,W,J){let Y=z.view.ru(W);Y.Cs&&(Y=await vy(D.localStore,z.query,!1).then((({documents:N})=>z.view.ru(N,Y))));const G=J&&J.targetChanges.get(z.targetId),oe=J&&J.targetMismatches.get(z.targetId)!=null,se=z.view.applyChanges(Y,D.isPrimaryClient,G,oe);return Py(D,z.targetId,se.au),se.snapshot})(r,S,P,F);const l=await vy(r.localStore,e,!0),h=new Ck(e,l.Qs),m=h.ru(l.documents),g=ll.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),_=h.applyChanges(m,r.isPrimaryClient,g);Py(r,t,_.au);const E=new Rk(e,t,h);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),_.snapshot}async function Ok(r,e,t){const s=Re(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Ec(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await zd(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Nf(s.remoteStore,o.targetId),Hd(s,o.targetId)})).catch(Lo)):(Hd(s,o.targetId),await zd(s.localStore,o.targetId,!0))}async function Mk(r,e){const t=Re(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Nf(t.remoteStore,s.targetId))}async function Lk(r,e,t){const s=$k(r);try{const o=await(function(h,m){const g=Re(h),_=et.now(),E=m.reduce(((F,q)=>F.add(q.key)),Le());let S,P;return g.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let q=br(),D=Le();return g.Ns.getEntries(F,E).next((z=>{q=z,q.forEach(((W,J)=>{J.isValidDocument()||(D=D.add(W))}))})).next((()=>g.localDocuments.getOverlayedDocuments(F,q))).next((z=>{S=z;const W=[];for(const J of m){const Y=KS(J,S.get(J.key).overlayedDocument);Y!=null&&W.push(new Ss(J.key,Y,fv(Y.value.mapValue),rr.exists(!0)))}return g.mutationQueue.addMutationBatch(F,_,W,m)})).next((z=>{P=z;const W=z.applyToLocalDocumentSet(S,D);return g.documentOverlayCache.saveOverlays(F,z.batchId,W)}))})).then((()=>({batchId:P.batchId,changes:Sv(S)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let _=h.Vu[h.currentUser.toKey()];_||(_=new st(Me)),_=_.insert(m,g),h.Vu[h.currentUser.toKey()]=_})(s,o.batchId,t),await cl(s,o.changes),await Rc(s.remoteStore)}catch(o){const l=Mf(o,"Failed to persist write");t.reject(l)}}async function iw(r,e){const t=Re(r);try{const s=await qA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?We(h.hu,14607):o.removedDocuments.size>0&&(We(h.hu,42227),h.hu=!1))})),await cl(t,s,e)}catch(s){await Lo(s)}}function Ry(r,e,t){const s=Re(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Re(h);g.onlineState=m;let _=!1;g.queries.forEach(((E,S)=>{for(const P of S.Sa)P.va(m)&&(_=!0)})),_&&Lf(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function bk(r,e,t){const s=Re(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new st(ge.comparator);h=h.insert(l,zt.newNoDocument(l,Ae.min()));const m=Le().add(l),g=new Ac(Ae.min(),new Map,new st(Me),h,m);await iw(s,g),s.du=s.du.remove(l),s.Au.delete(e),Ff(s)}else await zd(s.localStore,e,!1).then((()=>Hd(s,e,t))).catch(Lo)}async function Fk(r,e){const t=Re(r),s=e.batch.batchId;try{const o=await WA(t.localStore,e);ow(t,s,null),sw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await cl(t,o)}catch(o){await Lo(o)}}async function jk(r,e,t){const s=Re(r);try{const o=await(function(h,m){const g=Re(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next((S=>(We(S!==null,37113),E=S.keys(),g.mutationQueue.removeMutationBatch(_,S)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>g.localDocuments.getDocuments(_,E)))}))})(s.localStore,e);ow(s,e,t),sw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await cl(s,o)}catch(o){await Lo(o)}}function sw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function ow(r,e,t){const s=Re(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Hd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||aw(r,s)}))}function aw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Nf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Ff(r))}function Py(r,e,t){for(const s of t)s instanceof tw?(r.Ru.addReference(s.key,e),Uk(r,s)):s instanceof nw?(ue(bf,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||aw(r,s.key)):Ee(19791,{wu:s})}function Uk(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ue(bf,"New document in limbo: "+t),r.Eu.add(s),Ff(r))}function Ff(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ge(Ye.fromString(e)),s=r.fu.next();r.Au.set(s,new Pk(t)),r.du=r.du.insert(t,s),Qv(r.remoteStore,new Ti(nr(wf(t.path)),s,"TargetPurposeLimboResolution",_c.ce))}}async function cl(r,e,t){const s=Re(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{h.push(s.pu(g,e,t).then((_=>{var E;if((_||t)&&s.isPrimaryClient){const S=_?!_.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(_){o.push(_);const S=Rf.As(g.targetId,_);l.push(S)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,_){const E=Re(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>Q.forEach(_,(P=>Q.forEach(P.Es,(F=>E.persistence.referenceDelegate.addReference(S,P.targetId,F))).next((()=>Q.forEach(P.ds,(F=>E.persistence.referenceDelegate.removeReference(S,P.targetId,F)))))))))}catch(S){if(!bo(S))throw S;ue(Pf,"Failed to update sequence numbers: "+S)}for(const S of _){const P=S.targetId;if(!S.fromCache){const F=E.Ms.get(P),q=F.snapshotVersion,D=F.withLastLimboFreeSnapshotVersion(q);E.Ms=E.Ms.insert(P,D)}}})(s.localStore,l))}async function zk(r,e){const t=Re(r);if(!t.currentUser.isEqual(e)){ue(bf,"User change. New user:",e.toKey());const s=await Wv(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new ce(K.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await cl(t,s.Ls)}}function Bk(r,e){const t=Re(r),s=t.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let o=Le();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function lw(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bk.bind(null,e),e.Pu.H_=Sk.bind(null,e.eventManager),e.Pu.yu=Ak.bind(null,e.eventManager),e}function $k(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jk.bind(null,e),e}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return HA(this.persistence,new zA,e.initialUser,this.serializer)}Cu(e){return new Hv(Cf.mi,this.serializer)}Du(e){return new XA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class Hk extends cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof lc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new kA(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Hv((s=>lc.mi(s,t)),this.serializer)}}class Wd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ry(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=zk.bind(null,this.syncEngine),await vk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Ek})()}createDatastore(e){const t=kc(e.databaseInfo.databaseId),s=(function(l){return new nk(l)})(e.databaseInfo);return(function(l,h,m,g){return new ok(l,h,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,m){return new lk(s,o,l,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ry(this.syncEngine,t,0)),(function(){return Ty.v()?new Ty:new JA})())}createSyncEngine(e,t){return(function(o,l,h,m,g,_,E){const S=new Nk(o,l,h,m,g,_);return E&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);ue(Es,"RemoteStore shutting down."),l.Ea.add(5),await ul(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Wd.provider={build:()=>new Wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class qk{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ut.UNAUTHENTICATED,this.clientId=pf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ue(Vi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ue(Vi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Mf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function yd(r,e){r.asyncQueue.verifyOperationInProgress(),ue(Vi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Wv(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Ny(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Gk(r);ue(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Sy(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Sy(e.remoteStore,o))),r._onlineComponents=e}async function Gk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(Vi,"Using user provided OfflineComponentProvider");try{await yd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ko("Error using user provided cache. Falling back to memory cache: "+t),await yd(r,new cc)}}else ue(Vi,"Using default OfflineComponentProvider"),await yd(r,new Hk(void 0));return r._offlineComponents}async function uw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(Vi,"Using user provided OnlineComponentProvider"),await Ny(r,r._uninitializedComponentsProvider._online)):(ue(Vi,"Using default OnlineComponentProvider"),await Ny(r,new Wd))),r._onlineComponents}function Kk(r){return uw(r).then((e=>e.syncEngine))}async function xy(r){const e=await uw(r),t=e.eventManager;return t.onListen=xk.bind(null,e.syncEngine),t.onUnlisten=Ok.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Dk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Mk.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="firestore.googleapis.com",Vy=!0;class Oy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hw,this.ssl=Vy}else this.host=e.host,this.ssl=e.ssl??Vy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$v;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SA)throw new ce(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new JI;switch(s.type){case"firstParty":return new nS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Dy.get(t);s&&(ue("ComponentProvider","Removing Datastore"),Dy.delete(t),s.terminate())})(this),Promise.resolve()}}function Qk(r,e,t,s={}){var _;r=ps(r,Pc);const o=Do(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(c_(`https://${m}`),h_("Firestore",!0)),l.host!==hw&&l.host!==m&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:o,emulatorOptions:s};if(!ys(g,h)&&(r._setSettings(g),s.mockUserToken)){let E,S;if(typeof s.mockUserToken=="string")E=s.mockUserToken,S=Ut.MOCK_USER;else{E=TT(s.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const P=s.mockUserToken.sub||s.mockUserToken.user_id;if(!P)throw new ce(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Ut(P)}r._authCredentials=new ZI(new tv(E,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class _t{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(sl(t,_t._jsonSchema))return new _t(e,s||null,new ge(Ye.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:yt("string",_t._jsonSchemaVersion),referencePath:yt("string")};class Ci extends jo{constructor(e,t,s){super(e,t,wf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new ge(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function dw(r,e,...t){if(r=Wt(r),nv("collection","path",e),r instanceof Pc){const s=Ye.fromString(e,...t);return qg(s),new Ci(r,null,s)}{if(!(r instanceof _t||r instanceof Ci))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ye.fromString(e,...t));return qg(s),new Ci(r.firestore,null,s)}}function hl(r,e,...t){if(r=Wt(r),arguments.length===1&&(e=pf.newId()),nv("doc","path",e),r instanceof Pc){const s=Ye.fromString(e,...t);return Wg(s),new _t(r,null,new ge(s))}{if(!(r instanceof _t||r instanceof Ci))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ye.fromString(e,...t));return Wg(s),new _t(r.firestore,r instanceof Ci?r.converter:null,new ge(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="AsyncQueue";class Ly{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Gv(this,"async_queue_retry"),this._c=()=>{const s=gd();s&&ue(My,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=gd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new fs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bo(e))throw e;ue(My,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Lr("INTERNAL UNHANDLED ERROR: ",by(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Of.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ee(47125,{Pc:by(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function by(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Ya extends Pc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Ly,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ly(e),this._firestoreClient=void 0,await e}}}function Yk(r,e){const t=typeof r=="object"?r:m_(),s=typeof r=="string"?r:tc,o=tf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=wT("firestore");l&&Qk(o,...l)}return o}function fw(r){if(r._terminated)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Xk(r),r._firestoreClient}function Xk(r){var s,o,l;const e=r._freezeSettings(),t=(function(m,g,_,E){return new vS(m,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,cw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new qk(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vn(Vt.fromBase64String(e))}catch(t){throw new ce(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sl(e,vn._jsonSchema))return vn.fromBase64String(e.bytes)}}vn._jsonSchemaVersion="firestore/bytes/1.0",vn._jsonSchema={type:yt("string",vn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sr._jsonSchemaVersion}}static fromJSON(e){if(sl(e,sr._jsonSchema))return new sr(e.latitude,e.longitude)}}sr._jsonSchemaVersion="firestore/geoPoint/1.0",sr._jsonSchema={type:yt("string",sr._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sl(e,or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new or(e.vectorValues);throw new ce(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}or._jsonSchemaVersion="firestore/vectorValue/1.0",or._jsonSchema={type:yt("string",or._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=/^__.*__$/;class Zk{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new al(e,this.data,t,this.fieldTransforms)}}function mw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:r})}}class Uf{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Uf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mw(this.Ac)&&Jk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eC{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||kc(e)}Cc(e,t,s,o=!1){return new Uf({Ac:e,methodName:t,Dc:s,path:Dt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gw(r){const e=r._freezeSettings(),t=kc(r._databaseId);return new eC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function tC(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);vw("Data must be an object, but it was:",h,s);const m=yw(s,h);let g,_;if(l.merge)g=new xn(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const S of l.mergeFields){const P=rC(e,S,t);if(!h.contains(P))throw new ce(K.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);sC(E,P)||E.push(P)}g=new xn(E),_=h.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,_=h.fieldTransforms;return new Zk(new _n(m),g,_)}function nC(r,e,t,s=!1){return zf(t,r.Cc(s?4:3,e))}function zf(r,e){if(_w(r=Wt(r)))return vw("Unsupported field value:",e,r),yw(r,e);if(r instanceof pw)return(function(s,o){if(!mw(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const m of s){let g=zf(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=Wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return BS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=et.fromDate(s);return{timestampValue:ac(o.serializer,l)}}if(s instanceof et){const l=new et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ac(o.serializer,l)}}if(s instanceof sr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof vn)return{bytesValue:Lv(o.serializer,s._byteString)};if(s instanceof _t){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Af(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof or)return(function(h,m){return{mapValue:{fields:{[hv]:{stringValue:dv},[nc]:{arrayValue:{values:h.toArray().map((_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return Ef(m.serializer,_)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${yc(s)}`)})(r,e)}function yw(r,e){const t={};return sv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(r,((s,o)=>{const l=zf(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function _w(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof et||r instanceof sr||r instanceof vn||r instanceof _t||r instanceof pw||r instanceof or)}function vw(r,e,t){if(!_w(t)||!rv(t)){const s=yc(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function rC(r,e,t){if((e=Wt(e))instanceof jf)return e._internalPath;if(typeof e=="string")return ww(r,e);throw hc("Field path arguments must be of type string or ",r,!1,void 0,t)}const iC=new RegExp("[~\\*/\\[\\]]");function ww(r,e,t){if(e.search(iC)>=0)throw hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new jf(...e.split("."))._internalPath}catch{throw hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function hc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ce(K.INVALID_ARGUMENT,m+r+g)}function sC(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oC extends Ew{data(){return super.data()}}function Tw(r,e){return typeof e=="string"?ww(r,e):e instanceof jf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bf{}class lC extends Bf{}function Iw(r,e,...t){let s=[];e instanceof Bf&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof Hf)).length,m=l.filter((g=>g instanceof $f)).length;if(h>1||h>0&&m>0)throw new ce(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class $f extends lC{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new $f(e,t,s)}_apply(e){const t=this._parse(e);return Sw(e._query,t),new jo(e.firestore,e.converter,Md(e._query,t))}_parse(e){const t=gw(e.firestore);return(function(l,h,m,g,_,E,S){let P;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Uy(S,E);const q=[];for(const D of S)q.push(jy(g,l,D));P={arrayValue:{values:q}}}else P=jy(g,l,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Uy(S,E),P=nC(m,h,S,E==="in"||E==="not-in");return gt.create(_,E,P)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Hf extends Bf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hf(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const m=l.getFlattenedFilters();for(const g of m)Sw(h,g),h=Md(h,g)})(e._query,t),new jo(e.firestore,e.converter,Md(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function jy(r,e,t){if(typeof(t=Wt(t))=="string"){if(t==="")throw new ce(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wv(e)&&t.indexOf("/")!==-1)throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ye.fromString(t));if(!ge.isDocumentKey(s))throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ey(r,new ge(s))}if(t instanceof _t)return ey(r,t._key);throw new ce(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yc(t)}.`)}function Uy(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sw(r,e){const t=(function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uC{convertValue(e,t="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ts(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[nc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>dt(h.doubleValue)));return new or(t)}convertGeoPoint(e){return new sr(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=wc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Wa(e));default:return null}}convertTimestamp(e){const t=Pi(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ye.fromString(e);We(Bv(s),9688,{name:e});const o=new qa(s.get(1),s.get(3)),l=new ge(s.popFirst(5));return o.isEqual(t)||Lr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class Oa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ms extends Ew{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Tw("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ms._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",ms._jsonSchema={type:yt("string",ms._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Wu extends ms{data(e={}){return super.data(e)}}class Eo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Oa(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Wu(this._firestore,this._userDataWriter,s.key,s,new Oa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Wu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Oa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new Wu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Oa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:hC(m.type),doc:g,oldIndex:_,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:r})}}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:yt("string",Eo._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Aw extends uC{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function Wf(r,e,t){r=ps(r,_t);const s=ps(r.firestore,Ya),o=cC(r.converter,e);return Rw(s,[tC(gw(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,rr.none())])}function kw(r){return Rw(ps(r.firestore,Ya),[new Tf(r._key,rr.none())])}function Cw(r,...e){var g,_,E;r=Wt(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Fy(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Fy(e[s])){const S=e[s];e[s]=(g=S.next)==null?void 0:g.bind(S),e[s+1]=(_=S.error)==null?void 0:_.bind(S),e[s+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,h,m;if(r instanceof _t)h=ps(r.firestore,Ya),m=wf(r._key.path),l={next:S=>{e[s]&&e[s](dC(h,r,S))},error:e[s+1],complete:e[s+2]};else{const S=ps(r,jo);h=ps(S.firestore,Ya),m=S._query;const P=new Aw(h);l={next:F=>{e[s]&&e[s](new Eo(h,P,S,F))},error:e[s+1],complete:e[s+2]},aC(r._query)}return(function(P,F,q,D){const z=new Wk(D),W=new kk(F,z,q);return P.asyncQueue.enqueueAndForget((async()=>Tk(await xy(P),W))),()=>{z.Nu(),P.asyncQueue.enqueueAndForget((async()=>Ik(await xy(P),W)))}})(fw(h),m,o,l)}function Rw(r,e){return(function(s,o){const l=new fs;return s.asyncQueue.enqueueAndForget((async()=>Lk(await Kk(s),o,l))),l.promise})(fw(r),e)}function dC(r,e,t){const s=t.docs.get(e._key),o=new Aw(r);return new ms(r,o,e._key,s,new Oa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Mo=o})(Vo),So(new _s("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),m=new Ya(new eS(s.getProvider("auth-internal")),new rS(h,s.getProvider("app-check-internal")),(function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ce(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(_.options.projectId,E)})(h,o),h);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Ai(zg,Bg,e),Ai(zg,Bg,"esm2020")})();const fC={apiKey:"AIzaSyD2N3dF2lfgFCU7MTUOfXAmBOiEcjWb4II",authDomain:"movie-search-c7e29.firebaseapp.com",projectId:"movie-search-c7e29",storageBucket:"movie-search-c7e29.firebasestorage.app",messagingSenderId:"360706376856",appId:"1:360706376856:web:7bc9921aaea6a4ef327ced"},Pw=p_(fC),_d=KI(Pw),Nw=Yk(Pw),pC=new Nr,xw=X.createContext(void 0);function mC({children:r}){const[e,t]=X.useState(null),[s,o]=X.useState(!0);X.useEffect(()=>{const m=L1(_d,g=>{t(g),o(!1)});return()=>m()},[]);const l=async()=>{try{await rI(_d,pC)}catch(m){throw console.error("Error signing in with Google:",m),m}},h=async()=>{try{await b1(_d)}catch(m){throw console.error("Error signing out:",m),m}};return w.jsx(xw.Provider,{value:{user:e,loading:s,signInWithGoogle:l,signOut:h},children:r})}function qf(){const r=X.useContext(xw);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),zy=r=>{const e=yC(r);return e.charAt(0).toUpperCase()+e.slice(1)},Dw=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),_C=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=X.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:h,...m},g)=>X.createElement("svg",{ref:g,...vC,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:Dw("lucide",o),...!l&&!_C(m)&&{"aria-hidden":"true"},...m},[...h.map(([_,E])=>X.createElement(_,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(r,e)=>{const t=X.forwardRef(({className:s,...o},l)=>X.createElement(wC,{ref:l,iconNode:e,className:Dw(`lucide-${gC(zy(r))}`,`lucide-${r}`,s),...o}));return t.displayName=zy(r),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],TC=tt("bookmark-check",EC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Vw=tt("check",IC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],AC=tt("chevron-left",SC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],CC=tt("chevron-right",kC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],PC=tt("circle-check-big",RC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xC=tt("circle-x",NC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],VC=tt("cloud",DC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],MC=tt("external-link",OC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bC=tt("eye-off",LC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jC=tt("eye",FC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Ow=tt("film",UC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],To=tt("heart",zC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],qd=tt("image-off",BC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Io=tt("loader-circle",$C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],WC=tt("log-in",HC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],GC=tt("log-out",qC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],QC=tt("play",KC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Gd=tt("plus",YC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],By=tt("refresh-cw",XC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ZC=tt("search",JC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Xa=tt("star",eR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],za=tt("thumbs-up",tR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mw=tt("trash-2",nR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$y=tt("user",rR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ja=tt("x",iR);function sR(){const{language:r,setLanguage:e,t}=cr(),s=o=>{e(o.target.value)};return w.jsx("div",{className:"language-selector",children:w.jsxs("select",{value:r,onChange:s,className:"language-select","aria-label":t("language"),children:[w.jsx("option",{value:"hu",children:""}),w.jsx("option",{value:"en",children:""})]})})}const oR=({syncing:r,onFavoritesClick:e})=>{const{user:t,loading:s,signInWithGoogle:o,signOut:l}=qf(),{t:h}=cr(),[m,g]=X.useState(!1),_=X.useRef(null);X.useEffect(()=>{const P=F=>{_.current&&!_.current.contains(F.target)&&g(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const E=async()=>{try{await o()}catch(P){console.error("Sign in failed:",P)}},S=async()=>{try{await l(),g(!1)}catch(P){console.error("Sign out failed:",P)}};return s?w.jsx("div",{className:"user-menu__loading",children:w.jsx($y,{size:18})}):t?w.jsxs("div",{className:"user-menu",ref:_,children:[w.jsxs("button",{className:"user-menu__trigger",onClick:()=>g(!m),"aria-expanded":m,children:[t.photoURL?w.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"user-menu__avatar"}):w.jsx("div",{className:"user-menu__avatar-placeholder",children:w.jsx($y,{size:16})}),r&&w.jsx("span",{className:"user-menu__sync-indicator",title:h("syncingWatchlist"),children:w.jsx(VC,{size:12})})]}),m&&w.jsxs("div",{className:"user-menu__dropdown",children:[w.jsxs("div",{className:"user-menu__user-info",children:[t.photoURL&&w.jsx("img",{src:t.photoURL,alt:"",className:"user-menu__dropdown-avatar"}),w.jsxs("div",{className:"user-menu__user-details",children:[w.jsx("span",{className:"user-menu__user-name",children:t.displayName}),w.jsx("span",{className:"user-menu__user-email",children:t.email})]})]}),w.jsx("div",{className:"user-menu__divider"}),w.jsxs("button",{className:"user-menu__option",onClick:()=>{e==null||e(),g(!1)},children:[w.jsx(To,{size:16}),w.jsx("span",{children:h("favorites")})]}),w.jsxs("button",{className:"user-menu__option",onClick:S,children:[w.jsx(GC,{size:16}),w.jsx("span",{children:h("signOut")})]})]})]}):w.jsxs("button",{className:"user-menu__sign-in",onClick:E,children:[w.jsx(WC,{size:16}),w.jsx("span",{className:"user-menu__sign-in-text",children:h("signIn")})]})},aR=({onSearch:r,mediaType:e,browseMode:t,onMediaTypeChange:s,onTheatersClick:o,onWatchlistClick:l,watchlistCount:h,syncing:m,onFavoritesClick:g})=>{const[_,E]=X.useState(""),{t:S}=cr(),P=q=>{q.preventDefault(),r(_)},F=()=>{E(""),r("")};return w.jsx("header",{className:"header",children:w.jsxs("div",{className:"header__content",children:[w.jsxs("div",{className:"header__brand",children:[w.jsx(Ow,{size:24}),w.jsx("span",{className:"header__title",children:S("appTitle")})]}),w.jsxs("div",{className:"header__media-toggle",children:[w.jsx("button",{className:`header__media-btn ${e==="movie"&&t!=="theaters"?"active":""}`,onClick:()=>s("movie"),children:S("movies")}),w.jsx("button",{className:`header__media-btn ${e==="tv"?"active":""}`,onClick:()=>s("tv"),children:S("tvShows")}),w.jsx("button",{className:`header__media-btn ${t==="theaters"?"active":""}`,onClick:o,children:S("theaters")})]}),w.jsx("form",{className:"header__search",onSubmit:P,children:w.jsxs("div",{className:"header__search-wrapper",children:[w.jsx(ZC,{size:16,className:"header__search-icon"}),w.jsx("input",{type:"text",placeholder:S(e==="tv"?"searchTvPlaceholder":"searchMoviePlaceholder"),value:_,onChange:q=>E(q.target.value),className:"header__search-input"}),_&&w.jsx("button",{type:"button",className:"header__search-clear",onClick:F,children:w.jsx(Ja,{size:14})})]})}),w.jsxs("button",{className:"header__watchlist-btn",onClick:l,children:[w.jsx(TC,{size:18}),w.jsx("span",{className:"header__watchlist-text",children:S("watchlist")}),h>0&&w.jsx("span",{className:"header__watchlist-count",children:h})]}),w.jsxs("div",{className:"header__actions",children:[w.jsx(sR,{}),w.jsx(oR,{syncing:m,onFavoritesClick:g})]})]})})},lR="a9b57b24fd99c4b6ad86f746a0f985e6",uR="https://api.themoviedb.org/3",cR="https://image.tmdb.org/t/p",er={poster:{small:"w185",medium:"w342",large:"w500"},logo:{small:"w45",medium:"w92"}},Vr=(r,e=er.poster.medium)=>r?`${cR}/${e}${r}`:"/placeholder-movie.svg",ur="HU",hR="hu-HU",Hy=new Date().getFullYear(),Wy=Array.from({length:Hy-1989},(r,e)=>Hy-e),dR=({genres:r,providers:e,certifications:t,selectedGenres:s,selectedProviders:o,selectedCertification:l,sortBy:h,minRating:m=0,yearFrom:g,yearTo:_,browseMode:E="streaming",availableCities:S=[],availableDates:P=[],selectedCity:F="",selectedDate:q="",onCityChange:D,onDateChange:z,onGenreChange:W,onProviderChange:J,onCertificationChange:Y,onSortChange:G,onRatingChange:oe,onYearFromChange:se,onYearToChange:N,onBrowseModeChange:A,onClearFilters:R,mediaType:O})=>{const{t:k}=cr(),V=b=>{const ye=new Date(b),Te=new Date;Te.setHours(0,0,0,0);const ke=new Date(Te);return ke.setDate(ke.getDate()+1),ye.toDateString()===Te.toDateString()?k("today"):ye.toDateString()===ke.toDateString()?k("tomorrow"):ye.toLocaleDateString("hu-HU",{weekday:"short",month:"short",day:"numeric"})},T=[{value:"popularity.desc",label:k("sortMostPopular")},{value:"vote_average.desc",label:k("sortBestRated")},{value:"primary_release_date.desc",label:k("sortNewest")},{value:"title.asc",label:k("sortTitleAZ")}],we=[{value:"popularity.desc",label:k("sortMostPopular")},{value:"vote_average.desc",label:k("sortBestRated")},{value:"first_air_date.desc",label:k("sortNewest")},{value:"name.asc",label:k("sortTitleAZ")}],Ne=[{value:0,label:k("ratingAny")},{value:6,label:"6+ "},{value:7,label:"7+ "},{value:8,label:"8+ "},{value:9,label:"9+ "}],ze={KN:k("certKN"),6:k("cert6"),12:k("cert12"),16:k("cert16"),18:k("cert18"),G:k("certG"),PG:k("certPG"),"PG-13":k("certPG13"),R:k("certR"),"NC-17":k("certNC17")},Pe=b=>{s.includes(b)?W(s.filter(ye=>ye!==b)):W([...s,b])},re=b=>{o.includes(b)?J(o.filter(ye=>ye!==b)):J([...o,b])},fe=s.length>0||o.length>0||l!==""||m>0||g!==void 0||_!==void 0||F!==""||q!==""||E!=="streaming",ae=O==="movie"?[{value:"streaming",label:k("browseStreaming")},{value:"trending",label:k("browseTrending")},{value:"theaters",label:k("browseTheaters")},{value:"upcoming",label:k("browseUpcoming")}]:[{value:"streaming",label:k("browseStreaming")},{value:"trending",label:k("browseTrending")}],L=O==="tv"?we:T;return w.jsxs("aside",{className:"filter-panel",children:[w.jsxs("div",{className:"filter-panel__header",children:[w.jsx("h2",{children:k("filters")}),fe&&w.jsx("button",{className:"filter-panel__clear",onClick:R,children:k("clearFilters")})]}),A&&w.jsxs("section",{className:"filter-section",children:[w.jsx("h3",{children:k("browseMode")}),w.jsx("div",{className:"filter-chips",children:ae.map(b=>w.jsx("button",{className:`filter-chip ${E===b.value?"active":""}`,onClick:()=>A(b.value),children:b.label},b.value))})]}),(E==="streaming"||E==="theaters")&&w.jsxs("section",{className:"filter-section",children:[w.jsx("h3",{children:k("sortBy")}),w.jsx("select",{value:h,onChange:b=>G(b.target.value),className:"filter-select",children:L.map(b=>w.jsx("option",{value:b.value,children:b.label},b.value))})]}),E==="theaters"&&S.length>0&&D&&w.jsxs("section",{className:"filter-section",children:[w.jsx("h3",{children:k("city")}),w.jsxs("select",{value:F,onChange:b=>D(b.target.value),className:"filter-select",children:[w.jsx("option",{value:"",children:k("allCities")}),S.map(b=>w.jsx("option",{value:b,children:b},b))]})]}),E==="theaters"&&P.length>0&&z&&w.jsxs("section",{className:"filter-section",children:[w.jsx("h3",{children:k("date")}),w.jsxs("div",{className:"filter-chips filter-chips--dates",children:[w.jsx("button",{className:`filter-chip ${q===""?"active":""}`,onClick:()=>z(""),children:k("allDates")}),P.map(b=>w.jsx("button",{className:`filter-chip ${q===b?"active":""}`,onClick:()=>z(b),children:V(b)},b))]})]}),(E==="streaming"||E==="theaters")&&oe&&w.jsxs("section",{className:"filter-section",children:[w.jsx("h3",{children:k("minimumRating")}),w.jsx("div",{className:"filter-chips",children:Ne.map(b=>w.jsx("button",{className:`filter-chip ${m===b.value?"active":""}`,onClick:()=>oe(b.value),children:b.label},b.value))})]}),(E==="streaming"||E==="theaters")&&w.jsxs("section",{className:"filter-section",children:[w.jsx("h3",{children:k("categories")}),w.jsx("div",{className:"filter-chips",children:r.map(b=>w.jsx("button",{className:`filter-chip ${s.includes(b.id)?"active":""}`,onClick:()=>Pe(b.id),children:b.name},b.id))})]}),E==="streaming"&&w.jsxs(w.Fragment,{children:[(se||N)&&w.jsxs("section",{className:"filter-section",children:[w.jsx("h3",{children:k("releaseYear")}),w.jsxs("div",{className:"filter-year-range",children:[w.jsxs("select",{value:g||"",onChange:b=>se==null?void 0:se(b.target.value?parseInt(b.target.value):void 0),className:"filter-select filter-select--small",children:[w.jsx("option",{value:"",children:k("yearFrom")}),Wy.map(b=>w.jsx("option",{value:b,children:b},b))]}),w.jsx("span",{className:"filter-year-separator",children:"-"}),w.jsxs("select",{value:_||"",onChange:b=>N==null?void 0:N(b.target.value?parseInt(b.target.value):void 0),className:"filter-select filter-select--small",children:[w.jsx("option",{value:"",children:k("yearTo")}),Wy.map(b=>w.jsx("option",{value:b,children:b},b))]})]})]}),O==="movie"&&w.jsxs("section",{className:"filter-section",children:[w.jsx("h3",{children:k("ageRating")}),w.jsxs("div",{className:"filter-chips",children:[w.jsx("button",{className:`filter-chip ${l===""?"active":""}`,onClick:()=>Y(""),children:k("all")}),t.map(b=>w.jsx("button",{className:`filter-chip ${l===b.certification?"active":""}`,onClick:()=>Y(b.certification),title:ze[b.certification]||b.meaning,children:b.certification},b.certification))]})]}),w.jsxs("section",{className:"filter-section",children:[w.jsx("h3",{children:k("streamingProviders")}),w.jsx("div",{className:"filter-providers",children:e.map(b=>w.jsx("button",{className:`filter-provider ${o.includes(b.provider_id)?"active":""}`,onClick:()=>re(b.provider_id),title:b.provider_name,children:w.jsx("img",{src:Vr(b.logo_path,er.logo.medium),alt:b.provider_name})},b.provider_id))})]})]})]})},dc=(r,e)=>`${e}_${r}`,Gf=r=>dw(Nw,"users",r,"favorites"),Kd=async(r,e)=>{const t=hl(Gf(r),dc(e.id,e.mediaType));await Wf(t,e)},vd=async(r,e,t)=>{const s=hl(Gf(r),dc(e,t));await kw(s)},fR=(r,e,t)=>{const s=Iw(Gf(r));return Cw(s,o=>{const l=[];o.forEach(h=>{l.push(h.data())}),l.sort((h,m)=>new Date(m.addedAt).getTime()-new Date(h.addedAt).getTime()),e(l)},o=>{console.error("Firestore favorites subscription error:",o),t==null||t(o)})},pR=(r,e)=>{const t=new Map;return e.forEach(s=>{t.set(dc(s.id,s.mediaType),s)}),r.forEach(s=>{const o=dc(s.id,s.mediaType),l=t.get(o);l?t.set(o,{...l,liked:l.liked||s.liked,loved:l.loved||s.loved}):t.set(o,s)}),Array.from(t.values()).sort((s,o)=>new Date(o.addedAt).getTime()-new Date(s.addedAt).getTime())},mR=async(r,e)=>{const t=e.map(s=>Kd(r,s));await Promise.all(t)},Lw="movie-search-favorites",qy=r=>"title"in r,Gy=()=>{if(typeof window>"u")return[];const r=localStorage.getItem(Lw);if(r)try{return JSON.parse(r)}catch(e){console.error("Failed to parse favorites:",e)}return[]},Vu=r=>{localStorage.setItem(Lw,JSON.stringify(r))},Nc=()=>{const{user:r}=qf(),[e,t]=X.useState([]),[s,o]=X.useState(!0),[l,h]=X.useState(!1),m=X.useRef(!1),g=X.useRef(null);X.useEffect(()=>{const D=Gy();t(D),o(!1)},[]),X.useEffect(()=>{if(!r){g.current=null,m.current=!1;return}g.current!==r.uid&&(g.current=r.uid,m.current=!1),h(!0);const D=fR(r.uid,async z=>{if(m.current)t(z),Vu(z);else{m.current=!0;const W=Gy();if(W.length>0){const J=pR(W,z);t(J),Vu(J);const Y=W.filter(G=>!z.some(oe=>oe.id===G.id&&oe.mediaType===G.mediaType));if(Y.length>0)try{await mR(r.uid,Y)}catch(G){console.error("Failed to sync local favorites to cloud:",G)}}else t(z),Vu(z)}h(!1)},z=>{console.error("Favorites subscription error:",z),h(!1)});return()=>D()},[r]),X.useEffect(()=>{!s&&!l&&Vu(e)},[e,s,l]);const _=X.useCallback((D,z)=>{const W=e.find(G=>G.id===D.id&&G.mediaType===z);if(W)return W;const J=qy(D)?D.title:D.name,Y=qy(D)?D.release_date:D.first_air_date;return{id:D.id,mediaType:z,title:J,posterPath:D.poster_path,releaseDate:Y,voteAverage:D.vote_average,addedAt:new Date().toISOString(),liked:!1,loved:!1}},[e]),E=X.useCallback(async(D,z)=>{const W=_(D,z),J=!W.liked;if(!J&&!W.loved){if(t(G=>G.filter(oe=>!(oe.id===D.id&&oe.mediaType===z))),r)try{await vd(r.uid,D.id,z)}catch(G){console.error("Failed to remove favorite from cloud:",G)}return}const Y={...W,liked:J};if(t(G=>G.some(se=>se.id===D.id&&se.mediaType===z)?G.map(se=>se.id===D.id&&se.mediaType===z?Y:se):[Y,...G]),r)try{await Kd(r.uid,Y)}catch(G){console.error("Failed to update favorite in cloud:",G)}},[r,_]),S=X.useCallback(async(D,z)=>{const W=_(D,z),J=!W.loved;if(!J&&!W.liked){if(t(G=>G.filter(oe=>!(oe.id===D.id&&oe.mediaType===z))),r)try{await vd(r.uid,D.id,z)}catch(G){console.error("Failed to remove favorite from cloud:",G)}return}const Y={...W,loved:J};if(t(G=>G.some(se=>se.id===D.id&&se.mediaType===z)?G.map(se=>se.id===D.id&&se.mediaType===z?Y:se):[Y,...G]),r)try{await Kd(r.uid,Y)}catch(G){console.error("Failed to update favorite in cloud:",G)}},[r,_]),P=X.useCallback(async(D,z)=>{if(t(W=>W.filter(J=>!(J.id===D&&J.mediaType===z))),r)try{await vd(r.uid,D,z)}catch(W){console.error("Failed to remove favorite from cloud:",W)}},[r]),F=X.useCallback((D,z)=>{const W=e.find(J=>J.id===D&&J.mediaType===z);return(W==null?void 0:W.liked)??!1},[e]),q=X.useCallback((D,z)=>{const W=e.find(J=>J.id===D&&J.mediaType===z);return(W==null?void 0:W.loved)??!1},[e]);return{items:e,loading:s,syncing:l,toggleLike:E,toggleLove:S,isLiked:F,isLoved:q,removeFavorite:P}},Ky=r=>"title"in r,bw=({item:r,onClick:e,mediaType:t})=>{const{t:s}=cr(),{toggleLike:o,toggleLove:l,isLiked:h,isLoved:m}=Nc(),g=Ky(r)?r.title:r.name,_=Ky(r)?r.release_date:r.first_air_date,E=_?new Date(_).getFullYear():"N/A",S=r.vote_average?r.vote_average.toFixed(1):"N/A",P=h(r.id,t),F=m(r.id,t),q=z=>{z.stopPropagation(),o(r,t)},D=z=>{z.stopPropagation(),l(r,t)};return w.jsxs("article",{className:"movie-card",onClick:()=>e==null?void 0:e(r),children:[w.jsxs("div",{className:"movie-card__poster",children:[w.jsx("img",{src:Vr(r.poster_path,er.poster.medium),alt:g,loading:"lazy"}),w.jsxs("div",{className:"movie-card__rating",children:[w.jsx(Xa,{size:14,fill:"currentColor"}),S]}),t==="tv"&&w.jsx("div",{className:"movie-card__badge",children:s("tvShow")}),w.jsxs("div",{className:"movie-card__favorites",children:[w.jsx("button",{className:`movie-card__fav-btn movie-card__like ${P?"active":""}`,onClick:q,title:s("like"),children:w.jsx(za,{size:14,fill:P?"currentColor":"none"})}),w.jsx("button",{className:`movie-card__fav-btn movie-card__love ${F?"active":""}`,onClick:D,title:s("love"),children:w.jsx(To,{size:14,fill:F?"currentColor":"none"})})]})]}),w.jsxs("div",{className:"movie-card__info",children:[w.jsx("h3",{className:"movie-card__title",children:g}),w.jsx("p",{className:"movie-card__year",children:E})]})]})},gR=({items:r,loading:e,onItemClick:t,onLoadMore:s,hasMore:o,mediaType:l})=>{const{t:h}=cr();return!e&&r.length===0?w.jsxs("div",{className:"movie-grid__empty",children:[w.jsx("p",{children:h(l==="tv"?"noTvShowsFound":"noMoviesFound")}),w.jsx("p",{children:h("tryDifferentFilters")})]}):w.jsxs("div",{className:"movie-grid-container",children:[w.jsx("div",{className:"movie-grid",children:r.map(m=>w.jsx(bw,{item:m,onClick:t,mediaType:l},m.id))}),e&&w.jsxs("div",{className:"movie-grid__loading",children:[w.jsx("div",{className:"spinner"}),w.jsx("p",{children:h(l==="tv"?"loadingTvShows":"loadingMovies")})]}),!e&&o&&w.jsx("button",{className:"movie-grid__load-more",onClick:s,children:h(l==="tv"?"loadMoreTvShows":"loadMoreMovies")})]})},ut=async(r,e={})=>{const t=new URLSearchParams({api_key:lR,language:hR,...e}),s=await fetch(`${uR}${r}?${t}`);if(!s.ok)throw new Error(`TMDB API error: ${s.status}`);return s.json()},yR=async()=>(await ut("/genre/movie/list")).genres,_R=async()=>(await ut("/watch/providers/movie",{watch_region:ur})).results,vR=async()=>{const r=await ut("/certification/movie/list");return r.certifications.HU||r.certifications.US||[]},wR=async(r=1,e={})=>{const t={page:r.toString(),region:ur,watch_region:ur,with_watch_monetization_types:"flatrate",sort_by:e.sortBy||"popularity.desc"};return e.genres&&e.genres.length>0&&(t.with_genres=e.genres.join(",")),e.certification&&(t.certification_country="HU",t.certification=e.certification),e.providers&&e.providers.length>0&&(t.with_watch_providers=e.providers.join("|")),e.minRating&&e.minRating>0&&(t["vote_average.gte"]=e.minRating.toString(),t["vote_count.gte"]="50"),e.yearFrom&&(t["primary_release_date.gte"]=`${e.yearFrom}-01-01`),e.yearTo&&(t["primary_release_date.lte"]=`${e.yearTo}-12-31`),ut("/discover/movie",t)},ER=async r=>ut(`/movie/${r}`),Qd=async r=>{const e=await ut(`/movie/${r}/watch/providers`);return e.results[ur]||e.results.US||null},TR=async(r,e=1)=>ut("/search/movie",{query:r,page:e.toString(),include_adult:"false"}),IR=async(r,e=1)=>ut("/search/tv",{query:r,page:e.toString(),include_adult:"false"}),SR=async()=>(await ut("/genre/tv/list")).genres,AR=async()=>(await ut("/watch/providers/tv",{watch_region:ur})).results,kR=async(r=1,e={})=>{const t={page:r.toString(),watch_region:ur,with_watch_monetization_types:"flatrate",sort_by:e.sortBy||"popularity.desc"};return e.genres&&e.genres.length>0&&(t.with_genres=e.genres.join(",")),e.providers&&e.providers.length>0&&(t.with_watch_providers=e.providers.join("|")),e.minRating&&e.minRating>0&&(t["vote_average.gte"]=e.minRating.toString(),t["vote_count.gte"]="50"),e.yearFrom&&(t["first_air_date.gte"]=`${e.yearFrom}-01-01`),e.yearTo&&(t["first_air_date.lte"]=`${e.yearTo}-12-31`),ut("/discover/tv",t)},CR=async r=>ut(`/tv/${r}`),Yd=async r=>{const e=await ut(`/tv/${r}/watch/providers`);return e.results[ur]||e.results.US||null},RR=async r=>{const e=await ut(`/movie/${r}/videos`,{language:"hu-HU"});return e.results.length===0?(await ut(`/movie/${r}/videos`,{language:"en-US"})).results:e.results},PR=async r=>{const e=await ut(`/tv/${r}/videos`,{language:"hu-HU"});return e.results.length===0?(await ut(`/tv/${r}/videos`,{language:"en-US"})).results:e.results},Qy=async(r,e)=>r==="movie"?RR(e):PR(e),Yy=r=>{const e=r.filter(o=>o.site==="YouTube"&&(o.type==="Trailer"||o.type==="Teaser")),t=e.find(o=>o.official);if(t)return t;if(e.length>0)return e[0];const s=r.filter(o=>o.site==="YouTube");return s.length>0?s[0]:null},Fw=async(r="week")=>ut(`/trending/movie/${r}`,{region:ur}),jw=async(r="week")=>ut(`/trending/tv/${r}`),Uw=async(r=1)=>ut("/movie/upcoming",{page:r.toString(),region:ur}),Xd=async(r=1)=>ut("/movie/now_playing",{page:r.toString(),region:ur});let Ou=null;const zw=async()=>{if(Ou)return Ou;try{const e=await fetch("/movie-search/data/cinema.json");return e.ok?(Ou=await e.json(),Ou):(console.warn("Hungarian cinema data not available"),null)}catch(r){return console.error("Error loading Hungarian cinema data:",r),null}},NR=async r=>{try{const e=await zw();if(!e)return console.warn("Hungarian cinema data not available, falling back to TMDB"),Xd(1);let t=e.movies;if(r!=null&&r.city&&(t=t.filter(s=>s.cities.includes(r.city))),r!=null&&r.date&&(t=t.filter(s=>s.dates.includes(r.date))),r!=null&&r.genres&&r.genres.length>0&&(t=t.filter(s=>r.genres.some(o=>s.genre_ids.includes(o)))),r!=null&&r.minRating&&r.minRating>0&&(t=t.filter(s=>s.vote_average>=r.minRating)),r!=null&&r.sortBy)switch(r.sortBy){case"vote_average.desc":t.sort((s,o)=>o.vote_average-s.vote_average);break;case"primary_release_date.desc":t.sort((s,o)=>new Date(o.release_date).getTime()-new Date(s.release_date).getTime());break;case"title.asc":t.sort((s,o)=>s.title.localeCompare(o.title));break;case"screenings.desc":t.sort((s,o)=>o.screeningCount-s.screeningCount);break;default:t.sort((s,o)=>o.screeningCount-s.screeningCount)}return{page:1,results:t,total_pages:1,total_results:t.length}}catch(e){return console.error("Error loading Hungarian cinema data:",e),Xd(1)}},xR=async(r=1)=>ut("/tv/on_the_air",{page:r.toString()}),gs=[1899,8,119,337,1773,2],DR=(r="movie")=>{const[e,t]=X.useState([]),[s,o]=X.useState([]),[l,h]=X.useState([]),[m,g]=X.useState(!0),[_,E]=X.useState(null);return X.useEffect(()=>{(async()=>{g(!0),E(null);try{const[P,F,q]=await Promise.all([r==="tv"?SR():yR(),r==="tv"?AR():_R(),vR()]);t(P);const D=F.filter(z=>gs.includes(z.provider_id)).sort((z,W)=>gs.indexOf(z.provider_id)-gs.indexOf(W.provider_id));o(D),h(q)}catch(P){E(P instanceof Error?P.message:"Hiba trtnt a szrk betltsekor")}finally{g(!1)}})()},[r]),{genres:e,providers:s,certifications:l,loading:m,error:_}},Za=(r,e)=>`${e}_${r}`,xc=r=>dw(Nw,"users",r,"watchlist"),Bw=async(r,e)=>{const t=hl(xc(r),Za(e.id,e.mediaType));await Wf(t,e)},VR=async(r,e,t)=>{const s=hl(xc(r),Za(e,t));await kw(s)},wd=async(r,e)=>{const t=hl(xc(r),Za(e.id,e.mediaType));await Wf(t,e)},OR=(r,e,t)=>{const s=Iw(xc(r));return Cw(s,o=>{const l=[];o.forEach(h=>{l.push(h.data())}),l.sort((h,m)=>new Date(m.addedAt).getTime()-new Date(h.addedAt).getTime()),e(l)},o=>{console.error("Firestore subscription error:",o),t==null||t(o)})},MR=(r,e)=>{const t=new Map;return e.forEach(s=>{t.set(Za(s.id,s.mediaType),s)}),r.forEach(s=>{const o=Za(s.id,s.mediaType),l=t.get(o);l?new Date(s.addedAt)>new Date(l.addedAt)&&t.set(o,{...s,watched:l.watched||s.watched}):t.set(o,s)}),Array.from(t.values()).sort((s,o)=>new Date(o.addedAt).getTime()-new Date(s.addedAt).getTime())},LR=async(r,e)=>{const t=e.map(s=>Bw(r,s));await Promise.all(t)},$w="movie-search-watchlist",Xy=r=>"title"in r,Jy=()=>{if(typeof window>"u")return[];const r=localStorage.getItem($w);if(r)try{return JSON.parse(r)}catch(e){console.error("Failed to parse watchlist:",e)}return[]},Mu=r=>{localStorage.setItem($w,JSON.stringify(r))},Kf=()=>{const{user:r}=qf(),[e,t]=X.useState([]),[s,o]=X.useState(!0),[l,h]=X.useState(!1),[m,g]=X.useState(null),_=X.useRef(!1),E=X.useRef(null);X.useEffect(()=>{const W=Jy();t(W),o(!1)},[]),X.useEffect(()=>{if(!r){E.current=null,_.current=!1;return}E.current!==r.uid&&(E.current=r.uid,_.current=!1),h(!0);const W=OR(r.uid,async J=>{if(_.current)t(J),Mu(J);else{_.current=!0;const Y=Jy();if(Y.length>0){const G=MR(Y,J);t(G),Mu(G);const oe=Y.filter(se=>!J.some(N=>N.id===se.id&&N.mediaType===se.mediaType));if(oe.length>0)try{await LR(r.uid,oe)}catch(se){console.error("Failed to sync local items to cloud:",se)}}else t(J),Mu(J)}h(!1)},J=>{console.error("Watchlist subscription error:",J),h(!1)});return()=>W()},[r]),X.useEffect(()=>{!s&&!l&&Mu(e)},[e,s,l]);const S=X.useCallback(async(W,J)=>{const Y=Xy(W)?W.title:W.name,G=Xy(W)?W.release_date:W.first_air_date,oe={id:W.id,mediaType:J,title:Y,posterPath:W.poster_path,releaseDate:G,voteAverage:W.vote_average,addedAt:new Date().toISOString(),watched:!1};if(t(se=>se.some(N=>N.id===W.id&&N.mediaType===J)?se:[oe,...se]),r)try{await Bw(r.uid,oe)}catch(se){console.error("Failed to add item to cloud:",se)}},[r]),P=X.useCallback(async(W,J)=>{if(t(Y=>Y.filter(G=>!(G.id===W&&G.mediaType===J))),r)try{await VR(r.uid,W,J)}catch(Y){console.error("Failed to remove item from cloud:",Y)}},[r]),F=X.useCallback(async(W,J)=>{let Y=null;if(t(G=>G.map(oe=>oe.id===W&&oe.mediaType===J?(Y={...oe,watched:!oe.watched},Y):oe)),r&&Y)try{await wd(r.uid,Y)}catch(G){console.error("Failed to update item in cloud:",G)}},[r]),q=X.useCallback((W,J)=>e.some(Y=>Y.id===W&&Y.mediaType===J),[e]),D=X.useCallback(async()=>{if(e.filter(Y=>Y.availability===void 0).length===0)return;o(!0);const J=await Promise.all(e.map(async Y=>{if(Y.availability!==void 0)return Y;try{const G=Y.mediaType==="movie"?await Qd(Y.id):await Yd(Y.id),se=[...(G==null?void 0:G.flatrate)||[],...(G==null?void 0:G.rent)||[],...(G==null?void 0:G.buy)||[]].some(A=>gs.includes(A.provider_id)),N={...Y,availability:G,isAvailable:se,lastChecked:new Date().toISOString()};if(r)try{await wd(r.uid,N)}catch(A){console.error("Failed to update availability in cloud:",A)}return N}catch(G){return console.error(`Failed to check availability for ${Y.title}:`,G),Y}}));t(J),o(!1)},[e,r]),z=X.useCallback(async(W,J)=>{g(W);try{const Y=J==="movie"?await Qd(W):await Yd(W),oe=[...(Y==null?void 0:Y.flatrate)||[],...(Y==null?void 0:Y.rent)||[],...(Y==null?void 0:Y.buy)||[]].some(N=>gs.includes(N.provider_id));let se=null;if(t(N=>N.map(A=>A.id===W&&A.mediaType===J?(se={...A,availability:Y,isAvailable:oe,lastChecked:new Date().toISOString()},se):A)),r&&se)try{await wd(r.uid,se)}catch(N){console.error("Failed to update availability in cloud:",N)}}catch(Y){console.error(`Failed to refresh availability for item ${W}:`,Y)}finally{g(null)}},[r]);return{items:e,loading:s,syncing:l,refreshingId:m,addItem:S,removeItem:P,toggleWatched:F,isInWatchlist:q,checkAvailability:D,refreshItemAvailability:z}},Zy=r=>"title"in r,bR=r=>"runtime"in r,FR=({item:r,mediaType:e,onClose:t})=>{const[s,o]=X.useState(null),[l,h]=X.useState(null),[m,g]=X.useState(null),[_,E]=X.useState(!1),[S,P]=X.useState(!0),{t:F}=cr(),{addItem:q,removeItem:D,isInWatchlist:z}=Kf(),{toggleLike:W,toggleLove:J,isLiked:Y,isLoved:G}=Nc(),oe=z(r.id,e),se=Y(r.id,e),N=G(r.id,e),A=Zy(r)?r.title:r.name,R=Zy(r)?r.release_date:r.first_air_date,O=R?new Date(R).getFullYear():"N/A";X.useEffect(()=>{(async()=>{P(!0);try{if(e==="tv"){const[T,we,Ne]=await Promise.all([CR(r.id),Yd(r.id),Qy("tv",r.id)]);o(T),h(we),g(Yy(Ne))}else{const[T,we,Ne]=await Promise.all([ER(r.id),Qd(r.id),Qy("movie",r.id)]);o(T),h(we),g(Yy(Ne))}}catch(T){console.error("Error fetching details:",T)}finally{P(!1)}})()},[r.id,e]),X.useEffect(()=>{const V=T=>{T.key==="Escape"&&(_?E(!1):t())};return document.addEventListener("keydown",V),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",V),document.body.style.overflow=""}},[t,_]);const k=()=>s?bR(s)?s.runtime?`${s.runtime} ${F("minutes")}`:null:`${s.number_of_seasons} ${F("seasons")}, ${s.number_of_episodes} ${F("episodes")}`:null;return w.jsx("div",{className:"modal-overlay",onClick:t,children:w.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),children:[w.jsx("button",{className:"modal-close",onClick:t,children:w.jsx(Ja,{size:24})}),_&&m&&w.jsx("div",{className:"trailer-overlay",onClick:()=>E(!1),children:w.jsxs("div",{className:"trailer-container",onClick:V=>V.stopPropagation(),children:[w.jsx("button",{className:"trailer-close",onClick:()=>E(!1),children:w.jsx(Ja,{size:24})}),w.jsx("iframe",{src:`https://www.youtube.com/embed/${m.key}?autoplay=1`,title:m.name,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})}),w.jsxs("div",{className:"modal-body",children:[w.jsxs("div",{className:"modal-poster",children:[w.jsx("img",{src:Vr(r.poster_path,er.poster.large),alt:A}),w.jsxs("div",{className:"poster-buttons",children:[m&&w.jsxs("button",{className:"trailer-button",onClick:()=>E(!0),children:[w.jsx(QC,{size:16})," ",F("trailer")]}),w.jsxs("div",{className:"favorite-buttons",children:[w.jsx("button",{className:`favorite-button like-button ${se?"active":""}`,onClick:()=>W(r,e),title:F("like"),children:w.jsx(za,{size:16,fill:se?"currentColor":"none"})}),w.jsx("button",{className:`favorite-button love-button ${N?"active":""}`,onClick:()=>J(r,e),title:F("love"),children:w.jsx(To,{size:16,fill:N?"currentColor":"none"})})]}),w.jsx("button",{className:`watchlist-button ${oe?"in-list":""}`,onClick:()=>{oe?D(r.id,e):q(r,e)},children:oe?w.jsxs(w.Fragment,{children:[w.jsx(Vw,{size:16})," ",F("inWatchlist")]}):w.jsxs(w.Fragment,{children:[w.jsx(Gd,{size:16})," ",F("addToWatchlist")]})})]})]}),w.jsxs("div",{className:"modal-info",children:[w.jsx("h2",{className:"modal-title",children:A}),w.jsxs("div",{className:"modal-meta",children:[w.jsx("span",{className:"modal-year",children:O}),k()&&w.jsx("span",{className:"modal-runtime",children:k()}),w.jsxs("span",{className:"modal-rating",children:[w.jsx(Xa,{size:16,fill:"currentColor"})," ",r.vote_average.toFixed(1)]})]}),(s==null?void 0:s.genres)&&w.jsx("div",{className:"modal-genres",children:s.genres.map(V=>w.jsx("span",{className:"modal-genre",children:V.name},V.id))}),(s==null?void 0:s.tagline)&&w.jsxs("p",{className:"modal-tagline",children:['"',s.tagline,'"']}),w.jsx("p",{className:"modal-overview",children:r.overview||F("noDescription")}),S&&w.jsx("div",{className:"modal-loading",children:w.jsx(Io,{size:32,className:"spin"})}),l&&w.jsxs("div",{className:"modal-providers",children:[w.jsx("h3",{children:F("availableOnStreaming")}),l.flatrate&&l.flatrate.length>0&&w.jsxs("div",{className:"provider-section",children:[w.jsx("span",{className:"provider-label",children:F("withSubscription")}),w.jsx("div",{className:"provider-list",children:l.flatrate.map(V=>w.jsx("img",{src:Vr(V.logo_path,er.logo.medium),alt:V.provider_name,title:V.provider_name},V.provider_id))})]}),l.rent&&l.rent.length>0&&w.jsxs("div",{className:"provider-section",children:[w.jsx("span",{className:"provider-label",children:F("rentable")}),w.jsx("div",{className:"provider-list",children:l.rent.map(V=>w.jsx("img",{src:Vr(V.logo_path,er.logo.medium),alt:V.provider_name,title:V.provider_name},V.provider_id))})]}),l.buy&&l.buy.length>0&&w.jsxs("div",{className:"provider-section",children:[w.jsx("span",{className:"provider-label",children:F("purchasable")}),w.jsx("div",{className:"provider-list",children:l.buy.map(V=>w.jsx("img",{src:Vr(V.logo_path,er.logo.medium),alt:V.provider_name,title:V.provider_name},V.provider_id))})]}),!l.flatrate&&!l.rent&&!l.buy&&w.jsx("p",{className:"no-providers",children:F("noStreamingProviders")}),l.link&&w.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"provider-link",children:[F("viewOnJustWatch")," ",w.jsx(MC,{size:14})]})]})]})]})]})})},jR=({title:r,items:e,loading:t,mediaType:s,onItemClick:o})=>{const l=X.useRef(null),h=m=>{if(l.current){const g=l.current.clientWidth*.8;l.current.scrollBy({left:m==="left"?-g:g,behavior:"smooth"})}};return t?w.jsxs("section",{className:"movie-section",children:[w.jsx("h2",{className:"movie-section__title",children:r}),w.jsx("div",{className:"movie-section__loading",children:w.jsx(Io,{size:32,className:"spin"})})]}):e.length===0?null:w.jsxs("section",{className:"movie-section",children:[w.jsx("h2",{className:"movie-section__title",children:r}),w.jsxs("div",{className:"movie-section__container",children:[w.jsx("button",{className:"movie-section__nav movie-section__nav--left",onClick:()=>h("left"),"aria-label":"Scroll left",children:w.jsx(AC,{size:24})}),w.jsx("div",{className:"movie-section__scroll",ref:l,children:e.map(m=>w.jsx("div",{className:"movie-section__item",children:w.jsx(bw,{item:m,mediaType:s,onClick:o})},m.id))}),w.jsx("button",{className:"movie-section__nav movie-section__nav--right",onClick:()=>h("right"),"aria-label":"Scroll right",children:w.jsx(CC,{size:24})})]})]})},e_=r=>"title"in r,UR=({onClose:r,onItemClick:e})=>{const{t,language:s}=cr(),{items:o,loading:l,refreshingId:h,removeItem:m,toggleWatched:g,addItem:_,isInWatchlist:E,checkAvailability:S,refreshItemAvailability:P}=Kf(),[F,q]=X.useState("list"),[D,z]=X.useState(""),[W,J]=X.useState("movie"),[Y,G]=X.useState([]),[oe,se]=X.useState(!1),N=o.filter(T=>T.isAvailable===void 0).length;X.useEffect(()=>{N>0&&F==="list"&&!l&&S()},[F,N,S,l]);const A=async T=>{if(T.preventDefault(),!!D.trim()){se(!0);try{if(W==="movie"){const we=await TR(D);G(we.results.map(Ne=>({...Ne,mediaType:"movie"})))}else{const we=await IR(D);G(we.results.map(Ne=>({...Ne,mediaType:"tv"})))}}catch(we){console.error("Search error:",we)}finally{se(!1)}}},R=T=>new Date(T).toLocaleDateString(s==="hu"?"hu-HU":"en-GB"),O=T=>{if(!T)return null;const we=new Date(T),ze=new Date().getTime()-we.getTime(),Pe=Math.floor(ze/(1e3*60*60*24));return Pe===0?t("checkedToday"):Pe===1?t("checkedYesterday"):Pe<7?t("checkedDaysAgo").replace("{days}",String(Pe)):t("checkedOnDate").replace("{date}",R(T))},k=T=>T.isAvailable===void 0?{icon:w.jsx(Io,{size:14,className:"spin"}),text:t("checking"),className:"checking"}:T.isAvailable?{icon:w.jsx(PC,{size:14}),text:t("available"),className:"available"}:{icon:w.jsx(xC,{size:14}),text:t("notAvailable"),className:"unavailable"},V=T=>T.availability?[...T.availability.flatrate||[],...T.availability.rent||[],...T.availability.buy||[]].filter((ze,Pe,re)=>gs.includes(ze.provider_id)&&re.findIndex(fe=>fe.provider_id===ze.provider_id)===Pe):[];return w.jsx("div",{className:"watchlist-overlay",onClick:r,children:w.jsxs("div",{className:"watchlist-panel",onClick:T=>T.stopPropagation(),children:[w.jsxs("div",{className:"watchlist-header",children:[w.jsx("h2",{children:t("watchlist")}),w.jsx("button",{className:"watchlist-close",onClick:r,children:w.jsx(Ja,{size:24})})]}),w.jsxs("div",{className:"watchlist-tabs",children:[w.jsxs("button",{className:`watchlist-tab ${F==="list"?"active":""}`,onClick:()=>q("list"),children:[w.jsx(Ow,{size:16})," ",t("list")," (",o.length,")"]}),w.jsxs("button",{className:`watchlist-tab ${F==="search"?"active":""}`,onClick:()=>q("search"),children:[w.jsx(Gd,{size:16})," ",t("add")]})]}),F==="search"&&w.jsxs("div",{className:"watchlist-search",children:[w.jsxs("form",{onSubmit:A,children:[w.jsxs("div",{className:"search-type-toggle",children:[w.jsx("button",{type:"button",className:`search-type-btn ${W==="movie"?"active":""}`,onClick:()=>J("movie"),children:t("movie")}),w.jsx("button",{type:"button",className:`search-type-btn ${W==="tv"?"active":""}`,onClick:()=>J("tv"),children:t("tvShow")})]}),w.jsxs("div",{className:"search-input-row",children:[w.jsx("input",{type:"text",placeholder:t("searchAnyMovieOrTv"),value:D,onChange:T=>z(T.target.value),className:"watchlist-search-input"}),w.jsx("button",{type:"submit",className:"watchlist-search-btn",disabled:oe,children:oe?"...":t("search")})]})]}),oe?w.jsxs("div",{className:"watchlist-loading",children:[w.jsx(Io,{size:40,className:"spin"}),w.jsx("p",{children:t("searching")})]}):Y.length>0?w.jsx("div",{className:"search-results",children:Y.map(T=>{const we=e_(T)?T.title:T.name,Ne=e_(T)?T.release_date:T.first_air_date,ze=E(T.id,T.mediaType);return w.jsxs("div",{className:"search-result-item",children:[w.jsx("div",{className:"search-result-poster",children:T.poster_path?w.jsx("img",{src:Vr(T.poster_path,er.poster.small),alt:we}):w.jsx("div",{className:"no-poster",children:w.jsx(qd,{size:20})})}),w.jsxs("div",{className:"search-result-info",children:[w.jsx("h4",{children:we}),w.jsxs("div",{className:"search-result-meta",children:[w.jsx("span",{className:"media-type-badge",children:T.mediaType==="movie"?t("movie"):t("tvShow")}),Ne&&w.jsx("span",{children:Ne.split("-")[0]}),w.jsxs("span",{className:"rating",children:[w.jsx(Xa,{size:12,fill:"currentColor"})," ",T.vote_average.toFixed(1)]})]})]}),w.jsx("button",{className:`add-to-list-btn ${ze?"in-list":""}`,onClick:()=>{ze?m(T.id,T.mediaType):_(T,T.mediaType)},children:ze?w.jsx(Vw,{size:18}):w.jsx(Gd,{size:18})})]},`${T.mediaType}-${T.id}`)})}):D&&!oe?w.jsx("div",{className:"watchlist-empty",children:w.jsx("p",{children:t("noSearchResults")})}):w.jsxs("div",{className:"watchlist-empty",children:[w.jsx("p",{children:t("searchAnyInterest")}),w.jsx("p",{className:"hint",children:t("addEvenIfNotAvailable")})]})]}),F==="list"&&w.jsxs(w.Fragment,{children:[l?w.jsxs("div",{className:"watchlist-loading",children:[w.jsx(Io,{size:40,className:"spin"}),w.jsx("p",{children:t("checkingAvailability")})]}):o.length===0?w.jsxs("div",{className:"watchlist-empty",children:[w.jsx("p",{children:t("watchlistEmpty")}),w.jsx("p",{children:t("clickAddTab")})]}):w.jsx("div",{className:"watchlist-items",children:o.map(T=>{var ze;const we=k(T),Ne=V(T);return w.jsxs("div",{className:`watchlist-item ${T.watched?"watched":""}`,children:[w.jsx("div",{className:"watchlist-item-poster",onClick:()=>e(T.id,T.mediaType),children:T.posterPath?w.jsx("img",{src:`https://image.tmdb.org/t/p/w92${T.posterPath}`,alt:T.title}):w.jsx("div",{className:"no-poster",children:w.jsx(qd,{size:24})})}),w.jsxs("div",{className:"watchlist-item-info",children:[w.jsx("h3",{className:"watchlist-item-title",onClick:()=>e(T.id,T.mediaType),children:T.title}),w.jsxs("div",{className:"watchlist-item-meta",children:[w.jsx("span",{className:"media-type-badge",children:T.mediaType==="movie"?t("movie"):t("tvShow")}),T.releaseDate&&w.jsx("span",{className:"release-year",children:T.releaseDate.split("-")[0]}),w.jsxs("span",{className:"rating",children:[w.jsx(Xa,{size:12,fill:"currentColor"})," ",T.voteAverage.toFixed(1)]})]}),w.jsxs("div",{className:`availability-status ${we.className}`,children:[we.icon," ",we.text]}),Ne.length>0&&((ze=T.availability)==null?void 0:ze.link)&&w.jsx("div",{className:"watchlist-providers",children:Ne.map(Pe=>{var re;return w.jsx("a",{href:(re=T.availability)==null?void 0:re.link,target:"_blank",rel:"noopener noreferrer",className:"provider-icon-link",title:`${t("watchOn")}: ${Pe.provider_name}`,children:w.jsx("img",{src:Vr(Pe.logo_path,er.logo.small),alt:Pe.provider_name})},Pe.provider_id)})}),w.jsxs("div",{className:"watchlist-item-dates",children:[w.jsxs("span",{className:"date-added",children:[t("addedOn"),": ",R(T.addedAt)]}),T.lastChecked&&w.jsx("span",{className:"date-checked",children:O(T.lastChecked)})]})]}),w.jsxs("div",{className:"watchlist-item-actions",children:[w.jsx("button",{className:`btn-refresh-item ${h===T.id?"refreshing":""}`,onClick:()=>P(T.id,T.mediaType),disabled:h===T.id,title:t("refreshAvailability"),children:w.jsx(By,{size:18})}),w.jsx("button",{className:`btn-watched ${T.watched?"active":""}`,onClick:()=>g(T.id,T.mediaType),title:T.watched?t("markAsUnwatched"):t("markAsWatched"),children:T.watched?w.jsx(jC,{size:18}):w.jsx(bC,{size:18})}),w.jsx("button",{className:"btn-remove",onClick:()=>m(T.id,T.mediaType),title:t("removeFromList"),children:w.jsx(Mw,{size:18})})]})]},`${T.mediaType}-${T.id}`)})}),o.length>0&&!l&&w.jsx("div",{className:"watchlist-footer",children:w.jsxs("button",{className:"btn-refresh",onClick:S,children:[w.jsx(By,{size:16})," ",t("refreshAvailability")]})})]})]})})},zR=({onClose:r,onItemClick:e})=>{const{t,language:s}=cr(),{items:o,loading:l,removeFavorite:h,toggleLike:m,toggleLove:g}=Nc(),[_,E]=X.useState("all"),S=o.filter(D=>_==="liked"?D.liked:_==="loved"?D.loved:!0),P=o.filter(D=>D.liked).length,F=o.filter(D=>D.loved).length,q=D=>new Date(D).toLocaleDateString(s==="hu"?"hu-HU":"en-GB");return w.jsx("div",{className:"favorites-overlay",onClick:r,children:w.jsxs("div",{className:"favorites-panel",onClick:D=>D.stopPropagation(),children:[w.jsxs("div",{className:"favorites-header",children:[w.jsx("h2",{children:t("favorites")}),w.jsx("button",{className:"favorites-close",onClick:r,children:w.jsx(Ja,{size:24})})]}),w.jsxs("div",{className:"favorites-filters",children:[w.jsxs("button",{className:`favorites-filter ${_==="all"?"active":""}`,onClick:()=>E("all"),children:[t("filterAll")," (",o.length,")"]}),w.jsxs("button",{className:`favorites-filter ${_==="liked"?"active":""}`,onClick:()=>E("liked"),children:[w.jsx(za,{size:14})," ",t("liked")," (",P,")"]}),w.jsxs("button",{className:`favorites-filter ${_==="loved"?"active":""}`,onClick:()=>E("loved"),children:[w.jsx(To,{size:14})," ",t("loved")," (",F,")"]})]}),w.jsx("div",{className:"favorites-content",children:l?w.jsx("div",{className:"favorites-loading",children:w.jsx(Io,{size:40,className:"spin"})}):S.length===0?w.jsx("div",{className:"favorites-empty",children:w.jsx("p",{children:t("noFavorites")})}):w.jsx("div",{className:"favorites-items",children:S.map(D=>w.jsxs("div",{className:"favorites-item",children:[w.jsx("div",{className:"favorites-item-poster",onClick:()=>e(D.id,D.mediaType),children:D.posterPath?w.jsx("img",{src:Vr(D.posterPath,er.poster.small),alt:D.title}):w.jsx("div",{className:"no-poster",children:w.jsx(qd,{size:24})})}),w.jsxs("div",{className:"favorites-item-info",children:[w.jsx("h3",{className:"favorites-item-title",onClick:()=>e(D.id,D.mediaType),children:D.title}),w.jsxs("div",{className:"favorites-item-meta",children:[w.jsx("span",{className:"media-type-badge",children:D.mediaType==="movie"?t("movie"):t("tvShow")}),D.releaseDate&&w.jsx("span",{className:"release-year",children:D.releaseDate.split("-")[0]}),w.jsxs("span",{className:"rating",children:[w.jsx(Xa,{size:12,fill:"currentColor"})," ",D.voteAverage.toFixed(1)]})]}),w.jsxs("div",{className:"favorites-item-badges",children:[D.liked&&w.jsxs("span",{className:"badge badge-liked",children:[w.jsx(za,{size:12})," ",t("liked")]}),D.loved&&w.jsxs("span",{className:"badge badge-loved",children:[w.jsx(To,{size:12})," ",t("loved")]})]}),w.jsxs("div",{className:"favorites-item-date",children:[t("addedOn"),": ",q(D.addedAt)]})]}),w.jsxs("div",{className:"favorites-item-actions",children:[w.jsx("button",{className:`btn-like ${D.liked?"active":""}`,onClick:()=>{const z={id:D.id,title:D.title,name:D.title,poster_path:D.posterPath,release_date:D.releaseDate,first_air_date:D.releaseDate,vote_average:D.voteAverage,overview:"",original_title:D.title,original_name:D.title,backdrop_path:null,vote_count:0,genre_ids:[],adult:!1,popularity:0};m(z,D.mediaType)},title:t("like"),children:w.jsx(za,{size:18,fill:D.liked?"currentColor":"none"})}),w.jsx("button",{className:`btn-love ${D.loved?"active":""}`,onClick:()=>{const z={id:D.id,title:D.title,name:D.title,poster_path:D.posterPath,release_date:D.releaseDate,first_air_date:D.releaseDate,vote_average:D.voteAverage,overview:"",original_title:D.title,original_name:D.title,backdrop_path:null,vote_count:0,genre_ids:[],adult:!1,popularity:0};g(z,D.mediaType)},title:t("love"),children:w.jsx(To,{size:18,fill:D.loved?"currentColor":"none"})}),w.jsx("button",{className:"btn-remove",onClick:()=>h(D.id,D.mediaType),title:t("removeFromList"),children:w.jsx(Mw,{size:18})})]})]},`${D.mediaType}-${D.id}`))})})]})})},BR=(r={})=>{const[e,t]=X.useState([]),[s,o]=X.useState(!0),[l,h]=X.useState(null),[m,g]=X.useState(1),[_,E]=X.useState(0),[S,P]=X.useState(0),F=r.mediaType||"movie",q=r.browseMode||"streaming",D=X.useCallback(async(J,Y=!1)=>{o(!0),h(null);try{let G;q==="trending"?F==="tv"?G=await jw("week"):G=await Fw("week"):q==="upcoming"&&F==="movie"?G=await Uw(J):q==="theaters"&&F==="movie"?G=await NR({city:r.city,date:r.date,genres:r.genres,minRating:r.minRating,sortBy:r.sortBy}):F==="tv"?G=await kR(J,{genres:r.genres,providers:r.providers,sortBy:r.sortBy,minRating:r.minRating,yearFrom:r.yearFrom,yearTo:r.yearTo}):G=await wR(J,{genres:r.genres,certification:r.certification,providers:r.providers,sortBy:r.sortBy,minRating:r.minRating,yearFrom:r.yearFrom,yearTo:r.yearTo}),t(oe=>Y?[...oe,...G.results]:G.results),E(G.total_pages),P(G.total_results),g(J)}catch(G){const oe=F==="tv"?"Hiba trtnt a sorozatok betltsekor":"Hiba trtnt a filmek betltsekor";h(G instanceof Error?G.message:oe)}finally{o(!1)}},[F,q,r.genres,r.certification,r.providers,r.sortBy,r.minRating,r.yearFrom,r.yearTo,r.city,r.date]);X.useEffect(()=>{t([]),D(1,!1)},[D]);const z=X.useCallback(()=>{m<_&&!s&&D(m+1,!0)},[m,_,s,D]),W=X.useCallback(()=>{t([]),D(1,!1)},[D]);return{items:e,loading:s,error:l,page:m,totalPages:_,totalResults:S,loadMore:z,refresh:W}},$R=r=>{const[e,t]=X.useState([]),[s,o]=X.useState([]),[l,h]=X.useState([]),[m,g]=X.useState([]),[_,E]=X.useState(!0);return X.useEffect(()=>{(async()=>{E(!0);try{if(r==="movie"){const[P,F,q]=await Promise.all([Fw("week"),Uw(),Xd()]);t(P.results.slice(0,10)),o(F.results.slice(0,10)),h(q.results.slice(0,10))}else{const[P,F]=await Promise.all([jw("week"),xR()]);t(P.results.slice(0,10)),g(F.results.slice(0,10))}}catch(P){console.error("Error fetching movie sections:",P)}finally{E(!1)}})()},[r]),{trending:e,upcoming:s,nowPlaying:l,onTheAir:m,loading:_}};function HR(){const[r,e]=X.useState("movie"),[t,s]=X.useState("streaming"),[o,l]=X.useState([]),[h,m]=X.useState([]),[g,_]=X.useState(""),[E,S]=X.useState("popularity.desc"),[P,F]=X.useState(0),[q,D]=X.useState(void 0),[z,W]=X.useState(void 0),[J,Y]=X.useState(""),[G,oe]=X.useState(""),[se,N]=X.useState([]),[A,R]=X.useState([]),[O,k]=X.useState(null),[V,T]=X.useState(!1),[we,Ne]=X.useState(!1),[ze,Pe]=X.useState(!1),[re,fe]=X.useState("movie"),{items:ae,syncing:L}=Kf(),{syncing:b}=Nc(),{trending:ye,loading:Te}=$R(r),{t:ke}=cr(),{genres:xe,providers:Be,certifications:be,loading:qe}=DR(r);X.useEffect(()=>{t==="theaters"&&zw().then(Ve=>{Ve&&(N(Ve.cities),R(Ve.dates))})},[t]);const{items:Tt,loading:jr,page:Oi,totalPages:On,loadMore:Ur}=BR({mediaType:r,browseMode:t,genres:o.length>0?o:void 0,certification:r==="movie"&&g||void 0,providers:h.length>0?h:gs,sortBy:E,minRating:P>0?P:void 0,yearFrom:q,yearTo:z,city:J||void 0,date:G||void 0}),ks=X.useCallback(Ve=>{e(Ve),s("streaming"),l([]),_("")},[]),zr=X.useCallback(()=>{e("movie"),s("theaters"),l([]),_(""),Y(""),oe("")},[]),hr=X.useCallback(Ve=>{s(Ve)},[]),Mi=X.useCallback(()=>{s("streaming"),l([]),m([]),_(""),S("popularity.desc"),F(0),D(void 0),W(void 0),Y(""),oe("")},[]),ot=X.useCallback(Ve=>{},[]);return w.jsxs("div",{className:"app",children:[w.jsx(aR,{onSearch:ot,mediaType:r,browseMode:t,onMediaTypeChange:ks,onTheatersClick:zr,onWatchlistClick:()=>Ne(!0),watchlistCount:ae.length,syncing:L||b,onFavoritesClick:()=>Pe(!0)}),w.jsxs("main",{className:"main-content",children:[w.jsx("div",{className:"movie-sections",children:w.jsx(jR,{title:ke("trending"),items:ye,loading:Te,mediaType:r,onItemClick:Ve=>{k(Ve),fe(r)}})}),w.jsx("button",{className:"filters-toggle",onClick:()=>T(!V),children:ke(V?"hideFilters":"showFilters")}),w.jsxs("div",{className:"content-layout",children:[w.jsx("div",{className:`filters-container ${V?"show":""}`,children:!qe&&w.jsx(dR,{genres:xe,providers:Be,certifications:be,selectedGenres:o,selectedProviders:h,selectedCertification:g,sortBy:E,minRating:P,yearFrom:q,yearTo:z,browseMode:t,availableCities:se,availableDates:A,selectedCity:J,selectedDate:G,onCityChange:Y,onDateChange:oe,onGenreChange:l,onProviderChange:m,onCertificationChange:_,onSortChange:S,onRatingChange:F,onYearFromChange:D,onYearToChange:W,onBrowseModeChange:hr,onClearFilters:Mi,mediaType:r})}),w.jsx("div",{className:"movies-container",children:w.jsx(gR,{items:Tt,loading:jr,onItemClick:Ve=>{k(Ve),fe(r)},onLoadMore:Ur,hasMore:Oi<On,mediaType:r})})]})]}),O&&w.jsx(FR,{item:O,mediaType:re,onClose:()=>k(null)}),we&&w.jsx(UR,{onClose:()=>Ne(!1),onItemClick:()=>{Ne(!1)}}),ze&&w.jsx(zR,{onClose:()=>Pe(!1),onItemClick:(Ve,qt)=>{const Br=Tt.find(Li=>Li.id===Ve);k(Br||{id:Ve,poster_path:null,backdrop_path:null,overview:"",vote_average:0,vote_count:0,genre_ids:[],adult:!1,popularity:0,...qt==="movie"?{title:"",original_title:"",release_date:""}:{name:"",original_name:"",first_air_date:""}}),fe(qt),Pe(!1)}})]})}oT.createRoot(document.getElementById("root")).render(w.jsx(ZE.StrictMode,{children:w.jsx(mC,{children:w.jsx(hT,{children:w.jsx(HR,{})})})}));
