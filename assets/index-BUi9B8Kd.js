(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function nv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var td={exports:{}},Na={},nd={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg;function ZE(){if(sg)return Ve;sg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.iterator;function R(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,D={};function U(M,Y,ne){this.props=M,this.context=Y,this.refs=D,this.updater=ne||F}U.prototype.isReactComponent={},U.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},U.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function W(){}W.prototype=U.prototype;function Z(M,Y,ne){this.props=M,this.context=Y,this.refs=D,this.updater=ne||F}var Q=Z.prototype=new W;Q.constructor=Z,q(Q,U.prototype),Q.isPureReactComponent=!0;var K=Array.isArray,ie=Object.prototype.hasOwnProperty,le={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(M,Y,ne){var ue,H={},ve=null,Pe=null;if(Y!=null)for(ue in Y.ref!==void 0&&(Pe=Y.ref),Y.key!==void 0&&(ve=""+Y.key),Y)ie.call(Y,ue)&&!P.hasOwnProperty(ue)&&(H[ue]=Y[ue]);var De=arguments.length-2;if(De===1)H.children=ne;else if(1<De){for(var We=Array(De),Ct=0;Ct<De;Ct++)We[Ct]=arguments[Ct+2];H.children=We}if(M&&M.defaultProps)for(ue in De=M.defaultProps,De)H[ue]===void 0&&(H[ue]=De[ue]);return{$$typeof:r,type:M,key:ve,ref:Pe,props:H,_owner:le.current}}function C(M,Y){return{$$typeof:r,type:M.type,key:Y,ref:M.ref,props:M.props,_owner:M._owner}}function V(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function N(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ne){return Y[ne]})}var L=/\/+/g;function E(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?N(""+M.key):Y.toString(36)}function Ie(M,Y,ne,ue,H){var ve=typeof M;(ve==="undefined"||ve==="boolean")&&(M=null);var Pe=!1;if(M===null)Pe=!0;else switch(ve){case"string":case"number":Pe=!0;break;case"object":switch(M.$$typeof){case r:case e:Pe=!0}}if(Pe)return Pe=M,H=H(Pe),M=ue===""?"."+E(Pe,0):ue,K(H)?(ne="",M!=null&&(ne=M.replace(L,"$&/")+"/"),Ie(H,Y,ne,"",function(Ct){return Ct})):H!=null&&(V(H)&&(H=C(H,ne+(!H.key||Pe&&Pe.key===H.key?"":(""+H.key).replace(L,"$&/")+"/")+M)),Y.push(H)),1;if(Pe=0,ue=ue===""?".":ue+":",K(M))for(var De=0;De<M.length;De++){ve=M[De];var We=ue+E(ve,De);Pe+=Ie(ve,Y,ne,We,H)}else if(We=R(M),typeof We=="function")for(M=We.call(M),De=0;!(ve=M.next()).done;)ve=ve.value,We=ue+E(ve,De++),Pe+=Ie(ve,Y,ne,We,H);else if(ve==="object")throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Pe}function Oe(M,Y,ne){if(M==null)return M;var ue=[],H=0;return Ie(M,ue,"","",function(ve){return Y.call(ne,ve,H++)}),ue}function je(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(ne){(M._status===0||M._status===-1)&&(M._status=1,M._result=ne)},function(ne){(M._status===0||M._status===-1)&&(M._status=2,M._result=ne)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var Ce={current:null},oe={transition:null},me={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:oe,ReactCurrentOwner:le};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:Oe,forEach:function(M,Y,ne){Oe(M,function(){Y.apply(this,arguments)},ne)},count:function(M){var Y=0;return Oe(M,function(){Y++}),Y},toArray:function(M){return Oe(M,function(Y){return Y})||[]},only:function(M){if(!V(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ve.Component=U,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=Z,Ve.StrictMode=i,Ve.Suspense=g,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ve.act=ce,Ve.cloneElement=function(M,Y,ne){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var ue=q({},M.props),H=M.key,ve=M.ref,Pe=M._owner;if(Y!=null){if(Y.ref!==void 0&&(ve=Y.ref,Pe=le.current),Y.key!==void 0&&(H=""+Y.key),M.type&&M.type.defaultProps)var De=M.type.defaultProps;for(We in Y)ie.call(Y,We)&&!P.hasOwnProperty(We)&&(ue[We]=Y[We]===void 0&&De!==void 0?De[We]:Y[We])}var We=arguments.length-2;if(We===1)ue.children=ne;else if(1<We){De=Array(We);for(var Ct=0;Ct<We;Ct++)De[Ct]=arguments[Ct+2];ue.children=De}return{$$typeof:r,type:M.type,key:H,ref:ve,props:ue,_owner:Pe}},Ve.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},Ve.createElement=A,Ve.createFactory=function(M){var Y=A.bind(null,M);return Y.type=M,Y},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(M){return{$$typeof:m,render:M}},Ve.isValidElement=V,Ve.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:je}},Ve.memo=function(M,Y){return{$$typeof:v,type:M,compare:Y===void 0?null:Y}},Ve.startTransition=function(M){var Y=oe.transition;oe.transition={};try{M()}finally{oe.transition=Y}},Ve.unstable_act=ce,Ve.useCallback=function(M,Y){return Ce.current.useCallback(M,Y)},Ve.useContext=function(M){return Ce.current.useContext(M)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(M){return Ce.current.useDeferredValue(M)},Ve.useEffect=function(M,Y){return Ce.current.useEffect(M,Y)},Ve.useId=function(){return Ce.current.useId()},Ve.useImperativeHandle=function(M,Y,ne){return Ce.current.useImperativeHandle(M,Y,ne)},Ve.useInsertionEffect=function(M,Y){return Ce.current.useInsertionEffect(M,Y)},Ve.useLayoutEffect=function(M,Y){return Ce.current.useLayoutEffect(M,Y)},Ve.useMemo=function(M,Y){return Ce.current.useMemo(M,Y)},Ve.useReducer=function(M,Y,ne){return Ce.current.useReducer(M,Y,ne)},Ve.useRef=function(M){return Ce.current.useRef(M)},Ve.useState=function(M){return Ce.current.useState(M)},Ve.useSyncExternalStore=function(M,Y,ne){return Ce.current.useSyncExternalStore(M,Y,ne)},Ve.useTransition=function(){return Ce.current.useTransition()},Ve.version="18.3.1",Ve}var ig;function Jd(){return ig||(ig=1,nd.exports=ZE()),nd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og;function e0(){if(og)return Na;og=1;var r=Jd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,v){var T,S={},R=null,F=null;v!==void 0&&(R=""+v),g.key!==void 0&&(R=""+g.key),g.ref!==void 0&&(F=g.ref);for(T in g)i.call(g,T)&&!l.hasOwnProperty(T)&&(S[T]=g[T]);if(m&&m.defaultProps)for(T in g=m.defaultProps,g)S[T]===void 0&&(S[T]=g[T]);return{$$typeof:e,type:m,key:R,ref:F,props:S,_owner:o.current}}return Na.Fragment=t,Na.jsx=h,Na.jsxs=h,Na}var ag;function t0(){return ag||(ag=1,td.exports=e0()),td.exports}var _=t0(),G=Jd();const n0=nv(G);var ku={},rd={exports:{}},Jt={},sd={exports:{}},id={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lg;function r0(){return lg||(lg=1,(function(r){function e(oe,me){var ce=oe.length;oe.push(me);e:for(;0<ce;){var M=ce-1>>>1,Y=oe[M];if(0<o(Y,me))oe[M]=me,oe[ce]=Y,ce=M;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var me=oe[0],ce=oe.pop();if(ce!==me){oe[0]=ce;e:for(var M=0,Y=oe.length,ne=Y>>>1;M<ne;){var ue=2*(M+1)-1,H=oe[ue],ve=ue+1,Pe=oe[ve];if(0>o(H,ce))ve<Y&&0>o(Pe,H)?(oe[M]=Pe,oe[ve]=ce,M=ve):(oe[M]=H,oe[ue]=ce,M=ue);else if(ve<Y&&0>o(Pe,ce))oe[M]=Pe,oe[ve]=ce,M=ve;else break e}}return me}function o(oe,me){var ce=oe.sortIndex-me.sortIndex;return ce!==0?ce:oe.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],v=[],T=1,S=null,R=3,F=!1,q=!1,D=!1,U=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(oe){for(var me=t(v);me!==null;){if(me.callback===null)i(v);else if(me.startTime<=oe)i(v),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(v)}}function K(oe){if(D=!1,Q(oe),!q)if(t(g)!==null)q=!0,je(ie);else{var me=t(v);me!==null&&Ce(K,me.startTime-oe)}}function ie(oe,me){q=!1,D&&(D=!1,W(A),A=-1),F=!0;var ce=R;try{for(Q(me),S=t(g);S!==null&&(!(S.expirationTime>me)||oe&&!N());){var M=S.callback;if(typeof M=="function"){S.callback=null,R=S.priorityLevel;var Y=M(S.expirationTime<=me);me=r.unstable_now(),typeof Y=="function"?S.callback=Y:S===t(g)&&i(g),Q(me)}else i(g);S=t(g)}if(S!==null)var ne=!0;else{var ue=t(v);ue!==null&&Ce(K,ue.startTime-me),ne=!1}return ne}finally{S=null,R=ce,F=!1}}var le=!1,P=null,A=-1,C=5,V=-1;function N(){return!(r.unstable_now()-V<C)}function L(){if(P!==null){var oe=r.unstable_now();V=oe;var me=!0;try{me=P(!0,oe)}finally{me?E():(le=!1,P=null)}}else le=!1}var E;if(typeof Z=="function")E=function(){Z(L)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Oe=Ie.port2;Ie.port1.onmessage=L,E=function(){Oe.postMessage(null)}}else E=function(){U(L,0)};function je(oe){P=oe,le||(le=!0,E())}function Ce(oe,me){A=U(function(){oe(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(oe){oe.callback=null},r.unstable_continueExecution=function(){q||F||(q=!0,je(ie))},r.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<oe?Math.floor(1e3/oe):5},r.unstable_getCurrentPriorityLevel=function(){return R},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(oe){switch(R){case 1:case 2:case 3:var me=3;break;default:me=R}var ce=R;R=me;try{return oe()}finally{R=ce}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(oe,me){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ce=R;R=oe;try{return me()}finally{R=ce}},r.unstable_scheduleCallback=function(oe,me,ce){var M=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?M+ce:M):ce=M,oe){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ce+Y,oe={id:T++,callback:me,priorityLevel:oe,startTime:ce,expirationTime:Y,sortIndex:-1},ce>M?(oe.sortIndex=ce,e(v,oe),t(g)===null&&oe===t(v)&&(D?(W(A),A=-1):D=!0,Ce(K,ce-M))):(oe.sortIndex=Y,e(g,oe),q||F||(q=!0,je(ie))),oe},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(oe){var me=R;return function(){var ce=R;R=me;try{return oe.apply(this,arguments)}finally{R=ce}}}})(id)),id}var ug;function s0(){return ug||(ug=1,sd.exports=r0()),sd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg;function i0(){if(cg)return Jt;cg=1;var r=Jd(),e=s0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},S={};function R(n){return g.call(S,n)?!0:g.call(T,n)?!1:v.test(n)?S[n]=!0:(T[n]=!0,!1)}function F(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,s,a,c){if(s===null||typeof s>"u"||F(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function D(n,s,a,c,d,f,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=f,this.removeEmptyString=w}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new D(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];U[s]=new D(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new D(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new D(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new D(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new D(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new D(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new D(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new D(n,5,!1,n.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function Z(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(W,Z);U[s]=new D(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(W,Z);U[s]=new D(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(W,Z);U[s]=new D(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new D(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new D(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,s,a,c){var d=U.hasOwnProperty(s)?U[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,a,d,c)&&(a=null),c||d===null?R(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var K=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),le=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),oe=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var ce=Object.assign,M;function Y(n){if(M===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+n}var ne=!1;function ue(n,s){if(!n||ne)return"";ne=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var c=B}Reflect.construct(n,[],s)}else{try{s.call()}catch(B){c=B}n.call(s.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),f=c.stack.split(`
`),w=d.length-1,k=f.length-1;1<=w&&0<=k&&d[w]!==f[k];)k--;for(;1<=w&&0<=k;w--,k--)if(d[w]!==f[k]){if(w!==1||k!==1)do if(w--,k--,0>k||d[w]!==f[k]){var x=`
`+d[w].replace(" at new "," at ");return n.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",n.displayName)),x}while(1<=w&&0<=k);break}}}finally{ne=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Y(n):""}function H(n){switch(n.tag){case 5:return Y(n.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return n=ue(n.type,!1),n;case 11:return n=ue(n.type.render,!1),n;case 1:return n=ue(n.type,!0),n;default:return""}}function ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case le:return"Portal";case C:return"Profiler";case A:return"StrictMode";case E:return"Suspense";case Ie:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case V:return(n._context.displayName||"Context")+".Provider";case L:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Oe:return s=n.displayName||null,s!==null?s:ve(n.type)||"Memo";case je:s=n._payload,n=n._init;try{return ve(n(s))}catch{}}return null}function Pe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function De(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function We(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ct(n){var s=We(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,f.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function zr(n){n._valueTracker||(n._valueTracker=Ct(n))}function Br(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=We(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Mn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function $r(n,s){var a=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Ci(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=De(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Hr(n,s){s=s.checked,s!=null&&Q(n,"checked",s,!1)}function fr(n,s){Hr(n,s);var a=De(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?ot(n,s.type,a):s.hasOwnProperty("defaultValue")&&ot(n,s.type,De(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Ls(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ot(n,s,a){(s!=="number"||Mn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var nt=Array.isArray;function en(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+De(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function ct(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Wr(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(nt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:De(a)}}function bs(n,s){var a=De(s.value),c=De(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Ln(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Uo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ri(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Uo(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qr,fl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(qr=qr||document.createElement("div"),qr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=qr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function js(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pl=["Webkit","ms","Moz","O"];Object.keys(Gr).forEach(function(n){pl.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Gr[s]=Gr[n]})});function Kr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Gr.hasOwnProperty(n)&&Gr[n]?(""+s).trim():s+"px"}function Pi(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Kr(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var zo=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function En(n,s){if(s){if(zo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ni(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qr=null;function xi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var pr=null,mr=null,at=null;function Bo(n){if(n=ma(n)){if(typeof pr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=zl(s),pr(n.stateNode,n.type,s))}}function Yr(n){mr?at?at.push(n):at=[n]:mr=n}function Xr(){if(mr){var n=mr,s=at;if(at=mr=null,Bo(n),s)for(n=0;n<s.length;n++)Bo(s[n])}}function ml(n,s){return n(s)}function gl(){}var bn=!1;function yl(n,s,a){if(bn)return n(s,a);bn=!0;try{return ml(n,s,a)}finally{bn=!1,(mr!==null||at!==null)&&(gl(),Xr())}}function Fs(n,s){var a=n.stateNode;if(a===null)return null;var c=zl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Jr=!1;if(m)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){Jr=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{Jr=!1}function vl(n,s,a,c,d,f,w,k,x){var B=Array.prototype.slice.call(arguments,3);try{s.apply(a,B)}catch(te){this.onError(te)}}var gr=!1,jn=null,Di=!1,hn=null,_l={onError:function(n){gr=!0,jn=n}};function wl(n,s,a,c,d,f,w,k,x){gr=!1,jn=null,vl.apply(_l,arguments)}function $o(n,s,a,c,d,f,w,k,x){if(wl.apply(this,arguments),gr){if(gr){var B=jn;gr=!1,jn=null}else throw Error(t(198));Di||(Di=!0,hn=B)}}function Tn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Ho(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function El(n){if(Tn(n)!==n)throw Error(t(188))}function Tl(n){var s=n.alternate;if(!s){if(s=Tn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return El(d),n;if(f===c)return El(d),s;f=f.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=f;else{for(var w=!1,k=d.child;k;){if(k===a){w=!0,a=d,c=f;break}if(k===c){w=!0,c=d,a=f;break}k=k.sibling}if(!w){for(k=f.child;k;){if(k===a){w=!0,a=f,c=d;break}if(k===c){w=!0,c=f,a=d;break}k=k.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Il(n){return n=Tl(n),n!==null?Us(n):null}function Us(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Us(n);if(s!==null)return s;n=n.sibling}return null}var Wo=e.unstable_scheduleCallback,Vi=e.unstable_cancelCallback,zs=e.unstable_shouldYield,yr=e.unstable_requestPaint,Xe=e.unstable_now,Dc=e.unstable_getCurrentPriorityLevel,Oi=e.unstable_ImmediatePriority,qo=e.unstable_UserBlockingPriority,Bs=e.unstable_NormalPriority,Go=e.unstable_LowPriority,Mi=e.unstable_IdlePriority,$s=null,tn=null;function Sl(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot($s,n,void 0,(n.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:Hs,Fn=Math.log,dn=Math.LN2;function Hs(n){return n>>>=0,n===0?32:31-(Fn(n)/dn|0)|0}var Un=64,es=4194304;function $e(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vr(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,f=n.pingedLanes,w=a&268435455;if(w!==0){var k=w&~d;k!==0?c=$e(k):(f&=w,f!==0&&(c=$e(f)))}else w=a&~d,w!==0?c=$e(w):f!==0&&(c=$e(f));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,f=s&-s,d>=f||d===16&&(f&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-nn(s),d=1<<a,c|=n[a],s&=~d;return c}function Ws(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes;0<f;){var w=31-nn(f),k=1<<w,x=d[w];x===-1?((k&a)===0||(k&c)!==0)&&(d[w]=Ws(k,s)):x<=s&&(n.expiredLanes|=k),f&=~k}}function Ko(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Qo(){var n=Un;return Un<<=1,(Un&4194240)===0&&(Un=64),n}function Yo(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Gs(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-nn(s),n[s]=a}function Vc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-nn(a),f=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~f}}function Xo(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-nn(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Fe=0;function zn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Jo,Li,Zo,ea,ta,Bn=!1,bi=[],$n=null,Hn=null,Rt=null,Ks=new Map,_r=new Map,rn=[],Al="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ts(n,s){switch(n){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Ks.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_r.delete(s.pointerId)}}function In(n,s,a,c,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=ma(s),s!==null&&Li(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function kl(n,s,a,c,d){switch(s){case"focusin":return $n=In($n,n,s,a,c,d),!0;case"dragenter":return Hn=In(Hn,n,s,a,c,d),!0;case"mouseover":return Rt=In(Rt,n,s,a,c,d),!0;case"pointerover":var f=d.pointerId;return Ks.set(f,In(Ks.get(f)||null,n,s,a,c,d)),!0;case"gotpointercapture":return f=d.pointerId,_r.set(f,In(_r.get(f)||null,n,s,a,c,d)),!0}return!1}function ji(n){var s=Js(n.target);if(s!==null){var a=Tn(s);if(a!==null){if(s=a.tag,s===13){if(s=Ho(a),s!==null){n.blockedOn=s,ta(n.priority,function(){Zo(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ke(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Fi(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Qr=c,a.target.dispatchEvent(c),Qr=null}else return s=ma(a),s!==null&&Li(s),n.blockedOn=a,!1;s.shift()}return!0}function Cl(n,s,a){Ke(n)&&a.delete(s)}function Oc(){Bn=!1,$n!==null&&Ke($n)&&($n=null),Hn!==null&&Ke(Hn)&&(Hn=null),Rt!==null&&Ke(Rt)&&(Rt=null),Ks.forEach(Cl),_r.forEach(Cl)}function ns(n,s){n.blockedOn===s&&(n.blockedOn=null,Bn||(Bn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Oc)))}function rs(n){function s(d){return ns(d,n)}if(0<bi.length){ns(bi[0],n);for(var a=1;a<bi.length;a++){var c=bi[a];c.blockedOn===n&&(c.blockedOn=null)}}for($n!==null&&ns($n,n),Hn!==null&&ns(Hn,n),Rt!==null&&ns(Rt,n),Ks.forEach(s),_r.forEach(s),a=0;a<rn.length;a++)c=rn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<rn.length&&(a=rn[0],a.blockedOn===null);)ji(a),a.blockedOn===null&&rn.shift()}var wr=K.ReactCurrentBatchConfig,Er=!0;function Wn(n,s,a,c){var d=Fe,f=wr.transition;wr.transition=null;try{Fe=1,na(n,s,a,c)}finally{Fe=d,wr.transition=f}}function Rl(n,s,a,c){var d=Fe,f=wr.transition;wr.transition=null;try{Fe=4,na(n,s,a,c)}finally{Fe=d,wr.transition=f}}function na(n,s,a,c){if(Er){var d=Fi(n,s,a,c);if(d===null)Wc(n,s,c,qn,a),ts(n,c);else if(kl(d,n,s,a,c))c.stopPropagation();else if(ts(n,c),s&4&&-1<Al.indexOf(n)){for(;d!==null;){var f=ma(d);if(f!==null&&Jo(f),f=Fi(n,s,a,c),f===null&&Wc(n,s,c,qn,a),f===d)break;d=f}d!==null&&c.stopPropagation()}else Wc(n,s,c,null,a)}}var qn=null;function Fi(n,s,a,c){if(qn=null,n=xi(c),n=Js(n),n!==null)if(s=Tn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Ho(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return qn=n,null}function Ui(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dc()){case Oi:return 1;case qo:return 4;case Bs:case Go:return 16;case Mi:return 536870912;default:return 16}default:return 16}}var sn=null,zi=null,Tr=null;function Pl(){if(Tr)return Tr;var n,s=zi,a=s.length,c,d="value"in sn?sn.value:sn.textContent,f=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[f-c];c++);return Tr=d.slice(n,1<c?1-c:void 0)}function Qs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Gn(){return!0}function ra(){return!1}function Mt(n){function s(a,c,d,f,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=w,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(f):f[k]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Gn:ra,this.isPropagationStopped=ra,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),s}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ys=Mt(Kn),ss=ce({},Kn,{view:0,detail:0}),Bi=Mt(ss),$i,Hi,on,Xs=ce({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ne,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==on&&(on&&n.type==="mousemove"?($i=n.screenX-on.screenX,Hi=n.screenY-on.screenY):Hi=$i=0,on=n),$i)},movementY:function(n){return"movementY"in n?n.movementY:Hi}}),sa=Mt(Xs),Nl=ce({},Xs,{dataTransfer:0}),xl=Mt(Nl),Wi=ce({},ss,{relatedTarget:0}),Pt=Mt(Wi),Dl=ce({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Vl=Mt(Dl),is=ce({},Kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Mt(is),p=ce({},Kn,{data:0}),y=Mt(p),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ae(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=$[n])?!!s[n]:!1}function Ne(){return ae}var ht=ce({},ss,{key:function(n){if(n.key){var s=I[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?j[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ne,charCode:function(n){return n.type==="keypress"?Qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qe=Mt(ht),pt=ce({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),an=Mt(pt),Ir=ce({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ne}),Qn=Mt(Ir),Yn=ce({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qi=Mt(Yn),ia=ce({},Xs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Gw=Mt(ia),Kw=[9,13,27,32],Mc=m&&"CompositionEvent"in window,oa=null;m&&"documentMode"in document&&(oa=document.documentMode);var Qw=m&&"TextEvent"in window&&!oa,Yf=m&&(!Mc||oa&&8<oa&&11>=oa),Xf=" ",Jf=!1;function Zf(n,s){switch(n){case"keyup":return Kw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Gi=!1;function Yw(n,s){switch(n){case"compositionend":return ep(s);case"keypress":return s.which!==32?null:(Jf=!0,Xf);case"textInput":return n=s.data,n===Xf&&Jf?null:n;default:return null}}function Xw(n,s){if(Gi)return n==="compositionend"||!Mc&&Zf(n,s)?(n=Pl(),Tr=zi=sn=null,Gi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yf&&s.locale!=="ko"?null:s.data;default:return null}}var Jw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Jw[n.type]:s==="textarea"}function np(n,s,a,c){Yr(c),s=jl(s,"onChange"),0<s.length&&(a=new Ys("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var aa=null,la=null;function Zw(n){wp(n,0)}function Ol(n){var s=Ji(n);if(Br(s))return n}function eE(n,s){if(n==="change")return s}var rp=!1;if(m){var Lc;if(m){var bc="oninput"in document;if(!bc){var sp=document.createElement("div");sp.setAttribute("oninput","return;"),bc=typeof sp.oninput=="function"}Lc=bc}else Lc=!1;rp=Lc&&(!document.documentMode||9<document.documentMode)}function ip(){aa&&(aa.detachEvent("onpropertychange",op),la=aa=null)}function op(n){if(n.propertyName==="value"&&Ol(la)){var s=[];np(s,la,n,xi(n)),yl(Zw,s)}}function tE(n,s,a){n==="focusin"?(ip(),aa=s,la=a,aa.attachEvent("onpropertychange",op)):n==="focusout"&&ip()}function nE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ol(la)}function rE(n,s){if(n==="click")return Ol(s)}function sE(n,s){if(n==="input"||n==="change")return Ol(s)}function iE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Sn=typeof Object.is=="function"?Object.is:iE;function ua(n,s){if(Sn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!Sn(n[d],s[d]))return!1}return!0}function ap(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function lp(n,s){var a=ap(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ap(a)}}function up(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?up(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function cp(){for(var n=window,s=Mn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Mn(n.document)}return s}function jc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function oE(n){var s=cp(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&up(a.ownerDocument.documentElement,a)){if(c!==null&&jc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!n.extend&&f>c&&(d=c,c=f,f=d),d=lp(a,f);var w=lp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),f>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var aE=m&&"documentMode"in document&&11>=document.documentMode,Ki=null,Fc=null,ca=null,Uc=!1;function hp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uc||Ki==null||Ki!==Mn(c)||(c=Ki,"selectionStart"in c&&jc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ca&&ua(ca,c)||(ca=c,c=jl(Fc,"onSelect"),0<c.length&&(s=new Ys("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Ki)))}function Ml(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Qi={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionend:Ml("Transition","TransitionEnd")},zc={},dp={};m&&(dp=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Ll(n){if(zc[n])return zc[n];if(!Qi[n])return n;var s=Qi[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in dp)return zc[n]=s[a];return n}var fp=Ll("animationend"),pp=Ll("animationiteration"),mp=Ll("animationstart"),gp=Ll("transitionend"),yp=new Map,vp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function os(n,s){yp.set(n,s),l(s,[n])}for(var Bc=0;Bc<vp.length;Bc++){var $c=vp[Bc],lE=$c.toLowerCase(),uE=$c[0].toUpperCase()+$c.slice(1);os(lE,"on"+uE)}os(fp,"onAnimationEnd"),os(pp,"onAnimationIteration"),os(mp,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(gp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function _p(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,$o(c,s,void 0,n),n.currentTarget=null}function wp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var w=c.length-1;0<=w;w--){var k=c[w],x=k.instance,B=k.currentTarget;if(k=k.listener,x!==f&&d.isPropagationStopped())break e;_p(d,k,B),f=x}else for(w=0;w<c.length;w++){if(k=c[w],x=k.instance,B=k.currentTarget,k=k.listener,x!==f&&d.isPropagationStopped())break e;_p(d,k,B),f=x}}}if(Di)throw n=hn,Di=!1,hn=null,n}function Je(n,s){var a=s[Xc];a===void 0&&(a=s[Xc]=new Set);var c=n+"__bubble";a.has(c)||(Ep(s,n,2,!1),a.add(c))}function Hc(n,s,a){var c=0;s&&(c|=4),Ep(a,n,c,s)}var bl="_reactListening"+Math.random().toString(36).slice(2);function da(n){if(!n[bl]){n[bl]=!0,i.forEach(function(a){a!=="selectionchange"&&(cE.has(a)||Hc(a,!1,n),Hc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[bl]||(s[bl]=!0,Hc("selectionchange",!1,s))}}function Ep(n,s,a,c){switch(Ui(s)){case 1:var d=Wn;break;case 4:d=Rl;break;default:d=na}a=d.bind(null,s,a,n),d=void 0,!Jr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Wc(n,s,a,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var k=c.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var x=w.tag;if((x===3||x===4)&&(x=w.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;w=w.return}for(;k!==null;){if(w=Js(k),w===null)return;if(x=w.tag,x===5||x===6){c=f=w;continue e}k=k.parentNode}}c=c.return}yl(function(){var B=f,te=xi(a),re=[];e:{var ee=yp.get(n);if(ee!==void 0){var he=Ys,ge=n;switch(n){case"keypress":if(Qs(a)===0)break e;case"keydown":case"keyup":he=qe;break;case"focusin":ge="focus",he=Pt;break;case"focusout":ge="blur",he=Pt;break;case"beforeblur":case"afterblur":he=Pt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Qn;break;case fp:case pp:case mp:he=Vl;break;case gp:he=qi;break;case"scroll":he=Bi;break;case"wheel":he=Gw;break;case"copy":case"cut":case"paste":he=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=an}var ye=(s&4)!==0,dt=!ye&&n==="scroll",b=ye?ee!==null?ee+"Capture":null:ee;ye=[];for(var O=B,z;O!==null;){z=O;var se=z.stateNode;if(z.tag===5&&se!==null&&(z=se,b!==null&&(se=Fs(O,b),se!=null&&ye.push(fa(O,se,z)))),dt)break;O=O.return}0<ye.length&&(ee=new he(ee,ge,null,a,te),re.push({event:ee,listeners:ye}))}}if((s&7)===0){e:{if(ee=n==="mouseover"||n==="pointerover",he=n==="mouseout"||n==="pointerout",ee&&a!==Qr&&(ge=a.relatedTarget||a.fromElement)&&(Js(ge)||ge[Sr]))break e;if((he||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,he?(ge=a.relatedTarget||a.toElement,he=B,ge=ge?Js(ge):null,ge!==null&&(dt=Tn(ge),ge!==dt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(he=null,ge=B),he!==ge)){if(ye=sa,se="onMouseLeave",b="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(ye=an,se="onPointerLeave",b="onPointerEnter",O="pointer"),dt=he==null?ee:Ji(he),z=ge==null?ee:Ji(ge),ee=new ye(se,O+"leave",he,a,te),ee.target=dt,ee.relatedTarget=z,se=null,Js(te)===B&&(ye=new ye(b,O+"enter",ge,a,te),ye.target=z,ye.relatedTarget=dt,se=ye),dt=se,he&&ge)t:{for(ye=he,b=ge,O=0,z=ye;z;z=Yi(z))O++;for(z=0,se=b;se;se=Yi(se))z++;for(;0<O-z;)ye=Yi(ye),O--;for(;0<z-O;)b=Yi(b),z--;for(;O--;){if(ye===b||b!==null&&ye===b.alternate)break t;ye=Yi(ye),b=Yi(b)}ye=null}else ye=null;he!==null&&Tp(re,ee,he,ye,!1),ge!==null&&dt!==null&&Tp(re,dt,ge,ye,!0)}}e:{if(ee=B?Ji(B):window,he=ee.nodeName&&ee.nodeName.toLowerCase(),he==="select"||he==="input"&&ee.type==="file")var _e=eE;else if(tp(ee))if(rp)_e=sE;else{_e=nE;var Ee=tE}else(he=ee.nodeName)&&he.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(_e=rE);if(_e&&(_e=_e(n,B))){np(re,_e,a,te);break e}Ee&&Ee(n,ee,B),n==="focusout"&&(Ee=ee._wrapperState)&&Ee.controlled&&ee.type==="number"&&ot(ee,"number",ee.value)}switch(Ee=B?Ji(B):window,n){case"focusin":(tp(Ee)||Ee.contentEditable==="true")&&(Ki=Ee,Fc=B,ca=null);break;case"focusout":ca=Fc=Ki=null;break;case"mousedown":Uc=!0;break;case"contextmenu":case"mouseup":case"dragend":Uc=!1,hp(re,a,te);break;case"selectionchange":if(aE)break;case"keydown":case"keyup":hp(re,a,te)}var Te;if(Mc)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Gi?Zf(n,a)&&(Ae="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(Yf&&a.locale!=="ko"&&(Gi||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Gi&&(Te=Pl()):(sn=te,zi="value"in sn?sn.value:sn.textContent,Gi=!0)),Ee=jl(B,Ae),0<Ee.length&&(Ae=new y(Ae,n,null,a,te),re.push({event:Ae,listeners:Ee}),Te?Ae.data=Te:(Te=ep(a),Te!==null&&(Ae.data=Te)))),(Te=Qw?Yw(n,a):Xw(n,a))&&(B=jl(B,"onBeforeInput"),0<B.length&&(te=new y("onBeforeInput","beforeinput",null,a,te),re.push({event:te,listeners:B}),te.data=Te))}wp(re,s)})}function fa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function jl(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Fs(n,a),f!=null&&c.unshift(fa(n,f,d)),f=Fs(n,s),f!=null&&c.push(fa(n,f,d))),n=n.return}return c}function Yi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Tp(n,s,a,c,d){for(var f=s._reactName,w=[];a!==null&&a!==c;){var k=a,x=k.alternate,B=k.stateNode;if(x!==null&&x===c)break;k.tag===5&&B!==null&&(k=B,d?(x=Fs(a,f),x!=null&&w.unshift(fa(a,x,k))):d||(x=Fs(a,f),x!=null&&w.push(fa(a,x,k)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var hE=/\r\n?/g,dE=/\u0000|\uFFFD/g;function Ip(n){return(typeof n=="string"?n:""+n).replace(hE,`
`).replace(dE,"")}function Fl(n,s,a){if(s=Ip(s),Ip(n)!==s&&a)throw Error(t(425))}function Ul(){}var qc=null,Gc=null;function Kc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qc=typeof setTimeout=="function"?setTimeout:void 0,fE=typeof clearTimeout=="function"?clearTimeout:void 0,Sp=typeof Promise=="function"?Promise:void 0,pE=typeof queueMicrotask=="function"?queueMicrotask:typeof Sp<"u"?function(n){return Sp.resolve(null).then(n).catch(mE)}:Qc;function mE(n){setTimeout(function(){throw n})}function Yc(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),rs(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);rs(s)}function as(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Ap(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Xi=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Xi,pa="__reactProps$"+Xi,Sr="__reactContainer$"+Xi,Xc="__reactEvents$"+Xi,gE="__reactListeners$"+Xi,yE="__reactHandles$"+Xi;function Js(n){var s=n[Xn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Sr]||a[Xn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Ap(n);n!==null;){if(a=n[Xn])return a;n=Ap(n)}return s}n=a,a=n.parentNode}return null}function ma(n){return n=n[Xn]||n[Sr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ji(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function zl(n){return n[pa]||null}var Jc=[],Zi=-1;function ls(n){return{current:n}}function Ze(n){0>Zi||(n.current=Jc[Zi],Jc[Zi]=null,Zi--)}function Qe(n,s){Zi++,Jc[Zi]=n.current,n.current=s}var us={},Lt=ls(us),Gt=ls(!1),Zs=us;function eo(n,s){var a=n.type.contextTypes;if(!a)return us;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=s[f];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Kt(n){return n=n.childContextTypes,n!=null}function Bl(){Ze(Gt),Ze(Lt)}function kp(n,s,a){if(Lt.current!==us)throw Error(t(168));Qe(Lt,s),Qe(Gt,a)}function Cp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Pe(n)||"Unknown",d));return ce({},a,c)}function $l(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||us,Zs=Lt.current,Qe(Lt,n),Qe(Gt,Gt.current),!0}function Rp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Cp(n,s,Zs),c.__reactInternalMemoizedMergedChildContext=n,Ze(Gt),Ze(Lt),Qe(Lt,n)):Ze(Gt),Qe(Gt,a)}var Ar=null,Hl=!1,Zc=!1;function Pp(n){Ar===null?Ar=[n]:Ar.push(n)}function vE(n){Hl=!0,Pp(n)}function cs(){if(!Zc&&Ar!==null){Zc=!0;var n=0,s=Fe;try{var a=Ar;for(Fe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ar=null,Hl=!1}catch(d){throw Ar!==null&&(Ar=Ar.slice(n+1)),Wo(Oi,cs),d}finally{Fe=s,Zc=!1}}return null}var to=[],no=0,Wl=null,ql=0,fn=[],pn=0,ei=null,kr=1,Cr="";function ti(n,s){to[no++]=ql,to[no++]=Wl,Wl=n,ql=s}function Np(n,s,a){fn[pn++]=kr,fn[pn++]=Cr,fn[pn++]=ei,ei=n;var c=kr;n=Cr;var d=32-nn(c)-1;c&=~(1<<d),a+=1;var f=32-nn(s)+d;if(30<f){var w=d-d%5;f=(c&(1<<w)-1).toString(32),c>>=w,d-=w,kr=1<<32-nn(s)+d|a<<d|c,Cr=f+n}else kr=1<<f|a<<d|c,Cr=n}function eh(n){n.return!==null&&(ti(n,1),Np(n,1,0))}function th(n){for(;n===Wl;)Wl=to[--no],to[no]=null,ql=to[--no],to[no]=null;for(;n===ei;)ei=fn[--pn],fn[pn]=null,Cr=fn[--pn],fn[pn]=null,kr=fn[--pn],fn[pn]=null}var ln=null,un=null,tt=!1,An=null;function xp(n,s){var a=vn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Dp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,ln=n,un=as(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,ln=n,un=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ei!==null?{id:kr,overflow:Cr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=vn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,ln=n,un=null,!0):!1;default:return!1}}function nh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function rh(n){if(tt){var s=un;if(s){var a=s;if(!Dp(n,s)){if(nh(n))throw Error(t(418));s=as(a.nextSibling);var c=ln;s&&Dp(n,s)?xp(c,a):(n.flags=n.flags&-4097|2,tt=!1,ln=n)}}else{if(nh(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,ln=n}}}function Vp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ln=n}function Gl(n){if(n!==ln)return!1;if(!tt)return Vp(n),tt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Kc(n.type,n.memoizedProps)),s&&(s=un)){if(nh(n))throw Op(),Error(t(418));for(;s;)xp(n,s),s=as(s.nextSibling)}if(Vp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){un=as(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}un=null}}else un=ln?as(n.stateNode.nextSibling):null;return!0}function Op(){for(var n=un;n;)n=as(n.nextSibling)}function ro(){un=ln=null,tt=!1}function sh(n){An===null?An=[n]:An.push(n)}var _E=K.ReactCurrentBatchConfig;function ga(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,f=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===f?s.ref:(s=function(w){var k=d.refs;w===null?delete k[f]:k[f]=w},s._stringRef=f,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Kl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Mp(n){var s=n._init;return s(n._payload)}function Lp(n){function s(b,O){if(n){var z=b.deletions;z===null?(b.deletions=[O],b.flags|=16):z.push(O)}}function a(b,O){if(!n)return null;for(;O!==null;)s(b,O),O=O.sibling;return null}function c(b,O){for(b=new Map;O!==null;)O.key!==null?b.set(O.key,O):b.set(O.index,O),O=O.sibling;return b}function d(b,O){return b=vs(b,O),b.index=0,b.sibling=null,b}function f(b,O,z){return b.index=z,n?(z=b.alternate,z!==null?(z=z.index,z<O?(b.flags|=2,O):z):(b.flags|=2,O)):(b.flags|=1048576,O)}function w(b){return n&&b.alternate===null&&(b.flags|=2),b}function k(b,O,z,se){return O===null||O.tag!==6?(O=Qh(z,b.mode,se),O.return=b,O):(O=d(O,z),O.return=b,O)}function x(b,O,z,se){var _e=z.type;return _e===P?te(b,O,z.props.children,se,z.key):O!==null&&(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===je&&Mp(_e)===O.type)?(se=d(O,z.props),se.ref=ga(b,O,z),se.return=b,se):(se=vu(z.type,z.key,z.props,null,b.mode,se),se.ref=ga(b,O,z),se.return=b,se)}function B(b,O,z,se){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=Yh(z,b.mode,se),O.return=b,O):(O=d(O,z.children||[]),O.return=b,O)}function te(b,O,z,se,_e){return O===null||O.tag!==7?(O=ui(z,b.mode,se,_e),O.return=b,O):(O=d(O,z),O.return=b,O)}function re(b,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Qh(""+O,b.mode,z),O.return=b,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ie:return z=vu(O.type,O.key,O.props,null,b.mode,z),z.ref=ga(b,null,O),z.return=b,z;case le:return O=Yh(O,b.mode,z),O.return=b,O;case je:var se=O._init;return re(b,se(O._payload),z)}if(nt(O)||me(O))return O=ui(O,b.mode,z,null),O.return=b,O;Kl(b,O)}return null}function ee(b,O,z,se){var _e=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return _e!==null?null:k(b,O,""+z,se);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case ie:return z.key===_e?x(b,O,z,se):null;case le:return z.key===_e?B(b,O,z,se):null;case je:return _e=z._init,ee(b,O,_e(z._payload),se)}if(nt(z)||me(z))return _e!==null?null:te(b,O,z,se,null);Kl(b,z)}return null}function he(b,O,z,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number")return b=b.get(z)||null,k(O,b,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case ie:return b=b.get(se.key===null?z:se.key)||null,x(O,b,se,_e);case le:return b=b.get(se.key===null?z:se.key)||null,B(O,b,se,_e);case je:var Ee=se._init;return he(b,O,z,Ee(se._payload),_e)}if(nt(se)||me(se))return b=b.get(z)||null,te(O,b,se,_e,null);Kl(O,se)}return null}function ge(b,O,z,se){for(var _e=null,Ee=null,Te=O,Ae=O=0,At=null;Te!==null&&Ae<z.length;Ae++){Te.index>Ae?(At=Te,Te=null):At=Te.sibling;var Be=ee(b,Te,z[Ae],se);if(Be===null){Te===null&&(Te=At);break}n&&Te&&Be.alternate===null&&s(b,Te),O=f(Be,O,Ae),Ee===null?_e=Be:Ee.sibling=Be,Ee=Be,Te=At}if(Ae===z.length)return a(b,Te),tt&&ti(b,Ae),_e;if(Te===null){for(;Ae<z.length;Ae++)Te=re(b,z[Ae],se),Te!==null&&(O=f(Te,O,Ae),Ee===null?_e=Te:Ee.sibling=Te,Ee=Te);return tt&&ti(b,Ae),_e}for(Te=c(b,Te);Ae<z.length;Ae++)At=he(Te,b,Ae,z[Ae],se),At!==null&&(n&&At.alternate!==null&&Te.delete(At.key===null?Ae:At.key),O=f(At,O,Ae),Ee===null?_e=At:Ee.sibling=At,Ee=At);return n&&Te.forEach(function(_s){return s(b,_s)}),tt&&ti(b,Ae),_e}function ye(b,O,z,se){var _e=me(z);if(typeof _e!="function")throw Error(t(150));if(z=_e.call(z),z==null)throw Error(t(151));for(var Ee=_e=null,Te=O,Ae=O=0,At=null,Be=z.next();Te!==null&&!Be.done;Ae++,Be=z.next()){Te.index>Ae?(At=Te,Te=null):At=Te.sibling;var _s=ee(b,Te,Be.value,se);if(_s===null){Te===null&&(Te=At);break}n&&Te&&_s.alternate===null&&s(b,Te),O=f(_s,O,Ae),Ee===null?_e=_s:Ee.sibling=_s,Ee=_s,Te=At}if(Be.done)return a(b,Te),tt&&ti(b,Ae),_e;if(Te===null){for(;!Be.done;Ae++,Be=z.next())Be=re(b,Be.value,se),Be!==null&&(O=f(Be,O,Ae),Ee===null?_e=Be:Ee.sibling=Be,Ee=Be);return tt&&ti(b,Ae),_e}for(Te=c(b,Te);!Be.done;Ae++,Be=z.next())Be=he(Te,b,Ae,Be.value,se),Be!==null&&(n&&Be.alternate!==null&&Te.delete(Be.key===null?Ae:Be.key),O=f(Be,O,Ae),Ee===null?_e=Be:Ee.sibling=Be,Ee=Be);return n&&Te.forEach(function(JE){return s(b,JE)}),tt&&ti(b,Ae),_e}function dt(b,O,z,se){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case ie:e:{for(var _e=z.key,Ee=O;Ee!==null;){if(Ee.key===_e){if(_e=z.type,_e===P){if(Ee.tag===7){a(b,Ee.sibling),O=d(Ee,z.props.children),O.return=b,b=O;break e}}else if(Ee.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===je&&Mp(_e)===Ee.type){a(b,Ee.sibling),O=d(Ee,z.props),O.ref=ga(b,Ee,z),O.return=b,b=O;break e}a(b,Ee);break}else s(b,Ee);Ee=Ee.sibling}z.type===P?(O=ui(z.props.children,b.mode,se,z.key),O.return=b,b=O):(se=vu(z.type,z.key,z.props,null,b.mode,se),se.ref=ga(b,O,z),se.return=b,b=se)}return w(b);case le:e:{for(Ee=z.key;O!==null;){if(O.key===Ee)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(b,O.sibling),O=d(O,z.children||[]),O.return=b,b=O;break e}else{a(b,O);break}else s(b,O);O=O.sibling}O=Yh(z,b.mode,se),O.return=b,b=O}return w(b);case je:return Ee=z._init,dt(b,O,Ee(z._payload),se)}if(nt(z))return ge(b,O,z,se);if(me(z))return ye(b,O,z,se);Kl(b,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(a(b,O.sibling),O=d(O,z),O.return=b,b=O):(a(b,O),O=Qh(z,b.mode,se),O.return=b,b=O),w(b)):a(b,O)}return dt}var so=Lp(!0),bp=Lp(!1),Ql=ls(null),Yl=null,io=null,ih=null;function oh(){ih=io=Yl=null}function ah(n){var s=Ql.current;Ze(Ql),n._currentValue=s}function lh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function oo(n,s){Yl=n,ih=io=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Qt=!0),n.firstContext=null)}function mn(n){var s=n._currentValue;if(ih!==n)if(n={context:n,memoizedValue:s,next:null},io===null){if(Yl===null)throw Error(t(308));io=n,Yl.dependencies={lanes:0,firstContext:n}}else io=io.next=n;return s}var ni=null;function uh(n){ni===null?ni=[n]:ni.push(n)}function jp(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,uh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Rr(n,c)}function Rr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var hs=!1;function ch(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ds(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ze&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Rr(n,a)}return d=c.interleaved,d===null?(s.next=s,uh(c)):(s.next=d.next,d.next=s),c.interleaved=s,Rr(n,a)}function Xl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Xo(n,a)}}function Up(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=w:f=f.next=w,a=a.next}while(a!==null);f===null?d=f=s:f=f.next=s}else d=f=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Jl(n,s,a,c){var d=n.updateQueue;hs=!1;var f=d.firstBaseUpdate,w=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var x=k,B=x.next;x.next=null,w===null?f=B:w.next=B,w=x;var te=n.alternate;te!==null&&(te=te.updateQueue,k=te.lastBaseUpdate,k!==w&&(k===null?te.firstBaseUpdate=B:k.next=B,te.lastBaseUpdate=x))}if(f!==null){var re=d.baseState;w=0,te=B=x=null,k=f;do{var ee=k.lane,he=k.eventTime;if((c&ee)===ee){te!==null&&(te=te.next={eventTime:he,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ge=n,ye=k;switch(ee=s,he=a,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){re=ge.call(he,re,ee);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,ee=typeof ge=="function"?ge.call(he,re,ee):ge,ee==null)break e;re=ce({},re,ee);break e;case 2:hs=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,ee=d.effects,ee===null?d.effects=[k]:ee.push(k))}else he={eventTime:he,lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},te===null?(B=te=he,x=re):te=te.next=he,w|=ee;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;ee=k,k=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);if(te===null&&(x=re),d.baseState=x,d.firstBaseUpdate=B,d.lastBaseUpdate=te,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else f===null&&(d.shared.lanes=0);ii|=w,n.lanes=w,n.memoizedState=re}}function zp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ya={},Jn=ls(ya),va=ls(ya),_a=ls(ya);function ri(n){if(n===ya)throw Error(t(174));return n}function hh(n,s){switch(Qe(_a,s),Qe(va,n),Qe(Jn,ya),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ri(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Ri(s,n)}Ze(Jn),Qe(Jn,s)}function ao(){Ze(Jn),Ze(va),Ze(_a)}function Bp(n){ri(_a.current);var s=ri(Jn.current),a=Ri(s,n.type);s!==a&&(Qe(va,n),Qe(Jn,a))}function dh(n){va.current===n&&(Ze(Jn),Ze(va))}var rt=ls(0);function Zl(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var fh=[];function ph(){for(var n=0;n<fh.length;n++)fh[n]._workInProgressVersionPrimary=null;fh.length=0}var eu=K.ReactCurrentDispatcher,mh=K.ReactCurrentBatchConfig,si=0,st=null,wt=null,It=null,tu=!1,wa=!1,Ea=0,wE=0;function bt(){throw Error(t(321))}function gh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Sn(n[a],s[a]))return!1;return!0}function yh(n,s,a,c,d,f){if(si=f,st=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,eu.current=n===null||n.memoizedState===null?SE:AE,n=a(c,d),wa){f=0;do{if(wa=!1,Ea=0,25<=f)throw Error(t(301));f+=1,It=wt=null,s.updateQueue=null,eu.current=kE,n=a(c,d)}while(wa)}if(eu.current=su,s=wt!==null&&wt.next!==null,si=0,It=wt=st=null,tu=!1,s)throw Error(t(300));return n}function vh(){var n=Ea!==0;return Ea=0,n}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?st.memoizedState=It=n:It=It.next=n,It}function gn(){if(wt===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var s=It===null?st.memoizedState:It.next;if(s!==null)It=s,wt=n;else{if(n===null)throw Error(t(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},It===null?st.memoizedState=It=n:It=It.next=n}return It}function Ta(n,s){return typeof s=="function"?s(n):s}function _h(n){var s=gn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=wt,d=c.baseQueue,f=a.pending;if(f!==null){if(d!==null){var w=d.next;d.next=f.next,f.next=w}c.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,c=c.baseState;var k=w=null,x=null,B=f;do{var te=B.lane;if((si&te)===te)x!==null&&(x=x.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var re={lane:te,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};x===null?(k=x=re,w=c):x=x.next=re,st.lanes|=te,ii|=te}B=B.next}while(B!==null&&B!==f);x===null?w=c:x.next=k,Sn(c,s.memoizedState)||(Qt=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=x,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do f=d.lane,st.lanes|=f,ii|=f,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function wh(n){var s=gn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,f=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do f=n(f,w.action),w=w.next;while(w!==d);Sn(f,s.memoizedState)||(Qt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,c]}function $p(){}function Hp(n,s){var a=st,c=gn(),d=s(),f=!Sn(c.memoizedState,d);if(f&&(c.memoizedState=d,Qt=!0),c=c.queue,Eh(Gp.bind(null,a,c,n),[n]),c.getSnapshot!==s||f||It!==null&&It.memoizedState.tag&1){if(a.flags|=2048,Ia(9,qp.bind(null,a,c,d,s),void 0,null),St===null)throw Error(t(349));(si&30)!==0||Wp(a,s,d)}return d}function Wp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function qp(n,s,a,c){s.value=a,s.getSnapshot=c,Kp(s)&&Qp(n)}function Gp(n,s,a){return a(function(){Kp(s)&&Qp(n)})}function Kp(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Sn(n,a)}catch{return!0}}function Qp(n){var s=Rr(n,1);s!==null&&Pn(s,n,1,-1)}function Yp(n){var s=Zn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:n},s.queue=n,n=n.dispatch=IE.bind(null,st,n),[s.memoizedState,n]}function Ia(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=st.updateQueue,s===null?(s={lastEffect:null,stores:null},st.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function Xp(){return gn().memoizedState}function nu(n,s,a,c){var d=Zn();st.flags|=n,d.memoizedState=Ia(1|s,a,void 0,c===void 0?null:c)}function ru(n,s,a,c){var d=gn();c=c===void 0?null:c;var f=void 0;if(wt!==null){var w=wt.memoizedState;if(f=w.destroy,c!==null&&gh(c,w.deps)){d.memoizedState=Ia(s,a,f,c);return}}st.flags|=n,d.memoizedState=Ia(1|s,a,f,c)}function Jp(n,s){return nu(8390656,8,n,s)}function Eh(n,s){return ru(2048,8,n,s)}function Zp(n,s){return ru(4,2,n,s)}function em(n,s){return ru(4,4,n,s)}function tm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function nm(n,s,a){return a=a!=null?a.concat([n]):null,ru(4,4,tm.bind(null,s,n),a)}function Th(){}function rm(n,s){var a=gn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&gh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function sm(n,s){var a=gn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&gh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function im(n,s,a){return(si&21)===0?(n.baseState&&(n.baseState=!1,Qt=!0),n.memoizedState=a):(Sn(a,s)||(a=Qo(),st.lanes|=a,ii|=a,n.baseState=!0),s)}function EE(n,s){var a=Fe;Fe=a!==0&&4>a?a:4,n(!0);var c=mh.transition;mh.transition={};try{n(!1),s()}finally{Fe=a,mh.transition=c}}function om(){return gn().memoizedState}function TE(n,s,a){var c=gs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},am(n))lm(s,a);else if(a=jp(n,s,a,c),a!==null){var d=Wt();Pn(a,n,c,d),um(a,s,c)}}function IE(n,s,a){var c=gs(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(am(n))lm(s,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var w=s.lastRenderedState,k=f(w,a);if(d.hasEagerState=!0,d.eagerState=k,Sn(k,w)){var x=s.interleaved;x===null?(d.next=d,uh(s)):(d.next=x.next,x.next=d),s.interleaved=d;return}}catch{}finally{}a=jp(n,s,d,c),a!==null&&(d=Wt(),Pn(a,n,c,d),um(a,s,c))}}function am(n){var s=n.alternate;return n===st||s!==null&&s===st}function lm(n,s){wa=tu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function um(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Xo(n,a)}}var su={readContext:mn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},SE={readContext:mn,useCallback:function(n,s){return Zn().memoizedState=[n,s===void 0?null:s],n},useContext:mn,useEffect:Jp,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,nu(4194308,4,tm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return nu(4194308,4,n,s)},useInsertionEffect:function(n,s){return nu(4,2,n,s)},useMemo:function(n,s){var a=Zn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Zn();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=TE.bind(null,st,n),[c.memoizedState,n]},useRef:function(n){var s=Zn();return n={current:n},s.memoizedState=n},useState:Yp,useDebugValue:Th,useDeferredValue:function(n){return Zn().memoizedState=n},useTransition:function(){var n=Yp(!1),s=n[0];return n=EE.bind(null,n[1]),Zn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=st,d=Zn();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),St===null)throw Error(t(349));(si&30)!==0||Wp(c,s,a)}d.memoizedState=a;var f={value:a,getSnapshot:s};return d.queue=f,Jp(Gp.bind(null,c,f,n),[n]),c.flags|=2048,Ia(9,qp.bind(null,c,f,a,s),void 0,null),a},useId:function(){var n=Zn(),s=St.identifierPrefix;if(tt){var a=Cr,c=kr;a=(c&~(1<<32-nn(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ea++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=wE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},AE={readContext:mn,useCallback:rm,useContext:mn,useEffect:Eh,useImperativeHandle:nm,useInsertionEffect:Zp,useLayoutEffect:em,useMemo:sm,useReducer:_h,useRef:Xp,useState:function(){return _h(Ta)},useDebugValue:Th,useDeferredValue:function(n){var s=gn();return im(s,wt.memoizedState,n)},useTransition:function(){var n=_h(Ta)[0],s=gn().memoizedState;return[n,s]},useMutableSource:$p,useSyncExternalStore:Hp,useId:om,unstable_isNewReconciler:!1},kE={readContext:mn,useCallback:rm,useContext:mn,useEffect:Eh,useImperativeHandle:nm,useInsertionEffect:Zp,useLayoutEffect:em,useMemo:sm,useReducer:wh,useRef:Xp,useState:function(){return wh(Ta)},useDebugValue:Th,useDeferredValue:function(n){var s=gn();return wt===null?s.memoizedState=n:im(s,wt.memoizedState,n)},useTransition:function(){var n=wh(Ta)[0],s=gn().memoizedState;return[n,s]},useMutableSource:$p,useSyncExternalStore:Hp,useId:om,unstable_isNewReconciler:!1};function kn(n,s){if(n&&n.defaultProps){s=ce({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Ih(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ce({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var iu={isMounted:function(n){return(n=n._reactInternals)?Tn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Wt(),d=gs(n),f=Pr(c,d);f.payload=s,a!=null&&(f.callback=a),s=ds(n,f,d),s!==null&&(Pn(s,n,d,c),Xl(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Wt(),d=gs(n),f=Pr(c,d);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=ds(n,f,d),s!==null&&(Pn(s,n,d,c),Xl(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Wt(),c=gs(n),d=Pr(a,c);d.tag=2,s!=null&&(d.callback=s),s=ds(n,d,c),s!==null&&(Pn(s,n,c,a),Xl(s,n,c))}};function cm(n,s,a,c,d,f,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,f,w):s.prototype&&s.prototype.isPureReactComponent?!ua(a,c)||!ua(d,f):!0}function hm(n,s,a){var c=!1,d=us,f=s.contextType;return typeof f=="object"&&f!==null?f=mn(f):(d=Kt(s)?Zs:Lt.current,c=s.contextTypes,f=(c=c!=null)?eo(n,d):us),s=new s(a,f),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=iu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=f),s}function dm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&iu.enqueueReplaceState(s,s.state,null)}function Sh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},ch(n);var f=s.contextType;typeof f=="object"&&f!==null?d.context=mn(f):(f=Kt(s)?Zs:Lt.current,d.context=eo(n,f)),d.state=n.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Ih(n,s,f,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&iu.enqueueReplaceState(d,d.state,null),Jl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function lo(n,s){try{var a="",c=s;do a+=H(c),c=c.return;while(c);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:n,source:s,stack:d,digest:null}}function Ah(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function kh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var CE=typeof WeakMap=="function"?WeakMap:Map;function fm(n,s,a){a=Pr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){du||(du=!0,zh=c),kh(n,s)},a}function pm(n,s,a){a=Pr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){kh(n,s)}}var f=n.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){kh(n,s),typeof c!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function mm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new CE;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=zE.bind(null,n,s,a),s.then(n,n))}function gm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function ym(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Pr(-1,1),s.tag=2,ds(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var RE=K.ReactCurrentOwner,Qt=!1;function Ht(n,s,a,c){s.child=n===null?bp(s,null,a,c):so(s,n.child,a,c)}function vm(n,s,a,c,d){a=a.render;var f=s.ref;return oo(s,d),c=yh(n,s,a,c,f,d),a=vh(),n!==null&&!Qt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Nr(n,s,d)):(tt&&a&&eh(s),s.flags|=1,Ht(n,s,c,d),s.child)}function _m(n,s,a,c,d){if(n===null){var f=a.type;return typeof f=="function"&&!Kh(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=f,wm(n,s,f,c,d)):(n=vu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,(n.lanes&d)===0){var w=f.memoizedProps;if(a=a.compare,a=a!==null?a:ua,a(w,c)&&n.ref===s.ref)return Nr(n,s,d)}return s.flags|=1,n=vs(f,c),n.ref=s.ref,n.return=s,s.child=n}function wm(n,s,a,c,d){if(n!==null){var f=n.memoizedProps;if(ua(f,c)&&n.ref===s.ref)if(Qt=!1,s.pendingProps=c=f,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Qt=!0);else return s.lanes=n.lanes,Nr(n,s,d)}return Ch(n,s,a,c,d)}function Em(n,s,a){var c=s.pendingProps,d=c.children,f=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(co,cn),cn|=a;else{if((a&1073741824)===0)return n=f!==null?f.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Qe(co,cn),cn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Qe(co,cn),cn|=c}else f!==null?(c=f.baseLanes|a,s.memoizedState=null):c=a,Qe(co,cn),cn|=c;return Ht(n,s,d,a),s.child}function Tm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Ch(n,s,a,c,d){var f=Kt(a)?Zs:Lt.current;return f=eo(s,f),oo(s,d),a=yh(n,s,a,c,f,d),c=vh(),n!==null&&!Qt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Nr(n,s,d)):(tt&&c&&eh(s),s.flags|=1,Ht(n,s,a,d),s.child)}function Im(n,s,a,c,d){if(Kt(a)){var f=!0;$l(s)}else f=!1;if(oo(s,d),s.stateNode===null)au(n,s),hm(s,a,c),Sh(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,k=s.memoizedProps;w.props=k;var x=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=mn(B):(B=Kt(a)?Zs:Lt.current,B=eo(s,B));var te=a.getDerivedStateFromProps,re=typeof te=="function"||typeof w.getSnapshotBeforeUpdate=="function";re||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==c||x!==B)&&dm(s,w,c,B),hs=!1;var ee=s.memoizedState;w.state=ee,Jl(s,c,w,d),x=s.memoizedState,k!==c||ee!==x||Gt.current||hs?(typeof te=="function"&&(Ih(s,a,te,c),x=s.memoizedState),(k=hs||cm(s,a,k,c,ee,x,B))?(re||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=x),w.props=c,w.state=x,w.context=B,c=k):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Fp(n,s),k=s.memoizedProps,B=s.type===s.elementType?k:kn(s.type,k),w.props=B,re=s.pendingProps,ee=w.context,x=a.contextType,typeof x=="object"&&x!==null?x=mn(x):(x=Kt(a)?Zs:Lt.current,x=eo(s,x));var he=a.getDerivedStateFromProps;(te=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==re||ee!==x)&&dm(s,w,c,x),hs=!1,ee=s.memoizedState,w.state=ee,Jl(s,c,w,d);var ge=s.memoizedState;k!==re||ee!==ge||Gt.current||hs?(typeof he=="function"&&(Ih(s,a,he,c),ge=s.memoizedState),(B=hs||cm(s,a,B,c,ee,ge,x)||!1)?(te||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ge,x),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ge,x)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ge),w.props=c,w.state=ge,w.context=x,c=B):(typeof w.componentDidUpdate!="function"||k===n.memoizedProps&&ee===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&ee===n.memoizedState||(s.flags|=1024),c=!1)}return Rh(n,s,a,c,f,d)}function Rh(n,s,a,c,d,f){Tm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Rp(s,a,!1),Nr(n,s,f);c=s.stateNode,RE.current=s;var k=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=so(s,n.child,null,f),s.child=so(s,null,k,f)):Ht(n,s,k,f),s.memoizedState=c.state,d&&Rp(s,a,!0),s.child}function Sm(n){var s=n.stateNode;s.pendingContext?kp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&kp(n,s.context,!1),hh(n,s.containerInfo)}function Am(n,s,a,c,d){return ro(),sh(d),s.flags|=256,Ht(n,s,a,c),s.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function Nh(n){return{baseLanes:n,cachePool:null,transitions:null}}function km(n,s,a){var c=s.pendingProps,d=rt.current,f=!1,w=(s.flags&128)!==0,k;if((k=w)||(k=n!==null&&n.memoizedState===null?!1:(d&2)!==0),k?(f=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Qe(rt,d&1),n===null)return rh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,f?(c=s.mode,f=s.child,w={mode:"hidden",children:w},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=w):f=_u(w,c,0,null),n=ui(n,c,a,null),f.return=s,n.return=s,f.sibling=n,s.child=f,s.child.memoizedState=Nh(a),s.memoizedState=Ph,n):xh(s,w));if(d=n.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return PE(n,s,w,c,k,d,a);if(f){f=c.fallback,w=s.mode,d=n.child,k=d.sibling;var x={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=x,s.deletions=null):(c=vs(d,x),c.subtreeFlags=d.subtreeFlags&14680064),k!==null?f=vs(k,f):(f=ui(f,w,a,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,w=n.child.memoizedState,w=w===null?Nh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},f.memoizedState=w,f.childLanes=n.childLanes&~a,s.memoizedState=Ph,c}return f=n.child,n=f.sibling,c=vs(f,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function xh(n,s){return s=_u({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function ou(n,s,a,c){return c!==null&&sh(c),so(s,n.child,null,a),n=xh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function PE(n,s,a,c,d,f,w){if(a)return s.flags&256?(s.flags&=-257,c=Ah(Error(t(422))),ou(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(f=c.fallback,d=s.mode,c=_u({mode:"visible",children:c.children},d,0,null),f=ui(f,d,w,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,(s.mode&1)!==0&&so(s,n.child,null,w),s.child.memoizedState=Nh(w),s.memoizedState=Ph,f);if((s.mode&1)===0)return ou(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var k=c.dgst;return c=k,f=Error(t(419)),c=Ah(f,c,void 0),ou(n,s,w,c)}if(k=(w&n.childLanes)!==0,Qt||k){if(c=St,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Rr(n,d),Pn(c,n,d,-1))}return Gh(),c=Ah(Error(t(421))),ou(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=BE.bind(null,n),d._reactRetry=s,null):(n=f.treeContext,un=as(d.nextSibling),ln=s,tt=!0,An=null,n!==null&&(fn[pn++]=kr,fn[pn++]=Cr,fn[pn++]=ei,kr=n.id,Cr=n.overflow,ei=s),s=xh(s,c.children),s.flags|=4096,s)}function Cm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),lh(n.return,s,a)}function Dh(n,s,a,c,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=d)}function Rm(n,s,a){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if(Ht(n,s,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Cm(n,a,s);else if(n.tag===19)Cm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Qe(rt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Zl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Dh(s,!1,d,a,f);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Zl(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Dh(s,!0,a,null,f);break;case"together":Dh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function au(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Nr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ii|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=vs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=vs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function NE(n,s,a){switch(s.tag){case 3:Sm(s),ro();break;case 5:Bp(s);break;case 1:Kt(s.type)&&$l(s);break;case 4:hh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Qe(Ql,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Qe(rt,rt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?km(n,s,a):(Qe(rt,rt.current&1),n=Nr(n,s,a),n!==null?n.sibling:null);Qe(rt,rt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Rm(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(rt,rt.current),c)break;return null;case 22:case 23:return s.lanes=0,Em(n,s,a)}return Nr(n,s,a)}var Pm,Vh,Nm,xm;Pm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Vh=function(){},Nm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,ri(Jn.current);var f=null;switch(a){case"input":d=$r(n,d),c=$r(n,c),f=[];break;case"select":d=ce({},d,{value:void 0}),c=ce({},c,{value:void 0}),f=[];break;case"textarea":d=ct(n,d),c=ct(n,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ul)}En(a,c);var w;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var k=d[B];for(w in k)k.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?f||(f=[]):(f=f||[]).push(B,null));for(B in c){var x=c[B];if(k=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&x!==k&&(x!=null||k!=null))if(B==="style")if(k){for(w in k)!k.hasOwnProperty(w)||x&&x.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in x)x.hasOwnProperty(w)&&k[w]!==x[w]&&(a||(a={}),a[w]=x[w])}else a||(f||(f=[]),f.push(B,a)),a=x;else B==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,k=k?k.__html:void 0,x!=null&&k!==x&&(f=f||[]).push(B,x)):B==="children"?typeof x!="string"&&typeof x!="number"||(f=f||[]).push(B,""+x):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(x!=null&&B==="onScroll"&&Je("scroll",n),f||k===x||(f=[])):(f=f||[]).push(B,x))}a&&(f=f||[]).push("style",a);var B=f;(s.updateQueue=B)&&(s.flags|=4)}},xm=function(n,s,a,c){a!==c&&(s.flags|=4)};function Sa(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function jt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function xE(n,s,a){var c=s.pendingProps;switch(th(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return Kt(s.type)&&Bl(),jt(s),null;case 3:return c=s.stateNode,ao(),Ze(Gt),Ze(Lt),ph(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Gl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,An!==null&&(Hh(An),An=null))),Vh(n,s),jt(s),null;case 5:dh(s);var d=ri(_a.current);if(a=s.type,n!==null&&s.stateNode!=null)Nm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return jt(s),null}if(n=ri(Jn.current),Gl(s)){c=s.stateNode,a=s.type;var f=s.memoizedProps;switch(c[Xn]=s,c[pa]=f,n=(s.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(d=0;d<ha.length;d++)Je(ha[d],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":Ci(c,f),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},Je("invalid",c);break;case"textarea":Wr(c,f),Je("invalid",c)}En(a,f),d=null;for(var w in f)if(f.hasOwnProperty(w)){var k=f[w];w==="children"?typeof k=="string"?c.textContent!==k&&(f.suppressHydrationWarning!==!0&&Fl(c.textContent,k,n),d=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(f.suppressHydrationWarning!==!0&&Fl(c.textContent,k,n),d=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&Je("scroll",c)}switch(a){case"input":zr(c),Ls(c,f,!0);break;case"textarea":zr(c),Ln(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Ul)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Uo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Xn]=s,n[pa]=c,Pm(n,s,!1,!1),s.stateNode=n;e:{switch(w=Ni(a,c),a){case"dialog":Je("cancel",n),Je("close",n),d=c;break;case"iframe":case"object":case"embed":Je("load",n),d=c;break;case"video":case"audio":for(d=0;d<ha.length;d++)Je(ha[d],n);d=c;break;case"source":Je("error",n),d=c;break;case"img":case"image":case"link":Je("error",n),Je("load",n),d=c;break;case"details":Je("toggle",n),d=c;break;case"input":Ci(n,c),d=$r(n,c),Je("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ce({},c,{value:void 0}),Je("invalid",n);break;case"textarea":Wr(n,c),d=ct(n,c),Je("invalid",n);break;default:d=c}En(a,d),k=d;for(f in k)if(k.hasOwnProperty(f)){var x=k[f];f==="style"?Pi(n,x):f==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&fl(n,x)):f==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&js(n,x):typeof x=="number"&&js(n,""+x):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?x!=null&&f==="onScroll"&&Je("scroll",n):x!=null&&Q(n,f,x,w))}switch(a){case"input":zr(n),Ls(n,c,!1);break;case"textarea":zr(n),Ln(n);break;case"option":c.value!=null&&n.setAttribute("value",""+De(c.value));break;case"select":n.multiple=!!c.multiple,f=c.value,f!=null?en(n,!!c.multiple,f,!1):c.defaultValue!=null&&en(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Ul)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return jt(s),null;case 6:if(n&&s.stateNode!=null)xm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=ri(_a.current),ri(Jn.current),Gl(s)){if(c=s.stateNode,a=s.memoizedProps,c[Xn]=s,(f=c.nodeValue!==a)&&(n=ln,n!==null))switch(n.tag){case 3:Fl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fl(c.nodeValue,a,(n.mode&1)!==0)}f&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Xn]=s,s.stateNode=c}return jt(s),null;case 13:if(Ze(rt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&un!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Op(),ro(),s.flags|=98560,f=!1;else if(f=Gl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(t(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));f[Xn]=s}else ro(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),f=!1}else An!==null&&(Hh(An),An=null),f=!0;if(!f)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(rt.current&1)!==0?Et===0&&(Et=3):Gh())),s.updateQueue!==null&&(s.flags|=4),jt(s),null);case 4:return ao(),Vh(n,s),n===null&&da(s.stateNode.containerInfo),jt(s),null;case 10:return ah(s.type._context),jt(s),null;case 17:return Kt(s.type)&&Bl(),jt(s),null;case 19:if(Ze(rt),f=s.memoizedState,f===null)return jt(s),null;if(c=(s.flags&128)!==0,w=f.rendering,w===null)if(c)Sa(f,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Zl(n),w!==null){for(s.flags|=128,Sa(f,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)f=a,n=c,f.flags&=14680066,w=f.alternate,w===null?(f.childLanes=0,f.lanes=n,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=w.childLanes,f.lanes=w.lanes,f.child=w.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=w.memoizedProps,f.memoizedState=w.memoizedState,f.updateQueue=w.updateQueue,f.type=w.type,n=w.dependencies,f.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(rt,rt.current&1|2),s.child}n=n.sibling}f.tail!==null&&Xe()>ho&&(s.flags|=128,c=!0,Sa(f,!1),s.lanes=4194304)}else{if(!c)if(n=Zl(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Sa(f,!0),f.tail===null&&f.tailMode==="hidden"&&!w.alternate&&!tt)return jt(s),null}else 2*Xe()-f.renderingStartTime>ho&&a!==1073741824&&(s.flags|=128,c=!0,Sa(f,!1),s.lanes=4194304);f.isBackwards?(w.sibling=s.child,s.child=w):(a=f.last,a!==null?a.sibling=w:s.child=w,f.last=w)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Xe(),s.sibling=null,a=rt.current,Qe(rt,c?a&1|2:a&1),s):(jt(s),null);case 22:case 23:return qh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(cn&1073741824)!==0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function DE(n,s){switch(th(s),s.tag){case 1:return Kt(s.type)&&Bl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ao(),Ze(Gt),Ze(Lt),ph(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return dh(s),null;case 13:if(Ze(rt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ro()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return ao(),null;case 10:return ah(s.type._context),null;case 22:case 23:return qh(),null;case 24:return null;default:return null}}var lu=!1,Ft=!1,VE=typeof WeakSet=="function"?WeakSet:Set,pe=null;function uo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){lt(n,s,c)}else a.current=null}function Oh(n,s,a){try{a()}catch(c){lt(n,s,c)}}var Dm=!1;function OE(n,s){if(qc=Er,n=cp(),jc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var w=0,k=-1,x=-1,B=0,te=0,re=n,ee=null;t:for(;;){for(var he;re!==a||d!==0&&re.nodeType!==3||(k=w+d),re!==f||c!==0&&re.nodeType!==3||(x=w+c),re.nodeType===3&&(w+=re.nodeValue.length),(he=re.firstChild)!==null;)ee=re,re=he;for(;;){if(re===n)break t;if(ee===a&&++B===d&&(k=w),ee===f&&++te===c&&(x=w),(he=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=he}a=k===-1||x===-1?null:{start:k,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Gc={focusedElem:n,selectionRange:a},Er=!1,pe=s;pe!==null;)if(s=pe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,pe=n;else for(;pe!==null;){s=pe;try{var ge=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,dt=ge.memoizedState,b=s.stateNode,O=b.getSnapshotBeforeUpdate(s.elementType===s.type?ye:kn(s.type,ye),dt);b.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){lt(s,s.return,se)}if(n=s.sibling,n!==null){n.return=s.return,pe=n;break}pe=s.return}return ge=Dm,Dm=!1,ge}function Aa(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var f=d.destroy;d.destroy=void 0,f!==void 0&&Oh(s,a,f)}d=d.next}while(d!==c)}}function uu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Mh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Vm(n){var s=n.alternate;s!==null&&(n.alternate=null,Vm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Xn],delete s[pa],delete s[Xc],delete s[gE],delete s[yE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Om(n){return n.tag===5||n.tag===3||n.tag===4}function Mm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Om(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Lh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ul));else if(c!==4&&(n=n.child,n!==null))for(Lh(n,s,a),n=n.sibling;n!==null;)Lh(n,s,a),n=n.sibling}function bh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(bh(n,s,a),n=n.sibling;n!==null;)bh(n,s,a),n=n.sibling}var Nt=null,Cn=!1;function fs(n,s,a){for(a=a.child;a!==null;)Lm(n,s,a),a=a.sibling}function Lm(n,s,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount($s,a)}catch{}switch(a.tag){case 5:Ft||uo(a,s);case 6:var c=Nt,d=Cn;Nt=null,fs(n,s,a),Nt=c,Cn=d,Nt!==null&&(Cn?(n=Nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(Cn?(n=Nt,a=a.stateNode,n.nodeType===8?Yc(n.parentNode,a):n.nodeType===1&&Yc(n,a),rs(n)):Yc(Nt,a.stateNode));break;case 4:c=Nt,d=Cn,Nt=a.stateNode.containerInfo,Cn=!0,fs(n,s,a),Nt=c,Cn=d;break;case 0:case 11:case 14:case 15:if(!Ft&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,w=f.destroy;f=f.tag,w!==void 0&&((f&2)!==0||(f&4)!==0)&&Oh(a,s,w),d=d.next}while(d!==c)}fs(n,s,a);break;case 1:if(!Ft&&(uo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(k){lt(a,s,k)}fs(n,s,a);break;case 21:fs(n,s,a);break;case 22:a.mode&1?(Ft=(c=Ft)||a.memoizedState!==null,fs(n,s,a),Ft=c):fs(n,s,a);break;default:fs(n,s,a)}}function bm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new VE),s.forEach(function(c){var d=$E.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Rn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var f=n,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 5:Nt=k.stateNode,Cn=!1;break e;case 3:Nt=k.stateNode.containerInfo,Cn=!0;break e;case 4:Nt=k.stateNode.containerInfo,Cn=!0;break e}k=k.return}if(Nt===null)throw Error(t(160));Lm(f,w,d),Nt=null,Cn=!1;var x=d.alternate;x!==null&&(x.return=null),d.return=null}catch(B){lt(d,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)jm(s,n),s=s.sibling}function jm(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Rn(s,n),er(n),c&4){try{Aa(3,n,n.return),uu(3,n)}catch(ye){lt(n,n.return,ye)}try{Aa(5,n,n.return)}catch(ye){lt(n,n.return,ye)}}break;case 1:Rn(s,n),er(n),c&512&&a!==null&&uo(a,a.return);break;case 5:if(Rn(s,n),er(n),c&512&&a!==null&&uo(a,a.return),n.flags&32){var d=n.stateNode;try{js(d,"")}catch(ye){lt(n,n.return,ye)}}if(c&4&&(d=n.stateNode,d!=null)){var f=n.memoizedProps,w=a!==null?a.memoizedProps:f,k=n.type,x=n.updateQueue;if(n.updateQueue=null,x!==null)try{k==="input"&&f.type==="radio"&&f.name!=null&&Hr(d,f),Ni(k,w);var B=Ni(k,f);for(w=0;w<x.length;w+=2){var te=x[w],re=x[w+1];te==="style"?Pi(d,re):te==="dangerouslySetInnerHTML"?fl(d,re):te==="children"?js(d,re):Q(d,te,re,B)}switch(k){case"input":fr(d,f);break;case"textarea":bs(d,f);break;case"select":var ee=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var he=f.value;he!=null?en(d,!!f.multiple,he,!1):ee!==!!f.multiple&&(f.defaultValue!=null?en(d,!!f.multiple,f.defaultValue,!0):en(d,!!f.multiple,f.multiple?[]:"",!1))}d[pa]=f}catch(ye){lt(n,n.return,ye)}}break;case 6:if(Rn(s,n),er(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,f=n.memoizedProps;try{d.nodeValue=f}catch(ye){lt(n,n.return,ye)}}break;case 3:if(Rn(s,n),er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{rs(s.containerInfo)}catch(ye){lt(n,n.return,ye)}break;case 4:Rn(s,n),er(n);break;case 13:Rn(s,n),er(n),d=n.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(Uh=Xe())),c&4&&bm(n);break;case 22:if(te=a!==null&&a.memoizedState!==null,n.mode&1?(Ft=(B=Ft)||te,Rn(s,n),Ft=B):Rn(s,n),er(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!te&&(n.mode&1)!==0)for(pe=n,te=n.child;te!==null;){for(re=pe=te;pe!==null;){switch(ee=pe,he=ee.child,ee.tag){case 0:case 11:case 14:case 15:Aa(4,ee,ee.return);break;case 1:uo(ee,ee.return);var ge=ee.stateNode;if(typeof ge.componentWillUnmount=="function"){c=ee,a=ee.return;try{s=c,ge.props=s.memoizedProps,ge.state=s.memoizedState,ge.componentWillUnmount()}catch(ye){lt(c,a,ye)}}break;case 5:uo(ee,ee.return);break;case 22:if(ee.memoizedState!==null){zm(re);continue}}he!==null?(he.return=ee,pe=he):zm(re)}te=te.sibling}e:for(te=null,re=n;;){if(re.tag===5){if(te===null){te=re;try{d=re.stateNode,B?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(k=re.stateNode,x=re.memoizedProps.style,w=x!=null&&x.hasOwnProperty("display")?x.display:null,k.style.display=Kr("display",w))}catch(ye){lt(n,n.return,ye)}}}else if(re.tag===6){if(te===null)try{re.stateNode.nodeValue=B?"":re.memoizedProps}catch(ye){lt(n,n.return,ye)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===n)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===n)break e;for(;re.sibling===null;){if(re.return===null||re.return===n)break e;te===re&&(te=null),re=re.return}te===re&&(te=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Rn(s,n),er(n),c&4&&bm(n);break;case 21:break;default:Rn(s,n),er(n)}}function er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Om(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(js(d,""),c.flags&=-33);var f=Mm(n);bh(n,f,d);break;case 3:case 4:var w=c.stateNode.containerInfo,k=Mm(n);Lh(n,k,w);break;default:throw Error(t(161))}}catch(x){lt(n,n.return,x)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ME(n,s,a){pe=n,Fm(n)}function Fm(n,s,a){for(var c=(n.mode&1)!==0;pe!==null;){var d=pe,f=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||lu;if(!w){var k=d.alternate,x=k!==null&&k.memoizedState!==null||Ft;k=lu;var B=Ft;if(lu=w,(Ft=x)&&!B)for(pe=d;pe!==null;)w=pe,x=w.child,w.tag===22&&w.memoizedState!==null?Bm(d):x!==null?(x.return=w,pe=x):Bm(d);for(;f!==null;)pe=f,Fm(f),f=f.sibling;pe=d,lu=k,Ft=B}Um(n)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,pe=f):Um(n)}}function Um(n){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ft||uu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ft)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:kn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=s.updateQueue;f!==null&&zp(s,f,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}zp(s,w,a)}break;case 5:var k=s.stateNode;if(a===null&&s.flags&4){a=k;var x=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var te=B.memoizedState;if(te!==null){var re=te.dehydrated;re!==null&&rs(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||s.flags&512&&Mh(s)}catch(ee){lt(s,s.return,ee)}}if(s===n){pe=null;break}if(a=s.sibling,a!==null){a.return=s.return,pe=a;break}pe=s.return}}function zm(n){for(;pe!==null;){var s=pe;if(s===n){pe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,pe=a;break}pe=s.return}}function Bm(n){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{uu(4,s)}catch(x){lt(s,a,x)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(x){lt(s,d,x)}}var f=s.return;try{Mh(s)}catch(x){lt(s,f,x)}break;case 5:var w=s.return;try{Mh(s)}catch(x){lt(s,w,x)}}}catch(x){lt(s,s.return,x)}if(s===n){pe=null;break}var k=s.sibling;if(k!==null){k.return=s.return,pe=k;break}pe=s.return}}var LE=Math.ceil,cu=K.ReactCurrentDispatcher,jh=K.ReactCurrentOwner,yn=K.ReactCurrentBatchConfig,ze=0,St=null,mt=null,xt=0,cn=0,co=ls(0),Et=0,ka=null,ii=0,hu=0,Fh=0,Ca=null,Yt=null,Uh=0,ho=1/0,xr=null,du=!1,zh=null,ps=null,fu=!1,ms=null,pu=0,Ra=0,Bh=null,mu=-1,gu=0;function Wt(){return(ze&6)!==0?Xe():mu!==-1?mu:mu=Xe()}function gs(n){return(n.mode&1)===0?1:(ze&2)!==0&&xt!==0?xt&-xt:_E.transition!==null?(gu===0&&(gu=Qo()),gu):(n=Fe,n!==0||(n=window.event,n=n===void 0?16:Ui(n.type)),n)}function Pn(n,s,a,c){if(50<Ra)throw Ra=0,Bh=null,Error(t(185));Gs(n,a,c),((ze&2)===0||n!==St)&&(n===St&&((ze&2)===0&&(hu|=a),Et===4&&ys(n,xt)),Xt(n,c),a===1&&ze===0&&(s.mode&1)===0&&(ho=Xe()+500,Hl&&cs()))}function Xt(n,s){var a=n.callbackNode;qs(n,s);var c=vr(n,n===St?xt:0);if(c===0)a!==null&&Vi(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Vi(a),s===1)n.tag===0?vE(Hm.bind(null,n)):Pp(Hm.bind(null,n)),pE(function(){(ze&6)===0&&cs()}),a=null;else{switch(zn(c)){case 1:a=Oi;break;case 4:a=qo;break;case 16:a=Bs;break;case 536870912:a=Mi;break;default:a=Bs}a=Jm(a,$m.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function $m(n,s){if(mu=-1,gu=0,(ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(fo()&&n.callbackNode!==a)return null;var c=vr(n,n===St?xt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=yu(n,c);else{s=c;var d=ze;ze|=2;var f=qm();(St!==n||xt!==s)&&(xr=null,ho=Xe()+500,ai(n,s));do try{FE();break}catch(k){Wm(n,k)}while(!0);oh(),cu.current=f,ze=d,mt!==null?s=0:(St=null,xt=0,s=Et)}if(s!==0){if(s===2&&(d=Ko(n),d!==0&&(c=d,s=$h(n,d))),s===1)throw a=ka,ai(n,0),ys(n,c),Xt(n,Xe()),a;if(s===6)ys(n,c);else{if(d=n.current.alternate,(c&30)===0&&!bE(d)&&(s=yu(n,c),s===2&&(f=Ko(n),f!==0&&(c=f,s=$h(n,f))),s===1))throw a=ka,ai(n,0),ys(n,c),Xt(n,Xe()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:li(n,Yt,xr);break;case 3:if(ys(n,c),(c&130023424)===c&&(s=Uh+500-Xe(),10<s)){if(vr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Wt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Qc(li.bind(null,n,Yt,xr),s);break}li(n,Yt,xr);break;case 4:if(ys(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-nn(c);f=1<<w,w=s[w],w>d&&(d=w),c&=~f}if(c=d,c=Xe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*LE(c/1960))-c,10<c){n.timeoutHandle=Qc(li.bind(null,n,Yt,xr),c);break}li(n,Yt,xr);break;case 5:li(n,Yt,xr);break;default:throw Error(t(329))}}}return Xt(n,Xe()),n.callbackNode===a?$m.bind(null,n):null}function $h(n,s){var a=Ca;return n.current.memoizedState.isDehydrated&&(ai(n,s).flags|=256),n=yu(n,s),n!==2&&(s=Yt,Yt=a,s!==null&&Hh(s)),n}function Hh(n){Yt===null?Yt=n:Yt.push.apply(Yt,n)}function bE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],f=d.getSnapshot;d=d.value;try{if(!Sn(f(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ys(n,s){for(s&=~Fh,s&=~hu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-nn(s),c=1<<a;n[a]=-1,s&=~c}}function Hm(n){if((ze&6)!==0)throw Error(t(327));fo();var s=vr(n,0);if((s&1)===0)return Xt(n,Xe()),null;var a=yu(n,s);if(n.tag!==0&&a===2){var c=Ko(n);c!==0&&(s=c,a=$h(n,c))}if(a===1)throw a=ka,ai(n,0),ys(n,s),Xt(n,Xe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,li(n,Yt,xr),Xt(n,Xe()),null}function Wh(n,s){var a=ze;ze|=1;try{return n(s)}finally{ze=a,ze===0&&(ho=Xe()+500,Hl&&cs())}}function oi(n){ms!==null&&ms.tag===0&&(ze&6)===0&&fo();var s=ze;ze|=1;var a=yn.transition,c=Fe;try{if(yn.transition=null,Fe=1,n)return n()}finally{Fe=c,yn.transition=a,ze=s,(ze&6)===0&&cs()}}function qh(){cn=co.current,Ze(co)}function ai(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,fE(a)),mt!==null)for(a=mt.return;a!==null;){var c=a;switch(th(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Bl();break;case 3:ao(),Ze(Gt),Ze(Lt),ph();break;case 5:dh(c);break;case 4:ao();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:ah(c.type._context);break;case 22:case 23:qh()}a=a.return}if(St=n,mt=n=vs(n.current,null),xt=cn=s,Et=0,ka=null,Fh=hu=ii=0,Yt=Ca=null,ni!==null){for(s=0;s<ni.length;s++)if(a=ni[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,f=a.pending;if(f!==null){var w=f.next;f.next=d,c.next=w}a.pending=c}ni=null}return n}function Wm(n,s){do{var a=mt;try{if(oh(),eu.current=su,tu){for(var c=st.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}tu=!1}if(si=0,It=wt=st=null,wa=!1,Ea=0,jh.current=null,a===null||a.return===null){Et=1,ka=s,mt=null;break}e:{var f=n,w=a.return,k=a,x=s;if(s=xt,k.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var B=x,te=k,re=te.tag;if((te.mode&1)===0&&(re===0||re===11||re===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var he=gm(w);if(he!==null){he.flags&=-257,ym(he,w,k,f,s),he.mode&1&&mm(f,B,s),s=he,x=B;var ge=s.updateQueue;if(ge===null){var ye=new Set;ye.add(x),s.updateQueue=ye}else ge.add(x);break e}else{if((s&1)===0){mm(f,B,s),Gh();break e}x=Error(t(426))}}else if(tt&&k.mode&1){var dt=gm(w);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),ym(dt,w,k,f,s),sh(lo(x,k));break e}}f=x=lo(x,k),Et!==4&&(Et=2),Ca===null?Ca=[f]:Ca.push(f),f=w;do{switch(f.tag){case 3:f.flags|=65536,s&=-s,f.lanes|=s;var b=fm(f,x,s);Up(f,b);break e;case 1:k=x;var O=f.type,z=f.stateNode;if((f.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ps===null||!ps.has(z)))){f.flags|=65536,s&=-s,f.lanes|=s;var se=pm(f,k,s);Up(f,se);break e}}f=f.return}while(f!==null)}Km(a)}catch(_e){s=_e,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function qm(){var n=cu.current;return cu.current=su,n===null?su:n}function Gh(){(Et===0||Et===3||Et===2)&&(Et=4),St===null||(ii&268435455)===0&&(hu&268435455)===0||ys(St,xt)}function yu(n,s){var a=ze;ze|=2;var c=qm();(St!==n||xt!==s)&&(xr=null,ai(n,s));do try{jE();break}catch(d){Wm(n,d)}while(!0);if(oh(),ze=a,cu.current=c,mt!==null)throw Error(t(261));return St=null,xt=0,Et}function jE(){for(;mt!==null;)Gm(mt)}function FE(){for(;mt!==null&&!zs();)Gm(mt)}function Gm(n){var s=Xm(n.alternate,n,cn);n.memoizedProps=n.pendingProps,s===null?Km(n):mt=s,jh.current=null}function Km(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=xE(a,s,cn),a!==null){mt=a;return}}else{if(a=DE(a,s),a!==null){a.flags&=32767,mt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Et=6,mt=null;return}}if(s=s.sibling,s!==null){mt=s;return}mt=s=n}while(s!==null);Et===0&&(Et=5)}function li(n,s,a){var c=Fe,d=yn.transition;try{yn.transition=null,Fe=1,UE(n,s,a,c)}finally{yn.transition=d,Fe=c}return null}function UE(n,s,a,c){do fo();while(ms!==null);if((ze&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var f=a.lanes|a.childLanes;if(Vc(n,f),n===St&&(mt=St=null,xt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||fu||(fu=!0,Jm(Bs,function(){return fo(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=yn.transition,yn.transition=null;var w=Fe;Fe=1;var k=ze;ze|=4,jh.current=null,OE(n,a),jm(a,n),oE(Gc),Er=!!qc,Gc=qc=null,n.current=a,ME(a),yr(),ze=k,Fe=w,yn.transition=f}else n.current=a;if(fu&&(fu=!1,ms=n,pu=d),f=n.pendingLanes,f===0&&(ps=null),Sl(a.stateNode),Xt(n,Xe()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(du)throw du=!1,n=zh,zh=null,n;return(pu&1)!==0&&n.tag!==0&&fo(),f=n.pendingLanes,(f&1)!==0?n===Bh?Ra++:(Ra=0,Bh=n):Ra=0,cs(),null}function fo(){if(ms!==null){var n=zn(pu),s=yn.transition,a=Fe;try{if(yn.transition=null,Fe=16>n?16:n,ms===null)var c=!1;else{if(n=ms,ms=null,pu=0,(ze&6)!==0)throw Error(t(331));var d=ze;for(ze|=4,pe=n.current;pe!==null;){var f=pe,w=f.child;if((pe.flags&16)!==0){var k=f.deletions;if(k!==null){for(var x=0;x<k.length;x++){var B=k[x];for(pe=B;pe!==null;){var te=pe;switch(te.tag){case 0:case 11:case 15:Aa(8,te,f)}var re=te.child;if(re!==null)re.return=te,pe=re;else for(;pe!==null;){te=pe;var ee=te.sibling,he=te.return;if(Vm(te),te===B){pe=null;break}if(ee!==null){ee.return=he,pe=ee;break}pe=he}}}var ge=f.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var dt=ye.sibling;ye.sibling=null,ye=dt}while(ye!==null)}}pe=f}}if((f.subtreeFlags&2064)!==0&&w!==null)w.return=f,pe=w;else e:for(;pe!==null;){if(f=pe,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Aa(9,f,f.return)}var b=f.sibling;if(b!==null){b.return=f.return,pe=b;break e}pe=f.return}}var O=n.current;for(pe=O;pe!==null;){w=pe;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,pe=z;else e:for(w=O;pe!==null;){if(k=pe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:uu(9,k)}}catch(_e){lt(k,k.return,_e)}if(k===w){pe=null;break e}var se=k.sibling;if(se!==null){se.return=k.return,pe=se;break e}pe=k.return}}if(ze=d,cs(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot($s,n)}catch{}c=!0}return c}finally{Fe=a,yn.transition=s}}return!1}function Qm(n,s,a){s=lo(a,s),s=fm(n,s,1),n=ds(n,s,1),s=Wt(),n!==null&&(Gs(n,1,s),Xt(n,s))}function lt(n,s,a){if(n.tag===3)Qm(n,n,a);else for(;s!==null;){if(s.tag===3){Qm(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ps===null||!ps.has(c))){n=lo(a,n),n=pm(s,n,1),s=ds(s,n,1),n=Wt(),s!==null&&(Gs(s,1,n),Xt(s,n));break}}s=s.return}}function zE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Wt(),n.pingedLanes|=n.suspendedLanes&a,St===n&&(xt&a)===a&&(Et===4||Et===3&&(xt&130023424)===xt&&500>Xe()-Uh?ai(n,0):Fh|=a),Xt(n,s)}function Ym(n,s){s===0&&((n.mode&1)===0?s=1:(s=es,es<<=1,(es&130023424)===0&&(es=4194304)));var a=Wt();n=Rr(n,s),n!==null&&(Gs(n,s,a),Xt(n,a))}function BE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Ym(n,a)}function $E(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Ym(n,a)}var Xm;Xm=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Gt.current)Qt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Qt=!1,NE(n,s,a);Qt=(n.flags&131072)!==0}else Qt=!1,tt&&(s.flags&1048576)!==0&&Np(s,ql,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;au(n,s),n=s.pendingProps;var d=eo(s,Lt.current);oo(s,a),d=yh(null,s,c,n,d,a);var f=vh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Kt(c)?(f=!0,$l(s)):f=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ch(s),d.updater=iu,s.stateNode=d,d._reactInternals=s,Sh(s,c,n,a),s=Rh(null,s,c,!0,f,a)):(s.tag=0,tt&&f&&eh(s),Ht(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(au(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=WE(c),n=kn(c,n),d){case 0:s=Ch(null,s,c,n,a);break e;case 1:s=Im(null,s,c,n,a);break e;case 11:s=vm(null,s,c,n,a);break e;case 14:s=_m(null,s,c,kn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:kn(c,d),Ch(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:kn(c,d),Im(n,s,c,d,a);case 3:e:{if(Sm(s),n===null)throw Error(t(387));c=s.pendingProps,f=s.memoizedState,d=f.element,Fp(n,s),Jl(s,c,null,a);var w=s.memoizedState;if(c=w.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){d=lo(Error(t(423)),s),s=Am(n,s,c,a,d);break e}else if(c!==d){d=lo(Error(t(424)),s),s=Am(n,s,c,a,d);break e}else for(un=as(s.stateNode.containerInfo.firstChild),ln=s,tt=!0,An=null,a=bp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ro(),c===d){s=Nr(n,s,a);break e}Ht(n,s,c,a)}s=s.child}return s;case 5:return Bp(s),n===null&&rh(s),c=s.type,d=s.pendingProps,f=n!==null?n.memoizedProps:null,w=d.children,Kc(c,d)?w=null:f!==null&&Kc(c,f)&&(s.flags|=32),Tm(n,s),Ht(n,s,w,a),s.child;case 6:return n===null&&rh(s),null;case 13:return km(n,s,a);case 4:return hh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=so(s,null,c,a):Ht(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:kn(c,d),vm(n,s,c,d,a);case 7:return Ht(n,s,s.pendingProps,a),s.child;case 8:return Ht(n,s,s.pendingProps.children,a),s.child;case 12:return Ht(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,f=s.memoizedProps,w=d.value,Qe(Ql,c._currentValue),c._currentValue=w,f!==null)if(Sn(f.value,w)){if(f.children===d.children&&!Gt.current){s=Nr(n,s,a);break e}}else for(f=s.child,f!==null&&(f.return=s);f!==null;){var k=f.dependencies;if(k!==null){w=f.child;for(var x=k.firstContext;x!==null;){if(x.context===c){if(f.tag===1){x=Pr(-1,a&-a),x.tag=2;var B=f.updateQueue;if(B!==null){B=B.shared;var te=B.pending;te===null?x.next=x:(x.next=te.next,te.next=x),B.pending=x}}f.lanes|=a,x=f.alternate,x!==null&&(x.lanes|=a),lh(f.return,a,s),k.lanes|=a;break}x=x.next}}else if(f.tag===10)w=f.type===s.type?null:f.child;else if(f.tag===18){if(w=f.return,w===null)throw Error(t(341));w.lanes|=a,k=w.alternate,k!==null&&(k.lanes|=a),lh(w,a,s),w=f.sibling}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===s){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}Ht(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,oo(s,a),d=mn(d),c=c(d),s.flags|=1,Ht(n,s,c,a),s.child;case 14:return c=s.type,d=kn(c,s.pendingProps),d=kn(c.type,d),_m(n,s,c,d,a);case 15:return wm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:kn(c,d),au(n,s),s.tag=1,Kt(c)?(n=!0,$l(s)):n=!1,oo(s,a),hm(s,c,d),Sh(s,c,d,a),Rh(null,s,c,!0,n,a);case 19:return Rm(n,s,a);case 22:return Em(n,s,a)}throw Error(t(156,s.tag))};function Jm(n,s){return Wo(n,s)}function HE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(n,s,a,c){return new HE(n,s,a,c)}function Kh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function WE(n){if(typeof n=="function")return Kh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L)return 11;if(n===Oe)return 14}return 2}function vs(n,s){var a=n.alternate;return a===null?(a=vn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function vu(n,s,a,c,d,f){var w=2;if(c=n,typeof n=="function")Kh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case P:return ui(a.children,d,f,s);case A:w=8,d|=8;break;case C:return n=vn(12,a,s,d|2),n.elementType=C,n.lanes=f,n;case E:return n=vn(13,a,s,d),n.elementType=E,n.lanes=f,n;case Ie:return n=vn(19,a,s,d),n.elementType=Ie,n.lanes=f,n;case Ce:return _u(a,d,f,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case V:w=10;break e;case N:w=9;break e;case L:w=11;break e;case Oe:w=14;break e;case je:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=vn(w,a,s,d),s.elementType=n,s.type=c,s.lanes=f,s}function ui(n,s,a,c){return n=vn(7,n,c,s),n.lanes=a,n}function _u(n,s,a,c){return n=vn(22,n,c,s),n.elementType=Ce,n.lanes=a,n.stateNode={isHidden:!1},n}function Qh(n,s,a){return n=vn(6,n,null,s),n.lanes=a,n}function Yh(n,s,a){return s=vn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function qE(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yo(0),this.expirationTimes=Yo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yo(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Xh(n,s,a,c,d,f,w,k,x){return n=new qE(n,s,a,k,x),s===1?(s=1,f===!0&&(s|=8)):s=0,f=vn(3,null,null,s),n.current=f,f.stateNode=n,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ch(f),n}function GE(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function Zm(n){if(!n)return us;n=n._reactInternals;e:{if(Tn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Kt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Kt(a))return Cp(n,a,s)}return s}function eg(n,s,a,c,d,f,w,k,x){return n=Xh(a,c,!0,n,d,f,w,k,x),n.context=Zm(null),a=n.current,c=Wt(),d=gs(a),f=Pr(c,d),f.callback=s??null,ds(a,f,d),n.current.lanes=d,Gs(n,d,c),Xt(n,c),n}function wu(n,s,a,c){var d=s.current,f=Wt(),w=gs(d);return a=Zm(a),s.context===null?s.context=a:s.pendingContext=a,s=Pr(f,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ds(d,s,w),n!==null&&(Pn(n,d,w,f),Xl(n,d,w)),w}function Eu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function tg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Jh(n,s){tg(n,s),(n=n.alternate)&&tg(n,s)}function KE(){return null}var ng=typeof reportError=="function"?reportError:function(n){console.error(n)};function Zh(n){this._internalRoot=n}Tu.prototype.render=Zh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));wu(n,s,null,null)},Tu.prototype.unmount=Zh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;oi(function(){wu(null,n,null,null)}),s[Sr]=null}};function Tu(n){this._internalRoot=n}Tu.prototype.unstable_scheduleHydration=function(n){if(n){var s=ea();n={blockedOn:null,target:n,priority:s};for(var a=0;a<rn.length&&s!==0&&s<rn[a].priority;a++);rn.splice(a,0,n),a===0&&ji(n)}};function ed(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Iu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function rg(){}function QE(n,s,a,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var B=Eu(w);f.call(B)}}var w=eg(s,c,n,0,null,!1,!1,"",rg);return n._reactRootContainer=w,n[Sr]=w.current,da(n.nodeType===8?n.parentNode:n),oi(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var k=c;c=function(){var B=Eu(x);k.call(B)}}var x=Xh(n,0,!1,null,null,!1,!1,"",rg);return n._reactRootContainer=x,n[Sr]=x.current,da(n.nodeType===8?n.parentNode:n),oi(function(){wu(s,x,a,c)}),x}function Su(n,s,a,c,d){var f=a._reactRootContainer;if(f){var w=f;if(typeof d=="function"){var k=d;d=function(){var x=Eu(w);k.call(x)}}wu(s,w,n,d)}else w=QE(a,s,n,d,c);return Eu(w)}Jo=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=$e(s.pendingLanes);a!==0&&(Xo(s,a|1),Xt(s,Xe()),(ze&6)===0&&(ho=Xe()+500,cs()))}break;case 13:oi(function(){var c=Rr(n,1);if(c!==null){var d=Wt();Pn(c,n,1,d)}}),Jh(n,1)}},Li=function(n){if(n.tag===13){var s=Rr(n,134217728);if(s!==null){var a=Wt();Pn(s,n,134217728,a)}Jh(n,134217728)}},Zo=function(n){if(n.tag===13){var s=gs(n),a=Rr(n,s);if(a!==null){var c=Wt();Pn(a,n,s,c)}Jh(n,s)}},ea=function(){return Fe},ta=function(n,s){var a=Fe;try{return Fe=n,s()}finally{Fe=a}},pr=function(n,s,a){switch(s){case"input":if(fr(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=zl(c);if(!d)throw Error(t(90));Br(c),fr(c,d)}}}break;case"textarea":bs(n,a);break;case"select":s=a.value,s!=null&&en(n,!!a.multiple,s,!1)}},ml=Wh,gl=oi;var YE={usingClientEntryPoint:!1,Events:[ma,Ji,zl,Yr,Xr,Wh]},Pa={findFiberByHostInstance:Js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XE={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Il(n),n===null?null:n.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||KE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Au.isDisabled&&Au.supportsFiber)try{$s=Au.inject(XE),tn=Au}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YE,Jt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ed(s))throw Error(t(200));return GE(n,s,null,a)},Jt.createRoot=function(n,s){if(!ed(n))throw Error(t(299));var a=!1,c="",d=ng;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Xh(n,1,!1,null,null,a,!1,c,d),n[Sr]=s.current,da(n.nodeType===8?n.parentNode:n),new Zh(s)},Jt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Il(s),n=n===null?null:n.stateNode,n},Jt.flushSync=function(n){return oi(n)},Jt.hydrate=function(n,s,a){if(!Iu(s))throw Error(t(200));return Su(null,n,s,!0,a)},Jt.hydrateRoot=function(n,s,a){if(!ed(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,f="",w=ng;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=eg(s,null,n,1,a??null,d,!1,f,w),n[Sr]=s.current,da(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Tu(s)},Jt.render=function(n,s,a){if(!Iu(s))throw Error(t(200));return Su(null,n,s,!1,a)},Jt.unmountComponentAtNode=function(n){if(!Iu(n))throw Error(t(40));return n._reactRootContainer?(oi(function(){Su(null,null,n,!1,function(){n._reactRootContainer=null,n[Sr]=null})}),!0):!1},Jt.unstable_batchedUpdates=Wh,Jt.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Iu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Su(n,s,a,!1,c)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var hg;function o0(){if(hg)return rd.exports;hg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rd.exports=i0(),rd.exports}var dg;function a0(){if(dg)return ku;dg=1;var r=o0();return ku.createRoot=r.createRoot,ku.hydrateRoot=r.hydrateRoot,ku}var l0=a0();const u0=nv(l0),c0={appTitle:"Film Keres",movies:"Filmek",tvShows:"Sorozatok",theaters:"Mozi",searchMoviePlaceholder:"Film keresse...",searchTvPlaceholder:"Sorozat keresse...",watchlist:"Watchlist",filters:"Szrk",clearFilters:"Trls",sortBy:"Rendezs",sortMostPopular:"Legnpszerbb",sortBestRated:"Legjobb rtkels",sortNewest:"Legjabb",sortTitleAZ:"Cm (A-Z)",minimumRating:"Minimum rtkels",ratingAny:"Mindegy",releaseYear:"Megjelens ve",yearFrom:"vtl",yearTo:"vig",categories:"Kategrik",ageRating:"Korosztly",all:"Mind",streamingProviders:"Streaming szolgltatk",certKN:"Korhatr nlkl",cert6:"6 ven fellieknek",cert12:"12 ven fellieknek",cert16:"16 ven fellieknek",cert18:"18 ven fellieknek",certG:"Minden korosztlynak",certPG:"Szli felgyelettel",certPG13:"13 v felett",certR:"17 v alatt szlvel",certNC17:"18 v felett",tvShow:"Sorozat",movie:"Film",noMoviesFound:"Nem talltunk filmeket a megadott szrkkel.",noTvShowsFound:"Nem talltunk sorozatokat a megadott szrkkel.",tryDifferentFilters:"Prbld meg mdostani a keressi feltteleket.",loadingMovies:"Filmek betltse...",loadingTvShows:"Sorozatok betltse...",loadMoreMovies:"Tbb film betltse",loadMoreTvShows:"Tbb sorozat betltse",trailer:"Elzetes",inWatchlist:"Watchlistben",addToWatchlist:"Watchlisthez",minutes:"perc",seasons:"vad",episodes:"epizd",noDescription:"Nincs elrhet lers.",availableOnStreaming:"Elrhet streaming szolgltatknl:",withSubscription:"Elfizetssel:",rentable:"Klcsnzhet:",purchasable:"Megvsrolhat:",noStreamingProviders:"Jelenleg nincs elrhet streaming szolgltat.",viewOnJustWatch:"Megtekints a JustWatch-on",list:"Lista",add:"Hozzads",searchAnyMovieOrTv:"Keress brmilyen filmet vagy sorozatot...",search:"Keress",searching:"Keress...",noSearchResults:"Nincs tallat a keressre.",searchAnyInterest:"Keress r brmilyen filmre vagy sorozatra, ami rdekel!",addEvenIfNotAvailable:"Akkor is hozzadhatod, ha mg nem rhet el streamingnl.",checkingAvailability:"Elrhetsg ellenrzse...",watchlistEmpty:"A watchlist res.",clickAddTab:'Kattints a "+ Hozzads" flre filmek keresshez!',checking:"Ellenrzs...",available:"Elrhet",notAvailable:"Nem elrhet",addedOn:"Hozzadva",checkedToday:"Ma ellenrizve",checkedYesterday:"Tegnap ellenrizve",checkedDaysAgo:"{days} napja ellenrizve",checkedOnDate:"{date}-kor ellenrizve",refreshAvailability:"Elrhetsg frisstse",markAsWatched:"Megjells ltottknt",markAsUnwatched:"Megjells nem ltottknt",removeFromList:"Eltvolts a listbl",watchOn:"Megnzs",language:"Nyelv",hungarian:"Magyar",english:"English",signIn:"Bejelentkezs",signOut:"Kijelentkezs",syncingWatchlist:"Watchlist szinkronizls...",favorites:"Kedvencek",like:"Kedvelem",love:"Imdom",liked:"Kedvelt",loved:"Imdott",noFavorites:"Mg nincsenek kedvenceid.",filterAll:"sszes",trending:"Felkapott",nowPlaying:"Most a mozikban",upcoming:"Hamarosan",onTheAir:"Most adsban",showFilters:"Szrk megjelentse",hideFilters:"Szrk elrejtse",browseMode:"Lista tpusa",browseStreaming:"Streaming",browseTrending:"Felkapott",browseTheaters:"Mozikban",browseUpcoming:"Hamarosan",city:"Vros",allCities:"sszes vros",date:"Dtum",allDates:"sszes nap",today:"Ma",tomorrow:"Holnap",screenings:"Vettsek",noScreeningsFound:"Nincs vetts a kivlasztott szrkkel.",buyTickets:"Jegyvsrls",selectCityForScreenings:"Vlassz vrost a vettsek megtekintshez"},h0={appTitle:"Movie Search",movies:"Movies",tvShows:"TV Shows",theaters:"In Theaters",searchMoviePlaceholder:"Search movies...",searchTvPlaceholder:"Search TV shows...",watchlist:"Watchlist",filters:"Filters",clearFilters:"Clear",sortBy:"Sort by",sortMostPopular:"Most Popular",sortBestRated:"Highest Rated",sortNewest:"Newest",sortTitleAZ:"Title (A-Z)",minimumRating:"Minimum Rating",ratingAny:"Any",releaseYear:"Release Year",yearFrom:"From",yearTo:"To",categories:"Categories",ageRating:"Age Rating",all:"All",streamingProviders:"Streaming Providers",certKN:"No age restriction",cert6:"Ages 6 and up",cert12:"Ages 12 and up",cert16:"Ages 16 and up",cert18:"Ages 18 and up",certG:"General Audience",certPG:"Parental Guidance",certPG13:"Ages 13 and up",certR:"Restricted",certNC17:"Adults Only",tvShow:"TV Show",movie:"Movie",noMoviesFound:"No movies found with the current filters.",noTvShowsFound:"No TV shows found with the current filters.",tryDifferentFilters:"Try adjusting your search criteria.",loadingMovies:"Loading movies...",loadingTvShows:"Loading TV shows...",loadMoreMovies:"Load more movies",loadMoreTvShows:"Load more TV shows",trailer:"Trailer",inWatchlist:"In Watchlist",addToWatchlist:"Add to Watchlist",minutes:"min",seasons:"seasons",episodes:"episodes",noDescription:"No description available.",availableOnStreaming:"Available on streaming platforms:",withSubscription:"With subscription:",rentable:"Rent:",purchasable:"Buy:",noStreamingProviders:"Currently not available on streaming platforms.",viewOnJustWatch:"View on JustWatch",list:"List",add:"Add",searchAnyMovieOrTv:"Search for any movie or TV show...",search:"Search",searching:"Searching...",noSearchResults:"No results found.",searchAnyInterest:"Search for any movie or TV show you're interested in!",addEvenIfNotAvailable:"You can add it even if it's not streaming yet.",checkingAvailability:"Checking availability...",watchlistEmpty:"Your watchlist is empty.",clickAddTab:'Click "+ Add" tab to search for movies!',checking:"Checking...",available:"Available",notAvailable:"Not Available",addedOn:"Added",checkedToday:"Checked today",checkedYesterday:"Checked yesterday",checkedDaysAgo:"Checked {days} days ago",checkedOnDate:"Checked on {date}",refreshAvailability:"Refresh availability",markAsWatched:"Mark as watched",markAsUnwatched:"Mark as unwatched",removeFromList:"Remove from list",watchOn:"Watch on",language:"Language",hungarian:"Magyar",english:"English",signIn:"Sign In",signOut:"Sign Out",syncingWatchlist:"Syncing watchlist...",favorites:"Favorites",like:"Like",love:"Love",liked:"Liked",loved:"Loved",noFavorites:"No favorites yet.",filterAll:"All",trending:"Trending",nowPlaying:"Now Playing",upcoming:"Coming Soon",onTheAir:"On The Air",showFilters:"Show Filters",hideFilters:"Hide Filters",browseMode:"Browse",browseStreaming:"Streaming",browseTrending:"Trending",browseTheaters:"In Theaters",browseUpcoming:"Coming Soon",city:"City",allCities:"All cities",date:"Date",allDates:"All dates",today:"Today",tomorrow:"Tomorrow",screenings:"Screenings",noScreeningsFound:"No screenings found with the current filters.",buyTickets:"Buy Tickets",selectCityForScreenings:"Select a city to see screenings"},d0={hu:c0,en:h0},rv=G.createContext(void 0),sv="movie-search-language";function f0(){if(typeof window<"u"){const r=localStorage.getItem(sv);if(r==="hu"||r==="en")return r;if(navigator.language.toLowerCase().startsWith("hu"))return"hu"}return"en"}function p0({children:r}){const[e,t]=G.useState(f0);G.useEffect(()=>{localStorage.setItem(sv,e),document.documentElement.lang=e},[e]);const i=l=>{t(l)},o=l=>d0[e][l]||l;return _.jsx(rv.Provider,{value:{language:e,setLanguage:i,t:o},children:r})}function dr(){const r=G.useContext(rv);if(!r)throw new Error("useI18n must be used within an I18nProvider");return r}const m0=()=>{};var fg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},g0=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,T=l>>2,S=(l&3)<<4|m>>4;let R=(m&15)<<2|v>>6,F=v&63;g||(F=64,h||(R=64)),i.push(t[T],t[S],t[R],t[F])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(iv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):g0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||v==null||S==null)throw new y0;const R=l<<2|m>>4;if(i.push(R),v!==64){const F=m<<4&240|v>>2;if(i.push(F),S!==64){const q=v<<6&192|S;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class y0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v0=function(r){const e=iv(r);return ov.encodeByteArray(e,!0)},qu=function(r){return v0(r).replace(/\./g,"")},av=function(r){try{return ov.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=()=>_0().__FIREBASE_DEFAULTS__,E0=()=>{if(typeof process>"u"||typeof fg>"u")return;const r=fg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},T0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&av(r[1]);return e&&JSON.parse(e)},fc=()=>{try{return m0()||w0()||E0()||T0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},lv=r=>{var e,t;return(t=(e=fc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},I0=r=>{const e=lv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},uv=()=>{var r;return(r=fc())==null?void 0:r.config},cv=r=>{var e;return(e=fc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[qu(JSON.stringify(t)),qu(JSON.stringify(h)),""].join(".")}const Ma={};function k0(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ma))Ma[e]?r.emulator.push(e):r.prod.push(e);return r}function C0(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let pg=!1;function dv(r,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||Ma[r]===e||Ma[r]||pg)return;Ma[r]=e;function t(R){return`__firebase__banner__${R}`}const i="__firebase__banner",l=k0().prod.length>0;function h(){const R=document.getElementById(i);R&&R.remove()}function m(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function g(R,F){R.setAttribute("width","24"),R.setAttribute("id",F),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function v(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{pg=!0,h()},R}function T(R,F){R.setAttribute("id",F),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function S(){const R=C0(i),F=t("text"),q=document.getElementById(F)||document.createElement("span"),D=t("learnmore"),U=document.getElementById(D)||document.createElement("a"),W=t("preprendIcon"),Z=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const Q=R.element;m(Q),T(U,D);const K=v();g(Z,W),Q.append(Z,q,U,K),document.body.appendChild(Q)}l?(q.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function P0(){var e;const r=(e=fc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function x0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function D0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V0(){const r=$t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function O0(){return!P0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function M0(){try{return typeof indexedDB=="object"}catch{return!1}}function L0(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="FirebaseError";class Ur extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=b0,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tl.prototype.create)}}class tl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?j0(l,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Ur(o,m,i)}}function j0(r,e){return r.replace(F0,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const F0=/\{\$([^}]+)}/g;function U0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function vi(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(mg(l)&&mg(h)){if(!vi(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function mg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function z0(r,e){const t=new B0(r,e);return t.subscribe.bind(t)}class B0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");$0(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=od),o.error===void 0&&(o.error=od),o.complete===void 0&&(o.complete=od);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $0(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(r){return r&&r._delegate?r._delegate:r}class _i{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new S0;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q0(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:W0(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function W0(r){return r===ci?void 0:r}function q0(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new H0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const K0={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Q0=Me.INFO,Y0={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},X0=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=Y0[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zd{constructor(e){this.name=e,this._logLevel=Q0,this._logHandler=X0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?K0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const J0=(r,e)=>e.some(t=>r instanceof t);let gg,yg;function Z0(){return gg||(gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eT(){return yg||(yg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fv=new WeakMap,Ed=new WeakMap,pv=new WeakMap,ad=new WeakMap,ef=new WeakMap;function tT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(As(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&fv.set(t,r)}).catch(()=>{}),ef.set(e,r),e}function nT(r){if(Ed.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Ed.set(r,e)}let Td={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ed.get(r);if(e==="objectStoreNames")return r.objectStoreNames||pv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return As(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function rT(r){Td=r(Td)}function sT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(ld(this),e,...t);return pv.set(i,e.sort?e.sort():[e]),As(i)}:eT().includes(r)?function(...e){return r.apply(ld(this),e),As(fv.get(this))}:function(...e){return As(r.apply(ld(this),e))}}function iT(r){return typeof r=="function"?sT(r):(r instanceof IDBTransaction&&nT(r),J0(r,Z0())?new Proxy(r,Td):r)}function As(r){if(r instanceof IDBRequest)return tT(r);if(ad.has(r))return ad.get(r);const e=iT(r);return e!==r&&(ad.set(r,e),ef.set(e,r)),e}const ld=r=>ef.get(r);function oT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=As(h);return i&&h.addEventListener("upgradeneeded",g=>{i(As(h.result),g.oldVersion,g.newVersion,As(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const aT=["get","getKey","getAll","getAllKeys","count"],lT=["put","add","delete","clear"],ud=new Map;function vg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ud.get(e))return ud.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=lT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||aT.includes(t)))return;const l=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&g.done]))[0]};return ud.set(e,l),l}rT(r=>({...r,get:(e,t,i)=>vg(e,t)||r.get(e,t,i),has:(e,t)=>!!vg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function cT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Id="@firebase/app",_g="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Zd("@firebase/app"),hT="@firebase/app-compat",dT="@firebase/analytics-compat",fT="@firebase/analytics",pT="@firebase/app-check-compat",mT="@firebase/app-check",gT="@firebase/auth",yT="@firebase/auth-compat",vT="@firebase/database",_T="@firebase/data-connect",wT="@firebase/database-compat",ET="@firebase/functions",TT="@firebase/functions-compat",IT="@firebase/installations",ST="@firebase/installations-compat",AT="@firebase/messaging",kT="@firebase/messaging-compat",CT="@firebase/performance",RT="@firebase/performance-compat",PT="@firebase/remote-config",NT="@firebase/remote-config-compat",xT="@firebase/storage",DT="@firebase/storage-compat",VT="@firebase/firestore",OT="@firebase/ai",MT="@firebase/firestore-compat",LT="firebase",bT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="[DEFAULT]",jT={[Id]:"fire-core",[hT]:"fire-core-compat",[fT]:"fire-analytics",[dT]:"fire-analytics-compat",[mT]:"fire-app-check",[pT]:"fire-app-check-compat",[gT]:"fire-auth",[yT]:"fire-auth-compat",[vT]:"fire-rtdb",[_T]:"fire-data-connect",[wT]:"fire-rtdb-compat",[ET]:"fire-fn",[TT]:"fire-fn-compat",[IT]:"fire-iid",[ST]:"fire-iid-compat",[AT]:"fire-fcm",[kT]:"fire-fcm-compat",[CT]:"fire-perf",[RT]:"fire-perf-compat",[PT]:"fire-rc",[NT]:"fire-rc-compat",[xT]:"fire-gcs",[DT]:"fire-gcs-compat",[VT]:"fire-fst",[MT]:"fire-fst-compat",[OT]:"fire-vertex","fire-js":"fire-js",[LT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=new Map,FT=new Map,Ad=new Map;function wg(r,e){try{r.container.addComponent(e)}catch(t){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function So(r){const e=r.name;if(Ad.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;Ad.set(e,r);for(const t of Gu.values())wg(t,r);for(const t of FT.values())wg(t,r);return!0}function tf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Nn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ks=new tl("app","Firebase",UT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=bT;function mv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Sd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw ks.create("bad-app-name",{appName:String(o)});if(t||(t=uv()),!t)throw ks.create("no-options");const l=Gu.get(o);if(l){if(vi(t,l.options)&&vi(i,l.config))return l;throw ks.create("duplicate-app",{appName:o})}const h=new G0(o);for(const g of Ad.values())h.addComponent(g);const m=new zT(t,i,h);return Gu.set(o,m),m}function gv(r=Sd){const e=Gu.get(r);if(!e&&r===Sd&&uv())return mv();if(!e)throw ks.create("no-app",{appName:r});return e}function Cs(r,e,t){let i=jT[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(h.join(" "));return}So(new _i(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="firebase-heartbeat-database",$T=1,$a="firebase-heartbeat-store";let cd=null;function yv(){return cd||(cd=oT(BT,$T,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore($a)}catch(t){console.warn(t)}}}}).catch(r=>{throw ks.create("idb-open",{originalErrorMessage:r.message})})),cd}async function HT(r){try{const t=(await yv()).transaction($a),i=await t.objectStore($a).get(vv(r));return await t.done,i}catch(e){if(e instanceof Ur)Lr.warn(e.message);else{const t=ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(t.message)}}}async function Eg(r,e){try{const i=(await yv()).transaction($a,"readwrite");await i.objectStore($a).put(e,vv(r)),await i.done}catch(t){if(t instanceof Ur)Lr.warn(t.message);else{const i=ks.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Lr.warn(i.message)}}}function vv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=1024,qT=30;class GT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new QT(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Tg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>qT){const h=YT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Lr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Tg(),{heartbeatsToSend:i,unsentEntries:o}=KT(this._heartbeatsCache.heartbeats),l=qu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Lr.warn(t),""}}}function Tg(){return new Date().toISOString().substring(0,10)}function KT(r,e=WT){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Ig(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ig(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class QT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return M0()?L0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Eg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Eg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ig(r){return qu(JSON.stringify({version:2,heartbeats:r})).length}function YT(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(r){So(new _i("platform-logger",e=>new uT(e),"PRIVATE")),So(new _i("heartbeat",e=>new GT(e),"PRIVATE")),Cs(Id,_g,r),Cs(Id,_g,"esm2020"),Cs("fire-js","")}XT("");function _v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JT=_v,wv=new tl("auth","Firebase",_v());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Zd("@firebase/auth");function ZT(r,...e){Ku.logLevel<=Me.WARN&&Ku.warn(`Auth (${Vo}): ${r}`,...e)}function Lu(r,...e){Ku.logLevel<=Me.ERROR&&Ku.error(`Auth (${Vo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(r,...e){throw rf(r,...e)}function Vn(r,...e){return rf(r,...e)}function nf(r,e,t){const i={...JT(),[e]:t};return new tl("auth","Firebase",i).create(e,{appName:r.name})}function fi(r){return nf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e1(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ur(r,"argument-error"),nf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return wv.create(r,...e)}function ke(r,e,...t){if(!r)throw rf(e,...t)}function Vr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Lu(e),new Error(e)}function br(r,e){r||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function t1(){return Sg()==="http:"||Sg()==="https:"}function Sg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t1()||x0()||"connection"in navigator)?navigator.onLine:!0}function r1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t){this.shortDelay=e,this.longDelay=t,br(t>e,"Short delay should be less than long delay!"),this.isMobile=R0()||D0()}get(){return n1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(r,e){br(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o1=new rl(3e4,6e4);function of(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Oo(r,e,t,i,o={}){return Tv(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const m=nl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:g,...l};return N0()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Do(r.emulatorConfig.host)&&(v.credentials="include"),Ev.fetch()(await Iv(r,r.config.apiHost,t,m),v)})}async function Tv(r,e,t){r._canInitEmulator=!1;const i={...s1,...e};try{const o=new l1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Cu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[g,v]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Cu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Cu(r,"user-disabled",h);const T=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw nf(r,T,v);ur(r,T)}}catch(o){if(o instanceof Ur)throw o;ur(r,"network-request-failed",{message:String(o)})}}async function a1(r,e,t,i,o={}){const l=await Oo(r,e,t,i,o);return"mfaPendingCredential"in l&&ur(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Iv(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?sf(r.config,o):`${r.config.apiScheme}://${o}`;return i1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class l1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Vn(this.auth,"network-request-failed")),o1.get())})}}function Cu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Vn(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(r,e){return Oo(r,"POST","/v1/accounts:delete",e)}async function Qu(r,e){return Oo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c1(r,e=!1){const t=qt(r),i=await t.getIdToken(e),o=af(i);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:La(hd(o.auth_time)),issuedAtTime:La(hd(o.iat)),expirationTime:La(hd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function hd(r){return Number(r)*1e3}function af(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{const o=av(t);return o?JSON.parse(o):(Lu("Failed to decode base64 JWT payload"),null)}catch(o){return Lu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Ag(r){const e=af(r);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ur&&h1(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function h1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=La(this.lastLoginAt),this.creationTime=La(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yu(r){var S;const e=r.auth,t=await r.getIdToken(),i=await Ha(r,Qu(e,{idToken:t}));ke(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(S=o.providerUserInfo)!=null&&S.length?Sv(o.providerUserInfo):[],h=p1(r.providerData,l),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),v=m?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Cd(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,T)}async function f1(r){const e=qt(r);await Yu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function p1(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Sv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(r,e){const t=await Tv(r,{},async()=>{const i=nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Iv(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return r.emulatorConfig&&Do(r.emulatorConfig.host)&&(g.credentials="include"),Ev.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function g1(r,e){return Oo(r,"POST","/v2/accounts:revokeToken",of(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ag(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Ag(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await m1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new vo;return i&&(ke(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(ke(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vo,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(r,e){ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class xn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new d1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Cd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ha(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return c1(this,e)}reload(){return f1(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Yu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(fi(this.auth));const e=await this.getIdToken();return await Ha(this,u1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,v=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:S,emailVerified:R,isAnonymous:F,providerData:q,stsTokenManager:D}=t;ke(S&&D,e,"internal-error");const U=vo.fromJSON(this.name,D);ke(typeof S=="string",e,"internal-error"),ws(i,e.name),ws(o,e.name),ke(typeof R=="boolean",e,"internal-error"),ke(typeof F=="boolean",e,"internal-error"),ws(l,e.name),ws(h,e.name),ws(m,e.name),ws(g,e.name),ws(v,e.name),ws(T,e.name);const W=new xn({uid:S,auth:e,email:o,emailVerified:R,displayName:i,isAnonymous:F,photoURL:h,phoneNumber:l,tenantId:m,stsTokenManager:U,createdAt:v,lastLoginAt:T});return q&&Array.isArray(q)&&(W.providerData=q.map(Z=>({...Z}))),g&&(W._redirectEventId=g),W}static async _fromIdTokenResponse(e,t,i=!1){const o=new vo;o.updateFromServerResponse(t);const l=new xn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Yu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Sv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new vo;m.updateFromIdToken(i);const g=new xn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Cd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=new Map;function Or(r){br(r instanceof Function,"Expected a class definition");let e=kg.get(r);return e?(br(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,kg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Av.type="NONE";const Cg=Av;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(r,e,t){return`firebase:${r}:${e}:${t}`}class _o{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=bu(this.userKey,o.apiKey,l),this.fullPersistenceKey=bu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qu(this.auth,{idToken:e}).catch(()=>{});return t?xn._fromGetAccountInfoResponse(this.auth,t,e):null}return xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new _o(Or(Cg),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Or(Cg);const h=bu(i,e.config.apiKey,e.name);let m=null;for(const v of t)try{const T=await v._get(h);if(T){let S;if(typeof T=="string"){const R=await Qu(e,{idToken:T}).catch(()=>{});if(!R)break;S=await xn._fromGetAccountInfoResponse(e,R,T)}else S=xn._fromJSON(e,T);v!==l&&(m=S),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new _o(l,e,i):(l=g[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new _o(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xv(e))return"Blackberry";if(Dv(e))return"Webos";if(Cv(e))return"Safari";if((e.includes("chrome/")||Rv(e))&&!e.includes("edge/"))return"Chrome";if(Nv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function kv(r=$t()){return/firefox\//i.test(r)}function Cv(r=$t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rv(r=$t()){return/crios\//i.test(r)}function Pv(r=$t()){return/iemobile/i.test(r)}function Nv(r=$t()){return/android/i.test(r)}function xv(r=$t()){return/blackberry/i.test(r)}function Dv(r=$t()){return/webos/i.test(r)}function lf(r=$t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function y1(r=$t()){var e;return lf(r)&&!!((e=window.navigator)!=null&&e.standalone)}function v1(){return V0()&&document.documentMode===10}function Vv(r=$t()){return lf(r)||Nv(r)||Dv(r)||xv(r)||/windows phone/i.test(r)||Pv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(r,e=[]){let t;switch(r){case"Browser":t=Rg($t());break;case"Worker":t=`${Rg($t())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,m)=>{try{const g=e(l);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(r,e={}){return Oo(r,"GET","/v2/passwordPolicy",of(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=6;class T1{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??E1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pg(this),this.idTokenSubscription=new Pg(this),this.beforeStateQueue=new _1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Or(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qu(this,{idToken:e}),i=await xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Nn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=r1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(fi(this));const t=e?qt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await w1(this),t=new T1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await g1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Or(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[Or(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ov(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&ZT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function pc(r){return qt(r)}class Pg{constructor(e){this.auth=e,this.observer=null,this.addObserver=z0(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S1(r){uf=r}function A1(r){return uf.loadJS(r)}function k1(){return uf.gapiScript}function C1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(r,e){const t=tf(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(vi(l,e??{}))return o;ur(o,"already-initialized")}return t.initialize({options:e})}function P1(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Or);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function N1(r,e,t){const i=pc(r);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Mv(e),{host:h,port:m}=x1(e),g=m===null?"":`:${m}`,v={url:`${l}//${h}${g}/`},T=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(vi(v,i.config.emulator)&&vi(T,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=T,i.settings.appVerificationDisabledForTesting=!0,Do(h)?(hv(`${l}//${h}${g}`),dv("Auth",!0)):D1()}function Mv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function x1(r){const e=Mv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Ng(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Ng(h)}}}function Ng(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function D1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(r,e){return a1(r,"POST","/v1/accounts:signInWithIdp",of(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="http://localhost";class wi extends Lv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new wi(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return wo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,wo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}buildRequest(){const e={requestUri:V1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends cf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends sl{constructor(){super("facebook.com")}static credential(e){return wi._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wi._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Dr.credential(t,i)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends sl{constructor(){super("github.com")}static credential(e){return wi._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.GITHUB_SIGN_IN_METHOD="github.com";Ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends sl{constructor(){super("twitter.com")}static credential(e,t){return wi._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Is.credential(t,i)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await xn._fromIdTokenResponse(e,i,o),h=xg(i);return new Ao({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=xg(i);return new Ao({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function xg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends Ur{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Xu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Xu(e,t,i,o)}}function bv(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Xu._fromErrorAndOperation(r,l,e,i):l})}async function O1(r,e,t=!1){const i=await Ha(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ao._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(r,e,t=!1){const{auth:i}=r;if(Nn(i.app))return Promise.reject(fi(i));const o="reauthenticate";try{const l=await Ha(r,bv(i,o,e,r),t);ke(l.idToken,i,"internal-error");const h=af(l.idToken);ke(h,i,"internal-error");const{sub:m}=h;return ke(r.uid===m,i,"user-mismatch"),Ao._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ur(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(r,e,t=!1){if(Nn(r.app))return Promise.reject(fi(r));const i="signIn",o=await bv(r,i,e),l=await Ao._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function b1(r,e,t,i){return qt(r).onIdTokenChanged(e,t,i)}function j1(r,e,t){return qt(r).beforeAuthStateChanged(e,t)}function F1(r,e,t,i){return qt(r).onAuthStateChanged(e,t,i)}function U1(r){return qt(r).signOut()}const Ju="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ju,"1"),this.storage.removeItem(Ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=1e3,B1=10;class Fv extends jv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);v1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,B1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fv.type="LOCAL";const $1=Fv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends jv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Uv.type="SESSION";const zv=Uv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new mc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,l)),g=await H1(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,g)=>{const v=hf("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(S){const R=S;if(R.data.eventId===v)switch(R.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(R.data.response);break;default:clearTimeout(T),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function q1(r){rr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function G1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function K1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function Q1(){return Bv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="firebaseLocalStorageDb",Y1=1,Zu="firebaseLocalStorage",Hv="fbase_key";class il{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gc(r,e){return r.transaction([Zu],e?"readwrite":"readonly").objectStore(Zu)}function X1(){const r=indexedDB.deleteDatabase($v);return new il(r).toPromise()}function Rd(){const r=indexedDB.open($v,Y1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Zu,{keyPath:Hv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Zu)?e(i):(i.close(),await X1(),e(await Rd()))})})}async function Dg(r,e,t){const i=gc(r,!0).put({[Hv]:e,value:t});return new il(i).toPromise()}async function J1(r,e){const t=gc(r,!1).get(e),i=await new il(t).toPromise();return i===void 0?null:i.value}function Vg(r,e){const t=gc(r,!0).delete(e);return new il(t).toPromise()}const Z1=800,eI=3;class Wv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>eI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mc._getInstance(Q1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await G1(),!this.activeServiceWorker)return;this.sender=new W1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||K1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rd();return await Dg(e,Ju,"1"),await Vg(e,Ju),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Dg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>J1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=gc(o,!1).getAll();return new il(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wv.type="LOCAL";const tI=Wv;new rl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(r,e){return e?Or(e):(ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends Lv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nI(r){return L1(r.auth,new df(r),r.bypassAuthState)}function rI(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),M1(t,new df(r),r.bypassAuthState)}async function sI(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),O1(t,new df(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nI;case"linkViaPopup":case"linkViaRedirect":return sI;case"reauthViaPopup":case"reauthViaRedirect":return rI;default:ur(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new rl(2e3,1e4);async function oI(r,e,t){if(Nn(r.app))return Promise.reject(Vn(r,"operation-not-supported-in-this-environment"));const i=pc(r);e1(r,e,cf);const o=qv(i,t);return new hi(i,"signInViaPopup",e,o).executeNotNull()}class hi extends Gv{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,hi.currentPopupAction&&hi.currentPopupAction.cancel(),hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iI.get())};e()}}hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="pendingRedirect",ju=new Map;class lI extends Gv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ju.get(this.auth._key());if(!e){try{const i=await uI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ju.set(this.auth._key(),e)}return this.bypassAuthState||ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uI(r,e){const t=dI(e),i=hI(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function cI(r,e){ju.set(r._key(),e)}function hI(r){return Or(r._redirectPersistence)}function dI(r){return bu(aI,r.config.apiKey,r.name)}async function fI(r,e,t=!1){if(Nn(r.app))return Promise.reject(fi(r));const i=pc(r),o=qv(i,e),h=await new lI(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=600*1e3;class mI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Kv(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Vn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Og(e))}saveEventToCache(e){this.cachedEventUids.add(Og(e)),this.lastProcessedEventTime=Date.now()}}function Og(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Kv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(r,e={}){return Oo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_I=/^https?/;async function wI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await yI(r);for(const t of e)try{if(EI(t))return}catch{}ur(r,"unauthorized-domain")}function EI(r){const e=kd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!_I.test(t))return!1;if(vI.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new rl(3e4,6e4);function Mg(){const r=rr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function II(r){return new Promise((e,t)=>{var o,l,h;function i(){Mg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mg(),t(Vn(r,"network-request-failed"))},timeout:TI.get()})}if((l=(o=rr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=rr().gapi)!=null&&h.load)i();else{const m=C1("iframefcb");return rr()[m]=()=>{gapi.load?i():t(Vn(r,"network-request-failed"))},A1(`${k1()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Fu=null,e})}let Fu=null;function SI(r){return Fu=Fu||II(r),Fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=new rl(5e3,15e3),kI="__/auth/iframe",CI="emulator/auth/iframe",RI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NI(r){const e=r.config;ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?sf(e,CI):`https://${r.config.authDomain}/${kI}`,i={apiKey:e.apiKey,appName:r.name,v:Vo},o=PI.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${nl(i).slice(1)}`}async function xI(r){const e=await SI(r),t=rr().gapi;return ke(t,r,"internal-error"),e.open({where:document.body,url:NI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RI,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Vn(r,"network-request-failed"),m=rr().setTimeout(()=>{l(h)},AI.get());function g(){rr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VI=500,OI=600,MI="_blank",LI="http://localhost";class Lg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bI(r,e,t,i=VI,o=OI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...DI,width:i.toString(),height:o.toString(),top:l,left:h},v=$t().toLowerCase();t&&(m=Rv(v)?MI:t),kv(v)&&(e=e||LI,g.scrollbars="yes");const T=Object.entries(g).reduce((R,[F,q])=>`${R}${F}=${q},`,"");if(y1(v)&&m!=="_self")return jI(e||"",m),new Lg(null);const S=window.open(e||"",m,T);ke(S,r,"popup-blocked");try{S.focus()}catch{}return new Lg(S)}function jI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="__/auth/handler",UI="emulator/auth/handler",zI=encodeURIComponent("fac");async function bg(r,e,t,i,o,l){ke(r.config.authDomain,r,"auth-domain-config-required"),ke(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Vo,eventId:o};if(e instanceof cf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",U0(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))h[T]=S}if(e instanceof sl){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(h.scopes=T.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await r._getAppCheckToken(),v=g?`#${zI}=${encodeURIComponent(g)}`:"";return`${BI(r)}?${nl(m).slice(1)}${v}`}function BI({config:r}){return r.emulator?sf(r,UI):`https://${r.authDomain}/${FI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="webStorageSupport";class $I{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zv,this._completeRedirectFn=fI,this._overrideRedirectResult=cI}async _openPopup(e,t,i,o){var h;br((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await bg(e,t,i,kd(),o);return bI(e,l,hf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await bg(e,t,i,kd(),o);return q1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(br(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await xI(e),i=new mI(e);return t.register("authEvent",o=>(ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dd,{type:dd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[dd];l!==void 0&&t(!!l),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vv()||Cv()||lf()}}const HI=$I;var jg="@firebase/auth",Fg="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GI(r){So(new _i("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;ke(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ov(r)},v=new I1(i,o,l,g);return P1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),So(new _i("auth-internal",e=>{const t=pc(e.getProvider("auth").getImmediate());return(i=>new WI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(jg,Fg,qI(r)),Cs(jg,Fg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=300,QI=cv("authIdTokenMaxAge")||KI;let Ug=null;const YI=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>QI)return;const o=t==null?void 0:t.token;Ug!==o&&(Ug=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function XI(r=gv()){const e=tf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=R1(r,{popupRedirectResolver:HI,persistence:[tI,$1,zv]}),i=cv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=YI(l.toString());j1(t,h,()=>h(t.currentUser)),b1(t,m=>h(m))}}const o=lv("auth");return o&&N1(t,`http://${o}`),t}function JI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}S1({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Vn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",JI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GI("Browser");var ZI="firebase",eS="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(ZI,eS,"app");var zg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rs,Qv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function C(){}C.prototype=A.prototype,P.F=A.prototype,P.prototype=new C,P.prototype.constructor=P,P.D=function(V,N,L){for(var E=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)E[Ie-2]=arguments[Ie];return A.prototype[N].apply(V,E)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,A,C){C||(C=0);const V=Array(16);if(typeof A=="string")for(var N=0;N<16;++N)V[N]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(N=0;N<16;++N)V[N]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=P.g[0],C=P.g[1],N=P.g[2];let L=P.g[3],E;E=A+(L^C&(N^L))+V[0]+3614090360&4294967295,A=C+(E<<7&4294967295|E>>>25),E=L+(N^A&(C^N))+V[1]+3905402710&4294967295,L=A+(E<<12&4294967295|E>>>20),E=N+(C^L&(A^C))+V[2]+606105819&4294967295,N=L+(E<<17&4294967295|E>>>15),E=C+(A^N&(L^A))+V[3]+3250441966&4294967295,C=N+(E<<22&4294967295|E>>>10),E=A+(L^C&(N^L))+V[4]+4118548399&4294967295,A=C+(E<<7&4294967295|E>>>25),E=L+(N^A&(C^N))+V[5]+1200080426&4294967295,L=A+(E<<12&4294967295|E>>>20),E=N+(C^L&(A^C))+V[6]+2821735955&4294967295,N=L+(E<<17&4294967295|E>>>15),E=C+(A^N&(L^A))+V[7]+4249261313&4294967295,C=N+(E<<22&4294967295|E>>>10),E=A+(L^C&(N^L))+V[8]+1770035416&4294967295,A=C+(E<<7&4294967295|E>>>25),E=L+(N^A&(C^N))+V[9]+2336552879&4294967295,L=A+(E<<12&4294967295|E>>>20),E=N+(C^L&(A^C))+V[10]+4294925233&4294967295,N=L+(E<<17&4294967295|E>>>15),E=C+(A^N&(L^A))+V[11]+2304563134&4294967295,C=N+(E<<22&4294967295|E>>>10),E=A+(L^C&(N^L))+V[12]+1804603682&4294967295,A=C+(E<<7&4294967295|E>>>25),E=L+(N^A&(C^N))+V[13]+4254626195&4294967295,L=A+(E<<12&4294967295|E>>>20),E=N+(C^L&(A^C))+V[14]+2792965006&4294967295,N=L+(E<<17&4294967295|E>>>15),E=C+(A^N&(L^A))+V[15]+1236535329&4294967295,C=N+(E<<22&4294967295|E>>>10),E=A+(N^L&(C^N))+V[1]+4129170786&4294967295,A=C+(E<<5&4294967295|E>>>27),E=L+(C^N&(A^C))+V[6]+3225465664&4294967295,L=A+(E<<9&4294967295|E>>>23),E=N+(A^C&(L^A))+V[11]+643717713&4294967295,N=L+(E<<14&4294967295|E>>>18),E=C+(L^A&(N^L))+V[0]+3921069994&4294967295,C=N+(E<<20&4294967295|E>>>12),E=A+(N^L&(C^N))+V[5]+3593408605&4294967295,A=C+(E<<5&4294967295|E>>>27),E=L+(C^N&(A^C))+V[10]+38016083&4294967295,L=A+(E<<9&4294967295|E>>>23),E=N+(A^C&(L^A))+V[15]+3634488961&4294967295,N=L+(E<<14&4294967295|E>>>18),E=C+(L^A&(N^L))+V[4]+3889429448&4294967295,C=N+(E<<20&4294967295|E>>>12),E=A+(N^L&(C^N))+V[9]+568446438&4294967295,A=C+(E<<5&4294967295|E>>>27),E=L+(C^N&(A^C))+V[14]+3275163606&4294967295,L=A+(E<<9&4294967295|E>>>23),E=N+(A^C&(L^A))+V[3]+4107603335&4294967295,N=L+(E<<14&4294967295|E>>>18),E=C+(L^A&(N^L))+V[8]+1163531501&4294967295,C=N+(E<<20&4294967295|E>>>12),E=A+(N^L&(C^N))+V[13]+2850285829&4294967295,A=C+(E<<5&4294967295|E>>>27),E=L+(C^N&(A^C))+V[2]+4243563512&4294967295,L=A+(E<<9&4294967295|E>>>23),E=N+(A^C&(L^A))+V[7]+1735328473&4294967295,N=L+(E<<14&4294967295|E>>>18),E=C+(L^A&(N^L))+V[12]+2368359562&4294967295,C=N+(E<<20&4294967295|E>>>12),E=A+(C^N^L)+V[5]+4294588738&4294967295,A=C+(E<<4&4294967295|E>>>28),E=L+(A^C^N)+V[8]+2272392833&4294967295,L=A+(E<<11&4294967295|E>>>21),E=N+(L^A^C)+V[11]+1839030562&4294967295,N=L+(E<<16&4294967295|E>>>16),E=C+(N^L^A)+V[14]+4259657740&4294967295,C=N+(E<<23&4294967295|E>>>9),E=A+(C^N^L)+V[1]+2763975236&4294967295,A=C+(E<<4&4294967295|E>>>28),E=L+(A^C^N)+V[4]+1272893353&4294967295,L=A+(E<<11&4294967295|E>>>21),E=N+(L^A^C)+V[7]+4139469664&4294967295,N=L+(E<<16&4294967295|E>>>16),E=C+(N^L^A)+V[10]+3200236656&4294967295,C=N+(E<<23&4294967295|E>>>9),E=A+(C^N^L)+V[13]+681279174&4294967295,A=C+(E<<4&4294967295|E>>>28),E=L+(A^C^N)+V[0]+3936430074&4294967295,L=A+(E<<11&4294967295|E>>>21),E=N+(L^A^C)+V[3]+3572445317&4294967295,N=L+(E<<16&4294967295|E>>>16),E=C+(N^L^A)+V[6]+76029189&4294967295,C=N+(E<<23&4294967295|E>>>9),E=A+(C^N^L)+V[9]+3654602809&4294967295,A=C+(E<<4&4294967295|E>>>28),E=L+(A^C^N)+V[12]+3873151461&4294967295,L=A+(E<<11&4294967295|E>>>21),E=N+(L^A^C)+V[15]+530742520&4294967295,N=L+(E<<16&4294967295|E>>>16),E=C+(N^L^A)+V[2]+3299628645&4294967295,C=N+(E<<23&4294967295|E>>>9),E=A+(N^(C|~L))+V[0]+4096336452&4294967295,A=C+(E<<6&4294967295|E>>>26),E=L+(C^(A|~N))+V[7]+1126891415&4294967295,L=A+(E<<10&4294967295|E>>>22),E=N+(A^(L|~C))+V[14]+2878612391&4294967295,N=L+(E<<15&4294967295|E>>>17),E=C+(L^(N|~A))+V[5]+4237533241&4294967295,C=N+(E<<21&4294967295|E>>>11),E=A+(N^(C|~L))+V[12]+1700485571&4294967295,A=C+(E<<6&4294967295|E>>>26),E=L+(C^(A|~N))+V[3]+2399980690&4294967295,L=A+(E<<10&4294967295|E>>>22),E=N+(A^(L|~C))+V[10]+4293915773&4294967295,N=L+(E<<15&4294967295|E>>>17),E=C+(L^(N|~A))+V[1]+2240044497&4294967295,C=N+(E<<21&4294967295|E>>>11),E=A+(N^(C|~L))+V[8]+1873313359&4294967295,A=C+(E<<6&4294967295|E>>>26),E=L+(C^(A|~N))+V[15]+4264355552&4294967295,L=A+(E<<10&4294967295|E>>>22),E=N+(A^(L|~C))+V[6]+2734768916&4294967295,N=L+(E<<15&4294967295|E>>>17),E=C+(L^(N|~A))+V[13]+1309151649&4294967295,C=N+(E<<21&4294967295|E>>>11),E=A+(N^(C|~L))+V[4]+4149444226&4294967295,A=C+(E<<6&4294967295|E>>>26),E=L+(C^(A|~N))+V[11]+3174756917&4294967295,L=A+(E<<10&4294967295|E>>>22),E=N+(A^(L|~C))+V[2]+718787259&4294967295,N=L+(E<<15&4294967295|E>>>17),E=C+(L^(N|~A))+V[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(N+(E<<21&4294967295|E>>>11))&4294967295,P.g[2]=P.g[2]+N&4294967295,P.g[3]=P.g[3]+L&4294967295}i.prototype.v=function(P,A){A===void 0&&(A=P.length);const C=A-this.blockSize,V=this.C;let N=this.h,L=0;for(;L<A;){if(N==0)for(;L<=C;)o(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<A;)if(V[N++]=P.charCodeAt(L++),N==this.blockSize){o(this,V),N=0;break}}else for(;L<A;)if(V[N++]=P[L++],N==this.blockSize){o(this,V),N=0;break}}this.h=N,this.o+=A},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;A=this.o*8;for(var C=P.length-8;C<P.length;++C)P[C]=A&255,A/=256;for(this.v(P),P=Array(16),A=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)P[A++]=this.g[C]>>>V&255;return P};function l(P,A){var C=m;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=A(P)}function h(P,A){this.h=A;const C=[];let V=!0;for(let N=P.length-1;N>=0;N--){const L=P[N]|0;V&&L==A||(C[N]=L,V=!1)}this.g=C}var m={};function g(P){return-128<=P&&P<128?l(P,function(A){return new h([A|0],A<0?-1:0)}):new h([P|0],P<0?-1:0)}function v(P){if(isNaN(P)||!isFinite(P))return S;if(P<0)return U(v(-P));const A=[];let C=1;for(let V=0;P>=C;V++)A[V]=P/C|0,C*=4294967296;return new h(A,0)}function T(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return U(T(P.substring(1),A));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=v(Math.pow(A,8));let V=S;for(let L=0;L<P.length;L+=8){var N=Math.min(8,P.length-L);const E=parseInt(P.substring(L,L+N),A);N<8?(N=v(Math.pow(A,N)),V=V.j(N).add(v(E))):(V=V.j(C),V=V.add(v(E)))}return V}var S=g(0),R=g(1),F=g(16777216);r=h.prototype,r.m=function(){if(D(this))return-U(this).m();let P=0,A=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);P+=(V>=0?V:4294967296+V)*A,A*=4294967296}return P},r.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(q(this))return"0";if(D(this))return"-"+U(this).toString(P);const A=v(Math.pow(P,6));var C=this;let V="";for(;;){const N=K(C,A).g;C=W(C,N.j(A));let L=((C.g.length>0?C.g[0]:C.h)>>>0).toString(P);if(C=N,q(C))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},r.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function q(P){if(P.h!=0)return!1;for(let A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function D(P){return P.h==-1}r.l=function(P){return P=W(this,P),D(P)?-1:q(P)?0:1};function U(P){const A=P.g.length,C=[];for(let V=0;V<A;V++)C[V]=~P.g[V];return new h(C,~P.h).add(R)}r.abs=function(){return D(this)?U(this):this},r.add=function(P){const A=Math.max(this.g.length,P.g.length),C=[];let V=0;for(let N=0;N<=A;N++){let L=V+(this.i(N)&65535)+(P.i(N)&65535),E=(L>>>16)+(this.i(N)>>>16)+(P.i(N)>>>16);V=E>>>16,L&=65535,E&=65535,C[N]=E<<16|L}return new h(C,C[C.length-1]&-2147483648?-1:0)};function W(P,A){return P.add(U(A))}r.j=function(P){if(q(this)||q(P))return S;if(D(this))return D(P)?U(this).j(U(P)):U(U(this).j(P));if(D(P))return U(this.j(U(P)));if(this.l(F)<0&&P.l(F)<0)return v(this.m()*P.m());const A=this.g.length+P.g.length,C=[];for(var V=0;V<2*A;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let N=0;N<P.g.length;N++){const L=this.i(V)>>>16,E=this.i(V)&65535,Ie=P.i(N)>>>16,Oe=P.i(N)&65535;C[2*V+2*N]+=E*Oe,Z(C,2*V+2*N),C[2*V+2*N+1]+=L*Oe,Z(C,2*V+2*N+1),C[2*V+2*N+1]+=E*Ie,Z(C,2*V+2*N+1),C[2*V+2*N+2]+=L*Ie,Z(C,2*V+2*N+2)}for(P=0;P<A;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=A;P<2*A;P++)C[P]=0;return new h(C,0)};function Z(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function Q(P,A){this.g=P,this.h=A}function K(P,A){if(q(A))throw Error("division by zero");if(q(P))return new Q(S,S);if(D(P))return A=K(U(P),A),new Q(U(A.g),U(A.h));if(D(A))return A=K(P,U(A)),new Q(U(A.g),A.h);if(P.g.length>30){if(D(P)||D(A))throw Error("slowDivide_ only works with positive integers.");for(var C=R,V=A;V.l(P)<=0;)C=ie(C),V=ie(V);var N=le(C,1),L=le(V,1);for(V=le(V,2),C=le(C,2);!q(V);){var E=L.add(V);E.l(P)<=0&&(N=N.add(C),L=E),V=le(V,1),C=le(C,1)}return A=W(P,N.j(A)),new Q(N,A)}for(N=S;P.l(A)>=0;){for(C=Math.max(1,Math.floor(P.m()/A.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=v(C),E=L.j(A);D(E)||E.l(P)>0;)C-=V,L=v(C),E=L.j(A);q(L)&&(L=R),N=N.add(L),P=W(P,E)}return new Q(N,P)}r.B=function(P){return K(this,P).h},r.and=function(P){const A=Math.max(this.g.length,P.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)&P.i(V);return new h(C,this.h&P.h)},r.or=function(P){const A=Math.max(this.g.length,P.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)|P.i(V);return new h(C,this.h|P.h)},r.xor=function(P){const A=Math.max(this.g.length,P.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)^P.i(V);return new h(C,this.h^P.h)};function ie(P){const A=P.g.length+1,C=[];for(let V=0;V<A;V++)C[V]=P.i(V)<<1|P.i(V-1)>>>31;return new h(C,P.h)}function le(P,A){const C=A>>5;A%=32;const V=P.g.length-C,N=[];for(let L=0;L<V;L++)N[L]=A>0?P.i(L+C)>>>A|P.i(L+C+1)<<32-A:P.i(L+C);return new h(N,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Qv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=T,Rs=h}).apply(typeof zg<"u"?zg:typeof self<"u"?self:typeof window<"u"?window:{});var Ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yv,xa,Xv,Uu,Pd,Jv,Zv,e_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ru=="object"&&Ru];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var y=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in y))break e;y=y[j]}u=u[u.length-1],I=y[u],p=p(I),p!=I&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var y=[],I;for(I in p)Object.prototype.hasOwnProperty.call(p,I)&&y.push([I,p[I]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function g(u,p,y){return u.call.apply(u.bind,arguments)}function v(u,p,y){return v=g,v.apply(null,arguments)}function T(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function S(u,p){function y(){}y.prototype=p.prototype,u.Z=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(I,j,$){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return p.prototype[j].apply(I,ae)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function F(u){const p=u.length;if(p>0){const y=Array(p);for(let I=0;I<p;I++)y[I]=u[I];return y}return[]}function q(u,p){for(let I=1;I<arguments.length;I++){const j=arguments[I];var y=typeof j;if(y=y!="object"?y:j?Array.isArray(j)?"array":y:"null",y=="array"||y=="object"&&typeof j.length=="number"){y=u.length||0;const $=j.length||0;u.length=y+$;for(let ae=0;ae<$;ae++)u[y+ae]=j[ae]}else u.push(j)}}class D{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function U(u){h.setTimeout(()=>{throw u},0)}function W(){var u=P;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Z{constructor(){this.h=this.g=null}add(p,y){const I=Q.get();I.set(p,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Q=new D(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,le=!1,P=new Z,A=()=>{const u=Promise.resolve(void 0);ie=()=>{u.then(C)}};function C(){for(var u;u=W();){try{u.h.call(u.g)}catch(y){U(y)}var p=Q;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}le=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};h.addEventListener("test",y,p),h.removeEventListener("test",y,p)}catch{}return u})();function E(u){return/^[\s\xa0]*$/.test(u)}function Ie(u,p){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}S(Ie,N),Ie.prototype.init=function(u,p){const y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),je=0;function Ce(u,p,y,I,j){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!I,this.ha=j,this.key=++je,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,p,y){for(const I in u)p.call(y,u[I],I,u)}function ce(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function M(u){const p={};for(const y in u)p[y]=u[y];return p}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(u,p){let y,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(y in I)u[y]=I[y];for(let $=0;$<Y.length;$++)y=Y[$],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,p,y,I,j){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const ae=ve(u,p,I,j);return ae>-1?(p=u[ae],y||(p.fa=!1)):(p=new Ce(p,this.src,$,!!I,j),p.fa=y,u.push(p)),p};function H(u,p){const y=p.type;if(y in u.g){var I=u.g[y],j=Array.prototype.indexOf.call(I,p,void 0),$;($=j>=0)&&Array.prototype.splice.call(I,j,1),$&&(oe(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function ve(u,p,y,I){for(let j=0;j<u.length;++j){const $=u[j];if(!$.da&&$.listener==p&&$.capture==!!y&&$.ha==I)return j}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),De={};function We(u,p,y,I,j){if(Array.isArray(p)){for(let $=0;$<p.length;$++)We(u,p[$],y,I,j);return null}return y=Ls(y),u&&u[Oe]?u.J(p,y,m(I)?!!I.capture:!1,j):Ct(u,p,y,!1,I,j)}function Ct(u,p,y,I,j,$){if(!p)throw Error("Invalid event type");const ae=m(j)?!!j.capture:!!j;let Ne=Hr(u);if(Ne||(u[Pe]=Ne=new ue(u)),y=Ne.add(p,y,I,ae,$),y.proxy)return y;if(I=zr(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)L||(j=ae),j===void 0&&(j=!1),u.addEventListener(p.toString(),I,j);else if(u.attachEvent)u.attachEvent($r(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function zr(){function u(y){return p.call(u.src,u.listener,y)}const p=Ci;return u}function Br(u,p,y,I,j){if(Array.isArray(p))for(var $=0;$<p.length;$++)Br(u,p[$],y,I,j);else I=m(I)?!!I.capture:!!I,y=Ls(y),u&&u[Oe]?(u=u.i,$=String(p).toString(),$ in u.g&&(p=u.g[$],y=ve(p,y,I,j),y>-1&&(oe(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete u.g[$],u.h--)))):u&&(u=Hr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ve(p,y,I,j)),(y=u>-1?p[u]:null)&&Mn(y))}function Mn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Oe])H(p.i,u);else{var y=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(y,I,u.capture):p.detachEvent?p.detachEvent($r(y),I):p.addListener&&p.removeListener&&p.removeListener(I),(y=Hr(p))?(H(y,u),y.h==0&&(y.src=null,p[Pe]=null)):oe(u)}}}function $r(u){return u in De?De[u]:De[u]="on"+u}function Ci(u,p){if(u.da)u=!0;else{p=new Ie(p,this);const y=u.listener,I=u.ha||u.src;u.fa&&Mn(u),u=y.call(I,p)}return u}function Hr(u){return u=u[Pe],u instanceof ue?u:null}var fr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ls(u){return typeof u=="function"?u:(u[fr]||(u[fr]=function(p){return u.handleEvent(p)}),u[fr])}function ot(){V.call(this),this.i=new ue(this),this.M=this,this.G=null}S(ot,V),ot.prototype[Oe]=!0,ot.prototype.removeEventListener=function(u,p,y,I){Br(this,u,p,y,I)};function nt(u,p){var y,I=u.G;if(I)for(y=[];I;I=I.G)y.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new N(p,u);else if(p instanceof N)p.target=p.target||u;else{var j=p;p=new N(I,u),ne(p,j)}j=!0;let $,ae;if(y)for(ae=y.length-1;ae>=0;ae--)$=p.g=y[ae],j=en($,I,!0,p)&&j;if($=p.g=u,j=en($,I,!0,p)&&j,j=en($,I,!1,p)&&j,y)for(ae=0;ae<y.length;ae++)$=p.g=y[ae],j=en($,I,!1,p)&&j}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const y=u.g[p];for(let I=0;I<y.length;I++)oe(y[I]);delete u.g[p],u.h--}}this.G=null},ot.prototype.J=function(u,p,y,I){return this.i.add(String(u),p,!1,y,I)},ot.prototype.K=function(u,p,y,I){return this.i.add(String(u),p,!0,y,I)};function en(u,p,y,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let j=!0;for(let $=0;$<p.length;++$){const ae=p[$];if(ae&&!ae.da&&ae.capture==y){const Ne=ae.listener,ht=ae.ha||ae.src;ae.fa&&H(u.i,ae),j=Ne.call(ht,I)!==!1&&j}}return j&&!I.defaultPrevented}function ct(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(u,p||0)}function Wr(u){u.g=ct(()=>{u.g=null,u.i&&(u.i=!1,Wr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class bs extends V{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ln(u){V.call(this),this.h=u,this.g={}}S(Ln,V);var Uo=[];function Ri(u){me(u.g,function(p,y){this.g.hasOwnProperty(y)&&Mn(p)},u),u.g={}}Ln.prototype.N=function(){Ln.Z.N.call(this),Ri(this)},Ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qr=h.JSON.stringify,fl=h.JSON.parse,js=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Gr(){}function pl(){}var Kr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pi(){N.call(this,"d")}S(Pi,N);function zo(){N.call(this,"c")}S(zo,N);var En={},Ni=null;function Qr(){return Ni=Ni||new ot}En.Ia="serverreachability";function xi(u){N.call(this,En.Ia,u)}S(xi,N);function pr(u){const p=Qr();nt(p,new xi(p))}En.STAT_EVENT="statevent";function mr(u,p){N.call(this,En.STAT_EVENT,u),this.stat=p}S(mr,N);function at(u){const p=Qr();nt(p,new mr(p,u))}En.Ja="timingevent";function Bo(u,p){N.call(this,En.Ja,u),this.size=p}S(Bo,N);function Yr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Xr(){this.g=!0}Xr.prototype.ua=function(){this.g=!1};function ml(u,p,y,I,j,$){u.info(function(){if(u.g)if($){var ae="",Ne=$.split("&");for(let qe=0;qe<Ne.length;qe++){var ht=Ne[qe].split("=");if(ht.length>1){const pt=ht[0];ht=ht[1];const an=pt.split("_");ae=an.length>=2&&an[1]=="type"?ae+(pt+"="+ht+"&"):ae+(pt+"=redacted&")}}}else ae=null;else ae=$;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+p+`
`+y+`
`+ae})}function gl(u,p,y,I,j,$,ae){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+p+`
`+y+`
`+$+" "+ae})}function bn(u,p,y,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Fs(u,y)+(I?" "+I:"")})}function yl(u,p){u.info(function(){return"TIMEOUT: "+p})}Xr.prototype.info=function(){};function Fs(u,p){if(!u.g)return p;if(!p)return null;try{const $=JSON.parse(p);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var y=$[u];if(!(y.length<2)){var I=y[1];if(Array.isArray(I)&&!(I.length<1)){var j=I[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ae=1;ae<I.length;ae++)I[ae]=""}}}}return qr($)}catch{return p}}var Jr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vl;function gr(){}S(gr,Gr),gr.prototype.g=function(){return new XMLHttpRequest},vl=new gr;function jn(u){return encodeURIComponent(String(u))}function Di(u){var p=1;u=u.split(":");const y=[];for(;p>0&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function hn(u,p,y,I){this.j=u,this.i=p,this.l=y,this.S=I||1,this.V=new Ln(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _l}function _l(){this.i=null,this.g="",this.h=!1}var wl={},$o={};function Tn(u,p,y){u.M=1,u.A=vr(dn(p)),u.u=y,u.R=!0,Ho(u,null)}function Ho(u,p){u.F=Date.now(),Us(u),u.B=dn(u.A);var y=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),ea(y.i,"t",I),u.C=0,y=u.j.L,u.h=new _l,u.g=Nl(u.j,y?p:null,!u.u),u.P>0&&(u.O=new bs(v(u.Y,u,u.g),u.P)),p=u.V,y=u.g,I=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(Uo[0]=j.toString()),j=Uo);for(let $=0;$<j.length;$++){const ae=We(y,j[$],I||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),pr(),ml(u.i,u.v,u.B,u.l,u.S,u.u)}hn.prototype.ba=function(u){u=u.target;const p=this.O;p&&Wn(u)==3?p.j():this.Y(u)},hn.prototype.Y=function(u){try{if(u==this.g)e:{const Ne=Wn(this.g),ht=this.g.ya(),qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Rl(this.g)))){this.K||Ne!=4||ht==7||(ht==8||qe<=0?pr(3):pr(2)),Vi(this);var p=this.g.ca();this.X=p;var y=El(this);if(this.o=p==200,gl(this.i,this.v,this.B,this.l,this.S,Ne,p),this.o){if(this.U&&!this.L){t:{if(this.g){var I,j=this.g;if((I=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(I)){var $=I;break t}}$=null}if(u=$)bn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xe(this,u);else{this.o=!1,this.m=3,at(12),yr(this),zs(this);break e}}if(this.R){u=!0;let pt;for(;!this.K&&this.C<y.length;)if(pt=Il(this,y),pt==$o){Ne==4&&(this.m=4,at(14),u=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==wl){this.m=4,at(15),bn(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else bn(this.i,this.l,pt,null),Xe(this,pt);if(Tl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||y.length!=0||this.h.h||(this.m=1,at(16),u=!1),this.o=this.o&&u,!u)bn(this.i,this.l,y,"[Invalid Chunked Response]"),yr(this),zs(this);else if(y.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Ys(ae),ae.P=!0,at(11))}}else bn(this.i,this.l,y,null),Xe(this,y);Ne==4&&yr(this),this.o&&!this.K&&(Ne==4?$i(this.j,this):(this.o=!1,Us(this)))}else na(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,at(12)):(this.m=0,at(13)),yr(this),zs(this)}}}catch{}finally{}};function El(u){if(!Tl(u))return u.g.la();const p=Rl(u.g);if(p==="")return"";let y="";const I=p.length,j=Wn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return yr(u),zs(u),"";u.h.i=new h.TextDecoder}for(let $=0;$<I;$++)u.h.h=!0,y+=u.h.i.decode(p[$],{stream:!(j&&$==I-1)});return p.length=0,u.h.g+=y,u.C=0,u.h.g}function Tl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Il(u,p){var y=u.C,I=p.indexOf(`
`,y);return I==-1?$o:(y=Number(p.substring(y,I)),isNaN(y)?wl:(I+=1,I+y>p.length?$o:(p=p.slice(I,I+y),u.C=I+y,p)))}hn.prototype.cancel=function(){this.K=!0,yr(this)};function Us(u){u.T=Date.now()+u.H,Wo(u,u.H)}function Wo(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Yr(v(u.aa,u),p)}function Vi(u){u.D&&(h.clearTimeout(u.D),u.D=null)}hn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(yl(this.i,this.B),this.M!=2&&(pr(),at(17)),yr(this),this.m=2,zs(this)):Wo(this,this.T-u)};function zs(u){u.j.I==0||u.K||$i(u.j,u)}function yr(u){Vi(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Ri(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Xe(u,p){try{var y=u.j;if(y.I!=0&&(y.g==u||Go(y.h,u))){if(!u.L&&Go(y.h,u)&&y.I==3){try{var I=y.Ba.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)Bi(y),sn(y);else break e;Kn(y),at(18)}}else y.xa=j[1],0<y.xa-y.K&&j[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Yr(v(y.Va,y),6e3));Bs(y.h)<=1&&y.ta&&(y.ta=void 0)}else on(y,11)}else if((u.L||y.g==u)&&Bi(y),!E(p))for(j=y.Ba.g.parse(p),p=0;p<j.length;p++){let qe=j[p];const pt=qe[0];if(!(pt<=y.K))if(y.K=pt,qe=qe[1],y.I==2)if(qe[0]=="c"){y.M=qe[1],y.ba=qe[2];const an=qe[3];an!=null&&(y.ka=an,y.j.info("VER="+y.ka));const Ir=qe[4];Ir!=null&&(y.za=Ir,y.j.info("SVER="+y.za));const Qn=qe[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(I=1.5*Qn,y.O=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const Yn=u.g;if(Yn){const qi=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qi){var $=I.h;$.g||qi.indexOf("spdy")==-1&&qi.indexOf("quic")==-1&&qi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Mi($,$.h),$.h=null))}if(I.G){const ia=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;ia&&(I.wa=ia,$e(I.J,I.G,ia))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),I=y;var ae=u;if(I.na=sa(I,I.L?I.ba:null,I.W),ae.L){$s(I.h,ae);var Ne=ae,ht=I.O;ht&&(Ne.H=ht),Ne.D&&(Vi(Ne),Us(Ne)),I.g=ae}else Mt(I);y.i.length>0&&Tr(y)}else qe[0]!="stop"&&qe[0]!="close"||on(y,7);else y.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?on(y,7):Ui(y):qe[0]!="noop"&&y.l&&y.l.qa(qe),y.A=0)}}pr(4)}catch{}}var Dc=class{constructor(u,p){this.g=u,this.map=p}};function Oi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bs(u){return u.h?1:u.g?u.g.size:0}function Go(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Mi(u,p){u.g?u.g.add(p):u.h=p}function $s(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Oi.prototype.cancel=function(){if(this.i=tn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function tn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.G);return p}return F(u.i)}var Sl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nn(u,p){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const I=u[y].indexOf("=");let j,$=null;I>=0?(j=u[y].substring(0,I),$=u[y].substring(I+1)):j=u[y],p(j,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Fn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Fn?(this.l=u.l,Hs(this,u.j),this.o=u.o,this.g=u.g,Un(this,u.u),this.h=u.h,es(this,ta(u.i)),this.m=u.m):u&&(p=String(u).match(Sl))?(this.l=!1,Hs(this,p[1]||"",!0),this.o=Ws(p[2]||""),this.g=Ws(p[3]||"",!0),Un(this,p[4]),this.h=Ws(p[5]||"",!0),es(this,p[6]||"",!0),this.m=Ws(p[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}Fn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(qs(p,Qo,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(qs(p,Qo,!0),"@"),u.push(jn(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(qs(y,y.charAt(0)=="/"?Gs:Yo,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",qs(y,Xo)),u.join("")},Fn.prototype.resolve=function(u){const p=dn(this);let y=!!u.j;y?Hs(p,u.j):y=!!u.o,y?p.o=u.o:y=!!u.g,y?p.g=u.g:y=u.u!=null;var I=u.h;if(y)Un(p,u.u);else if(y=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var j=p.h.lastIndexOf("/");j!=-1&&(I=p.h.slice(0,j+1)+I)}if(j=I,j==".."||j==".")I="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){I=j.lastIndexOf("/",0)==0,j=j.split("/");const $=[];for(let ae=0;ae<j.length;){const Ne=j[ae++];Ne=="."?I&&ae==j.length&&$.push(""):Ne==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),I&&ae==j.length&&$.push("")):($.push(Ne),I=!0)}I=$.join("/")}else I=j}return y?p.h=I:y=u.i.toString()!=="",y?es(p,ta(u.i)):y=!!u.m,y&&(p.m=u.m),p};function dn(u){return new Fn(u)}function Hs(u,p,y){u.j=y?Ws(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Un(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function es(u,p,y){p instanceof Fe?(u.i=p,bi(u.i,u.l)):(y||(p=qs(p,Vc)),u.i=new Fe(p,u.l))}function $e(u,p,y){u.i.set(p,y)}function vr(u){return $e(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ws(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function qs(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Ko),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ko(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qo=/[#\/\?@]/g,Yo=/[#\?:]/g,Gs=/[#\?]/g,Vc=/[#\?@]/g,Xo=/#/g;function Fe(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function zn(u){u.g||(u.g=new Map,u.h=0,u.i&&nn(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=Fe.prototype,r.add=function(u,p){zn(this),this.i=null,u=Bn(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function Jo(u,p){zn(u),p=Bn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Li(u,p){return zn(u),p=Bn(u,p),u.g.has(p)}r.forEach=function(u,p){zn(this),this.g.forEach(function(y,I){y.forEach(function(j){u.call(p,j,I,this)},this)},this)};function Zo(u,p){zn(u);let y=[];if(typeof p=="string")Li(u,p)&&(y=y.concat(u.g.get(Bn(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)y=y.concat(u[p]);return y}r.set=function(u,p){return zn(this),this.i=null,u=Bn(this,u),Li(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=Zo(this,u),u.length>0?String(u[0]):p):p};function ea(u,p,y){Jo(u,p),y.length>0&&(u.i=null,u.g.set(Bn(u,p),F(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let I=0;I<p.length;I++){var y=p[I];const j=jn(y);y=Zo(this,y);for(let $=0;$<y.length;$++){let ae=j;y[$]!==""&&(ae+="="+jn(y[$])),u.push(ae)}}return this.i=u.join("&")};function ta(u){const p=new Fe;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Bn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function bi(u,p){p&&!u.j&&(zn(u),u.i=null,u.g.forEach(function(y,I){const j=I.toLowerCase();I!=j&&(Jo(this,I),ea(this,j,y))},u)),u.j=p}function $n(u,p){const y=new Xr;if(h.Image){const I=new Image;I.onload=T(Rt,y,"TestLoadImage: loaded",!0,p,I),I.onerror=T(Rt,y,"TestLoadImage: error",!1,p,I),I.onabort=T(Rt,y,"TestLoadImage: abort",!1,p,I),I.ontimeout=T(Rt,y,"TestLoadImage: timeout",!1,p,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function Hn(u,p){const y=new Xr,I=new AbortController,j=setTimeout(()=>{I.abort(),Rt(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then($=>{clearTimeout(j),$.ok?Rt(y,"TestPingServer: ok",!0,p):Rt(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),Rt(y,"TestPingServer: error",!1,p)})}function Rt(u,p,y,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(y)}catch{}}function Ks(){this.g=new js}function _r(u){this.i=u.Sb||null,this.h=u.ab||!1}S(_r,Gr),_r.prototype.g=function(){return new rn(this.i,this.h)};function rn(u,p){ot.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(rn,ot),r=rn.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,In(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Al(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Al(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?ts(this):In(this),this.readyState==3&&Al(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ts(this))},r.Na=function(u){this.g&&(this.response=u,ts(this))},r.ga=function(){this.g&&ts(this)};function ts(u){u.readyState=4,u.l=null,u.j=null,u.B=null,In(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function In(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(rn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function kl(u){let p="";return me(u,function(y,I){p+=I,p+=":",p+=y,p+=`\r
`}),p}function ji(u,p,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=kl(y),typeof u=="string"?y!=null&&jn(y):$e(u,p,y))}function Ke(u){ot.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Ke,ot);var Cl=/^https?$/i,Oc=["POST","PUT"];r=Ke.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vl.g(),this.g.onreadystatechange=R(v(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch($){ns(this,$);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)y.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const $ of I.keys())y.set($,I.get($));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),j=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Oc,p,void 0)>=0)||I||j||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ae]of y)this.g.setRequestHeader($,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){ns(this,$)}};function ns(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,rs(u),Er(u)}function rs(u){u.A||(u.A=!0,nt(u,"complete"),nt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,nt(this,"complete"),nt(this,"abort"),Er(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Er(this,!0)),Ke.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?wr(this):this.Xa())},r.Xa=function(){wr(this)};function wr(u){if(u.h&&typeof l<"u"){if(u.v&&Wn(u)==4)setTimeout(u.Ca.bind(u),0);else if(nt(u,"readystatechange"),Wn(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var I;if(I=$===0){let ae=String(u.D).match(Sl)[1]||null;!ae&&h.self&&h.self.location&&(ae=h.self.location.protocol.slice(0,-1)),I=!Cl.test(ae?ae.toLowerCase():"")}y=I}if(y)nt(u,"complete"),nt(u,"success");else{u.o=6;try{var j=Wn(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",rs(u)}}finally{Er(u)}}}}function Er(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,p||nt(u,"ready");try{y.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Wn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),fl(p)}};function Rl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function na(u){const p={};u=(u.g&&Wn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(E(u[I]))continue;var y=Di(u[I]);const j=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const $=p[j]||[];p[j]=$,$.push(y)}ce(p,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qn(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function Fi(u){this.za=0,this.i=[],this.j=new Xr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qn("baseRetryDelayMs",5e3,u),this.Za=qn("retryDelaySeedMs",1e4,u),this.Ta=qn("forwardChannelMaxRetries",2,u),this.va=qn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Oi(u&&u.concurrentRequestLimit),this.Ba=new Ks,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Fi.prototype,r.ka=8,r.I=1,r.connect=function(u,p,y,I){at(0),this.W=u,this.H=p||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.J=sa(this,null,this.W),Tr(this)};function Ui(u){if(zi(u),u.I==3){var p=u.V++,y=dn(u.J);if($e(y,"SID",u.M),$e(y,"RID",p),$e(y,"TYPE","terminate"),Gn(u,y),p=new hn(u,u.j,p),p.M=2,p.A=vr(dn(y)),y=!1,h.navigator&&h.navigator.sendBeacon)try{y=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&h.Image&&(new Image().src=p.A,y=!0),y||(p.g=Nl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Us(p)}Xs(u)}function sn(u){u.g&&(Ys(u),u.g.cancel(),u.g=null)}function zi(u){sn(u),u.v&&(h.clearTimeout(u.v),u.v=null),Bi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Tr(u){if(!qo(u.h)&&!u.m){u.m=!0;var p=u.Ea;ie||A(),le||(ie(),le=!0),P.add(p,u),u.D=0}}function Pl(u,p){return Bs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Yr(v(u.Ea,u,p),Hi(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new hn(this,this.j,u);let $=this.o;if(this.U&&($?($=M($),ne($,this.U)):$=this.U),this.u!==null||this.R||(j.J=$,$=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=ra(this,j,p),y=dn(this.J),$e(y,"RID",u),$e(y,"CVER",22),this.G&&$e(y,"X-HTTP-Session-Id",this.G),Gn(this,y),$&&(this.R?p="headers="+jn(kl($))+"&"+p:this.u&&ji(y,this.u,$)),Mi(this.h,j),this.Ra&&$e(y,"TYPE","init"),this.S?($e(y,"$req",p),$e(y,"SID","null"),j.U=!0,Tn(j,y,null)):Tn(j,y,p),this.I=2}}else this.I==3&&(u?Qs(this,u):this.i.length==0||qo(this.h)||Qs(this))};function Qs(u,p){var y;p?y=p.l:y=u.V++;const I=dn(u.J);$e(I,"SID",u.M),$e(I,"RID",y),$e(I,"AID",u.K),Gn(u,I),u.u&&u.o&&ji(I,u.u,u.o),y=new hn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),p&&(u.i=p.G.concat(u.i)),p=ra(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Mi(u.h,y),Tn(y,I,p)}function Gn(u,p){u.H&&me(u.H,function(y,I){$e(p,I,y)}),u.l&&me({},function(y,I){$e(p,I,y)})}function ra(u,p,y){y=Math.min(u.i.length,y);const I=u.l?v(u.l.Ka,u.l,u):null;e:{var j=u.i;let Ne=-1;for(;;){const ht=["count="+y];Ne==-1?y>0?(Ne=j[0].g,ht.push("ofs="+Ne)):Ne=0:ht.push("ofs="+Ne);let qe=!0;for(let pt=0;pt<y;pt++){var $=j[pt].g;const an=j[pt].map;if($-=Ne,$<0)Ne=Math.max(0,j[pt].g-100),qe=!1;else try{$="req"+$+"_"||"";try{var ae=an instanceof Map?an:Object.entries(an);for(const[Ir,Qn]of ae){let Yn=Qn;m(Qn)&&(Yn=qr(Qn)),ht.push($+Ir+"="+encodeURIComponent(Yn))}}catch(Ir){throw ht.push($+"type="+encodeURIComponent("_badmap")),Ir}}catch{I&&I(an)}}if(qe){ae=ht.join("&");break e}}ae=void 0}return u=u.i.splice(0,y),p.G=u,ae}function Mt(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;ie||A(),le||(ie(),le=!0),P.add(p,u),u.A=0}}function Kn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Yr(v(u.Da,u),Hi(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ss(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Yr(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,at(10),sn(this),ss(this))};function Ys(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ss(u){u.g=new hn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=dn(u.na);$e(p,"RID","rpc"),$e(p,"SID",u.M),$e(p,"AID",u.K),$e(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&$e(p,"TO",u.ia),$e(p,"TYPE","xmlhttp"),Gn(u,p),u.u&&u.o&&ji(p,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=vr(dn(p)),y.u=null,y.R=!0,Ho(y,u)}r.Va=function(){this.C!=null&&(this.C=null,sn(this),Kn(this),at(19))};function Bi(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function $i(u,p){var y=null;if(u.g==p){Bi(u),Ys(u),u.g=null;var I=2}else if(Go(u.h,p))y=p.G,$s(u.h,p),I=1;else return;if(u.I!=0){if(p.o)if(I==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var j=u.D;I=Qr(),nt(I,new Bo(I,y)),Tr(u)}else Mt(u);else if(j=p.m,j==3||j==0&&p.X>0||!(I==1&&Pl(u,p)||I==2&&Kn(u)))switch(y&&y.length>0&&(p=u.h,p.i=p.i.concat(y)),j){case 1:on(u,5);break;case 4:on(u,10);break;case 3:on(u,6);break;default:on(u,2)}}}function Hi(u,p){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*p}function on(u,p){if(u.j.info("Error code "+p),p==2){var y=v(u.bb,u),I=u.Ua;const j=!I;I=new Fn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Hs(I,"https"),vr(I),j?$n(I.toString(),y):Hn(I.toString(),y)}else at(2);u.I=0,u.l&&u.l.pa(p),Xs(u),zi(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Xs(u){if(u.I=0,u.ja=[],u.l){const p=tn(u.h);(p.length!=0||u.i.length!=0)&&(q(u.ja,p),q(u.ja,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.oa()}}function sa(u,p,y){var I=y instanceof Fn?dn(y):new Fn(y);if(I.g!="")p&&(I.g=p+"."+I.g),Un(I,I.u);else{var j=h.location;I=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;const $=new Fn(null);I&&Hs($,I),p&&($.g=p),j&&Un($,j),y&&($.h=y),I=$}return y=u.G,p=u.wa,y&&p&&$e(I,y,p),$e(I,"VER",u.ka),Gn(u,I),I}function Nl(u,p,y){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Ke(new _r({ab:y})):new Ke(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xl(){}r=xl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Wi(){}Wi.prototype.g=function(u,p){return new Pt(u,p)};function Pt(u,p){ot.call(this),this.g=new Fi(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!E(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new is(this)}S(Pt,ot),Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Ui(this.g)},Pt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=qr(u),u=y);p.i.push(new Dc(p.Ya++,u)),p.I==3&&Tr(p)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Ui(this.g),delete this.g,Pt.Z.N.call(this)};function Dl(u){Pi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}S(Dl,Pi);function Vl(){zo.call(this),this.status=1}S(Vl,zo);function is(u){this.g=u}S(is,xl),is.prototype.ra=function(){nt(this.g,"a")},is.prototype.qa=function(u){nt(this.g,new Dl(u))},is.prototype.pa=function(u){nt(this.g,new Vl)},is.prototype.oa=function(){nt(this.g,"b")},Wi.prototype.createWebChannel=Wi.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,e_=function(){return new Wi},Zv=function(){return Qr()},Jv=En,Pd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jr.NO_ERROR=0,Jr.TIMEOUT=8,Jr.HTTP_ERROR=6,Uu=Jr,Zr.COMPLETE="complete",Xv=Zr,pl.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",ot.prototype.listen=ot.prototype.J,xa=pl,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,Yv=Ke}).apply(typeof Ru<"u"?Ru:typeof self<"u"?self:typeof window<"u"?window:{});const Bg="@firebase/firestore",$g="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Zd("@firebase/firestore");function po(){return Ei.logLevel}function de(r,...e){if(Ei.logLevel<=Me.DEBUG){const t=e.map(ff);Ei.debug(`Firestore (${Mo}): ${r}`,...t)}}function jr(r,...e){if(Ei.logLevel<=Me.ERROR){const t=e.map(ff);Ei.error(`Firestore (${Mo}): ${r}`,...t)}}function ko(r,...e){if(Ei.logLevel<=Me.WARN){const t=e.map(ff);Ei.warn(`Firestore (${Mo}): ${r}`,...t)}}function ff(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,t_(r,i,t)}function t_(r,e,t){let i=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw jr(i),new Error(i)}function He(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||t_(e,o,i)}function xe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ur{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class nS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rS{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new pi,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new pi)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new n_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class sS{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iS{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new sS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=aS(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Le(r,e){return r<e?-1:r>e?1:0}function Nd(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return fd(o)===fd(l)?Le(o,l):fd(o)?1:-1}return Le(r.length,e.length)}const lS=55296,uS=57343;function fd(r){const e=r.charCodeAt(0);return e>=lS&&e<=uS}function Co(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="__name__";class tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const i=tr.isNumericId(e),o=tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?tr.extractNumericId(e).compare(tr.extractNumericId(t)):Nd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rs.fromString(e.substring(4,e.length-2))}}class Ye extends tr{construct(e,t,i){return new Ye(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const cS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends tr{construct(e,t,i){return new Vt(e,t,i)}static isValidIdentifier(e){return cS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wg}static keyField(){return new Vt([Wg])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new fe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new fe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(l(),o++)}if(l(),h)throw new fe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(Ye.fromString(e))}static fromName(e){return new we(Ye.fromString(e).popFirst(5))}static empty(){return new we(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(r,e,t){if(!t)throw new fe(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function hS(r,e,t,i){if(e===!0&&i===!0)throw new fe(X.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function qg(r){if(!we.isDocumentKey(r))throw new fe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Gg(r){if(we.isDocumentKey(r))throw new fe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function s_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function yc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function mi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yc(r);throw new fe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r,e){const t={typeString:r};return e&&(t.value=e),t}function ol(r,e){if(!s_(r))throw new fe(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new fe(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=-62135596800,Qg=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Qg);return new et(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kg)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qg}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ol(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:vt("string",et._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new et(0,0))}static max(){return new Re(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=-1;function dS(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new et(t+1,0):new et(t,i));return new Ns(o,we.empty(),e)}function fS(r){return new Ns(r.readTime,r.key,Wa)}class Ns{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ns(Re.min(),we.empty(),Wa)}static max(){return new Ns(Re.max(),we.empty(),Wa)}}function pS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==mS)throw r;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):J.reject(t)}static resolve(e){return new J(((t,i)=>{t(e)}))}static reject(e){return new J(((t,i)=>{i(e)}))}static waitFor(e){return new J(((t,i)=>{let o=0,l=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++l,h&&l===o&&t()}),(g=>i(g)))})),h=!0,l===o&&t()}))}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next((o=>o?J.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new J(((i,o)=>{const l=e.length,h=new Array(l);let m=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next((T=>{h[v]=T,++m,m===l&&i(h)}),(T=>o(T)))}}))}static doWhile(e,t){return new J(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function yS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function bo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=-1;function _c(r){return r==null}function ec(r){return r===0&&1/r==-1/0}function vS(r){return typeof r=="number"&&Number.isInteger(r)&&!ec(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="";function _S(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Yg(e)),e=wS(r.get(t),e);return Yg(e)}function wS(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case i_:t+="";break;default:t+=l}}return t}function Yg(r){return r+i_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ii(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function o_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pu(this.root,e,this.comparator,!0)}}class Pu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Dt.RED,this.left=o??Dt.EMPTY,this.right=l??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Dt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jg(this.data.getIterator())}getIteratorFrom(e){return new Jg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class Jg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Tt(Vt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new a_("Invalid base64 string: "+l):l}})(e);return new Ot(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const ES=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(r){if(He(!!r,39018),typeof r=="string"){let e=0;const t=ES.exec(r);if(He(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ft(r.seconds),nanos:ft(r.nanos)}}function ft(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ds(r){return typeof r=="string"?Ot.fromBase64String(r):Ot.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="server_timestamp",u_="__type__",c_="__previous_value__",h_="__local_write_time__";function gf(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[u_])==null?void 0:i.stringValue)===l_}function wc(r){const e=r.mapValue.fields[c_];return gf(e)?wc(e):e}function qa(r){const e=xs(r.mapValue.fields[h_].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,i,o,l,h,m,g,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=T}}const tc="(default)";class Ga{constructor(e,t){this.projectId=e,this.database=t||tc}static empty(){return new Ga("","")}get isDefaultDatabase(){return this.database===tc}isEqual(e){return e instanceof Ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="__type__",IS="__max__",Nu={mapValue:{}},f_="__vector__",nc="value";function Vs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?gf(r)?4:AS(r)?9007199254740991:SS(r)?10:11:Se(28295,{value:r})}function cr(r,e){if(r===e)return!0;const t=Vs(r);if(t!==Vs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return qa(r).isEqual(qa(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=xs(o.timestampValue),m=xs(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ds(o.bytesValue).isEqual(Ds(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ft(o.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ft(o.integerValue)===ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ft(o.doubleValue),m=ft(l.doubleValue);return h===m?ec(h)===ec(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return Co(r.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(Xg(h)!==Xg(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!cr(h[g],m[g])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function Ka(r,e){return(r.values||[]).find((t=>cr(t,e)))!==void 0}function Ro(r,e){if(r===e)return 0;const t=Vs(r),i=Vs(e);if(t!==i)return Le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const m=ft(l.integerValue||l.doubleValue),g=ft(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return Zg(r.timestampValue,e.timestampValue);case 4:return Zg(qa(r),qa(e));case 5:return Nd(r.stringValue,e.stringValue);case 6:return(function(l,h){const m=Ds(l),g=Ds(h);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const m=l.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const T=Le(m[v],g[v]);if(T!==0)return T}return Le(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const m=Le(ft(l.latitude),ft(h.latitude));return m!==0?m:Le(ft(l.longitude),ft(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return ey(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var R,F,q,D;const m=l.fields||{},g=h.fields||{},v=(R=m[nc])==null?void 0:R.arrayValue,T=(F=g[nc])==null?void 0:F.arrayValue,S=Le(((q=v==null?void 0:v.values)==null?void 0:q.length)||0,((D=T==null?void 0:T.values)==null?void 0:D.length)||0);return S!==0?S:ey(v,T)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Nu.mapValue&&h===Nu.mapValue)return 0;if(l===Nu.mapValue)return 1;if(h===Nu.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),v=h.fields||{},T=Object.keys(v);g.sort(),T.sort();for(let S=0;S<g.length&&S<T.length;++S){const R=Nd(g[S],T[S]);if(R!==0)return R;const F=Ro(m[g[S]],v[T[S]]);if(F!==0)return F}return Le(g.length,T.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Zg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=xs(r),i=xs(e),o=Le(t.seconds,i.seconds);return o!==0?o:Le(t.nanos,i.nanos)}function ey(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ro(t[o],i[o]);if(l)return l}return Le(t.length,i.length)}function Po(r){return xd(r)}function xd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=xs(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ds(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return we.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=xd(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${xd(t.fields[h])}`;return o+"}"})(r.mapValue):Se(61005,{value:r})}function zu(r){switch(Vs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wc(r);return e?16+zu(e):16;case 5:return 2*r.stringValue.length;case 6:return Ds(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+zu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Ii(i.fields,((l,h)=>{o+=l.length+zu(h)})),o})(r.mapValue);default:throw Se(13486,{value:r})}}function ty(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Dd(r){return!!r&&"integerValue"in r}function yf(r){return!!r&&"arrayValue"in r}function ny(r){return!!r&&"nullValue"in r}function ry(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Bu(r){return!!r&&"mapValue"in r}function SS(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[d_])==null?void 0:i.stringValue)===f_}function ba(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ii(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ba(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ba(r.arrayValue.values[t]);return e}return{...r}}function AS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===IS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Bu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ba(t)}setAll(e){let t=Vt.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=ba(h):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Bu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Bu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ii(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new _n(ba(this.value))}}function p_(r){const e=[];return Ii(r.fields,((t,i)=>{const o=new Vt([t]);if(Bu(i)){const l=p_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t,i,o,l,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Bt(e,0,Re.min(),Re.min(),Re.min(),_n.empty(),0)}static newFoundDocument(e,t,i,o){return new Bt(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new Bt(e,2,t,Re.min(),Re.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,Re.min(),Re.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t){this.position=e,this.inclusive=t}}function sy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=we.comparator(we.fromName(h.referenceValue),t.key):i=Ro(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function iy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!cr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t="asc"){this.field=e,this.dir=t}}function kS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{}class yt extends m_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new RS(e,t,i):t==="array-contains"?new xS(e,i):t==="in"?new DS(e,i):t==="not-in"?new VS(e,i):t==="array-contains-any"?new OS(e,i):new yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new PS(e,i):new NS(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ro(t,this.value)):t!==null&&Vs(this.value)===Vs(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends m_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new On(e,t)}matches(e){return g_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function g_(r){return r.op==="and"}function y_(r){return CS(r)&&g_(r)}function CS(r){for(const e of r.filters)if(e instanceof On)return!1;return!0}function Vd(r){if(r instanceof yt)return r.field.canonicalString()+r.op.toString()+Po(r.value);if(y_(r))return r.filters.map((e=>Vd(e))).join(",");{const e=r.filters.map((t=>Vd(t))).join(",");return`${r.op}(${e})`}}function v_(r,e){return r instanceof yt?(function(i,o){return o instanceof yt&&i.op===o.op&&i.field.isEqual(o.field)&&cr(i.value,o.value)})(r,e):r instanceof On?(function(i,o){return o instanceof On&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,m)=>l&&v_(h,o.filters[m])),!0):!1})(r,e):void Se(19439)}function __(r){return r instanceof yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Po(t.value)}`})(r):r instanceof On?(function(t){return t.op.toString()+" {"+t.getFilters().map(__).join(" ,")+"}"})(r):"Filter"}class RS extends yt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class PS extends yt{constructor(e,t){super(e,"in",t),this.keys=w_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class NS extends yt{constructor(e,t){super(e,"not-in",t),this.keys=w_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function w_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class xS extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yf(t)&&Ka(t.arrayValue,this.value)}}class DS extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ka(this.value.arrayValue,t)}}class VS extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ka(this.value.arrayValue,t)}}class OS extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ka(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t=null,i=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Te=null}}function oy(r,e=null,t=[],i=[],o=null,l=null,h=null){return new MS(r,e,t,i,o,l,h)}function vf(r){const e=xe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Vd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),_c(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Po(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Po(i))).join(",")),e.Te=t}return e.Te}function _f(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!kS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!v_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!iy(r.startAt,e.startAt)&&iy(r.endAt,e.endAt)}function Od(r){return we.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t=null,i=[],o=[],l=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LS(r,e,t,i,o,l,h,m){return new al(r,e,t,i,o,l,h,m)}function wf(r){return new al(r)}function ay(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function E_(r){return r.collectionGroup!==null}function ja(r){const e=xe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Tt(Vt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new sc(l,i))})),t.has(Vt.keyField().canonicalString())||e.Ie.push(new sc(Vt.keyField(),i))}return e.Ie}function sr(r){const e=xe(r);return e.Ee||(e.Ee=bS(e,ja(r))),e.Ee}function bS(r,e){if(r.limitType==="F")return oy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new sc(o.field,l)}));const t=r.endAt?new rc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new rc(r.startAt.position,r.startAt.inclusive):null;return oy(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Md(r,e){const t=r.filters.concat([e]);return new al(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ld(r,e,t){return new al(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ec(r,e){return _f(sr(r),sr(e))&&r.limitType===e.limitType}function T_(r){return`${vf(sr(r))}|lt:${r.limitType}`}function mo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>__(o))).join(", ")}]`),_c(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Po(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Po(o))).join(",")),`Target(${i})`})(sr(r))}; limitType=${r.limitType})`}function Tc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of ja(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,g){const v=sy(h,m,g);return h.inclusive?v<=0:v<0})(i.startAt,ja(i),o)||i.endAt&&!(function(h,m,g){const v=sy(h,m,g);return h.inclusive?v>=0:v>0})(i.endAt,ja(i),o))})(r,e)}function jS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function I_(r){return(e,t)=>{let i=!1;for(const o of ja(r)){const l=FS(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function FS(r,e,t){const i=r.field.isKeyField()?we.comparator(e.key,t.key):(function(l,h,m){const g=h.data.field(l),v=m.data.field(l);return g!==null&&v!==null?Ro(g,v):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return o_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new it(we.comparator);function Fr(){return US}const S_=new it(we.comparator);function Da(...r){let e=S_;for(const t of r)e=e.insert(t.key,t);return e}function A_(r){let e=S_;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function di(){return Fa()}function k_(){return Fa()}function Fa(){return new Si((r=>r.toString()),((r,e)=>r.isEqual(e)))}const zS=new it(we.comparator),BS=new Tt(we.comparator);function be(...r){let e=BS;for(const t of r)e=e.add(t);return e}const $S=new Tt(Le);function HS(){return $S}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function C_(r){return{integerValue:""+r}}function WS(r,e){return vS(e)?C_(e):Ef(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(){this._=void 0}}function qS(r,e,t){return r instanceof ic?(function(o,l){const h={fields:{[u_]:{stringValue:l_},[h_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&gf(l)&&(l=wc(l)),l&&(h.fields[c_]=l),{mapValue:h}})(t,e):r instanceof Qa?P_(r,e):r instanceof Ya?N_(r,e):(function(o,l){const h=R_(o,l),m=ly(h)+ly(o.Ae);return Dd(h)&&Dd(o.Ae)?C_(m):Ef(o.serializer,m)})(r,e)}function GS(r,e,t){return r instanceof Qa?P_(r,e):r instanceof Ya?N_(r,e):t}function R_(r,e){return r instanceof oc?(function(i){return Dd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class ic extends Ic{}class Qa extends Ic{constructor(e){super(),this.elements=e}}function P_(r,e){const t=x_(e);for(const i of r.elements)t.some((o=>cr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Ya extends Ic{constructor(e){super(),this.elements=e}}function N_(r,e){let t=x_(e);for(const i of r.elements)t=t.filter((o=>!cr(o,i)));return{arrayValue:{values:t}}}class oc extends Ic{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ly(r){return ft(r.integerValue||r.doubleValue)}function x_(r){return yf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function KS(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Qa&&o instanceof Qa||i instanceof Ya&&o instanceof Ya?Co(i.elements,o.elements,cr):i instanceof oc&&o instanceof oc?cr(i.Ae,o.Ae):i instanceof ic&&o instanceof ic})(r.transform,e.transform)}class QS{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Sc{}function D_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Tf(r.key,ir.none()):new ll(r.key,r.data,ir.none());{const t=r.data,i=_n.empty();let o=new Tt(Vt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ai(r.key,i,new Dn(o.toArray()),ir.none())}}function YS(r,e,t){r instanceof ll?(function(o,l,h){const m=o.value.clone(),g=cy(o.fieldTransforms,l,h.transformResults);m.setAll(g),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Ai?(function(o,l,h){if(!$u(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=cy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(V_(o)),g.setAll(m),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ua(r,e,t,i){return r instanceof ll?(function(l,h,m,g){if(!$u(l.precondition,h))return m;const v=l.value.clone(),T=hy(l.fieldTransforms,g,h);return v.setAll(T),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Ai?(function(l,h,m,g){if(!$u(l.precondition,h))return m;const v=hy(l.fieldTransforms,g,h),T=h.data;return T.setAll(V_(l)),T.setAll(v),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((S=>S.field)))})(r,e,t,i):(function(l,h,m){return $u(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,t)}function XS(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=R_(i.transform,o||null);l!=null&&(t===null&&(t=_n.empty()),t.set(i.field,l))}return t||null}function uy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Co(i,o,((l,h)=>KS(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ll extends Sc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ai extends Sc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function V_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function cy(r,e,t){const i=new Map;He(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);i.set(l.field,GS(h,m,t[o]))}return i}function hy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,qS(l,h,e))}return i}class Tf extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JS extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&YS(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ua(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ua(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=k_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const g=D_(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),be())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,((t,i)=>uy(t,i)))&&Co(this.baseMutations,e.baseMutations,((t,i)=>uy(t,i)))}}class If{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return zS})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new If(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Ue;function nA(r){switch(r){case X.OK:return Se(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function O_(r){if(r===void 0)return jr("GRPC error has no .code"),X.UNKNOWN;switch(r){case gt.OK:return X.OK;case gt.CANCELLED:return X.CANCELLED;case gt.UNKNOWN:return X.UNKNOWN;case gt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case gt.INTERNAL:return X.INTERNAL;case gt.UNAVAILABLE:return X.UNAVAILABLE;case gt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case gt.NOT_FOUND:return X.NOT_FOUND;case gt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case gt.ABORTED:return X.ABORTED;case gt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case gt.DATA_LOSS:return X.DATA_LOSS;default:return Se(39323,{code:r})}}(Ue=gt||(gt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new Rs([4294967295,4294967295],0);function dy(r){const e=rA().encode(r),t=new Qv;return t.update(e),new Uint8Array(t.digest())}function fy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Rs([t,i],0),new Rs([o,l],0)]}class Sf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Va(`Invalid padding: ${t}`);if(i<0)throw new Va(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Va(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Va(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Rs.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Rs.fromNumber(i)));return o.compare(sA)===1&&(o=new Rs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=dy(e),[i,o]=fy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Sf(l,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=dy(e),[i,o]=fy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ul.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ac(Re.min(),o,new it(Le),Fr(),be())}}class ul{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ul(i,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class M_{constructor(e,t){this.targetId=e,this.Ce=t}}class L_{constructor(e,t,i=Ot.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class py{constructor(){this.ve=0,this.Fe=my(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),t=be(),i=be();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se(38017,{changeType:l})}})),new ul(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=my()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fr(),this.Je=xu(),this.He=xu(),this.Ye=new it(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Od(l))if(i===0){const h=new we(l.path);this.et(t,h,Bt.newNoDocument(h,Re.min()))}else He(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=Ds(i).toUint8Array()}catch(g){if(g instanceof a_)return ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Sf(h,o,l)}catch(g){return ko(g instanceof Va?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const m=this.ot(h);if(m){if(l.current&&Od(m.target)){const g=new we(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Bt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=be();this.He.forEach(((l,h)=>{let m=!0;h.forEachWhile((g=>{const v=this.ot(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Ac(e,t,this.Ye,this.je,i);return this.je=Fr(),this.Je=xu(),this.He=xu(),this.Ye=new it(Le),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new py,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new py),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function xu(){return new it(we.comparator)}function my(){return new it(we.comparator)}const oA={asc:"ASCENDING",desc:"DESCENDING"},aA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lA={and:"AND",or:"OR"};class uA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bd(r,e){return r.useProto3Json||_c(e)?e:{value:e}}function ac(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cA(r,e){return ac(r,e.toTimestamp())}function or(r){return He(!!r,49232),Re.fromTimestamp((function(t){const i=xs(t);return new et(i.seconds,i.nanos)})(r))}function Af(r,e){return jd(r,e).canonicalString()}function jd(r,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function j_(r){const e=Ye.fromString(r);return He($_(e),10190,{key:e.toString()}),e}function Fd(r,e){return Af(r.databaseId,e.path)}function pd(r,e){const t=j_(e);if(t.get(1)!==r.databaseId.projectId)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new we(U_(t))}function F_(r,e){return Af(r.databaseId,e)}function hA(r){const e=j_(r);return e.length===4?Ye.emptyPath():U_(e)}function Ud(r){return new Ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function U_(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function gy(r,e,t){return{name:Fd(r,e),fields:t.value.mapValue.fields}}function dA(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Se(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,T){return v.useProto3Json?(He(T===void 0||typeof T=="string",58123),Ot.fromBase64String(T||"")):(He(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ot.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const T=v.code===void 0?X.UNKNOWN:O_(v.code);return new fe(T,v.message||"")})(h);t=new L_(i,o,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=pd(r,i.document.name),l=or(i.document.updateTime),h=i.document.createTime?or(i.document.createTime):Re.min(),m=new _n({mapValue:{fields:i.document.fields}}),g=Bt.newFoundDocument(o,l,h,m),v=i.targetIds||[],T=i.removedTargetIds||[];t=new Hu(v,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=pd(r,i.document),l=i.readTime?or(i.readTime):Re.min(),h=Bt.newNoDocument(o,l),m=i.removedTargetIds||[];t=new Hu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=pd(r,i.document),l=i.removedTargetIds||[];t=new Hu([],l,o,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new tA(o,l),m=i.targetId;t=new M_(m,h)}}return t}function fA(r,e){let t;if(e instanceof ll)t={update:gy(r,e.key,e.value)};else if(e instanceof Tf)t={delete:Fd(r,e.key)};else if(e instanceof Ai)t={update:gy(r,e.key,e.data),updateMask:TA(e.fieldMask)};else{if(!(e instanceof JS))return Se(16599,{Vt:e.type});t={verify:Fd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const m=h.transform;if(m instanceof ic)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Qa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ya)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof oc)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Se(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:cA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(r,e.precondition)),t}function pA(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?or(o.updateTime):or(l);return h.isEqual(Re.min())&&(h=or(l)),new QS(h,o.transformResults||[])})(t,e)))):[]}function mA(r,e){return{documents:[F_(r,e.path)]}}function gA(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=F_(r,o);const l=(function(v){if(v.length!==0)return B_(On.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((T=>(function(R){return{field:go(R.field),direction:_A(R.dir)}})(T)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=bd(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function yA(r){let e=hA(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){He(i===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let l=[];t.where&&(l=(function(S){const R=z_(S);return R instanceof On&&y_(R)?R.getFilters():[R]})(t.where));let h=[];t.orderBy&&(h=(function(S){return S.map((R=>(function(q){return new sc(yo(q.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(R)))})(t.orderBy));let m=null;t.limit&&(m=(function(S){let R;return R=typeof S=="object"?S.value:S,_c(R)?null:R})(t.limit));let g=null;t.startAt&&(g=(function(S){const R=!!S.before,F=S.values||[];return new rc(F,R)})(t.startAt));let v=null;return t.endAt&&(v=(function(S){const R=!S.before,F=S.values||[];return new rc(F,R)})(t.endAt)),LS(e,o,h,l,m,"F",g,v)}function vA(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function z_(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=yo(t.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(t.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=yo(t.unaryFilter.field);return yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=yo(t.unaryFilter.field);return yt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return yt.create(yo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return On.create(t.compositeFilter.filters.map((i=>z_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function _A(r){return oA[r]}function wA(r){return aA[r]}function EA(r){return lA[r]}function go(r){return{fieldPath:r.canonicalString()}}function yo(r){return Vt.fromServerFormat(r.fieldPath)}function B_(r){return r instanceof yt?(function(t){if(t.op==="=="){if(ry(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NAN"}};if(ny(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ry(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NAN"}};if(ny(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(t.field),op:wA(t.op),value:t.value}}})(r):r instanceof On?(function(t){const i=t.getFilters().map((o=>B_(o)));return i.length===1?i[0]:{compositeFilter:{op:EA(t.op),filters:i}}})(r):Se(54877,{filter:r})}function TA(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,i,o,l=Re.min(),h=Re.min(),m=Ot.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.yt=e}}function SA(r){const e=yA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.Cn=new kA}addToCollectionParentIndex(e,t){return this.Cn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(Ns.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class kA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Tt(Ye.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Tt(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},H_=41943040;class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(H_,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new No(0)}static cr(){return new No(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="LruGarbageCollector",CA=1048576;function _y([r,e],[t,i]){const o=Le(r,t);return o===0?Le(e,i):o}class RA{constructor(e){this.Ir=e,this.buffer=new Tt(_y),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();_y(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(vy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bo(t)?de(vy,"Ignoring IndexedDB error during garbage collection: ",t):await Lo(t)}await this.Vr(3e5)}))}}class NA{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return J.resolve(vc.ce);const i=new RA(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(yy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,m,g,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(i=S,m=Date.now(),this.removeTargets(e,i,t)))).next((S=>(l=S,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((S=>(v=Date.now(),po()<=Me.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${S} documents in `+(v-g)+`ms
Total Duration: ${v-T}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:S}))))}}function xA(r,e){return new NA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.changes=new Si((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ua(i.mutation,o,Dn.empty(),et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=be()){const o=di();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Da();return l.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=di();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,be())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let l=Fr();const h=Fa(),m=(function(){return Fa()})();return t.forEach(((g,v)=>{const T=i.get(v.key);o.has(v.key)&&(T===void 0||T.mutation instanceof Ai)?l=l.insert(v.key,v):T!==void 0?(h.set(v.key,T.mutation.getFieldMask()),Ua(T.mutation,v,T.mutation.getFieldMask(),et.now())):h.set(v.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((v,T)=>h.set(v,T))),t.forEach(((v,T)=>m.set(v,new VA(T,h.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=Fa();let o=new it(((h,m)=>h-m)),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let T=i.get(g)||Dn.empty();T=m.applyToLocalView(v,T),i.set(g,T);const S=(o.get(m.batchId)||be()).add(g);o=o.insert(m.batchId,S)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,T=g.value,S=k_();T.forEach((R=>{if(!l.has(R)){const F=D_(t.get(R),i.get(R));F!==null&&S.set(R,F),l=l.add(R)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,S))}return J.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):E_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):J.resolve(di());let m=Wa,g=l;return h.next((v=>J.forEach(v,((T,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),l.get(T)?J.resolve():this.remoteDocumentCache.getEntry(e,T).next((R=>{g=g.insert(T,R)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,g,v,be()))).next((T=>({batchId:m,changes:A_(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let o=Da();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Da();return this.indexManager.getCollectionParents(e,l).next((m=>J.forEach(m,(g=>{const v=(function(S,R){return new al(R,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((T=>{T.forEach(((S,R)=>{h=h.insert(S,R)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((g,v)=>{const T=v.getKey();h.get(T)===null&&(h=h.insert(T,Bt.newInvalidDocument(T)))}));let m=Da();return h.forEach(((g,v)=>{const T=l.get(g);T!==void 0&&Ua(T.mutation,v,Dn.empty(),et.now()),Tc(t,v)&&(m=m.insert(g,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return J.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:or(o.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:SA(o.bundledQuery),readTime:or(o.readTime)}})(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.overlays=new it(we.comparator),this.qr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=di();return J.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),J.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const o=di(),l=t.length+1,h=new we(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new it(((v,T)=>v-T));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let T=l.get(v.largestBatchId);T===null&&(T=di(),l=l.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const m=di(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,T)=>m.set(v,T))),!(m.size()>=o)););return J.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new eA(t,i));let l=this.qr.get(t);l===void 0&&(l=be(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this.Qr=new Tt(kt.$r),this.Ur=new Tt(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new kt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new kt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new we(new Ye([])),i=new kt(t,e),o=new kt(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new Ye([])),i=new kt(t,e),o=new kt(t,e+1);let l=be();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new kt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(kt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ZS(l,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new kt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return J.resolve(h)}lookupMutationBatch(e,t){return J.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return J.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?mf:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const m=this.Xr(h.Yr);l.push(m)})),J.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Tt(Le);return t.forEach((o=>{const l=new kt(o,0),h=new kt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(m=>{i=i.add(m.Yr)}))})),J.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const h=new kt(new we(l),0);let m=new Tt(Le);return this.Zr.forEachWhile((g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(m=m.add(g.Yr)),!0)}),h),J.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){He(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return J.forEach(t.mutations,(o=>{const l=new kt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new kt(t,0),o=this.Zr.firstAfterOrEqual(i);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.ri=e,this.docs=(function(){return new it(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let i=Fr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Bt.newInvalidDocument(o))})),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Fr();const h=t.path,m=new we(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:T}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||pS(fS(T),i)<=0||(o.has(T.key)||Tc(t,T))&&(l=l.insert(T.key,T.mutableCopy()))}return J.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Se(9500)}ii(e,t){return J.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new UA(this)}getSize(e){return J.resolve(this.size)}}class UA extends DA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),J.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.persistence=e,this.si=new Si((t=>vf(t)),_f),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new kf,this.targetCount=0,this.ai=No.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),J.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new No(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Pr(t),J.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),J.waitFor(l).next((()=>o))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),J.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),J.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,t){this.ui={},this.overlays={},this.ci=new vc(0),this.li=!1,this.li=!0,this.hi=new bA,this.referenceDelegate=e(this),this.Pi=new zA(this),this.indexManager=new AA,this.remoteDocumentCache=(function(o){return new FA(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new IA(t),this.Ii=new MA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new jA(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const o=new BA(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return J.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class BA extends gS{constructor(e){super(),this.currentSequenceNumber=e}}class Cf{constructor(e){this.persistence=e,this.Ri=new kf,this.Vi=null}static mi(e){return new Cf(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(i=>{const o=we.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return J.or([()=>J.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class lc{constructor(e,t){this.persistence=e,this.pi=new Si((i=>_S(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=xA(this,t)}static mi(e,t){return new lc(e,t)}Ei(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return J.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?J.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(i++,l.removeEntry(h,Re.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),J.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),J.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zu(e.data.value)),t}br(e,t,i){return J.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return J.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Rf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return O0()?8:yS($t())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new $A;return this.Ss(e,t,h).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(po()<=Me.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(po()<=Me.DEBUG&&de("QueryEngine","Query:",mo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(po()<=Me.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):J.resolve())}ys(e,t){if(ay(t))return J.resolve(null);let i=sr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ld(t,null,"F"),i=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=be(...l);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const v=this.Ds(t,m);return this.Cs(t,v,h,g.readTime)?this.ys(e,Ld(t,null,"F")):this.vs(e,v,t,g)}))))})))))}ws(e,t,i,o){return ay(t)||o.isEqual(Re.min())?J.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?J.resolve(null):(po()<=Me.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mo(t)),this.vs(e,h,t,dS(o,Wa)).next((m=>m)))}))}Ds(e,t){let i=new Tt(I_(e));return t.forEach(((o,l)=>{Tc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return po()<=Me.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",mo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ns.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="LocalStore",WA=3e8;class qA{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new it(Le),this.xs=new Si((l=>vf(l)),_f),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function GA(r,e,t,i){return new qA(r,e,t,i)}async function q_(r,e){const t=xe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],m=[];let g=be();for(const v of o){h.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}for(const v of l){m.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(i,g).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function KA(r,e){const t=xe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,v,T){const S=v.batch,R=S.keys();let F=J.resolve();return R.forEach((q=>{F=F.next((()=>T.getEntry(g,q))).next((D=>{const U=v.docVersions.get(q);He(U!==null,48541),D.version.compareTo(U)<0&&(S.applyToRemoteDocument(D,v),D.isValidDocument()&&(D.setReadTime(v.commitVersion),T.addEntry(D)))}))})),F.next((()=>m.mutationQueue.removeMutationBatch(g,S)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=be();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function G_(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function QA(r,e){const t=xe(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((T,S)=>{const R=o.get(S);if(!R)return;m.push(t.Pi.removeMatchingKeys(l,T.removedDocuments,S).next((()=>t.Pi.addMatchingKeys(l,T.addedDocuments,S))));let F=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?F=F.withResumeToken(Ot.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(T.resumeToken,i)),o=o.insert(S,F),(function(D,U,W){return D.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=WA?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(R,F,T)&&m.push(t.Pi.updateTargetData(l,F))}));let g=Fr(),v=be();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,T))})),m.push(YA(l,h,e.documentUpdates).next((T=>{g=T.ks,v=T.qs}))),!i.isEqual(Re.min())){const T=t.Pi.getLastRemoteSnapshotVersion(l).next((S=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(T)}return J.waitFor(m).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,v))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function YA(r,e,t){let i=be(),o=be();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Fr();return t.forEach(((m,g)=>{const v=l.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):de(Pf,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function XA(r,e){const t=xe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=mf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function JA(r,e){const t=xe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,J.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Ss(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function zd(r,e,t){const i=xe(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!bo(h))throw h;de(Pf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function wy(r,e,t){const i=xe(r);let o=Re.min(),l=be();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,T){const S=xe(g),R=S.xs.get(T);return R!==void 0?J.resolve(S.Ms.get(R)):S.Pi.getTargetData(v,T)})(i,h,sr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Re.min(),t?l:be()))).next((m=>(ZA(i,jS(e),m),{documents:m,Qs:l})))))}function ZA(r,e,t){let i=r.Os.get(e)||Re.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class Ey{constructor(){this.activeTargetIds=HS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ek{constructor(){this.Mo=new Ey,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ey,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="ConnectivityMonitor";class Iy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Ty,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Ty,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function Bd(){return Du===null?Du=(function(){return 268435456+Math.round(2147483648*Math.random())})():Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="RestConnection",nk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===tc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=Bd(),m=this.zo(e,t.toUriEncodedString());de(md,`Sending RPC '${e}' ${h}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:v}=new URL(m),T=Do(v);return this.Jo(e,m,g,i,T).then((S=>(de(md,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw ko(md,`RPC '${e}' ${h} failed with error: `,S,"url: ",m,"request:",i),S}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=nk[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class ik extends rk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=Bd();return new Promise(((m,g)=>{const v=new Yv;v.setWithCredentials(!0),v.listenOnce(Xv.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Uu.NO_ERROR:const S=v.getResponseJson();de(Ut,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),m(S);break;case Uu.TIMEOUT:de(Ut,`RPC '${e}' ${h} timed out`),g(new fe(X.DEADLINE_EXCEEDED,"Request time out"));break;case Uu.HTTP_ERROR:const R=v.getStatus();if(de(Ut,`RPC '${e}' ${h} failed with status:`,R,"response text:",v.getResponseText()),R>0){let F=v.getResponseJson();Array.isArray(F)&&(F=F[0]);const q=F==null?void 0:F.error;if(q&&q.status&&q.message){const D=(function(W){const Z=W.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(Z)>=0?Z:X.UNKNOWN})(q.status);g(new fe(D,q.message))}else g(new fe(X.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new fe(X.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{de(Ut,`RPC '${e}' ${h} completed.`)}}));const T=JSON.stringify(o);de(Ut,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",T,i,15)}))}T_(e,t,i){const o=Bd(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=e_(),m=Zv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const T=l.join("");de(Ut,`Creating RPC '${e}' stream ${o}: ${T}`,g);const S=h.createWebChannel(T,g);this.I_(S);let R=!1,F=!1;const q=new sk({Yo:U=>{F?de(Ut,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(R||(de(Ut,`Opening RPC '${e}' stream ${o} transport.`),S.open(),R=!0),de(Ut,`RPC '${e}' stream ${o} sending:`,U),S.send(U))},Zo:()=>S.close()}),D=(U,W,Z)=>{U.listen(W,(Q=>{try{Z(Q)}catch(K){setTimeout((()=>{throw K}),0)}}))};return D(S,xa.EventType.OPEN,(()=>{F||(de(Ut,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),D(S,xa.EventType.CLOSE,(()=>{F||(F=!0,de(Ut,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(S))})),D(S,xa.EventType.ERROR,(U=>{F||(F=!0,ko(Ut,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),q.a_(new fe(X.UNAVAILABLE,"The operation could not be completed")))})),D(S,xa.EventType.MESSAGE,(U=>{var W;if(!F){const Z=U.data[0];He(!!Z,16349);const Q=Z,K=(Q==null?void 0:Q.error)||((W=Q[0])==null?void 0:W.error);if(K){de(Ut,`RPC '${e}' stream ${o} received error:`,K);const ie=K.status;let le=(function(C){const V=gt[C];if(V!==void 0)return O_(V)})(ie),P=K.message;le===void 0&&(le=X.INTERNAL,P="Unknown error status: "+ie+" with message "+K.message),F=!0,q.a_(new fe(le,P)),S.close()}else de(Ut,`RPC '${e}' stream ${o} received:`,Z),q.u_(Z)}})),D(m,Jv.STAT_EVENT,(U=>{U.stat===Pd.PROXY?de(Ut,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Pd.NOPROXY&&de(Ut,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(r){return new uA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="PersistentStream";class Q_{constructor(e,t,i,o,l,h,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new K_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new fe(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Sy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(Sy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ok extends Q_{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dA(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Re.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Re.min():h.readTime?or(h.readTime):Re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Ud(this.serializer),t.addTarget=(function(l,h){let m;const g=h.target;if(m=Od(g)?{documents:mA(l,g)}:{query:gA(l,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=b_(l,h.resumeToken);const v=bd(l,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Re.min())>0){m.readTime=ac(l,h.snapshotVersion.toTimestamp());const v=bd(l,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const i=vA(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Ud(this.serializer),t.removeTarget=e,this.q_(t)}}class ak extends Q_{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=pA(e.writeResults,e.commitTime),i=or(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Ud(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>fA(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{}class uk extends lk{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,jd(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(X.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,jd(t,i),o,h,m,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new fe(X.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ck{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(jr(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="RemoteStore";class hk{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{ki(this)&&(de(Ti,"Restarting streams for network reachability change."),await(async function(g){const v=xe(g);v.Ea.add(4),await cl(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Cc(v)})(this))}))})),this.Ra=new ck(i,o)}}async function Cc(r){if(ki(r))for(const e of r.da)await e(!0)}async function cl(r){for(const e of r.da)await e(!1)}function Y_(r,e){const t=xe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vf(t)?Df(t):jo(t).O_()&&xf(t,e))}function Nf(r,e){const t=xe(r),i=jo(t);t.Ia.delete(e),i.O_()&&X_(t,e),t.Ia.size===0&&(i.O_()?i.L_():ki(t)&&t.Ra.set("Unknown"))}function xf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jo(r).Y_(e)}function X_(r,e){r.Va.Ue(e),jo(r).Z_(e)}function Df(r){r.Va=new iA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),jo(r).start(),r.Ra.ua()}function Vf(r){return ki(r)&&!jo(r).x_()&&r.Ia.size>0}function ki(r){return xe(r).Ea.size===0}function J_(r){r.Va=void 0}async function dk(r){r.Ra.set("Online")}async function fk(r){r.Ia.forEach(((e,t)=>{xf(r,e)}))}async function pk(r,e){J_(r),Vf(r)?(r.Ra.ha(e),Df(r)):r.Ra.set("Unknown")}async function mk(r,e,t){if(r.Ra.set("Online"),e instanceof L_&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(i){de(Ti,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await uc(r,i)}else if(e instanceof Hu?r.Va.Ze(e):e instanceof M_?r.Va.st(e):r.Va.tt(e),!t.isEqual(Re.min()))try{const i=await G_(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const m=l.Va.Tt(h);return m.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const T=l.Ia.get(v);T&&l.Ia.set(v,T.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,v)=>{const T=l.Ia.get(g);if(!T)return;l.Ia.set(g,T.withResumeToken(Ot.EMPTY_BYTE_STRING,T.snapshotVersion)),X_(l,g);const S=new Ss(T.target,g,v,T.sequenceNumber);xf(l,S)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){de(Ti,"Failed to raise snapshot:",i),await uc(r,i)}}async function uc(r,e,t){if(!bo(e))throw e;r.Ea.add(1),await cl(r),r.Ra.set("Offline"),t||(t=()=>G_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{de(Ti,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Cc(r)}))}function Z_(r,e){return e().catch((t=>uc(r,t,e)))}async function Rc(r){const e=xe(r),t=Os(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mf;for(;gk(e);)try{const o=await XA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,yk(e,o)}catch(o){await uc(e,o)}ew(e)&&tw(e)}function gk(r){return ki(r)&&r.Ta.length<10}function yk(r,e){r.Ta.push(e);const t=Os(r);t.O_()&&t.X_&&t.ea(e.mutations)}function ew(r){return ki(r)&&!Os(r).x_()&&r.Ta.length>0}function tw(r){Os(r).start()}async function vk(r){Os(r).ra()}async function _k(r){const e=Os(r);for(const t of r.Ta)e.ea(t.mutations)}async function wk(r,e,t){const i=r.Ta.shift(),o=If.from(i,e,t);await Z_(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Rc(r)}async function Ek(r,e){e&&Os(r).X_&&await(async function(i,o){if((function(h){return nA(h)&&h!==X.ABORTED})(o.code)){const l=i.Ta.shift();Os(i).B_(),await Z_(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Rc(i)}})(r,e),ew(r)&&tw(r)}async function Ay(r,e){const t=xe(r);t.asyncQueue.verifyOperationInProgress(),de(Ti,"RemoteStore received new credentials");const i=ki(t);t.Ea.add(3),await cl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cc(t)}async function Tk(r,e){const t=xe(r);e?(t.Ea.delete(2),await Cc(t)):e||(t.Ea.add(2),await cl(t),t.Ra.set("Unknown"))}function jo(r){return r.ma||(r.ma=(function(t,i,o){const l=xe(t);return l.sa(),new ok(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:dk.bind(null,r),t_:fk.bind(null,r),r_:pk.bind(null,r),H_:mk.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Vf(r)?Df(r):r.Ra.set("Unknown")):(await r.ma.stop(),J_(r))}))),r.ma}function Os(r){return r.fa||(r.fa=(function(t,i,o){const l=xe(t);return l.sa(),new ak(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:vk.bind(null,r),r_:Ek.bind(null,r),ta:_k.bind(null,r),na:wk.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Rc(r)):(await r.fa.stop(),r.Ta.length>0&&(de(Ti,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,m=new Of(e,t,h,o,l);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mf(r,e){if(jr("AsyncQueue",`${e}: ${r}`),bo(r))return new fe(X.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{static emptySet(e){return new Eo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Da(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Eo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.ga=new it(we.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class xo{constructor(e,t,i,o,l,h,m,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new xo(e,t,Eo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ec(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Sk{constructor(){this.queries=Cy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=xe(t),l=o.queries;o.queries=Cy(),l.forEach(((h,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new fe(X.ABORTED,"Firestore shutting down"))}}function Cy(){return new Si((r=>T_(r)),Ec)}async function Ak(r,e){const t=xe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new Ik,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Mf(h,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Lf(t)}async function kk(r,e){const t=xe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Ck(r,e){const t=xe(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.Sa)m.Fa(o)&&(i=!0);h.wa=o}}i&&Lf(t)}function Rk(r,e,t){const i=xe(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function Lf(r){r.Ca.forEach((e=>{e.next()}))}var $d,Ry;(Ry=$d||($d={})).Ma="default",Ry.Cache="cache";class Pk{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$d.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.key=e}}class rw{constructor(e){this.key=e}}class Nk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=I_(e),this.tu=new Eo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new ky,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,S)=>{const R=o.get(T),F=Tc(this.query,S)?S:null,q=!!R&&this.mutatedKeys.has(R.key),D=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let U=!1;R&&F?R.data.isEqual(F.data)?q!==D&&(i.track({type:3,doc:F}),U=!0):this.su(R,F)||(i.track({type:2,doc:F}),U=!0,(g&&this.eu(F,g)>0||v&&this.eu(F,v)<0)&&(m=!0)):!R&&F?(i.track({type:0,doc:F}),U=!0):R&&!F&&(i.track({type:1,doc:R}),U=!0,(g||v)&&(m=!0)),U&&(F?(h=h.add(F),l=D?l.add(T):l.delete(T)):(h=h.delete(T),l=l.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),l=l.delete(T.key),i.track({type:1,doc:T})}return{tu:h,iu:i,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((T,S)=>(function(F,q){const D=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:U})}};return D(F)-D(q)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,v=g!==this.Za;return this.Za=g,h.length!==0||v?{snapshot:new xo(this.query,e.tu,l,h,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ky,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new rw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new nw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bf="SyncEngine";class xk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Dk{constructor(e){this.key=e,this.hu=!1}}class Vk{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Si((m=>T_(m)),Ec),this.Iu=new Map,this.Eu=new Set,this.du=new it(we.comparator),this.Au=new Map,this.Ru=new kf,this.Vu={},this.mu=new Map,this.fu=No.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ok(r,e,t=!0){const i=uw(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await sw(i,e,t,!0),o}async function Mk(r,e){const t=uw(r);await sw(t,e,!0,!1)}async function sw(r,e,t,i){const o=await JA(r.localStore,sr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return i&&(m=await Lk(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Y_(r.remoteStore,o),m}async function Lk(r,e,t,i,o){r.pu=(S,R,F)=>(async function(D,U,W,Z){let Q=U.view.ru(W);Q.Cs&&(Q=await wy(D.localStore,U.query,!1).then((({documents:P})=>U.view.ru(P,Q))));const K=Z&&Z.targetChanges.get(U.targetId),ie=Z&&Z.targetMismatches.get(U.targetId)!=null,le=U.view.applyChanges(Q,D.isPrimaryClient,K,ie);return Ny(D,U.targetId,le.au),le.snapshot})(r,S,R,F);const l=await wy(r.localStore,e,!0),h=new Nk(e,l.Qs),m=h.ru(l.documents),g=ul.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(m,r.isPrimaryClient,g);Ny(r,t,v.au);const T=new xk(e,t,h);return r.Tu.set(e,T),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function bk(r,e,t){const i=xe(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Ec(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await zd(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Nf(i.remoteStore,o.targetId),Hd(i,o.targetId)})).catch(Lo)):(Hd(i,o.targetId),await zd(i.localStore,o.targetId,!0))}async function jk(r,e){const t=xe(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Nf(t.remoteStore,i.targetId))}async function Fk(r,e,t){const i=qk(r);try{const o=await(function(h,m){const g=xe(h),v=et.now(),T=m.reduce(((F,q)=>F.add(q.key)),be());let S,R;return g.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let q=Fr(),D=be();return g.Ns.getEntries(F,T).next((U=>{q=U,q.forEach(((W,Z)=>{Z.isValidDocument()||(D=D.add(W))}))})).next((()=>g.localDocuments.getOverlayedDocuments(F,q))).next((U=>{S=U;const W=[];for(const Z of m){const Q=XS(Z,S.get(Z.key).overlayedDocument);Q!=null&&W.push(new Ai(Z.key,Q,p_(Q.value.mapValue),ir.exists(!0)))}return g.mutationQueue.addMutationBatch(F,v,W,m)})).next((U=>{R=U;const W=U.applyToLocalDocumentSet(S,D);return g.documentOverlayCache.saveOverlays(F,U.batchId,W)}))})).then((()=>({batchId:R.batchId,changes:A_(S)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let v=h.Vu[h.currentUser.toKey()];v||(v=new it(Le)),v=v.insert(m,g),h.Vu[h.currentUser.toKey()]=v})(i,o.batchId,t),await hl(i,o.changes),await Rc(i.remoteStore)}catch(o){const l=Mf(o,"Failed to persist write");t.reject(l)}}async function iw(r,e){const t=xe(r);try{const i=await QA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?He(h.hu,14607):o.removedDocuments.size>0&&(He(h.hu,42227),h.hu=!1))})),await hl(t,i,e)}catch(i){await Lo(i)}}function Py(r,e,t){const i=xe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=xe(h);g.onlineState=m;let v=!1;g.queries.forEach(((T,S)=>{for(const R of S.Sa)R.va(m)&&(v=!0)})),v&&Lf(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Uk(r,e,t){const i=xe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new it(we.comparator);h=h.insert(l,Bt.newNoDocument(l,Re.min()));const m=be().add(l),g=new Ac(Re.min(),new Map,new it(Le),h,m);await iw(i,g),i.du=i.du.remove(l),i.Au.delete(e),jf(i)}else await zd(i.localStore,e,!1).then((()=>Hd(i,e,t))).catch(Lo)}async function zk(r,e){const t=xe(r),i=e.batch.batchId;try{const o=await KA(t.localStore,e);aw(t,i,null),ow(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await hl(t,o)}catch(o){await Lo(o)}}async function Bk(r,e,t){const i=xe(r);try{const o=await(function(h,m){const g=xe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let T;return g.mutationQueue.lookupMutationBatch(v,m).next((S=>(He(S!==null,37113),T=S.keys(),g.mutationQueue.removeMutationBatch(v,S)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T))).next((()=>g.localDocuments.getDocuments(v,T)))}))})(i.localStore,e);aw(i,e,t),ow(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await hl(i,o)}catch(o){await Lo(o)}}function ow(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function aw(r,e,t){const i=xe(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Hd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||lw(r,i)}))}function lw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Nf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),jf(r))}function Ny(r,e,t){for(const i of t)i instanceof nw?(r.Ru.addReference(i.key,e),$k(r,i)):i instanceof rw?(de(bf,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||lw(r,i.key)):Se(19791,{wu:i})}function $k(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(de(bf,"New document in limbo: "+t),r.Eu.add(i),jf(r))}function jf(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new we(Ye.fromString(e)),i=r.fu.next();r.Au.set(i,new Dk(t)),r.du=r.du.insert(t,i),Y_(r.remoteStore,new Ss(sr(wf(t.path)),i,"TargetPurposeLimboResolution",vc.ce))}}async function hl(r,e,t){const i=xe(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{h.push(i.pu(g,e,t).then((v=>{var T;if((v||t)&&i.isPrimaryClient){const S=v?!v.fromCache:(T=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:T.current;i.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(v){o.push(v);const S=Rf.As(g.targetId,v);l.push(S)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,v){const T=xe(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>J.forEach(v,(R=>J.forEach(R.Es,(F=>T.persistence.referenceDelegate.addReference(S,R.targetId,F))).next((()=>J.forEach(R.ds,(F=>T.persistence.referenceDelegate.removeReference(S,R.targetId,F)))))))))}catch(S){if(!bo(S))throw S;de(Pf,"Failed to update sequence numbers: "+S)}for(const S of v){const R=S.targetId;if(!S.fromCache){const F=T.Ms.get(R),q=F.snapshotVersion,D=F.withLastLimboFreeSnapshotVersion(q);T.Ms=T.Ms.insert(R,D)}}})(i.localStore,l))}async function Hk(r,e){const t=xe(r);if(!t.currentUser.isEqual(e)){de(bf,"User change. New user:",e.toKey());const i=await q_(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new fe(X.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await hl(t,i.Ls)}}function Wk(r,e){const t=xe(r),i=t.Au.get(e);if(i&&i.hu)return be().add(i.key);{let o=be();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function uw(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uk.bind(null,e),e.Pu.H_=Ck.bind(null,e.eventManager),e.Pu.yu=Rk.bind(null,e.eventManager),e}function qk(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bk.bind(null,e),e}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return GA(this.persistence,new HA,e.initialUser,this.serializer)}Cu(e){return new W_(Cf.mi,this.serializer)}Du(e){return new ek}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class Gk extends cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof lc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new PA(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new W_((i=>lc.mi(i,t)),this.serializer)}}class Wd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Py(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hk.bind(null,this.syncEngine),await Tk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Sk})()}createDatastore(e){const t=kc(e.databaseInfo.databaseId),i=(function(l){return new ik(l)})(e.databaseInfo);return(function(l,h,m,g){return new uk(l,h,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,m){return new hk(i,o,l,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Py(this.syncEngine,t,0)),(function(){return Iy.v()?new Iy:new tk})())}createSyncEngine(e,t){return(function(o,l,h,m,g,v,T){const S=new Vk(o,l,h,m,g,v);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=xe(o);de(Ti,"RemoteStore shutting down."),l.Ea.add(5),await cl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Wd.provider={build:()=>new Wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="FirestoreClient";class Qk{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=pf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{de(Ms,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(de(Ms,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Mf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function yd(r,e){r.asyncQueue.verifyOperationInProgress(),de(Ms,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await q_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function xy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Yk(r);de(Ms,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Ay(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Ay(e.remoteStore,o))),r._onlineComponents=e}async function Yk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){de(Ms,"Using user provided OfflineComponentProvider");try{await yd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ko("Error using user provided cache. Falling back to memory cache: "+t),await yd(r,new cc)}}else de(Ms,"Using default OfflineComponentProvider"),await yd(r,new Gk(void 0));return r._offlineComponents}async function cw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(de(Ms,"Using user provided OnlineComponentProvider"),await xy(r,r._uninitializedComponentsProvider._online)):(de(Ms,"Using default OnlineComponentProvider"),await xy(r,new Wd))),r._onlineComponents}function Xk(r){return cw(r).then((e=>e.syncEngine))}async function Dy(r){const e=await cw(r),t=e.eventManager;return t.onListen=Ok.bind(null,e.syncEngine),t.onUnlisten=bk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Mk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jk.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="firestore.googleapis.com",Oy=!0;class My{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dw,this.ssl=Oy}else this.host=e.host,this.ssl=e.ssl??Oy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=H_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CA)throw new fe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new My({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new My(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new tS;switch(i.type){case"firstParty":return new iS(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Vy.get(t);i&&(de("ComponentProvider","Removing Datastore"),Vy.delete(t),i.terminate())})(this),Promise.resolve()}}function Jk(r,e,t,i={}){var v;r=mi(r,Pc);const o=Do(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(hv(`https://${m}`),dv("Firestore",!0)),l.host!==dw&&l.host!==m&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:o,emulatorOptions:i};if(!vi(g,h)&&(r._setSettings(g),i.mockUserToken)){let T,S;if(typeof i.mockUserToken=="string")T=i.mockUserToken,S=zt.MOCK_USER;else{T=A0(i.mockUserToken,(v=r._app)==null?void 0:v.options.projectId);const R=i.mockUserToken.sub||i.mockUserToken.user_id;if(!R)throw new fe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new zt(R)}r._authCredentials=new nS(new n_(T,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class _t{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ol(t,_t._jsonSchema))return new _t(e,i||null,new we(Ye.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:vt("string",_t._jsonSchemaVersion),referencePath:vt("string")};class Ps extends Fo{constructor(e,t,i){super(e,t,wf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new we(e))}withConverter(e){return new Ps(this.firestore,e,this._path)}}function fw(r,e,...t){if(r=qt(r),r_("collection","path",e),r instanceof Pc){const i=Ye.fromString(e,...t);return Gg(i),new Ps(r,null,i)}{if(!(r instanceof _t||r instanceof Ps))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return Gg(i),new Ps(r.firestore,null,i)}}function dl(r,e,...t){if(r=qt(r),arguments.length===1&&(e=pf.newId()),r_("doc","path",e),r instanceof Pc){const i=Ye.fromString(e,...t);return qg(i),new _t(r,null,new we(i))}{if(!(r instanceof _t||r instanceof Ps))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return qg(i),new _t(r.firestore,r instanceof Ps?r.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="AsyncQueue";class by{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new K_(this,"async_queue_retry"),this._c=()=>{const i=gd();i&&de(Ly,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=gd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bo(e))throw e;de(Ly,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,jr("INTERNAL UNHANDLED ERROR: ",jy(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Of.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Se(47125,{Pc:jy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function jy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class Xa extends Pc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new by,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new by(e),this._firestoreClient=void 0,await e}}}function Zk(r,e){const t=typeof r=="object"?r:gv(),i=typeof r=="string"?r:tc,o=tf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=I0("firestore");l&&Jk(o,...l)}return o}function pw(r){if(r._terminated)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||eC(r),r._firestoreClient}function eC(r){var i,o,l;const e=r._freezeSettings(),t=(function(m,g,v,T){return new TS(m,g,v,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,hw(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Qk(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(Ot.fromBase64String(e))}catch(t){throw new fe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ol(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:vt("string",wn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ar._jsonSchemaVersion}}static fromJSON(e){if(ol(e,ar._jsonSchema))return new ar(e.latitude,e.longitude)}}ar._jsonSchemaVersion="firestore/geoPoint/1.0",ar._jsonSchema={type:vt("string",ar._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ol(e,lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new lr(e.vectorValues);throw new fe(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}lr._jsonSchemaVersion="firestore/vectorValue/1.0",lr._jsonSchema={type:vt("string",lr._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=/^__.*__$/;class nC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms):new ll(e,this.data,t,this.fieldTransforms)}}function gw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class Uf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Uf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gw(this.Ac)&&tC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||kc(e)}Cc(e,t,i,o=!1){return new Uf({Ac:e,methodName:t,Dc:i,path:Vt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yw(r){const e=r._freezeSettings(),t=kc(r._databaseId);return new rC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function sC(r,e,t,i,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);ww("Data must be an object, but it was:",h,i);const m=vw(i,h);let g,v;if(l.merge)g=new Dn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const T=[];for(const S of l.mergeFields){const R=oC(e,S,t);if(!h.contains(R))throw new fe(X.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);lC(T,R)||T.push(R)}g=new Dn(T),v=h.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,v=h.fieldTransforms;return new nC(new _n(m),g,v)}function iC(r,e,t,i=!1){return zf(t,r.Cc(i?4:3,e))}function zf(r,e){if(_w(r=qt(r)))return ww("Unsupported field value:",e,r),vw(r,e);if(r instanceof mw)return(function(i,o){if(!gw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const m of i){let g=zf(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return WS(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=et.fromDate(i);return{timestampValue:ac(o.serializer,l)}}if(i instanceof et){const l=new et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ac(o.serializer,l)}}if(i instanceof ar)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof wn)return{bytesValue:b_(o.serializer,i._byteString)};if(i instanceof _t){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Af(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof lr)return(function(h,m){return{mapValue:{fields:{[d_]:{stringValue:f_},[nc]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw m.Sc("VectorValues must only contain numeric values.");return Ef(m.serializer,v)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${yc(i)}`)})(r,e)}function vw(r,e){const t={};return o_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(r,((i,o)=>{const l=zf(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function _w(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof et||r instanceof ar||r instanceof wn||r instanceof _t||r instanceof mw||r instanceof lr)}function ww(r,e,t){if(!_w(t)||!s_(t)){const i=yc(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function oC(r,e,t){if((e=qt(e))instanceof Ff)return e._internalPath;if(typeof e=="string")return Ew(r,e);throw hc("Field path arguments must be of type string or ",r,!1,void 0,t)}const aC=new RegExp("[~\\*/\\[\\]]");function Ew(r,e,t){if(e.search(aC)>=0)throw hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Ff(...e.split("."))._internalPath}catch{throw hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function hc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new fe(X.INVALID_ARGUMENT,m+r+g)}function lC(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Iw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uC extends Tw{data(){return super.data()}}function Iw(r,e){return typeof e=="string"?Ew(r,e):e instanceof Ff?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bf{}class hC extends Bf{}function Sw(r,e,...t){let i=[];e instanceof Bf&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((g=>g instanceof Hf)).length,m=l.filter((g=>g instanceof $f)).length;if(h>1||h>0&&m>0)throw new fe(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class $f extends hC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new $f(e,t,i)}_apply(e){const t=this._parse(e);return Aw(e._query,t),new Fo(e.firestore,e.converter,Md(e._query,t))}_parse(e){const t=yw(e.firestore);return(function(l,h,m,g,v,T,S){let R;if(v.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new fe(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){zy(S,T);const q=[];for(const D of S)q.push(Uy(g,l,D));R={arrayValue:{values:q}}}else R=Uy(g,l,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||zy(S,T),R=iC(m,h,S,T==="in"||T==="not-in");return yt.create(v,T,R)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Hf extends Bf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:On.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const m=l.getFlattenedFilters();for(const g of m)Aw(h,g),h=Md(h,g)})(e._query,t),new Fo(e.firestore,e.converter,Md(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Uy(r,e,t){if(typeof(t=qt(t))=="string"){if(t==="")throw new fe(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E_(e)&&t.indexOf("/")!==-1)throw new fe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ye.fromString(t));if(!we.isDocumentKey(i))throw new fe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ty(r,new we(i))}if(t instanceof _t)return ty(r,t._key);throw new fe(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yc(t)}.`)}function zy(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Aw(r,e){const t=(function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class dC{convertValue(e,t="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ii(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[nc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>ft(h.doubleValue)));return new lr(t)}convertGeoPoint(e){return new ar(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=wc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(qa(e));default:return null}}convertTimestamp(e){const t=xs(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ye.fromString(e);He($_(i),9688,{name:e});const o=new Ga(i.get(1),i.get(3)),l=new we(i.popFirst(5));return o.isEqual(t)||jr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Oa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gi extends Tw{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Iw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=gi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}gi._jsonSchemaVersion="firestore/documentSnapshot/1.0",gi._jsonSchema={type:vt("string",gi._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class Wu extends gi{data(e={}){return super.data(e)}}class To{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Oa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Wu(this._firestore,this._userDataWriter,i.key,i,new Oa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Wu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Oa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new Wu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Oa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,T=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),T=h.indexOf(m.doc.key)),{type:pC(m.type),doc:g,oldIndex:v,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=To._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:vt("string",To._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class kw extends dC{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function Wf(r,e,t){r=mi(r,_t);const i=mi(r.firestore,Xa),o=fC(r.converter,e);return Pw(i,[sC(yw(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,ir.none())])}function Cw(r){return Pw(mi(r.firestore,Xa),[new Tf(r._key,ir.none())])}function Rw(r,...e){var g,v,T;r=qt(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Fy(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Fy(e[i])){const S=e[i];e[i]=(g=S.next)==null?void 0:g.bind(S),e[i+1]=(v=S.error)==null?void 0:v.bind(S),e[i+2]=(T=S.complete)==null?void 0:T.bind(S)}let l,h,m;if(r instanceof _t)h=mi(r.firestore,Xa),m=wf(r._key.path),l={next:S=>{e[i]&&e[i](mC(h,r,S))},error:e[i+1],complete:e[i+2]};else{const S=mi(r,Fo);h=mi(S.firestore,Xa),m=S._query;const R=new kw(h);l={next:F=>{e[i]&&e[i](new To(h,R,S,F))},error:e[i+1],complete:e[i+2]},cC(r._query)}return(function(R,F,q,D){const U=new Kk(D),W=new Pk(F,U,q);return R.asyncQueue.enqueueAndForget((async()=>Ak(await Dy(R),W))),()=>{U.Nu(),R.asyncQueue.enqueueAndForget((async()=>kk(await Dy(R),W)))}})(pw(h),m,o,l)}function Pw(r,e){return(function(i,o){const l=new pi;return i.asyncQueue.enqueueAndForget((async()=>Fk(await Xk(i),o,l))),l.promise})(pw(r),e)}function mC(r,e,t){const i=t.docs.get(e._key),o=new kw(r);return new gi(r,o,e._key,i,new Oa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Mo=o})(Vo),So(new _i("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),m=new Xa(new rS(i.getProvider("auth-internal")),new oS(h,i.getProvider("app-check-internal")),(function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new fe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(v.options.projectId,T)})(h,o),h);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Cs(Bg,$g,e),Cs(Bg,$g,"esm2020")})();const gC={apiKey:"AIzaSyD2N3dF2lfgFCU7MTUOfXAmBOiEcjWb4II",authDomain:"movie-search-c7e29.firebaseapp.com",projectId:"movie-search-c7e29",storageBucket:"movie-search-c7e29.firebasestorage.app",messagingSenderId:"360706376856",appId:"1:360706376856:web:7bc9921aaea6a4ef327ced"},Nw=mv(gC),vd=XI(Nw),xw=Zk(Nw),yC=new Dr,Dw=G.createContext(void 0);function vC({children:r}){const[e,t]=G.useState(null),[i,o]=G.useState(!0);G.useEffect(()=>{const m=F1(vd,g=>{t(g),o(!1)});return()=>m()},[]);const l=async()=>{try{await oI(vd,yC)}catch(m){throw console.error("Error signing in with Google:",m),m}},h=async()=>{try{await U1(vd)}catch(m){throw console.error("Error signing out:",m),m}};return _.jsx(Dw.Provider,{value:{user:e,loading:i,signInWithGoogle:l,signOut:h},children:r})}function qf(){const r=G.useContext(Dw);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),By=r=>{const e=wC(r);return e.charAt(0).toUpperCase()+e.slice(1)},Vw=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),EC=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=G.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...m},g)=>G.createElement("svg",{ref:g,...TC,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:Vw("lucide",o),...!l&&!EC(m)&&{"aria-hidden":"true"},...m},[...h.map(([v,T])=>G.createElement(v,T)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(r,e)=>{const t=G.forwardRef(({className:i,...o},l)=>G.createElement(IC,{ref:l,iconNode:e,className:Vw(`lucide-${_C(By(r))}`,`lucide-${r}`,i),...o}));return t.displayName=By(r),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],AC=Ge("bookmark-check",SC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],CC=Ge("calendar",kC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ow=Ge("check",RC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Mw=Ge("chevron-left",PC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Lw=Ge("chevron-right",NC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],DC=Ge("circle-check-big",xC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],OC=Ge("circle-x",VC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],LC=Ge("cloud",MC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],jC=Ge("external-link",bC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],UC=Ge("eye-off",FC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],BC=Ge("eye",zC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],bw=Ge("film",$C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Io=Ge("heart",HC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],qd=Ge("image-off",WC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],za=Ge("loader-circle",qC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],KC=Ge("log-in",GC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],YC=Ge("log-out",QC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],JC=Ge("map-pin",XC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],eR=Ge("play",ZC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Gd=Ge("plus",tR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$y=Ge("refresh-cw",nR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sR=Ge("search",rR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ja=Ge("star",iR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],Ba=Ge("thumbs-up",oR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],lR=Ge("ticket",aR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jw=Ge("trash-2",uR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hy=Ge("user",cR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Za=Ge("x",hR);function dR(){const{language:r,setLanguage:e,t}=dr(),i=o=>{e(o.target.value)};return _.jsx("div",{className:"language-selector",children:_.jsxs("select",{value:r,onChange:i,className:"language-select","aria-label":t("language"),children:[_.jsx("option",{value:"hu",children:""}),_.jsx("option",{value:"en",children:""})]})})}const fR=({syncing:r,onFavoritesClick:e})=>{const{user:t,loading:i,signInWithGoogle:o,signOut:l}=qf(),{t:h}=dr(),[m,g]=G.useState(!1),v=G.useRef(null);G.useEffect(()=>{const R=F=>{v.current&&!v.current.contains(F.target)&&g(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const T=async()=>{try{await o()}catch(R){console.error("Sign in failed:",R)}},S=async()=>{try{await l(),g(!1)}catch(R){console.error("Sign out failed:",R)}};return i?_.jsx("div",{className:"user-menu__loading",children:_.jsx(Hy,{size:18})}):t?_.jsxs("div",{className:"user-menu",ref:v,children:[_.jsxs("button",{className:"user-menu__trigger",onClick:()=>g(!m),"aria-expanded":m,children:[t.photoURL?_.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"user-menu__avatar"}):_.jsx("div",{className:"user-menu__avatar-placeholder",children:_.jsx(Hy,{size:16})}),r&&_.jsx("span",{className:"user-menu__sync-indicator",title:h("syncingWatchlist"),children:_.jsx(LC,{size:12})})]}),m&&_.jsxs("div",{className:"user-menu__dropdown",children:[_.jsxs("div",{className:"user-menu__user-info",children:[t.photoURL&&_.jsx("img",{src:t.photoURL,alt:"",className:"user-menu__dropdown-avatar"}),_.jsxs("div",{className:"user-menu__user-details",children:[_.jsx("span",{className:"user-menu__user-name",children:t.displayName}),_.jsx("span",{className:"user-menu__user-email",children:t.email})]})]}),_.jsx("div",{className:"user-menu__divider"}),_.jsxs("button",{className:"user-menu__option",onClick:()=>{e==null||e(),g(!1)},children:[_.jsx(Io,{size:16}),_.jsx("span",{children:h("favorites")})]}),_.jsxs("button",{className:"user-menu__option",onClick:S,children:[_.jsx(YC,{size:16}),_.jsx("span",{children:h("signOut")})]})]})]}):_.jsxs("button",{className:"user-menu__sign-in",onClick:T,children:[_.jsx(KC,{size:16}),_.jsx("span",{className:"user-menu__sign-in-text",children:h("signIn")})]})},pR=({onSearch:r,mediaType:e,browseMode:t,onMediaTypeChange:i,onTheatersClick:o,onWatchlistClick:l,watchlistCount:h,syncing:m,onFavoritesClick:g})=>{const[v,T]=G.useState(""),{t:S}=dr(),R=q=>{q.preventDefault(),r(v)},F=()=>{T(""),r("")};return _.jsx("header",{className:"header",children:_.jsxs("div",{className:"header__content",children:[_.jsxs("div",{className:"header__brand",children:[_.jsx(bw,{size:24}),_.jsx("span",{className:"header__title",children:S("appTitle")})]}),_.jsxs("div",{className:"header__media-toggle",children:[_.jsx("button",{className:`header__media-btn ${e==="movie"&&t!=="theaters"?"active":""}`,onClick:()=>i("movie"),children:S("movies")}),_.jsx("button",{className:`header__media-btn ${e==="tv"?"active":""}`,onClick:()=>i("tv"),children:S("tvShows")}),_.jsx("button",{className:`header__media-btn ${t==="theaters"?"active":""}`,onClick:o,children:S("theaters")})]}),_.jsx("form",{className:"header__search",onSubmit:R,children:_.jsxs("div",{className:"header__search-wrapper",children:[_.jsx(sR,{size:16,className:"header__search-icon"}),_.jsx("input",{type:"text",placeholder:S(e==="tv"?"searchTvPlaceholder":"searchMoviePlaceholder"),value:v,onChange:q=>T(q.target.value),className:"header__search-input"}),v&&_.jsx("button",{type:"button",className:"header__search-clear",onClick:F,children:_.jsx(Za,{size:14})})]})}),_.jsxs("button",{className:"header__watchlist-btn",onClick:l,children:[_.jsx(AC,{size:18}),_.jsx("span",{className:"header__watchlist-text",children:S("watchlist")}),h>0&&_.jsx("span",{className:"header__watchlist-count",children:h})]}),_.jsxs("div",{className:"header__actions",children:[_.jsx(dR,{}),_.jsx(fR,{syncing:m,onFavoritesClick:g})]})]})})},mR="a9b57b24fd99c4b6ad86f746a0f985e6",gR="https://api.themoviedb.org/3",yR="https://image.tmdb.org/t/p",nr={poster:{small:"w185",medium:"w342",large:"w500"},logo:{small:"w45",medium:"w92"}},Mr=(r,e=nr.poster.medium)=>r?`${yR}/${e}${r}`:"/placeholder-movie.svg",hr="HU",vR="hu-HU",Wy=new Date().getFullYear(),qy=Array.from({length:Wy-1989},(r,e)=>Wy-e),_R=({genres:r,providers:e,certifications:t,selectedGenres:i,selectedProviders:o,selectedCertification:l,sortBy:h,minRating:m=0,yearFrom:g,yearTo:v,browseMode:T="streaming",availableCities:S=[],availableDates:R=[],selectedCity:F="",selectedDate:q="",onCityChange:D,onDateChange:U,onGenreChange:W,onProviderChange:Z,onCertificationChange:Q,onSortChange:K,onRatingChange:ie,onYearFromChange:le,onYearToChange:P,onBrowseModeChange:A,onClearFilters:C,mediaType:V,isCollapsed:N=!1,onToggleCollapse:L})=>{const{t:E}=dr(),Ie=H=>{const ve=new Date(H),Pe=new Date;Pe.setHours(0,0,0,0);const De=new Date(Pe);return De.setDate(De.getDate()+1),ve.toDateString()===Pe.toDateString()?E("today"):ve.toDateString()===De.toDateString()?E("tomorrow"):ve.toLocaleDateString("hu-HU",{weekday:"short",month:"short",day:"numeric"})},Oe=[{value:"popularity.desc",label:E("sortMostPopular")},{value:"vote_average.desc",label:E("sortBestRated")},{value:"primary_release_date.desc",label:E("sortNewest")},{value:"title.asc",label:E("sortTitleAZ")}],je=[{value:"popularity.desc",label:E("sortMostPopular")},{value:"vote_average.desc",label:E("sortBestRated")},{value:"first_air_date.desc",label:E("sortNewest")},{value:"name.asc",label:E("sortTitleAZ")}],Ce=[{value:0,label:E("ratingAny")},{value:6,label:"6+ "},{value:7,label:"7+ "},{value:8,label:"8+ "},{value:9,label:"9+ "}],oe={KN:E("certKN"),6:E("cert6"),12:E("cert12"),16:E("cert16"),18:E("cert18"),G:E("certG"),PG:E("certPG"),"PG-13":E("certPG13"),R:E("certR"),"NC-17":E("certNC17")},me=H=>{i.includes(H)?W(i.filter(ve=>ve!==H)):W([...i,H])},ce=H=>{o.includes(H)?Z(o.filter(ve=>ve!==H)):Z([...o,H])},M=i.length>0||o.length>0||l!==""||m>0||g!==void 0||v!==void 0||F!==""||q!==""||T!=="streaming",Y=V==="movie"?[{value:"streaming",label:E("browseStreaming")},{value:"trending",label:E("browseTrending")},{value:"theaters",label:E("browseTheaters")},{value:"upcoming",label:E("browseUpcoming")}]:[{value:"streaming",label:E("browseStreaming")},{value:"trending",label:E("browseTrending")}],ne=V==="tv"?je:Oe,ue=i.length+o.length+(l?1:0)+(m>0?1:0)+(g?1:0)+(v?1:0)+(F?1:0)+(q?1:0);return _.jsxs("aside",{className:`filter-panel ${N?"collapsed":""}`,children:[L&&_.jsxs("button",{className:"filter-panel__toggle",onClick:L,title:E(N?"showFilters":"hideFilters"),children:[N?_.jsx(Lw,{size:20}):_.jsx(Mw,{size:20}),N&&ue>0&&_.jsx("span",{className:"filter-panel__badge",children:ue})]}),_.jsxs("div",{className:"filter-panel__content",children:[_.jsxs("div",{className:"filter-panel__header",children:[_.jsx("h2",{children:E("filters")}),M&&_.jsx("button",{className:"filter-panel__clear",onClick:C,children:E("clearFilters")})]}),A&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:E("browseMode")}),_.jsx("div",{className:"filter-chips",children:Y.map(H=>_.jsx("button",{className:`filter-chip ${T===H.value?"active":""}`,onClick:()=>A(H.value),children:H.label},H.value))})]}),(T==="streaming"||T==="theaters")&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:E("sortBy")}),_.jsx("select",{value:h,onChange:H=>K(H.target.value),className:"filter-select",children:ne.map(H=>_.jsx("option",{value:H.value,children:H.label},H.value))})]}),T==="theaters"&&S.length>0&&D&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:E("city")}),_.jsxs("select",{value:F,onChange:H=>D(H.target.value),className:"filter-select",children:[_.jsx("option",{value:"",children:E("allCities")}),S.map(H=>_.jsx("option",{value:H,children:H},H))]})]}),T==="theaters"&&R.length>0&&U&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:E("date")}),_.jsxs("div",{className:"filter-chips filter-chips--dates",children:[_.jsx("button",{className:`filter-chip ${q===""?"active":""}`,onClick:()=>U(""),children:E("allDates")}),R.map(H=>_.jsx("button",{className:`filter-chip ${q===H?"active":""}`,onClick:()=>U(H),children:Ie(H)},H))]})]}),(T==="streaming"||T==="theaters")&&ie&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:E("minimumRating")}),_.jsx("div",{className:"filter-chips",children:Ce.map(H=>_.jsx("button",{className:`filter-chip ${m===H.value?"active":""}`,onClick:()=>ie(H.value),children:H.label},H.value))})]}),(T==="streaming"||T==="theaters")&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:E("categories")}),_.jsx("div",{className:"filter-chips",children:r.map(H=>_.jsx("button",{className:`filter-chip ${i.includes(H.id)?"active":""}`,onClick:()=>me(H.id),children:H.name},H.id))})]}),T==="streaming"&&_.jsxs(_.Fragment,{children:[(le||P)&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:E("releaseYear")}),_.jsxs("div",{className:"filter-year-range",children:[_.jsxs("select",{value:g||"",onChange:H=>le==null?void 0:le(H.target.value?parseInt(H.target.value):void 0),className:"filter-select filter-select--small",children:[_.jsx("option",{value:"",children:E("yearFrom")}),qy.map(H=>_.jsx("option",{value:H,children:H},H))]}),_.jsx("span",{className:"filter-year-separator",children:"-"}),_.jsxs("select",{value:v||"",onChange:H=>P==null?void 0:P(H.target.value?parseInt(H.target.value):void 0),className:"filter-select filter-select--small",children:[_.jsx("option",{value:"",children:E("yearTo")}),qy.map(H=>_.jsx("option",{value:H,children:H},H))]})]})]}),V==="movie"&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:E("ageRating")}),_.jsxs("div",{className:"filter-chips",children:[_.jsx("button",{className:`filter-chip ${l===""?"active":""}`,onClick:()=>Q(""),children:E("all")}),t.map(H=>_.jsx("button",{className:`filter-chip ${l===H.certification?"active":""}`,onClick:()=>Q(H.certification),title:oe[H.certification]||H.meaning,children:H.certification},H.certification))]})]}),_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:E("streamingProviders")}),_.jsx("div",{className:"filter-providers",children:e.map(H=>_.jsx("button",{className:`filter-provider ${o.includes(H.provider_id)?"active":""}`,onClick:()=>ce(H.provider_id),title:H.provider_name,children:_.jsx("img",{src:Mr(H.logo_path,nr.logo.medium),alt:H.provider_name})},H.provider_id))})]})]})]})]})},dc=(r,e)=>`${e}_${r}`,Gf=r=>fw(xw,"users",r,"favorites"),Kd=async(r,e)=>{const t=dl(Gf(r),dc(e.id,e.mediaType));await Wf(t,e)},_d=async(r,e,t)=>{const i=dl(Gf(r),dc(e,t));await Cw(i)},wR=(r,e,t)=>{const i=Sw(Gf(r));return Rw(i,o=>{const l=[];o.forEach(h=>{l.push(h.data())}),l.sort((h,m)=>new Date(m.addedAt).getTime()-new Date(h.addedAt).getTime()),e(l)},o=>{console.error("Firestore favorites subscription error:",o),t==null||t(o)})},ER=(r,e)=>{const t=new Map;return e.forEach(i=>{t.set(dc(i.id,i.mediaType),i)}),r.forEach(i=>{const o=dc(i.id,i.mediaType),l=t.get(o);l?t.set(o,{...l,liked:l.liked||i.liked,loved:l.loved||i.loved}):t.set(o,i)}),Array.from(t.values()).sort((i,o)=>new Date(o.addedAt).getTime()-new Date(i.addedAt).getTime())},TR=async(r,e)=>{const t=e.map(i=>Kd(r,i));await Promise.all(t)},Fw="movie-search-favorites",Gy=r=>"title"in r,Ky=()=>{if(typeof window>"u")return[];const r=localStorage.getItem(Fw);if(r)try{return JSON.parse(r)}catch(e){console.error("Failed to parse favorites:",e)}return[]},Vu=r=>{localStorage.setItem(Fw,JSON.stringify(r))},Nc=()=>{const{user:r}=qf(),[e,t]=G.useState([]),[i,o]=G.useState(!0),[l,h]=G.useState(!1),m=G.useRef(!1),g=G.useRef(null);G.useEffect(()=>{const D=Ky();t(D),o(!1)},[]),G.useEffect(()=>{if(!r){g.current=null,m.current=!1;return}g.current!==r.uid&&(g.current=r.uid,m.current=!1),h(!0);const D=wR(r.uid,async U=>{if(m.current)t(U),Vu(U);else{m.current=!0;const W=Ky();if(W.length>0){const Z=ER(W,U);t(Z),Vu(Z);const Q=W.filter(K=>!U.some(ie=>ie.id===K.id&&ie.mediaType===K.mediaType));if(Q.length>0)try{await TR(r.uid,Q)}catch(K){console.error("Failed to sync local favorites to cloud:",K)}}else t(U),Vu(U)}h(!1)},U=>{console.error("Favorites subscription error:",U),h(!1)});return()=>D()},[r]),G.useEffect(()=>{!i&&!l&&Vu(e)},[e,i,l]);const v=G.useCallback((D,U)=>{const W=e.find(K=>K.id===D.id&&K.mediaType===U);if(W)return W;const Z=Gy(D)?D.title:D.name,Q=Gy(D)?D.release_date:D.first_air_date;return{id:D.id,mediaType:U,title:Z,posterPath:D.poster_path,releaseDate:Q,voteAverage:D.vote_average,addedAt:new Date().toISOString(),liked:!1,loved:!1}},[e]),T=G.useCallback(async(D,U)=>{const W=v(D,U),Z=!W.liked;if(!Z&&!W.loved){if(t(K=>K.filter(ie=>!(ie.id===D.id&&ie.mediaType===U))),r)try{await _d(r.uid,D.id,U)}catch(K){console.error("Failed to remove favorite from cloud:",K)}return}const Q={...W,liked:Z};if(t(K=>K.some(le=>le.id===D.id&&le.mediaType===U)?K.map(le=>le.id===D.id&&le.mediaType===U?Q:le):[Q,...K]),r)try{await Kd(r.uid,Q)}catch(K){console.error("Failed to update favorite in cloud:",K)}},[r,v]),S=G.useCallback(async(D,U)=>{const W=v(D,U),Z=!W.loved;if(!Z&&!W.liked){if(t(K=>K.filter(ie=>!(ie.id===D.id&&ie.mediaType===U))),r)try{await _d(r.uid,D.id,U)}catch(K){console.error("Failed to remove favorite from cloud:",K)}return}const Q={...W,loved:Z};if(t(K=>K.some(le=>le.id===D.id&&le.mediaType===U)?K.map(le=>le.id===D.id&&le.mediaType===U?Q:le):[Q,...K]),r)try{await Kd(r.uid,Q)}catch(K){console.error("Failed to update favorite in cloud:",K)}},[r,v]),R=G.useCallback(async(D,U)=>{if(t(W=>W.filter(Z=>!(Z.id===D&&Z.mediaType===U))),r)try{await _d(r.uid,D,U)}catch(W){console.error("Failed to remove favorite from cloud:",W)}},[r]),F=G.useCallback((D,U)=>{const W=e.find(Z=>Z.id===D&&Z.mediaType===U);return(W==null?void 0:W.liked)??!1},[e]),q=G.useCallback((D,U)=>{const W=e.find(Z=>Z.id===D&&Z.mediaType===U);return(W==null?void 0:W.loved)??!1},[e]);return{items:e,loading:i,syncing:l,toggleLike:T,toggleLove:S,isLiked:F,isLoved:q,removeFavorite:R}},Qy=r=>"title"in r,Uw=({item:r,onClick:e,mediaType:t})=>{const{t:i}=dr(),{toggleLike:o,toggleLove:l,isLiked:h,isLoved:m}=Nc(),g=Qy(r)?r.title:r.name,v=Qy(r)?r.release_date:r.first_air_date,T=v?new Date(v).getFullYear():"N/A",S=r.vote_average?r.vote_average.toFixed(1):"N/A",R=h(r.id,t),F=m(r.id,t),q=U=>{U.stopPropagation(),o(r,t)},D=U=>{U.stopPropagation(),l(r,t)};return _.jsxs("article",{className:"movie-card",onClick:()=>e==null?void 0:e(r),children:[_.jsxs("div",{className:"movie-card__poster",children:[_.jsx("img",{src:Mr(r.poster_path,nr.poster.medium),alt:g,loading:"lazy"}),_.jsxs("div",{className:"movie-card__rating",children:[_.jsx(Ja,{size:14,fill:"currentColor"}),S]}),t==="tv"&&_.jsx("div",{className:"movie-card__badge",children:i("tvShow")}),_.jsxs("div",{className:"movie-card__favorites",children:[_.jsx("button",{className:`movie-card__fav-btn movie-card__like ${R?"active":""}`,onClick:q,title:i("like"),children:_.jsx(Ba,{size:14,fill:R?"currentColor":"none"})}),_.jsx("button",{className:`movie-card__fav-btn movie-card__love ${F?"active":""}`,onClick:D,title:i("love"),children:_.jsx(Io,{size:14,fill:F?"currentColor":"none"})})]})]}),_.jsxs("div",{className:"movie-card__info",children:[_.jsx("h3",{className:"movie-card__title",children:g}),_.jsx("p",{className:"movie-card__year",children:T})]})]})},zw=()=>_.jsxs("article",{className:"skeleton-card",children:[_.jsx("div",{className:"skeleton-card__poster",children:_.jsx("div",{className:"skeleton-shimmer"})}),_.jsxs("div",{className:"skeleton-card__info",children:[_.jsx("div",{className:"skeleton-card__title",children:_.jsx("div",{className:"skeleton-shimmer"})}),_.jsx("div",{className:"skeleton-card__year",children:_.jsx("div",{className:"skeleton-shimmer"})})]})]}),IR=12,SR=({items:r,loading:e,onItemClick:t,onLoadMore:i,hasMore:o,mediaType:l})=>{const{t:h}=dr();return e&&r.length===0?_.jsx("div",{className:"movie-grid-container",children:_.jsx("div",{className:"movie-grid",children:Array.from({length:IR}).map((m,g)=>_.jsx(zw,{},g))})}):!e&&r.length===0?_.jsxs("div",{className:"movie-grid__empty",children:[_.jsx("p",{children:h(l==="tv"?"noTvShowsFound":"noMoviesFound")}),_.jsx("p",{children:h("tryDifferentFilters")})]}):_.jsxs("div",{className:"movie-grid-container",children:[_.jsx("div",{className:"movie-grid",children:r.map(m=>_.jsx(Uw,{item:m,onClick:t,mediaType:l},m.id))}),e&&_.jsxs("div",{className:"movie-grid__loading",children:[_.jsx("div",{className:"spinner"}),_.jsx("p",{children:h(l==="tv"?"loadingTvShows":"loadingMovies")})]}),!e&&o&&_.jsx("button",{className:"movie-grid__load-more",onClick:i,children:h(l==="tv"?"loadMoreTvShows":"loadMoreMovies")})]})},ut=async(r,e={})=>{const t=new URLSearchParams({api_key:mR,language:vR,...e}),i=await fetch(`${gR}${r}?${t}`);if(!i.ok)throw new Error(`TMDB API error: ${i.status}`);return i.json()},AR=async()=>(await ut("/genre/movie/list")).genres,kR=async()=>(await ut("/watch/providers/movie",{watch_region:hr})).results,CR=async()=>{const r=await ut("/certification/movie/list");return r.certifications.HU||r.certifications.US||[]},RR=async(r=1,e={})=>{const t={page:r.toString(),region:hr,watch_region:hr,with_watch_monetization_types:"flatrate",sort_by:e.sortBy||"popularity.desc"};return e.genres&&e.genres.length>0&&(t.with_genres=e.genres.join(",")),e.certification&&(t.certification_country="HU",t.certification=e.certification),e.providers&&e.providers.length>0&&(t.with_watch_providers=e.providers.join("|")),e.minRating&&e.minRating>0&&(t["vote_average.gte"]=e.minRating.toString(),t["vote_count.gte"]="50"),e.yearFrom&&(t["primary_release_date.gte"]=`${e.yearFrom}-01-01`),e.yearTo&&(t["primary_release_date.lte"]=`${e.yearTo}-12-31`),ut("/discover/movie",t)},PR=async r=>ut(`/movie/${r}`),Qd=async r=>{const e=await ut(`/movie/${r}/watch/providers`);return e.results[hr]||e.results.US||null},NR=async(r,e=1)=>ut("/search/movie",{query:r,page:e.toString(),include_adult:"false"}),xR=async(r,e=1)=>ut("/search/tv",{query:r,page:e.toString(),include_adult:"false"}),DR=async()=>(await ut("/genre/tv/list")).genres,VR=async()=>(await ut("/watch/providers/tv",{watch_region:hr})).results,OR=async(r=1,e={})=>{const t={page:r.toString(),watch_region:hr,with_watch_monetization_types:"flatrate",sort_by:e.sortBy||"popularity.desc"};return e.genres&&e.genres.length>0&&(t.with_genres=e.genres.join(",")),e.providers&&e.providers.length>0&&(t.with_watch_providers=e.providers.join("|")),e.minRating&&e.minRating>0&&(t["vote_average.gte"]=e.minRating.toString(),t["vote_count.gte"]="50"),e.yearFrom&&(t["first_air_date.gte"]=`${e.yearFrom}-01-01`),e.yearTo&&(t["first_air_date.lte"]=`${e.yearTo}-12-31`),ut("/discover/tv",t)},MR=async r=>ut(`/tv/${r}`),Yd=async r=>{const e=await ut(`/tv/${r}/watch/providers`);return e.results[hr]||e.results.US||null},LR=async r=>{const e=await ut(`/movie/${r}/videos`,{language:"hu-HU"});return e.results.length===0?(await ut(`/movie/${r}/videos`,{language:"en-US"})).results:e.results},bR=async r=>{const e=await ut(`/tv/${r}/videos`,{language:"hu-HU"});return e.results.length===0?(await ut(`/tv/${r}/videos`,{language:"en-US"})).results:e.results},Yy=async(r,e)=>r==="movie"?LR(e):bR(e),Xy=r=>{const e=r.filter(o=>o.site==="YouTube"&&(o.type==="Trailer"||o.type==="Teaser")),t=e.find(o=>o.official);if(t)return t;if(e.length>0)return e[0];const i=r.filter(o=>o.site==="YouTube");return i.length>0?i[0]:null},Bw=async(r="week")=>ut(`/trending/movie/${r}`,{region:hr}),$w=async(r="week")=>ut(`/trending/tv/${r}`),Hw=async(r=1)=>ut("/movie/upcoming",{page:r.toString(),region:hr}),Xd=async(r=1)=>ut("/movie/now_playing",{page:r.toString(),region:hr});let Ou=null;const Kf=async()=>{if(Ou)return Ou;try{const e=await fetch("/movie-search/data/cinema.json");return e.ok?(Ou=await e.json(),Ou):(console.warn("Hungarian cinema data not available"),null)}catch(r){return console.error("Error loading Hungarian cinema data:",r),null}},jR=async r=>{try{const e=await Kf();if(!e)return console.warn("Hungarian cinema data not available, falling back to TMDB"),Xd(1);let t=e.movies;if(r!=null&&r.city&&(t=t.filter(i=>i.cities.includes(r.city))),r!=null&&r.date&&(t=t.filter(i=>i.dates.includes(r.date))),r!=null&&r.genres&&r.genres.length>0&&(t=t.filter(i=>r.genres.some(o=>i.genre_ids.includes(o)))),r!=null&&r.minRating&&r.minRating>0&&(t=t.filter(i=>i.vote_average>=r.minRating)),r!=null&&r.sortBy)switch(r.sortBy){case"vote_average.desc":t.sort((i,o)=>o.vote_average-i.vote_average);break;case"primary_release_date.desc":t.sort((i,o)=>new Date(o.release_date).getTime()-new Date(i.release_date).getTime());break;case"title.asc":t.sort((i,o)=>i.title.localeCompare(o.title));break;case"screenings.desc":t.sort((i,o)=>o.screeningCount-i.screeningCount);break;default:t.sort((i,o)=>o.screeningCount-i.screeningCount)}return{page:1,results:t,total_pages:1,total_results:t.length}}catch(e){return console.error("Error loading Hungarian cinema data:",e),Xd(1)}},FR=async(r=1)=>ut("/tv/on_the_air",{page:r.toString()}),yi=[1899,8,119,337,1773,2],UR=(r="movie")=>{const[e,t]=G.useState([]),[i,o]=G.useState([]),[l,h]=G.useState([]),[m,g]=G.useState(!0),[v,T]=G.useState(null);return G.useEffect(()=>{(async()=>{g(!0),T(null);try{const[R,F,q]=await Promise.all([r==="tv"?DR():AR(),r==="tv"?VR():kR(),CR()]);t(R);const D=F.filter(U=>yi.includes(U.provider_id)).sort((U,W)=>yi.indexOf(U.provider_id)-yi.indexOf(W.provider_id));o(D),h(q)}catch(R){T(R instanceof Error?R.message:"Hiba trtnt a szrk betltsekor")}finally{g(!1)}})()},[r]),{genres:e,providers:i,certifications:l,loading:m,error:v}},el=(r,e)=>`${e}_${r}`,xc=r=>fw(xw,"users",r,"watchlist"),Ww=async(r,e)=>{const t=dl(xc(r),el(e.id,e.mediaType));await Wf(t,e)},zR=async(r,e,t)=>{const i=dl(xc(r),el(e,t));await Cw(i)},wd=async(r,e)=>{const t=dl(xc(r),el(e.id,e.mediaType));await Wf(t,e)},BR=(r,e,t)=>{const i=Sw(xc(r));return Rw(i,o=>{const l=[];o.forEach(h=>{l.push(h.data())}),l.sort((h,m)=>new Date(m.addedAt).getTime()-new Date(h.addedAt).getTime()),e(l)},o=>{console.error("Firestore subscription error:",o),t==null||t(o)})},$R=(r,e)=>{const t=new Map;return e.forEach(i=>{t.set(el(i.id,i.mediaType),i)}),r.forEach(i=>{const o=el(i.id,i.mediaType),l=t.get(o);l?new Date(i.addedAt)>new Date(l.addedAt)&&t.set(o,{...i,watched:l.watched||i.watched}):t.set(o,i)}),Array.from(t.values()).sort((i,o)=>new Date(o.addedAt).getTime()-new Date(i.addedAt).getTime())},HR=async(r,e)=>{const t=e.map(i=>Ww(r,i));await Promise.all(t)},qw="movie-search-watchlist",Jy=r=>"title"in r,Zy=()=>{if(typeof window>"u")return[];const r=localStorage.getItem(qw);if(r)try{return JSON.parse(r)}catch(e){console.error("Failed to parse watchlist:",e)}return[]},Mu=r=>{localStorage.setItem(qw,JSON.stringify(r))},Qf=()=>{const{user:r}=qf(),[e,t]=G.useState([]),[i,o]=G.useState(!0),[l,h]=G.useState(!1),[m,g]=G.useState(null),v=G.useRef(!1),T=G.useRef(null);G.useEffect(()=>{const W=Zy();t(W),o(!1)},[]),G.useEffect(()=>{if(!r){T.current=null,v.current=!1;return}T.current!==r.uid&&(T.current=r.uid,v.current=!1),h(!0);const W=BR(r.uid,async Z=>{if(v.current)t(Z),Mu(Z);else{v.current=!0;const Q=Zy();if(Q.length>0){const K=$R(Q,Z);t(K),Mu(K);const ie=Q.filter(le=>!Z.some(P=>P.id===le.id&&P.mediaType===le.mediaType));if(ie.length>0)try{await HR(r.uid,ie)}catch(le){console.error("Failed to sync local items to cloud:",le)}}else t(Z),Mu(Z)}h(!1)},Z=>{console.error("Watchlist subscription error:",Z),h(!1)});return()=>W()},[r]),G.useEffect(()=>{!i&&!l&&Mu(e)},[e,i,l]);const S=G.useCallback(async(W,Z)=>{const Q=Jy(W)?W.title:W.name,K=Jy(W)?W.release_date:W.first_air_date,ie={id:W.id,mediaType:Z,title:Q,posterPath:W.poster_path,releaseDate:K,voteAverage:W.vote_average,addedAt:new Date().toISOString(),watched:!1};if(t(le=>le.some(P=>P.id===W.id&&P.mediaType===Z)?le:[ie,...le]),r)try{await Ww(r.uid,ie)}catch(le){console.error("Failed to add item to cloud:",le)}},[r]),R=G.useCallback(async(W,Z)=>{if(t(Q=>Q.filter(K=>!(K.id===W&&K.mediaType===Z))),r)try{await zR(r.uid,W,Z)}catch(Q){console.error("Failed to remove item from cloud:",Q)}},[r]),F=G.useCallback(async(W,Z)=>{let Q=null;if(t(K=>K.map(ie=>ie.id===W&&ie.mediaType===Z?(Q={...ie,watched:!ie.watched},Q):ie)),r&&Q)try{await wd(r.uid,Q)}catch(K){console.error("Failed to update item in cloud:",K)}},[r]),q=G.useCallback((W,Z)=>e.some(Q=>Q.id===W&&Q.mediaType===Z),[e]),D=G.useCallback(async()=>{if(e.filter(Q=>Q.availability===void 0).length===0)return;o(!0);const Z=await Promise.all(e.map(async Q=>{if(Q.availability!==void 0)return Q;try{const K=Q.mediaType==="movie"?await Qd(Q.id):await Yd(Q.id),le=[...(K==null?void 0:K.flatrate)||[],...(K==null?void 0:K.rent)||[],...(K==null?void 0:K.buy)||[]].some(A=>yi.includes(A.provider_id)),P={...Q,availability:K,isAvailable:le,lastChecked:new Date().toISOString()};if(r)try{await wd(r.uid,P)}catch(A){console.error("Failed to update availability in cloud:",A)}return P}catch(K){return console.error(`Failed to check availability for ${Q.title}:`,K),Q}}));t(Z),o(!1)},[e,r]),U=G.useCallback(async(W,Z)=>{g(W);try{const Q=Z==="movie"?await Qd(W):await Yd(W),ie=[...(Q==null?void 0:Q.flatrate)||[],...(Q==null?void 0:Q.rent)||[],...(Q==null?void 0:Q.buy)||[]].some(P=>yi.includes(P.provider_id));let le=null;if(t(P=>P.map(A=>A.id===W&&A.mediaType===Z?(le={...A,availability:Q,isAvailable:ie,lastChecked:new Date().toISOString()},le):A)),r&&le)try{await wd(r.uid,le)}catch(P){console.error("Failed to update availability in cloud:",P)}}catch(Q){console.error(`Failed to refresh availability for item ${W}:`,Q)}finally{g(null)}},[r]);return{items:e,loading:i,syncing:l,refreshingId:m,addItem:S,removeItem:R,toggleWatched:F,isInWatchlist:q,checkAvailability:D,refreshItemAvailability:U}},ev=r=>"title"in r,WR=r=>"runtime"in r,qR=({item:r,mediaType:e,browseMode:t,initialCity:i,onClose:o})=>{const[l,h]=G.useState(null),[m,g]=G.useState(null),[v,T]=G.useState(null),[S,R]=G.useState(!1),[F,q]=G.useState(!0),[D,U]=G.useState(null),[W,Z]=G.useState(""),[Q,K]=G.useState(""),{t:ie}=dr(),{addItem:le,removeItem:P,isInWatchlist:A}=Qf(),{toggleLike:C,toggleLove:V,isLiked:N,isLoved:L}=Nc(),E=A(r.id,e),Ie=N(r.id,e),Oe=L(r.id,e),je=ev(r)?r.title:r.name,Ce=ev(r)?r.release_date:r.first_air_date,oe=Ce?new Date(Ce).getFullYear():"N/A";G.useEffect(()=>{(async()=>{q(!0);try{if(e==="tv"){const[ue,H,ve]=await Promise.all([MR(r.id),Yd(r.id),Yy("tv",r.id)]);h(ue),g(H),T(Xy(ve))}else{const[ue,H,ve]=await Promise.all([PR(r.id),Qd(r.id),Yy("movie",r.id)]);h(ue),g(H),T(Xy(ve))}}catch(ue){console.error("Error fetching details:",ue)}finally{q(!1)}})()},[r.id,e]),G.useEffect(()=>{t==="theaters"&&e==="movie"&&Kf().then(ne=>{if(ne){const ue=ne.movies.find(H=>H.id===r.id);ue&&(U(ue),ue.cities.length>0&&!W&&(i&&ue.cities.includes(i)?Z(i):Z(ue.cities[0])))}})},[t,e,r.id,W,i]),G.useEffect(()=>{const ne=ue=>{ue.key==="Escape"&&(S?R(!1):o())};return document.addEventListener("keydown",ne),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",ne),document.body.style.overflow=""}},[o,S]);const me=()=>{if(!D||!W)return[];const ne=D.screenings[W]||[];return Q?ne.filter(ue=>ue.date===Q):ne},ce=()=>{const ne=me(),ue={};return ne.forEach(H=>{ue[H.cinemaName]||(ue[H.cinemaName]={}),ue[H.cinemaName][H.date]||(ue[H.cinemaName][H.date]=[]),ue[H.cinemaName][H.date].push(H)}),Object.values(ue).forEach(H=>{Object.values(H).forEach(ve=>{ve.sort((Pe,De)=>Pe.time.localeCompare(De.time))})}),ue},M=ne=>{const ue=new Date(ne),H=new Date;H.setHours(0,0,0,0);const ve=new Date(H);return ve.setDate(ve.getDate()+1),ue.toDateString()===H.toDateString()?ie("today"):ue.toDateString()===ve.toDateString()?ie("tomorrow"):ue.toLocaleDateString("hu-HU",{weekday:"short",month:"short",day:"numeric"})},Y=()=>l?WR(l)?l.runtime?`${l.runtime} ${ie("minutes")}`:null:`${l.number_of_seasons} ${ie("seasons")}, ${l.number_of_episodes} ${ie("episodes")}`:null;return _.jsx("div",{className:"modal-overlay",onClick:o,children:_.jsxs("div",{className:"modal-content",onClick:ne=>ne.stopPropagation(),children:[_.jsx("button",{className:"modal-close",onClick:o,children:_.jsx(Za,{size:24})}),S&&v&&_.jsx("div",{className:"trailer-overlay",onClick:()=>R(!1),children:_.jsxs("div",{className:"trailer-container",onClick:ne=>ne.stopPropagation(),children:[_.jsx("button",{className:"trailer-close",onClick:()=>R(!1),children:_.jsx(Za,{size:24})}),_.jsx("iframe",{src:`https://www.youtube.com/embed/${v.key}?autoplay=1`,title:v.name,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})}),_.jsxs("div",{className:"modal-body",children:[_.jsxs("div",{className:"modal-poster",children:[_.jsx("img",{src:Mr(r.poster_path,nr.poster.large),alt:je}),_.jsxs("div",{className:"poster-buttons",children:[v&&_.jsxs("button",{className:"trailer-button",onClick:()=>R(!0),children:[_.jsx(eR,{size:16})," ",ie("trailer")]}),_.jsxs("div",{className:"favorite-buttons",children:[_.jsx("button",{className:`favorite-button like-button ${Ie?"active":""}`,onClick:()=>C(r,e),title:ie("like"),children:_.jsx(Ba,{size:16,fill:Ie?"currentColor":"none"})}),_.jsx("button",{className:`favorite-button love-button ${Oe?"active":""}`,onClick:()=>V(r,e),title:ie("love"),children:_.jsx(Io,{size:16,fill:Oe?"currentColor":"none"})})]}),_.jsx("button",{className:`watchlist-button ${E?"in-list":""}`,onClick:()=>{E?P(r.id,e):le(r,e)},children:E?_.jsxs(_.Fragment,{children:[_.jsx(Ow,{size:16})," ",ie("inWatchlist")]}):_.jsxs(_.Fragment,{children:[_.jsx(Gd,{size:16})," ",ie("addToWatchlist")]})})]})]}),_.jsxs("div",{className:"modal-info",children:[_.jsx("h2",{className:"modal-title",children:je}),_.jsxs("div",{className:"modal-meta",children:[_.jsx("span",{className:"modal-year",children:oe}),Y()&&_.jsx("span",{className:"modal-runtime",children:Y()}),_.jsxs("span",{className:"modal-rating",children:[_.jsx(Ja,{size:16,fill:"currentColor"})," ",r.vote_average.toFixed(1)]})]}),(l==null?void 0:l.genres)&&_.jsx("div",{className:"modal-genres",children:l.genres.map(ne=>_.jsx("span",{className:"modal-genre",children:ne.name},ne.id))}),(l==null?void 0:l.tagline)&&_.jsxs("p",{className:"modal-tagline",children:['"',l.tagline,'"']}),_.jsx("p",{className:"modal-overview",children:r.overview||ie("noDescription")}),F&&_.jsx("div",{className:"modal-loading",children:_.jsx(za,{size:32,className:"spin"})}),m&&_.jsxs("div",{className:"modal-providers",children:[_.jsx("h3",{children:ie("availableOnStreaming")}),m.flatrate&&m.flatrate.length>0&&_.jsxs("div",{className:"provider-section",children:[_.jsx("span",{className:"provider-label",children:ie("withSubscription")}),_.jsx("div",{className:"provider-list",children:m.flatrate.map(ne=>_.jsx("img",{src:Mr(ne.logo_path,nr.logo.medium),alt:ne.provider_name,title:ne.provider_name},ne.provider_id))})]}),m.rent&&m.rent.length>0&&_.jsxs("div",{className:"provider-section",children:[_.jsx("span",{className:"provider-label",children:ie("rentable")}),_.jsx("div",{className:"provider-list",children:m.rent.map(ne=>_.jsx("img",{src:Mr(ne.logo_path,nr.logo.medium),alt:ne.provider_name,title:ne.provider_name},ne.provider_id))})]}),m.buy&&m.buy.length>0&&_.jsxs("div",{className:"provider-section",children:[_.jsx("span",{className:"provider-label",children:ie("purchasable")}),_.jsx("div",{className:"provider-list",children:m.buy.map(ne=>_.jsx("img",{src:Mr(ne.logo_path,nr.logo.medium),alt:ne.provider_name,title:ne.provider_name},ne.provider_id))})]}),!m.flatrate&&!m.rent&&!m.buy&&_.jsx("p",{className:"no-providers",children:ie("noStreamingProviders")}),m.link&&_.jsxs("a",{href:m.link,target:"_blank",rel:"noopener noreferrer",className:"provider-link",children:[ie("viewOnJustWatch")," ",_.jsx(jC,{size:14})]})]}),t==="theaters"&&D&&_.jsxs("div",{className:"modal-screenings",children:[_.jsxs("h3",{children:[_.jsx(lR,{size:18})," ",ie("screenings")]}),_.jsxs("div",{className:"screenings-filters",children:[_.jsxs("div",{className:"screenings-filter",children:[_.jsx(JC,{size:16}),_.jsx("select",{value:W,onChange:ne=>Z(ne.target.value),className:"screenings-select",children:D.cities.map(ne=>_.jsx("option",{value:ne,children:ne},ne))})]}),_.jsxs("div",{className:"screenings-filter",children:[_.jsx(CC,{size:16}),_.jsxs("select",{value:Q,onChange:ne=>K(ne.target.value),className:"screenings-select",children:[_.jsx("option",{value:"",children:ie("allDates")}),D.dates.map(ne=>_.jsx("option",{value:ne,children:M(ne)},ne))]})]})]}),_.jsx("div",{className:"screenings-list",children:Object.entries(ce()).length>0?Object.entries(ce()).sort(([ne],[ue])=>ne.localeCompare(ue)).map(([ne,ue])=>_.jsxs("div",{className:"screenings-cinema-block",children:[_.jsx("div",{className:"screenings-cinema-header",children:ne}),_.jsx("div",{className:"screenings-dates-container",children:Object.entries(ue).sort(([H],[ve])=>H.localeCompare(ve)).map(([H,ve])=>_.jsxs("div",{className:"screenings-date-row",children:[_.jsx("span",{className:"screenings-date-label",children:M(H)}),_.jsx("div",{className:"screenings-times",children:ve.map((Pe,De)=>_.jsx("a",{href:Pe.bookingLink||"#",target:"_blank",rel:"noopener noreferrer",className:"screening-time",title:Pe.auditorium,children:Pe.time},De))})]},H))})]},ne)):_.jsx("p",{className:"no-screenings",children:ie("noScreeningsFound")})})]})]})]})]})})},GR=8,KR=({title:r,items:e,loading:t,mediaType:i,onItemClick:o})=>{const l=G.useRef(null),h=m=>{if(l.current){const g=l.current.clientWidth*.8;l.current.scrollBy({left:m==="left"?-g:g,behavior:"smooth"})}};return t?_.jsxs("section",{className:"movie-section",children:[_.jsx("h2",{className:"movie-section__title",children:r}),_.jsx("div",{className:"movie-section__container",children:_.jsx("div",{className:"movie-section__scroll",children:Array.from({length:GR}).map((m,g)=>_.jsx("div",{className:"movie-section__item",children:_.jsx(zw,{})},g))})})]}):e.length===0?null:_.jsxs("section",{className:"movie-section",children:[_.jsx("h2",{className:"movie-section__title",children:r}),_.jsxs("div",{className:"movie-section__container",children:[_.jsx("button",{className:"movie-section__nav movie-section__nav--left",onClick:()=>h("left"),"aria-label":"Scroll left",children:_.jsx(Mw,{size:24})}),_.jsx("div",{className:"movie-section__scroll",ref:l,children:e.map(m=>_.jsx("div",{className:"movie-section__item",children:_.jsx(Uw,{item:m,mediaType:i,onClick:o})},m.id))}),_.jsx("button",{className:"movie-section__nav movie-section__nav--right",onClick:()=>h("right"),"aria-label":"Scroll right",children:_.jsx(Lw,{size:24})})]})]})},tv=r=>"title"in r,QR=({onClose:r,onItemClick:e})=>{const{t,language:i}=dr(),{items:o,loading:l,refreshingId:h,removeItem:m,toggleWatched:g,addItem:v,isInWatchlist:T,checkAvailability:S,refreshItemAvailability:R}=Qf(),[F,q]=G.useState("list"),[D,U]=G.useState(""),[W,Z]=G.useState("movie"),[Q,K]=G.useState([]),[ie,le]=G.useState(!1),P=o.filter(E=>E.isAvailable===void 0).length;G.useEffect(()=>{P>0&&F==="list"&&!l&&S()},[F,P,S,l]);const A=async E=>{if(E.preventDefault(),!!D.trim()){le(!0);try{if(W==="movie"){const Ie=await NR(D);K(Ie.results.map(Oe=>({...Oe,mediaType:"movie"})))}else{const Ie=await xR(D);K(Ie.results.map(Oe=>({...Oe,mediaType:"tv"})))}}catch(Ie){console.error("Search error:",Ie)}finally{le(!1)}}},C=E=>new Date(E).toLocaleDateString(i==="hu"?"hu-HU":"en-GB"),V=E=>{if(!E)return null;const Ie=new Date(E),je=new Date().getTime()-Ie.getTime(),Ce=Math.floor(je/(1e3*60*60*24));return Ce===0?t("checkedToday"):Ce===1?t("checkedYesterday"):Ce<7?t("checkedDaysAgo").replace("{days}",String(Ce)):t("checkedOnDate").replace("{date}",C(E))},N=E=>E.isAvailable===void 0?{icon:_.jsx(za,{size:14,className:"spin"}),text:t("checking"),className:"checking"}:E.isAvailable?{icon:_.jsx(DC,{size:14}),text:t("available"),className:"available"}:{icon:_.jsx(OC,{size:14}),text:t("notAvailable"),className:"unavailable"},L=E=>E.availability?[...E.availability.flatrate||[],...E.availability.rent||[],...E.availability.buy||[]].filter((je,Ce,oe)=>yi.includes(je.provider_id)&&oe.findIndex(me=>me.provider_id===je.provider_id)===Ce):[];return _.jsx("div",{className:"watchlist-overlay",onClick:r,children:_.jsxs("div",{className:"watchlist-panel",onClick:E=>E.stopPropagation(),children:[_.jsxs("div",{className:"watchlist-header",children:[_.jsx("h2",{children:t("watchlist")}),_.jsx("button",{className:"watchlist-close",onClick:r,children:_.jsx(Za,{size:24})})]}),_.jsxs("div",{className:"watchlist-tabs",children:[_.jsxs("button",{className:`watchlist-tab ${F==="list"?"active":""}`,onClick:()=>q("list"),children:[_.jsx(bw,{size:16})," ",t("list")," (",o.length,")"]}),_.jsxs("button",{className:`watchlist-tab ${F==="search"?"active":""}`,onClick:()=>q("search"),children:[_.jsx(Gd,{size:16})," ",t("add")]})]}),F==="search"&&_.jsxs("div",{className:"watchlist-search",children:[_.jsxs("form",{onSubmit:A,children:[_.jsxs("div",{className:"search-type-toggle",children:[_.jsx("button",{type:"button",className:`search-type-btn ${W==="movie"?"active":""}`,onClick:()=>Z("movie"),children:t("movie")}),_.jsx("button",{type:"button",className:`search-type-btn ${W==="tv"?"active":""}`,onClick:()=>Z("tv"),children:t("tvShow")})]}),_.jsxs("div",{className:"search-input-row",children:[_.jsx("input",{type:"text",placeholder:t("searchAnyMovieOrTv"),value:D,onChange:E=>U(E.target.value),className:"watchlist-search-input"}),_.jsx("button",{type:"submit",className:"watchlist-search-btn",disabled:ie,children:ie?"...":t("search")})]})]}),ie?_.jsxs("div",{className:"watchlist-loading",children:[_.jsx(za,{size:40,className:"spin"}),_.jsx("p",{children:t("searching")})]}):Q.length>0?_.jsx("div",{className:"search-results",children:Q.map(E=>{const Ie=tv(E)?E.title:E.name,Oe=tv(E)?E.release_date:E.first_air_date,je=T(E.id,E.mediaType);return _.jsxs("div",{className:"search-result-item",children:[_.jsx("div",{className:"search-result-poster",children:E.poster_path?_.jsx("img",{src:Mr(E.poster_path,nr.poster.small),alt:Ie}):_.jsx("div",{className:"no-poster",children:_.jsx(qd,{size:20})})}),_.jsxs("div",{className:"search-result-info",children:[_.jsx("h4",{children:Ie}),_.jsxs("div",{className:"search-result-meta",children:[_.jsx("span",{className:"media-type-badge",children:E.mediaType==="movie"?t("movie"):t("tvShow")}),Oe&&_.jsx("span",{children:Oe.split("-")[0]}),_.jsxs("span",{className:"rating",children:[_.jsx(Ja,{size:12,fill:"currentColor"})," ",E.vote_average.toFixed(1)]})]})]}),_.jsx("button",{className:`add-to-list-btn ${je?"in-list":""}`,onClick:()=>{je?m(E.id,E.mediaType):v(E,E.mediaType)},children:je?_.jsx(Ow,{size:18}):_.jsx(Gd,{size:18})})]},`${E.mediaType}-${E.id}`)})}):D&&!ie?_.jsx("div",{className:"watchlist-empty",children:_.jsx("p",{children:t("noSearchResults")})}):_.jsxs("div",{className:"watchlist-empty",children:[_.jsx("p",{children:t("searchAnyInterest")}),_.jsx("p",{className:"hint",children:t("addEvenIfNotAvailable")})]})]}),F==="list"&&_.jsxs(_.Fragment,{children:[l?_.jsxs("div",{className:"watchlist-loading",children:[_.jsx(za,{size:40,className:"spin"}),_.jsx("p",{children:t("checkingAvailability")})]}):o.length===0?_.jsxs("div",{className:"watchlist-empty",children:[_.jsx("p",{children:t("watchlistEmpty")}),_.jsx("p",{children:t("clickAddTab")})]}):_.jsx("div",{className:"watchlist-items",children:o.map(E=>{var je;const Ie=N(E),Oe=L(E);return _.jsxs("div",{className:`watchlist-item ${E.watched?"watched":""}`,children:[_.jsx("div",{className:"watchlist-item-poster",onClick:()=>e(E.id,E.mediaType),children:E.posterPath?_.jsx("img",{src:`https://image.tmdb.org/t/p/w92${E.posterPath}`,alt:E.title}):_.jsx("div",{className:"no-poster",children:_.jsx(qd,{size:24})})}),_.jsxs("div",{className:"watchlist-item-info",children:[_.jsx("h3",{className:"watchlist-item-title",onClick:()=>e(E.id,E.mediaType),children:E.title}),_.jsxs("div",{className:"watchlist-item-meta",children:[_.jsx("span",{className:"media-type-badge",children:E.mediaType==="movie"?t("movie"):t("tvShow")}),E.releaseDate&&_.jsx("span",{className:"release-year",children:E.releaseDate.split("-")[0]}),_.jsxs("span",{className:"rating",children:[_.jsx(Ja,{size:12,fill:"currentColor"})," ",E.voteAverage.toFixed(1)]})]}),_.jsxs("div",{className:`availability-status ${Ie.className}`,children:[Ie.icon," ",Ie.text]}),Oe.length>0&&((je=E.availability)==null?void 0:je.link)&&_.jsx("div",{className:"watchlist-providers",children:Oe.map(Ce=>{var oe;return _.jsx("a",{href:(oe=E.availability)==null?void 0:oe.link,target:"_blank",rel:"noopener noreferrer",className:"provider-icon-link",title:`${t("watchOn")}: ${Ce.provider_name}`,children:_.jsx("img",{src:Mr(Ce.logo_path,nr.logo.small),alt:Ce.provider_name})},Ce.provider_id)})}),_.jsxs("div",{className:"watchlist-item-dates",children:[_.jsxs("span",{className:"date-added",children:[t("addedOn"),": ",C(E.addedAt)]}),E.lastChecked&&_.jsx("span",{className:"date-checked",children:V(E.lastChecked)})]})]}),_.jsxs("div",{className:"watchlist-item-actions",children:[_.jsx("button",{className:`btn-refresh-item ${h===E.id?"refreshing":""}`,onClick:()=>R(E.id,E.mediaType),disabled:h===E.id,title:t("refreshAvailability"),children:_.jsx($y,{size:18})}),_.jsx("button",{className:`btn-watched ${E.watched?"active":""}`,onClick:()=>g(E.id,E.mediaType),title:E.watched?t("markAsUnwatched"):t("markAsWatched"),children:E.watched?_.jsx(BC,{size:18}):_.jsx(UC,{size:18})}),_.jsx("button",{className:"btn-remove",onClick:()=>m(E.id,E.mediaType),title:t("removeFromList"),children:_.jsx(jw,{size:18})})]})]},`${E.mediaType}-${E.id}`)})}),o.length>0&&!l&&_.jsx("div",{className:"watchlist-footer",children:_.jsxs("button",{className:"btn-refresh",onClick:S,children:[_.jsx($y,{size:16})," ",t("refreshAvailability")]})})]})]})})},YR=({onClose:r,onItemClick:e})=>{const{t,language:i}=dr(),{items:o,loading:l,removeFavorite:h,toggleLike:m,toggleLove:g}=Nc(),[v,T]=G.useState("all"),S=o.filter(D=>v==="liked"?D.liked:v==="loved"?D.loved:!0),R=o.filter(D=>D.liked).length,F=o.filter(D=>D.loved).length,q=D=>new Date(D).toLocaleDateString(i==="hu"?"hu-HU":"en-GB");return _.jsx("div",{className:"favorites-overlay",onClick:r,children:_.jsxs("div",{className:"favorites-panel",onClick:D=>D.stopPropagation(),children:[_.jsxs("div",{className:"favorites-header",children:[_.jsx("h2",{children:t("favorites")}),_.jsx("button",{className:"favorites-close",onClick:r,children:_.jsx(Za,{size:24})})]}),_.jsxs("div",{className:"favorites-filters",children:[_.jsxs("button",{className:`favorites-filter ${v==="all"?"active":""}`,onClick:()=>T("all"),children:[t("filterAll")," (",o.length,")"]}),_.jsxs("button",{className:`favorites-filter ${v==="liked"?"active":""}`,onClick:()=>T("liked"),children:[_.jsx(Ba,{size:14})," ",t("liked")," (",R,")"]}),_.jsxs("button",{className:`favorites-filter ${v==="loved"?"active":""}`,onClick:()=>T("loved"),children:[_.jsx(Io,{size:14})," ",t("loved")," (",F,")"]})]}),_.jsx("div",{className:"favorites-content",children:l?_.jsx("div",{className:"favorites-loading",children:_.jsx(za,{size:40,className:"spin"})}):S.length===0?_.jsx("div",{className:"favorites-empty",children:_.jsx("p",{children:t("noFavorites")})}):_.jsx("div",{className:"favorites-items",children:S.map(D=>_.jsxs("div",{className:"favorites-item",children:[_.jsx("div",{className:"favorites-item-poster",onClick:()=>e(D.id,D.mediaType),children:D.posterPath?_.jsx("img",{src:Mr(D.posterPath,nr.poster.small),alt:D.title}):_.jsx("div",{className:"no-poster",children:_.jsx(qd,{size:24})})}),_.jsxs("div",{className:"favorites-item-info",children:[_.jsx("h3",{className:"favorites-item-title",onClick:()=>e(D.id,D.mediaType),children:D.title}),_.jsxs("div",{className:"favorites-item-meta",children:[_.jsx("span",{className:"media-type-badge",children:D.mediaType==="movie"?t("movie"):t("tvShow")}),D.releaseDate&&_.jsx("span",{className:"release-year",children:D.releaseDate.split("-")[0]}),_.jsxs("span",{className:"rating",children:[_.jsx(Ja,{size:12,fill:"currentColor"})," ",D.voteAverage.toFixed(1)]})]}),_.jsxs("div",{className:"favorites-item-badges",children:[D.liked&&_.jsxs("span",{className:"badge badge-liked",children:[_.jsx(Ba,{size:12})," ",t("liked")]}),D.loved&&_.jsxs("span",{className:"badge badge-loved",children:[_.jsx(Io,{size:12})," ",t("loved")]})]}),_.jsxs("div",{className:"favorites-item-date",children:[t("addedOn"),": ",q(D.addedAt)]})]}),_.jsxs("div",{className:"favorites-item-actions",children:[_.jsx("button",{className:`btn-like ${D.liked?"active":""}`,onClick:()=>{const U={id:D.id,title:D.title,name:D.title,poster_path:D.posterPath,release_date:D.releaseDate,first_air_date:D.releaseDate,vote_average:D.voteAverage,overview:"",original_title:D.title,original_name:D.title,backdrop_path:null,vote_count:0,genre_ids:[],adult:!1,popularity:0};m(U,D.mediaType)},title:t("like"),children:_.jsx(Ba,{size:18,fill:D.liked?"currentColor":"none"})}),_.jsx("button",{className:`btn-love ${D.loved?"active":""}`,onClick:()=>{const U={id:D.id,title:D.title,name:D.title,poster_path:D.posterPath,release_date:D.releaseDate,first_air_date:D.releaseDate,vote_average:D.voteAverage,overview:"",original_title:D.title,original_name:D.title,backdrop_path:null,vote_count:0,genre_ids:[],adult:!1,popularity:0};g(U,D.mediaType)},title:t("love"),children:_.jsx(Io,{size:18,fill:D.loved?"currentColor":"none"})}),_.jsx("button",{className:"btn-remove",onClick:()=>h(D.id,D.mediaType),title:t("removeFromList"),children:_.jsx(jw,{size:18})})]})]},`${D.mediaType}-${D.id}`))})})]})})},XR=(r={})=>{const[e,t]=G.useState([]),[i,o]=G.useState(!0),[l,h]=G.useState(null),[m,g]=G.useState(1),[v,T]=G.useState(0),[S,R]=G.useState(0),F=r.mediaType||"movie",q=r.browseMode||"streaming",D=G.useCallback(async(Z,Q=!1)=>{o(!0),h(null);try{let K;q==="trending"?F==="tv"?K=await $w("week"):K=await Bw("week"):q==="upcoming"&&F==="movie"?K=await Hw(Z):q==="theaters"&&F==="movie"?K=await jR({city:r.city,date:r.date,genres:r.genres,minRating:r.minRating,sortBy:r.sortBy}):F==="tv"?K=await OR(Z,{genres:r.genres,providers:r.providers,sortBy:r.sortBy,minRating:r.minRating,yearFrom:r.yearFrom,yearTo:r.yearTo}):K=await RR(Z,{genres:r.genres,certification:r.certification,providers:r.providers,sortBy:r.sortBy,minRating:r.minRating,yearFrom:r.yearFrom,yearTo:r.yearTo}),t(ie=>Q?[...ie,...K.results]:K.results),T(K.total_pages),R(K.total_results),g(Z)}catch(K){const ie=F==="tv"?"Hiba trtnt a sorozatok betltsekor":"Hiba trtnt a filmek betltsekor";h(K instanceof Error?K.message:ie)}finally{o(!1)}},[F,q,r.genres,r.certification,r.providers,r.sortBy,r.minRating,r.yearFrom,r.yearTo,r.city,r.date]);G.useEffect(()=>{t([]),D(1,!1)},[D]);const U=G.useCallback(()=>{m<v&&!i&&D(m+1,!0)},[m,v,i,D]),W=G.useCallback(()=>{t([]),D(1,!1)},[D]);return{items:e,loading:i,error:l,page:m,totalPages:v,totalResults:S,loadMore:U,refresh:W}},JR=r=>{const[e,t]=G.useState([]),[i,o]=G.useState([]),[l,h]=G.useState([]),[m,g]=G.useState([]),[v,T]=G.useState(!0);return G.useEffect(()=>{(async()=>{T(!0);try{if(r==="movie"){const[R,F,q]=await Promise.all([Bw("week"),Hw(),Xd()]);t(R.results.slice(0,10)),o(F.results.slice(0,10)),h(q.results.slice(0,10))}else{const[R,F]=await Promise.all([$w("week"),FR()]);t(R.results.slice(0,10)),g(F.results.slice(0,10))}}catch(R){console.error("Error fetching movie sections:",R)}finally{T(!1)}})()},[r]),{trending:e,upcoming:i,nowPlaying:l,onTheAir:m,loading:v}};function ZR(){const[r,e]=G.useState("movie"),[t,i]=G.useState("streaming"),[o,l]=G.useState([]),[h,m]=G.useState([]),[g,v]=G.useState(""),[T,S]=G.useState("popularity.desc"),[R,F]=G.useState(0),[q,D]=G.useState(void 0),[U,W]=G.useState(void 0),[Z,Q]=G.useState(""),[K,ie]=G.useState(""),[le,P]=G.useState([]),[A,C]=G.useState([]),[V,N]=G.useState(null),[L,E]=G.useState(!1),[Ie,Oe]=G.useState(!1),[je,Ce]=G.useState(!1),[oe,me]=G.useState(!1),[ce,M]=G.useState("movie"),{items:Y,syncing:ne}=Qf(),{syncing:ue}=Nc(),{trending:H,loading:ve}=JR(r),{t:Pe}=dr(),{genres:De,providers:We,certifications:Ct,loading:zr}=UR(r);G.useEffect(()=>{t==="theaters"&&Kf().then(ct=>{ct&&(P(ct.cities),C(ct.dates))})},[t]);const{items:Br,loading:Mn,page:$r,totalPages:Ci,loadMore:Hr}=XR({mediaType:r,browseMode:t,genres:o.length>0?o:void 0,certification:r==="movie"&&g||void 0,providers:h.length>0?h:yi,sortBy:T,minRating:R>0?R:void 0,yearFrom:q,yearTo:U,city:Z||void 0,date:K||void 0}),fr=G.useCallback(ct=>{e(ct),i("streaming"),l([]),v("")},[]),Ls=G.useCallback(()=>{e("movie"),i("theaters"),l([]),v(""),Q(""),ie("")},[]),ot=G.useCallback(ct=>{i(ct)},[]),nt=G.useCallback(()=>{i("streaming"),l([]),m([]),v(""),S("popularity.desc"),F(0),D(void 0),W(void 0),Q(""),ie("")},[]),en=G.useCallback(ct=>{},[]);return _.jsxs("div",{className:"app",children:[_.jsx(pR,{onSearch:en,mediaType:r,browseMode:t,onMediaTypeChange:fr,onTheatersClick:Ls,onWatchlistClick:()=>Ce(!0),watchlistCount:Y.length,syncing:ne||ue,onFavoritesClick:()=>me(!0)}),_.jsxs("main",{className:"main-content",children:[_.jsx("div",{className:"movie-sections",children:_.jsx(KR,{title:Pe("trending"),items:H,loading:ve,mediaType:r,onItemClick:ct=>{N(ct),M(r)}})}),_.jsx("button",{className:"filters-toggle",onClick:()=>E(!L),children:Pe(L?"hideFilters":"showFilters")}),_.jsxs("div",{className:`content-layout ${Ie?"filters-collapsed":""}`,children:[_.jsx("div",{className:`filters-container ${L?"show":""}`,children:!zr&&_.jsx(_R,{genres:De,providers:We,certifications:Ct,selectedGenres:o,selectedProviders:h,selectedCertification:g,sortBy:T,minRating:R,yearFrom:q,yearTo:U,browseMode:t,availableCities:le,availableDates:A,selectedCity:Z,selectedDate:K,onCityChange:Q,onDateChange:ie,onGenreChange:l,onProviderChange:m,onCertificationChange:v,onSortChange:S,onRatingChange:F,onYearFromChange:D,onYearToChange:W,onBrowseModeChange:ot,onClearFilters:nt,mediaType:r,isCollapsed:Ie,onToggleCollapse:()=>Oe(!Ie)})}),_.jsx("div",{className:"movies-container",children:_.jsx(SR,{items:Br,loading:Mn,onItemClick:ct=>{N(ct),M(r)},onLoadMore:Hr,hasMore:$r<Ci,mediaType:r})})]})]}),V&&_.jsx(qR,{item:V,mediaType:ce,browseMode:t,initialCity:Z,onClose:()=>N(null)}),je&&_.jsx(QR,{onClose:()=>Ce(!1),onItemClick:()=>{Ce(!1)}}),oe&&_.jsx(YR,{onClose:()=>me(!1),onItemClick:(ct,Wr)=>{const bs=Br.find(Ln=>Ln.id===ct);N(bs||{id:ct,poster_path:null,backdrop_path:null,overview:"",vote_average:0,vote_count:0,genre_ids:[],adult:!1,popularity:0,...Wr==="movie"?{title:"",original_title:"",release_date:""}:{name:"",original_name:"",first_air_date:""}}),M(Wr),me(!1)}})]})}u0.createRoot(document.getElementById("root")).render(_.jsx(n0.StrictMode,{children:_.jsx(vC,{children:_.jsx(p0,{children:_.jsx(ZR,{})})})}));
