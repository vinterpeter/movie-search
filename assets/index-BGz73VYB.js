(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function mv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var od={exports:{}},Oa={},ad={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function o0(){if(fg)return be;fg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function A(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,F={};function b(L,J,ke){this.props=L,this.context=J,this.refs=F,this.updater=ke||M}b.prototype.isReactComponent={},b.prototype.setState=function(L,J){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,J,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function W(){}W.prototype=b.prototype;function D(L,J,ke){this.props=L,this.context=J,this.refs=F,this.updater=ke||M}var Y=D.prototype=new W;Y.constructor=D,q(Y,b.prototype),Y.isPureReactComponent=!0;var Q=Array.isArray,he=Object.prototype.hasOwnProperty,K={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function k(L,J,ke){var te,ue={},fe=null,X=null;if(J!=null)for(te in J.ref!==void 0&&(X=J.ref),J.key!==void 0&&(fe=""+J.key),J)he.call(J,te)&&!R.hasOwnProperty(te)&&(ue[te]=J[te]);var Ae=arguments.length-2;if(Ae===1)ue.children=ke;else if(1<Ae){for(var Me=Array(Ae),dt=0;dt<Ae;dt++)Me[dt]=arguments[dt+2];ue.children=Me}if(L&&L.defaultProps)for(te in Ae=L.defaultProps,Ae)ue[te]===void 0&&(ue[te]=Ae[te]);return{$$typeof:r,type:L,key:fe,ref:X,props:ue,_owner:K.current}}function P(L,J){return{$$typeof:r,type:L.type,key:J,ref:L.ref,props:L.props,_owner:L._owner}}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function x(L){var J={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ke){return J[ke]})}var j=/\/+/g;function T(L,J){return typeof L=="object"&&L!==null&&L.key!=null?x(""+L.key):J.toString(36)}function Ee(L,J,ke,te,ue){var fe=typeof L;(fe==="undefined"||fe==="boolean")&&(L=null);var X=!1;if(L===null)X=!0;else switch(fe){case"string":case"number":X=!0;break;case"object":switch(L.$$typeof){case r:case e:X=!0}}if(X)return X=L,ue=ue(X),L=te===""?"."+T(X,0):te,Q(ue)?(ke="",L!=null&&(ke=L.replace(j,"$&/")+"/"),Ee(ue,J,ke,"",function(dt){return dt})):ue!=null&&(V(ue)&&(ue=P(ue,ke+(!ue.key||X&&X.key===ue.key?"":(""+ue.key).replace(j,"$&/")+"/")+L)),J.push(ue)),1;if(X=0,te=te===""?".":te+":",Q(L))for(var Ae=0;Ae<L.length;Ae++){fe=L[Ae];var Me=te+T(fe,Ae);X+=Ee(fe,J,ke,Me,ue)}else if(Me=A(L),typeof Me=="function")for(L=Me.call(L),Ae=0;!(fe=L.next()).done;)fe=fe.value,Me=te+T(fe,Ae++),X+=Ee(fe,J,ke,Me,ue);else if(fe==="object")throw J=String(L),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return X}function ie(L,J,ke){if(L==null)return L;var te=[],ue=0;return Ee(L,te,"","",function(fe){return J.call(ke,fe,ue++)}),te}function Oe(L){if(L._status===-1){var J=L._result;J=J(),J.then(function(ke){(L._status===0||L._status===-1)&&(L._status=1,L._result=ke)},function(ke){(L._status===0||L._status===-1)&&(L._status=2,L._result=ke)}),L._status===-1&&(L._status=0,L._result=J)}if(L._status===1)return L._result.default;throw L._result}var Re={current:null},oe={transition:null},ye={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:oe,ReactCurrentOwner:K};function ce(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:ie,forEach:function(L,J,ke){ie(L,function(){J.apply(this,arguments)},ke)},count:function(L){var J=0;return ie(L,function(){J++}),J},toArray:function(L){return ie(L,function(J){return J})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},be.Component=b,be.Fragment=t,be.Profiler=o,be.PureComponent=D,be.StrictMode=i,be.Suspense=g,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,be.act=ce,be.cloneElement=function(L,J,ke){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var te=q({},L.props),ue=L.key,fe=L.ref,X=L._owner;if(J!=null){if(J.ref!==void 0&&(fe=J.ref,X=K.current),J.key!==void 0&&(ue=""+J.key),L.type&&L.type.defaultProps)var Ae=L.type.defaultProps;for(Me in J)he.call(J,Me)&&!R.hasOwnProperty(Me)&&(te[Me]=J[Me]===void 0&&Ae!==void 0?Ae[Me]:J[Me])}var Me=arguments.length-2;if(Me===1)te.children=ke;else if(1<Me){Ae=Array(Me);for(var dt=0;dt<Me;dt++)Ae[dt]=arguments[dt+2];te.children=Ae}return{$$typeof:r,type:L.type,key:ue,ref:fe,props:te,_owner:X}},be.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},be.createElement=k,be.createFactory=function(L){var J=k.bind(null,L);return J.type=L,J},be.createRef=function(){return{current:null}},be.forwardRef=function(L){return{$$typeof:m,render:L}},be.isValidElement=V,be.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:Oe}},be.memo=function(L,J){return{$$typeof:v,type:L,compare:J===void 0?null:J}},be.startTransition=function(L){var J=oe.transition;oe.transition={};try{L()}finally{oe.transition=J}},be.unstable_act=ce,be.useCallback=function(L,J){return Re.current.useCallback(L,J)},be.useContext=function(L){return Re.current.useContext(L)},be.useDebugValue=function(){},be.useDeferredValue=function(L){return Re.current.useDeferredValue(L)},be.useEffect=function(L,J){return Re.current.useEffect(L,J)},be.useId=function(){return Re.current.useId()},be.useImperativeHandle=function(L,J,ke){return Re.current.useImperativeHandle(L,J,ke)},be.useInsertionEffect=function(L,J){return Re.current.useInsertionEffect(L,J)},be.useLayoutEffect=function(L,J){return Re.current.useLayoutEffect(L,J)},be.useMemo=function(L,J){return Re.current.useMemo(L,J)},be.useReducer=function(L,J,ke){return Re.current.useReducer(L,J,ke)},be.useRef=function(L){return Re.current.useRef(L)},be.useState=function(L){return Re.current.useState(L)},be.useSyncExternalStore=function(L,J,ke){return Re.current.useSyncExternalStore(L,J,ke)},be.useTransition=function(){return Re.current.useTransition()},be.version="18.3.1",be}var pg;function rf(){return pg||(pg=1,ad.exports=o0()),ad.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function a0(){if(mg)return Oa;mg=1;var r=rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,v){var E,S={},A=null,M=null;v!==void 0&&(A=""+v),g.key!==void 0&&(A=""+g.key),g.ref!==void 0&&(M=g.ref);for(E in g)i.call(g,E)&&!l.hasOwnProperty(E)&&(S[E]=g[E]);if(m&&m.defaultProps)for(E in g=m.defaultProps,g)S[E]===void 0&&(S[E]=g[E]);return{$$typeof:e,type:m,key:A,ref:M,props:S,_owner:o.current}}return Oa.Fragment=t,Oa.jsx=h,Oa.jsxs=h,Oa}var gg;function l0(){return gg||(gg=1,od.exports=a0()),od.exports}var _=l0(),G=rf();const u0=mv(G);var Au={},ld={exports:{}},nn={},ud={exports:{}},cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg;function c0(){return yg||(yg=1,(function(r){function e(oe,ye){var ce=oe.length;oe.push(ye);e:for(;0<ce;){var L=ce-1>>>1,J=oe[L];if(0<o(J,ye))oe[L]=ye,oe[ce]=J,ce=L;else break e}}function t(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var ye=oe[0],ce=oe.pop();if(ce!==ye){oe[0]=ce;e:for(var L=0,J=oe.length,ke=J>>>1;L<ke;){var te=2*(L+1)-1,ue=oe[te],fe=te+1,X=oe[fe];if(0>o(ue,ce))fe<J&&0>o(X,ue)?(oe[L]=X,oe[fe]=ce,L=fe):(oe[L]=ue,oe[te]=ce,L=te);else if(fe<J&&0>o(X,ce))oe[L]=X,oe[fe]=ce,L=fe;else break e}}return ye}function o(oe,ye){var ce=oe.sortIndex-ye.sortIndex;return ce!==0?ce:oe.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],v=[],E=1,S=null,A=3,M=!1,q=!1,F=!1,b=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(oe){for(var ye=t(v);ye!==null;){if(ye.callback===null)i(v);else if(ye.startTime<=oe)i(v),ye.sortIndex=ye.expirationTime,e(g,ye);else break;ye=t(v)}}function Q(oe){if(F=!1,Y(oe),!q)if(t(g)!==null)q=!0,Oe(he);else{var ye=t(v);ye!==null&&Re(Q,ye.startTime-oe)}}function he(oe,ye){q=!1,F&&(F=!1,W(k),k=-1),M=!0;var ce=A;try{for(Y(ye),S=t(g);S!==null&&(!(S.expirationTime>ye)||oe&&!x());){var L=S.callback;if(typeof L=="function"){S.callback=null,A=S.priorityLevel;var J=L(S.expirationTime<=ye);ye=r.unstable_now(),typeof J=="function"?S.callback=J:S===t(g)&&i(g),Y(ye)}else i(g);S=t(g)}if(S!==null)var ke=!0;else{var te=t(v);te!==null&&Re(Q,te.startTime-ye),ke=!1}return ke}finally{S=null,A=ce,M=!1}}var K=!1,R=null,k=-1,P=5,V=-1;function x(){return!(r.unstable_now()-V<P)}function j(){if(R!==null){var oe=r.unstable_now();V=oe;var ye=!0;try{ye=R(!0,oe)}finally{ye?T():(K=!1,R=null)}}else K=!1}var T;if(typeof D=="function")T=function(){D(j)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,ie=Ee.port2;Ee.port1.onmessage=j,T=function(){ie.postMessage(null)}}else T=function(){b(j,0)};function Oe(oe){R=oe,K||(K=!0,T())}function Re(oe,ye){k=b(function(){oe(r.unstable_now())},ye)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(oe){oe.callback=null},r.unstable_continueExecution=function(){q||M||(q=!0,Oe(he))},r.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<oe?Math.floor(1e3/oe):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(oe){switch(A){case 1:case 2:case 3:var ye=3;break;default:ye=A}var ce=A;A=ye;try{return oe()}finally{A=ce}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(oe,ye){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ce=A;A=oe;try{return ye()}finally{A=ce}},r.unstable_scheduleCallback=function(oe,ye,ce){var L=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?L+ce:L):ce=L,oe){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ce+J,oe={id:E++,callback:ye,priorityLevel:oe,startTime:ce,expirationTime:J,sortIndex:-1},ce>L?(oe.sortIndex=ce,e(v,oe),t(g)===null&&oe===t(v)&&(F?(W(k),k=-1):F=!0,Re(Q,ce-L))):(oe.sortIndex=J,e(g,oe),q||M||(q=!0,Oe(he))),oe},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(oe){var ye=A;return function(){var ce=A;A=ye;try{return oe.apply(this,arguments)}finally{A=ce}}}})(cd)),cd}var vg;function h0(){return vg||(vg=1,ud.exports=c0()),ud.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function d0(){if(_g)return nn;_g=1;var r=rf(),e=h0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},S={};function A(n){return g.call(S,n)?!0:g.call(E,n)?!1:v.test(n)?S[n]=!0:(E[n]=!0,!1)}function M(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,s,a,c){if(s===null||typeof s>"u"||M(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(n,s,a,c,d,f,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=f,this.removeEmptyString=w}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){b[n]=new F(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];b[s]=new F(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){b[n]=new F(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){b[n]=new F(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){b[n]=new F(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){b[n]=new F(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){b[n]=new F(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){b[n]=new F(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){b[n]=new F(n,5,!1,n.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function D(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(W,D);b[s]=new F(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(W,D);b[s]=new F(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(W,D);b[s]=new F(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){b[n]=new F(n,1,!1,n.toLowerCase(),null,!1,!1)}),b.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){b[n]=new F(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y(n,s,a,c){var d=b.hasOwnProperty(s)?b[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,a,d,c)&&(a=null),c||d===null?A(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var Q=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,he=Symbol.for("react.element"),K=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),x=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),oe=Symbol.iterator;function ye(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var ce=Object.assign,L;function J(n){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var ke=!1;function te(n,s){if(!n||ke)return"";ke=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){c=$}n.call(s.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),f=c.stack.split(`
`),w=d.length-1,C=f.length-1;1<=w&&0<=C&&d[w]!==f[C];)C--;for(;1<=w&&0<=C;w--,C--)if(d[w]!==f[C]){if(w!==1||C!==1)do if(w--,C--,0>C||d[w]!==f[C]){var N=`
`+d[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=C);break}}}finally{ke=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?J(n):""}function ue(n){switch(n.tag){case 5:return J(n.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return n=te(n.type,!1),n;case 11:return n=te(n.type.render,!1),n;case 1:return n=te(n.type,!0),n;default:return""}}function fe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case K:return"Portal";case P:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case Ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Consumer";case V:return(n._context.displayName||"Context")+".Provider";case j:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ie:return s=n.displayName||null,s!==null?s:fe(n.type)||"Memo";case Oe:s=n._payload,n=n._init;try{return fe(n(s))}catch{}}return null}function X(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(s);case 8:return s===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ae(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Me(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dt(n){var s=Me(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,f.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Kr(n){n._valueTracker||(n._valueTracker=dt(n))}function Fs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Me(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Fn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function vr(n,s){var a=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Qr(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ae(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function _r(n,s){s=s.checked,s!=null&&Y(n,"checked",s,!1)}function wr(n,s){_r(n,s);var a=Ae(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?ut(n,s.type,a):s.hasOwnProperty("defaultValue")&&ut(n,s.type,Ae(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Us(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ut(n,s,a){(s!=="number"||Fn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var it=Array.isArray;function Yt(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ae(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function zs(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Bs(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(it(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ae(a)}}function Vi(n,s){var a=Ae(s.value),c=Ae(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Un(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function $s(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yr(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?$s(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var zn,Oi=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(zn=zn||document.createElement("div"),zn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=zn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Er(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bi=["Webkit","ms","Moz","O"];Object.keys(Bn).forEach(function(n){bi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Bn[s]=Bn[n]})});function Le(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Bn.hasOwnProperty(n)&&Bn[n]?(""+s).trim():s+"px"}function Ye(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Le(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Wt=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(n,s){if(s){if(Wt[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Mi(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xr=null;function Li(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Tr=null,Ir=null,ct=null;function Wo(n){if(n=_a(n)){if(typeof Tr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=zl(s),Tr(n.stateNode,n.type,s))}}function Jr(n){Ir?ct?ct.push(n):ct=[n]:Ir=n}function Zr(){if(Ir){var n=Ir,s=ct;if(ct=Ir=null,Wo(n),s)for(n=0;n<s.length;n++)Wo(s[n])}}function ml(n,s){return n(s)}function gl(){}var $n=!1;function yl(n,s,a){if($n)return n(s,a);$n=!0;try{return ml(n,s,a)}finally{$n=!1,(Ir!==null||ct!==null)&&(gl(),Zr())}}function Hs(n,s){var a=n.stateNode;if(a===null)return null;var c=zl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var es=!1;if(m)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){es=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{es=!1}function vl(n,s,a,c,d,f,w,C,N){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(re){this.onError(re)}}var Sr=!1,Hn=null,ji=!1,pn=null,_l={onError:function(n){Sr=!0,Hn=n}};function wl(n,s,a,c,d,f,w,C,N){Sr=!1,Hn=null,vl.apply(_l,arguments)}function Go(n,s,a,c,d,f,w,C,N){if(wl.apply(this,arguments),Sr){if(Sr){var $=Hn;Sr=!1,Hn=null}else throw Error(t(198));ji||(ji=!0,pn=$)}}function Sn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Ko(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function El(n){if(Sn(n)!==n)throw Error(t(188))}function Tl(n){var s=n.alternate;if(!s){if(s=Sn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return El(d),n;if(f===c)return El(d),s;f=f.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=f;else{for(var w=!1,C=d.child;C;){if(C===a){w=!0,a=d,c=f;break}if(C===c){w=!0,c=d,a=f;break}C=C.sibling}if(!w){for(C=f.child;C;){if(C===a){w=!0,a=f,c=d;break}if(C===c){w=!0,c=f,a=d;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Il(n){return n=Tl(n),n!==null?qs(n):null}function qs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=qs(n);if(s!==null)return s;n=n.sibling}return null}var Qo=e.unstable_scheduleCallback,Fi=e.unstable_cancelCallback,Ws=e.unstable_shouldYield,kr=e.unstable_requestPaint,Ze=e.unstable_now,Lc=e.unstable_getCurrentPriorityLevel,Ui=e.unstable_ImmediatePriority,Yo=e.unstable_UserBlockingPriority,Gs=e.unstable_NormalPriority,Xo=e.unstable_LowPriority,zi=e.unstable_IdlePriority,Ks=null,sn=null;function Sl(n){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Ks,n,void 0,(n.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:Qs,qn=Math.log,mn=Math.LN2;function Qs(n){return n>>>=0,n===0?32:31-(qn(n)/mn|0)|0}var Wn=64,ns=4194304;function qe(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ar(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,f=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~d;C!==0?c=qe(C):(f&=w,f!==0&&(c=qe(f)))}else w=a&~d,w!==0?c=qe(w):f!==0&&(c=qe(f));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,f=s&-s,d>=f||d===16&&(f&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-on(s),d=1<<a,c|=n[a],s&=~d;return c}function Ys(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xs(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes;0<f;){var w=31-on(f),C=1<<w,N=d[w];N===-1?((C&a)===0||(C&c)!==0)&&(d[w]=Ys(C,s)):N<=s&&(n.expiredLanes|=C),f&=~C}}function Jo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zo(){var n=Wn;return Wn<<=1,(Wn&4194240)===0&&(Wn=64),n}function ea(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Js(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-on(s),n[s]=a}function jc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-on(a),f=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~f}}function ta(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-on(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var ze=0;function Gn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var na,Bi,ra,sa,ia,Kn=!1,$i=[],Qn=null,Yn=null,Nt=null,Zs=new Map,Cr=new Map,an=[],kl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rs(n,s){switch(n){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Zs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cr.delete(s.pointerId)}}function kn(n,s,a,c,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=_a(s),s!==null&&Bi(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Al(n,s,a,c,d){switch(s){case"focusin":return Qn=kn(Qn,n,s,a,c,d),!0;case"dragenter":return Yn=kn(Yn,n,s,a,c,d),!0;case"mouseover":return Nt=kn(Nt,n,s,a,c,d),!0;case"pointerover":var f=d.pointerId;return Zs.set(f,kn(Zs.get(f)||null,n,s,a,c,d)),!0;case"gotpointercapture":return f=d.pointerId,Cr.set(f,kn(Cr.get(f)||null,n,s,a,c,d)),!0}return!1}function Hi(n){var s=ri(n.target);if(s!==null){var a=Sn(s);if(a!==null){if(s=a.tag,s===13){if(s=Ko(a),s!==null){n.blockedOn=s,ia(n.priority,function(){ra(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qe(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=qi(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Xr=c,a.target.dispatchEvent(c),Xr=null}else return s=_a(a),s!==null&&Bi(s),n.blockedOn=a,!1;s.shift()}return!0}function Cl(n,s,a){Qe(n)&&a.delete(s)}function Fc(){Kn=!1,Qn!==null&&Qe(Qn)&&(Qn=null),Yn!==null&&Qe(Yn)&&(Yn=null),Nt!==null&&Qe(Nt)&&(Nt=null),Zs.forEach(Cl),Cr.forEach(Cl)}function ss(n,s){n.blockedOn===s&&(n.blockedOn=null,Kn||(Kn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fc)))}function is(n){function s(d){return ss(d,n)}if(0<$i.length){ss($i[0],n);for(var a=1;a<$i.length;a++){var c=$i[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Qn!==null&&ss(Qn,n),Yn!==null&&ss(Yn,n),Nt!==null&&ss(Nt,n),Zs.forEach(s),Cr.forEach(s),a=0;a<an.length;a++)c=an[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<an.length&&(a=an[0],a.blockedOn===null);)Hi(a),a.blockedOn===null&&an.shift()}var Rr=Q.ReactCurrentBatchConfig,Pr=!0;function Xn(n,s,a,c){var d=ze,f=Rr.transition;Rr.transition=null;try{ze=1,oa(n,s,a,c)}finally{ze=d,Rr.transition=f}}function Rl(n,s,a,c){var d=ze,f=Rr.transition;Rr.transition=null;try{ze=4,oa(n,s,a,c)}finally{ze=d,Rr.transition=f}}function oa(n,s,a,c){if(Pr){var d=qi(n,s,a,c);if(d===null)Yc(n,s,c,Jn,a),rs(n,c);else if(Al(d,n,s,a,c))c.stopPropagation();else if(rs(n,c),s&4&&-1<kl.indexOf(n)){for(;d!==null;){var f=_a(d);if(f!==null&&na(f),f=qi(n,s,a,c),f===null&&Yc(n,s,c,Jn,a),f===d)break;d=f}d!==null&&c.stopPropagation()}else Yc(n,s,c,null,a)}}var Jn=null;function qi(n,s,a,c){if(Jn=null,n=Li(c),n=ri(n),n!==null)if(s=Sn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Ko(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Jn=n,null}function Wi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lc()){case Ui:return 1;case Yo:return 4;case Gs:case Xo:return 16;case zi:return 536870912;default:return 16}default:return 16}}var ln=null,Gi=null,Nr=null;function Pl(){if(Nr)return Nr;var n,s=Gi,a=s.length,c,d="value"in ln?ln.value:ln.textContent,f=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[f-c];c++);return Nr=d.slice(n,1<c?1-c:void 0)}function ei(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zn(){return!0}function aa(){return!1}function Lt(n){function s(a,c,d,f,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(f):f[C]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Zn:aa,this.isPropagationStopped=aa,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),s}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ti=Lt(er),os=ce({},er,{view:0,detail:0}),Ki=Lt(os),Qi,Yi,un,ni=ce({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:De,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==un&&(un&&n.type==="mousemove"?(Qi=n.screenX-un.screenX,Yi=n.screenY-un.screenY):Yi=Qi=0,un=n),Qi)},movementY:function(n){return"movementY"in n?n.movementY:Yi}}),la=Lt(ni),Nl=ce({},ni,{dataTransfer:0}),xl=Lt(Nl),Xi=ce({},os,{relatedTarget:0}),xt=Lt(Xi),Dl=ce({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Vl=Lt(Dl),as=ce({},er,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Lt(as),p=ce({},er,{data:0}),y=Lt(p),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function le(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=H[n])?!!s[n]:!1}function De(){return le}var ft=ce({},os,{key:function(n){if(n.key){var s=I[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ei(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?z[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:De,charCode:function(n){return n.type==="keypress"?ei(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ei(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ge=Lt(ft),gt=ce({},ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cn=Lt(gt),xr=ce({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:De}),tr=Lt(xr),nr=ce({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ji=Lt(nr),ua=ce({},ni,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),eE=Lt(ua),tE=[9,13,27,32],Uc=m&&"CompositionEvent"in window,ca=null;m&&"documentMode"in document&&(ca=document.documentMode);var nE=m&&"TextEvent"in window&&!ca,ip=m&&(!Uc||ca&&8<ca&&11>=ca),op=" ",ap=!1;function lp(n,s){switch(n){case"keyup":return tE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function up(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zi=!1;function rE(n,s){switch(n){case"compositionend":return up(s);case"keypress":return s.which!==32?null:(ap=!0,op);case"textInput":return n=s.data,n===op&&ap?null:n;default:return null}}function sE(n,s){if(Zi)return n==="compositionend"||!Uc&&lp(n,s)?(n=Pl(),Nr=Gi=ln=null,Zi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ip&&s.locale!=="ko"?null:s.data;default:return null}}var iE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!iE[n.type]:s==="textarea"}function hp(n,s,a,c){Jr(c),s=jl(s,"onChange"),0<s.length&&(a=new ti("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ha=null,da=null;function oE(n){Pp(n,0)}function Ol(n){var s=so(n);if(Fs(s))return n}function aE(n,s){if(n==="change")return s}var dp=!1;if(m){var zc;if(m){var Bc="oninput"in document;if(!Bc){var fp=document.createElement("div");fp.setAttribute("oninput","return;"),Bc=typeof fp.oninput=="function"}zc=Bc}else zc=!1;dp=zc&&(!document.documentMode||9<document.documentMode)}function pp(){ha&&(ha.detachEvent("onpropertychange",mp),da=ha=null)}function mp(n){if(n.propertyName==="value"&&Ol(da)){var s=[];hp(s,da,n,Li(n)),yl(oE,s)}}function lE(n,s,a){n==="focusin"?(pp(),ha=s,da=a,ha.attachEvent("onpropertychange",mp)):n==="focusout"&&pp()}function uE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ol(da)}function cE(n,s){if(n==="click")return Ol(s)}function hE(n,s){if(n==="input"||n==="change")return Ol(s)}function dE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var An=typeof Object.is=="function"?Object.is:dE;function fa(n,s){if(An(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!An(n[d],s[d]))return!1}return!0}function gp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function yp(n,s){var a=gp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gp(a)}}function vp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?vp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function _p(){for(var n=window,s=Fn();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Fn(n.document)}return s}function $c(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function fE(n){var s=_p(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&vp(a.ownerDocument.documentElement,a)){if(c!==null&&$c(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!n.extend&&f>c&&(d=c,c=f,f=d),d=yp(a,f);var w=yp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),f>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var pE=m&&"documentMode"in document&&11>=document.documentMode,eo=null,Hc=null,pa=null,qc=!1;function wp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qc||eo==null||eo!==Fn(c)||(c=eo,"selectionStart"in c&&$c(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),pa&&fa(pa,c)||(pa=c,c=jl(Hc,"onSelect"),0<c.length&&(s=new ti("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=eo)))}function bl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var to={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},Wc={},Ep={};m&&(Ep=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function Ml(n){if(Wc[n])return Wc[n];if(!to[n])return n;var s=to[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ep)return Wc[n]=s[a];return n}var Tp=Ml("animationend"),Ip=Ml("animationiteration"),Sp=Ml("animationstart"),kp=Ml("transitionend"),Ap=new Map,Cp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(n,s){Ap.set(n,s),l(s,[n])}for(var Gc=0;Gc<Cp.length;Gc++){var Kc=Cp[Gc],mE=Kc.toLowerCase(),gE=Kc[0].toUpperCase()+Kc.slice(1);ls(mE,"on"+gE)}ls(Tp,"onAnimationEnd"),ls(Ip,"onAnimationIteration"),ls(Sp,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(kp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function Rp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Go(c,s,void 0,n),n.currentTarget=null}function Pp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var w=c.length-1;0<=w;w--){var C=c[w],N=C.instance,$=C.currentTarget;if(C=C.listener,N!==f&&d.isPropagationStopped())break e;Rp(d,C,$),f=N}else for(w=0;w<c.length;w++){if(C=c[w],N=C.instance,$=C.currentTarget,C=C.listener,N!==f&&d.isPropagationStopped())break e;Rp(d,C,$),f=N}}}if(ji)throw n=pn,ji=!1,pn=null,n}function et(n,s){var a=s[nh];a===void 0&&(a=s[nh]=new Set);var c=n+"__bubble";a.has(c)||(Np(s,n,2,!1),a.add(c))}function Qc(n,s,a){var c=0;s&&(c|=4),Np(a,n,c,s)}var Ll="_reactListening"+Math.random().toString(36).slice(2);function ga(n){if(!n[Ll]){n[Ll]=!0,i.forEach(function(a){a!=="selectionchange"&&(yE.has(a)||Qc(a,!1,n),Qc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ll]||(s[Ll]=!0,Qc("selectionchange",!1,s))}}function Np(n,s,a,c){switch(Wi(s)){case 1:var d=Xn;break;case 4:d=Rl;break;default:d=oa}a=d.bind(null,s,a,n),d=void 0,!es||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Yc(n,s,a,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===d||N.nodeType===8&&N.parentNode===d))return;w=w.return}for(;C!==null;){if(w=ri(C),w===null)return;if(N=w.tag,N===5||N===6){c=f=w;continue e}C=C.parentNode}}c=c.return}yl(function(){var $=f,re=Li(a),se=[];e:{var ne=Ap.get(n);if(ne!==void 0){var de=ti,ve=n;switch(n){case"keypress":if(ei(a)===0)break e;case"keydown":case"keyup":de=Ge;break;case"focusin":ve="focus",de=xt;break;case"focusout":ve="blur",de=xt;break;case"beforeblur":case"afterblur":de=xt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=la;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=tr;break;case Tp:case Ip:case Sp:de=Vl;break;case kp:de=Ji;break;case"scroll":de=Ki;break;case"wheel":de=eE;break;case"copy":case"cut":case"paste":de=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=cn}var _e=(s&4)!==0,pt=!_e&&n==="scroll",U=_e?ne!==null?ne+"Capture":null:ne;_e=[];for(var O=$,B;O!==null;){B=O;var ae=B.stateNode;if(B.tag===5&&ae!==null&&(B=ae,U!==null&&(ae=Hs(O,U),ae!=null&&_e.push(ya(O,ae,B)))),pt)break;O=O.return}0<_e.length&&(ne=new de(ne,ve,null,a,re),se.push({event:ne,listeners:_e}))}}if((s&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",de=n==="mouseout"||n==="pointerout",ne&&a!==Xr&&(ve=a.relatedTarget||a.fromElement)&&(ri(ve)||ve[Dr]))break e;if((de||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,de?(ve=a.relatedTarget||a.toElement,de=$,ve=ve?ri(ve):null,ve!==null&&(pt=Sn(ve),ve!==pt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(de=null,ve=$),de!==ve)){if(_e=la,ae="onMouseLeave",U="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(_e=cn,ae="onPointerLeave",U="onPointerEnter",O="pointer"),pt=de==null?ne:so(de),B=ve==null?ne:so(ve),ne=new _e(ae,O+"leave",de,a,re),ne.target=pt,ne.relatedTarget=B,ae=null,ri(re)===$&&(_e=new _e(U,O+"enter",ve,a,re),_e.target=B,_e.relatedTarget=pt,ae=_e),pt=ae,de&&ve)t:{for(_e=de,U=ve,O=0,B=_e;B;B=no(B))O++;for(B=0,ae=U;ae;ae=no(ae))B++;for(;0<O-B;)_e=no(_e),O--;for(;0<B-O;)U=no(U),B--;for(;O--;){if(_e===U||U!==null&&_e===U.alternate)break t;_e=no(_e),U=no(U)}_e=null}else _e=null;de!==null&&xp(se,ne,de,_e,!1),ve!==null&&pt!==null&&xp(se,pt,ve,_e,!0)}}e:{if(ne=$?so($):window,de=ne.nodeName&&ne.nodeName.toLowerCase(),de==="select"||de==="input"&&ne.type==="file")var we=aE;else if(cp(ne))if(dp)we=hE;else{we=uE;var Ie=lE}else(de=ne.nodeName)&&de.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(we=cE);if(we&&(we=we(n,$))){hp(se,we,a,re);break e}Ie&&Ie(n,ne,$),n==="focusout"&&(Ie=ne._wrapperState)&&Ie.controlled&&ne.type==="number"&&ut(ne,"number",ne.value)}switch(Ie=$?so($):window,n){case"focusin":(cp(Ie)||Ie.contentEditable==="true")&&(eo=Ie,Hc=$,pa=null);break;case"focusout":pa=Hc=eo=null;break;case"mousedown":qc=!0;break;case"contextmenu":case"mouseup":case"dragend":qc=!1,wp(se,a,re);break;case"selectionchange":if(pE)break;case"keydown":case"keyup":wp(se,a,re)}var Se;if(Uc)e:{switch(n){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Zi?lp(n,a)&&(Pe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(ip&&a.locale!=="ko"&&(Zi||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Zi&&(Se=Pl()):(ln=re,Gi="value"in ln?ln.value:ln.textContent,Zi=!0)),Ie=jl($,Pe),0<Ie.length&&(Pe=new y(Pe,n,null,a,re),se.push({event:Pe,listeners:Ie}),Se?Pe.data=Se:(Se=up(a),Se!==null&&(Pe.data=Se)))),(Se=nE?rE(n,a):sE(n,a))&&($=jl($,"onBeforeInput"),0<$.length&&(re=new y("onBeforeInput","beforeinput",null,a,re),se.push({event:re,listeners:$}),re.data=Se))}Pp(se,s)})}function ya(n,s,a){return{instance:n,listener:s,currentTarget:a}}function jl(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Hs(n,a),f!=null&&c.unshift(ya(n,f,d)),f=Hs(n,s),f!=null&&c.push(ya(n,f,d))),n=n.return}return c}function no(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function xp(n,s,a,c,d){for(var f=s._reactName,w=[];a!==null&&a!==c;){var C=a,N=C.alternate,$=C.stateNode;if(N!==null&&N===c)break;C.tag===5&&$!==null&&(C=$,d?(N=Hs(a,f),N!=null&&w.unshift(ya(a,N,C))):d||(N=Hs(a,f),N!=null&&w.push(ya(a,N,C)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var vE=/\r\n?/g,_E=/\u0000|\uFFFD/g;function Dp(n){return(typeof n=="string"?n:""+n).replace(vE,`
`).replace(_E,"")}function Fl(n,s,a){if(s=Dp(s),Dp(n)!==s&&a)throw Error(t(425))}function Ul(){}var Xc=null,Jc=null;function Zc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var eh=typeof setTimeout=="function"?setTimeout:void 0,wE=typeof clearTimeout=="function"?clearTimeout:void 0,Vp=typeof Promise=="function"?Promise:void 0,EE=typeof queueMicrotask=="function"?queueMicrotask:typeof Vp<"u"?function(n){return Vp.resolve(null).then(n).catch(TE)}:eh;function TE(n){setTimeout(function(){throw n})}function th(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),is(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);is(s)}function us(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Op(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var ro=Math.random().toString(36).slice(2),rr="__reactFiber$"+ro,va="__reactProps$"+ro,Dr="__reactContainer$"+ro,nh="__reactEvents$"+ro,IE="__reactListeners$"+ro,SE="__reactHandles$"+ro;function ri(n){var s=n[rr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Dr]||a[rr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Op(n);n!==null;){if(a=n[rr])return a;n=Op(n)}return s}n=a,a=n.parentNode}return null}function _a(n){return n=n[rr]||n[Dr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function so(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function zl(n){return n[va]||null}var rh=[],io=-1;function cs(n){return{current:n}}function tt(n){0>io||(n.current=rh[io],rh[io]=null,io--)}function Xe(n,s){io++,rh[io]=n.current,n.current=s}var hs={},jt=cs(hs),Xt=cs(!1),si=hs;function oo(n,s){var a=n.type.contextTypes;if(!a)return hs;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=s[f];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Jt(n){return n=n.childContextTypes,n!=null}function Bl(){tt(Xt),tt(jt)}function bp(n,s,a){if(jt.current!==hs)throw Error(t(168));Xe(jt,s),Xe(Xt,a)}function Mp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,X(n)||"Unknown",d));return ce({},a,c)}function $l(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||hs,si=jt.current,Xe(jt,n),Xe(Xt,Xt.current),!0}function Lp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Mp(n,s,si),c.__reactInternalMemoizedMergedChildContext=n,tt(Xt),tt(jt),Xe(jt,n)):tt(Xt),Xe(Xt,a)}var Vr=null,Hl=!1,sh=!1;function jp(n){Vr===null?Vr=[n]:Vr.push(n)}function kE(n){Hl=!0,jp(n)}function ds(){if(!sh&&Vr!==null){sh=!0;var n=0,s=ze;try{var a=Vr;for(ze=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Vr=null,Hl=!1}catch(d){throw Vr!==null&&(Vr=Vr.slice(n+1)),Qo(Ui,ds),d}finally{ze=s,sh=!1}}return null}var ao=[],lo=0,ql=null,Wl=0,gn=[],yn=0,ii=null,Or=1,br="";function oi(n,s){ao[lo++]=Wl,ao[lo++]=ql,ql=n,Wl=s}function Fp(n,s,a){gn[yn++]=Or,gn[yn++]=br,gn[yn++]=ii,ii=n;var c=Or;n=br;var d=32-on(c)-1;c&=~(1<<d),a+=1;var f=32-on(s)+d;if(30<f){var w=d-d%5;f=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Or=1<<32-on(s)+d|a<<d|c,br=f+n}else Or=1<<f|a<<d|c,br=n}function ih(n){n.return!==null&&(oi(n,1),Fp(n,1,0))}function oh(n){for(;n===ql;)ql=ao[--lo],ao[lo]=null,Wl=ao[--lo],ao[lo]=null;for(;n===ii;)ii=gn[--yn],gn[yn]=null,br=gn[--yn],gn[yn]=null,Or=gn[--yn],gn[yn]=null}var hn=null,dn=null,st=!1,Cn=null;function Up(n,s){var a=En(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function zp(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,hn=n,dn=us(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,hn=n,dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ii!==null?{id:Or,overflow:br}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=En(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,hn=n,dn=null,!0):!1;default:return!1}}function ah(n){return(n.mode&1)!==0&&(n.flags&128)===0}function lh(n){if(st){var s=dn;if(s){var a=s;if(!zp(n,s)){if(ah(n))throw Error(t(418));s=us(a.nextSibling);var c=hn;s&&zp(n,s)?Up(c,a):(n.flags=n.flags&-4097|2,st=!1,hn=n)}}else{if(ah(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,hn=n}}}function Bp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;hn=n}function Gl(n){if(n!==hn)return!1;if(!st)return Bp(n),st=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Zc(n.type,n.memoizedProps)),s&&(s=dn)){if(ah(n))throw $p(),Error(t(418));for(;s;)Up(n,s),s=us(s.nextSibling)}if(Bp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){dn=us(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}dn=null}}else dn=hn?us(n.stateNode.nextSibling):null;return!0}function $p(){for(var n=dn;n;)n=us(n.nextSibling)}function uo(){dn=hn=null,st=!1}function uh(n){Cn===null?Cn=[n]:Cn.push(n)}var AE=Q.ReactCurrentBatchConfig;function wa(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,f=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===f?s.ref:(s=function(w){var C=d.refs;w===null?delete C[f]:C[f]=w},s._stringRef=f,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Kl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Hp(n){var s=n._init;return s(n._payload)}function qp(n){function s(U,O){if(n){var B=U.deletions;B===null?(U.deletions=[O],U.flags|=16):B.push(O)}}function a(U,O){if(!n)return null;for(;O!==null;)s(U,O),O=O.sibling;return null}function c(U,O){for(U=new Map;O!==null;)O.key!==null?U.set(O.key,O):U.set(O.index,O),O=O.sibling;return U}function d(U,O){return U=ws(U,O),U.index=0,U.sibling=null,U}function f(U,O,B){return U.index=B,n?(B=U.alternate,B!==null?(B=B.index,B<O?(U.flags|=2,O):B):(U.flags|=2,O)):(U.flags|=1048576,O)}function w(U){return n&&U.alternate===null&&(U.flags|=2),U}function C(U,O,B,ae){return O===null||O.tag!==6?(O=ed(B,U.mode,ae),O.return=U,O):(O=d(O,B),O.return=U,O)}function N(U,O,B,ae){var we=B.type;return we===R?re(U,O,B.props.children,ae,B.key):O!==null&&(O.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Oe&&Hp(we)===O.type)?(ae=d(O,B.props),ae.ref=wa(U,O,B),ae.return=U,ae):(ae=vu(B.type,B.key,B.props,null,U.mode,ae),ae.ref=wa(U,O,B),ae.return=U,ae)}function $(U,O,B,ae){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=td(B,U.mode,ae),O.return=U,O):(O=d(O,B.children||[]),O.return=U,O)}function re(U,O,B,ae,we){return O===null||O.tag!==7?(O=pi(B,U.mode,ae,we),O.return=U,O):(O=d(O,B),O.return=U,O)}function se(U,O,B){if(typeof O=="string"&&O!==""||typeof O=="number")return O=ed(""+O,U.mode,B),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case he:return B=vu(O.type,O.key,O.props,null,U.mode,B),B.ref=wa(U,null,O),B.return=U,B;case K:return O=td(O,U.mode,B),O.return=U,O;case Oe:var ae=O._init;return se(U,ae(O._payload),B)}if(it(O)||ye(O))return O=pi(O,U.mode,B,null),O.return=U,O;Kl(U,O)}return null}function ne(U,O,B,ae){var we=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return we!==null?null:C(U,O,""+B,ae);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case he:return B.key===we?N(U,O,B,ae):null;case K:return B.key===we?$(U,O,B,ae):null;case Oe:return we=B._init,ne(U,O,we(B._payload),ae)}if(it(B)||ye(B))return we!==null?null:re(U,O,B,ae,null);Kl(U,B)}return null}function de(U,O,B,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return U=U.get(B)||null,C(O,U,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case he:return U=U.get(ae.key===null?B:ae.key)||null,N(O,U,ae,we);case K:return U=U.get(ae.key===null?B:ae.key)||null,$(O,U,ae,we);case Oe:var Ie=ae._init;return de(U,O,B,Ie(ae._payload),we)}if(it(ae)||ye(ae))return U=U.get(B)||null,re(O,U,ae,we,null);Kl(O,ae)}return null}function ve(U,O,B,ae){for(var we=null,Ie=null,Se=O,Pe=O=0,Rt=null;Se!==null&&Pe<B.length;Pe++){Se.index>Pe?(Rt=Se,Se=null):Rt=Se.sibling;var He=ne(U,Se,B[Pe],ae);if(He===null){Se===null&&(Se=Rt);break}n&&Se&&He.alternate===null&&s(U,Se),O=f(He,O,Pe),Ie===null?we=He:Ie.sibling=He,Ie=He,Se=Rt}if(Pe===B.length)return a(U,Se),st&&oi(U,Pe),we;if(Se===null){for(;Pe<B.length;Pe++)Se=se(U,B[Pe],ae),Se!==null&&(O=f(Se,O,Pe),Ie===null?we=Se:Ie.sibling=Se,Ie=Se);return st&&oi(U,Pe),we}for(Se=c(U,Se);Pe<B.length;Pe++)Rt=de(Se,U,Pe,B[Pe],ae),Rt!==null&&(n&&Rt.alternate!==null&&Se.delete(Rt.key===null?Pe:Rt.key),O=f(Rt,O,Pe),Ie===null?we=Rt:Ie.sibling=Rt,Ie=Rt);return n&&Se.forEach(function(Es){return s(U,Es)}),st&&oi(U,Pe),we}function _e(U,O,B,ae){var we=ye(B);if(typeof we!="function")throw Error(t(150));if(B=we.call(B),B==null)throw Error(t(151));for(var Ie=we=null,Se=O,Pe=O=0,Rt=null,He=B.next();Se!==null&&!He.done;Pe++,He=B.next()){Se.index>Pe?(Rt=Se,Se=null):Rt=Se.sibling;var Es=ne(U,Se,He.value,ae);if(Es===null){Se===null&&(Se=Rt);break}n&&Se&&Es.alternate===null&&s(U,Se),O=f(Es,O,Pe),Ie===null?we=Es:Ie.sibling=Es,Ie=Es,Se=Rt}if(He.done)return a(U,Se),st&&oi(U,Pe),we;if(Se===null){for(;!He.done;Pe++,He=B.next())He=se(U,He.value,ae),He!==null&&(O=f(He,O,Pe),Ie===null?we=He:Ie.sibling=He,Ie=He);return st&&oi(U,Pe),we}for(Se=c(U,Se);!He.done;Pe++,He=B.next())He=de(Se,U,Pe,He.value,ae),He!==null&&(n&&He.alternate!==null&&Se.delete(He.key===null?Pe:He.key),O=f(He,O,Pe),Ie===null?we=He:Ie.sibling=He,Ie=He);return n&&Se.forEach(function(i0){return s(U,i0)}),st&&oi(U,Pe),we}function pt(U,O,B,ae){if(typeof B=="object"&&B!==null&&B.type===R&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case he:e:{for(var we=B.key,Ie=O;Ie!==null;){if(Ie.key===we){if(we=B.type,we===R){if(Ie.tag===7){a(U,Ie.sibling),O=d(Ie,B.props.children),O.return=U,U=O;break e}}else if(Ie.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Oe&&Hp(we)===Ie.type){a(U,Ie.sibling),O=d(Ie,B.props),O.ref=wa(U,Ie,B),O.return=U,U=O;break e}a(U,Ie);break}else s(U,Ie);Ie=Ie.sibling}B.type===R?(O=pi(B.props.children,U.mode,ae,B.key),O.return=U,U=O):(ae=vu(B.type,B.key,B.props,null,U.mode,ae),ae.ref=wa(U,O,B),ae.return=U,U=ae)}return w(U);case K:e:{for(Ie=B.key;O!==null;){if(O.key===Ie)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){a(U,O.sibling),O=d(O,B.children||[]),O.return=U,U=O;break e}else{a(U,O);break}else s(U,O);O=O.sibling}O=td(B,U.mode,ae),O.return=U,U=O}return w(U);case Oe:return Ie=B._init,pt(U,O,Ie(B._payload),ae)}if(it(B))return ve(U,O,B,ae);if(ye(B))return _e(U,O,B,ae);Kl(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,O!==null&&O.tag===6?(a(U,O.sibling),O=d(O,B),O.return=U,U=O):(a(U,O),O=ed(B,U.mode,ae),O.return=U,U=O),w(U)):a(U,O)}return pt}var co=qp(!0),Wp=qp(!1),Ql=cs(null),Yl=null,ho=null,ch=null;function hh(){ch=ho=Yl=null}function dh(n){var s=Ql.current;tt(Ql),n._currentValue=s}function fh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function fo(n,s){Yl=n,ch=ho=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Zt=!0),n.firstContext=null)}function vn(n){var s=n._currentValue;if(ch!==n)if(n={context:n,memoizedValue:s,next:null},ho===null){if(Yl===null)throw Error(t(308));ho=n,Yl.dependencies={lanes:0,firstContext:n}}else ho=ho.next=n;return s}var ai=null;function ph(n){ai===null?ai=[n]:ai.push(n)}function Gp(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,ph(s)):(a.next=d.next,d.next=a),s.interleaved=a,Mr(n,c)}function Mr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var fs=!1;function mh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Lr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ps(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,($e&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,Mr(n,a)}return d=c.interleaved,d===null?(s.next=s,ph(c)):(s.next=d.next,d.next=s),c.interleaved=s,Mr(n,a)}function Xl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ta(n,a)}}function Qp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=w:f=f.next=w,a=a.next}while(a!==null);f===null?d=f=s:f=f.next=s}else d=f=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Jl(n,s,a,c){var d=n.updateQueue;fs=!1;var f=d.firstBaseUpdate,w=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var N=C,$=N.next;N.next=null,w===null?f=$:w.next=$,w=N;var re=n.alternate;re!==null&&(re=re.updateQueue,C=re.lastBaseUpdate,C!==w&&(C===null?re.firstBaseUpdate=$:C.next=$,re.lastBaseUpdate=N))}if(f!==null){var se=d.baseState;w=0,re=$=N=null,C=f;do{var ne=C.lane,de=C.eventTime;if((c&ne)===ne){re!==null&&(re=re.next={eventTime:de,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ve=n,_e=C;switch(ne=s,de=a,_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){se=ve.call(de,se,ne);break e}se=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,ne=typeof ve=="function"?ve.call(de,se,ne):ve,ne==null)break e;se=ce({},se,ne);break e;case 2:fs=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,ne=d.effects,ne===null?d.effects=[C]:ne.push(C))}else de={eventTime:de,lane:ne,tag:C.tag,payload:C.payload,callback:C.callback,next:null},re===null?($=re=de,N=se):re=re.next=de,w|=ne;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;ne=C,C=ne.next,ne.next=null,d.lastBaseUpdate=ne,d.shared.pending=null}}while(!0);if(re===null&&(N=se),d.baseState=N,d.firstBaseUpdate=$,d.lastBaseUpdate=re,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else f===null&&(d.shared.lanes=0);ci|=w,n.lanes=w,n.memoizedState=se}}function Yp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Ea={},sr=cs(Ea),Ta=cs(Ea),Ia=cs(Ea);function li(n){if(n===Ea)throw Error(t(174));return n}function gh(n,s){switch(Xe(Ia,s),Xe(Ta,n),Xe(sr,Ea),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Yr(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Yr(s,n)}tt(sr),Xe(sr,s)}function po(){tt(sr),tt(Ta),tt(Ia)}function Xp(n){li(Ia.current);var s=li(sr.current),a=Yr(s,n.type);s!==a&&(Xe(Ta,n),Xe(sr,a))}function yh(n){Ta.current===n&&(tt(sr),tt(Ta))}var ot=cs(0);function Zl(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var vh=[];function _h(){for(var n=0;n<vh.length;n++)vh[n]._workInProgressVersionPrimary=null;vh.length=0}var eu=Q.ReactCurrentDispatcher,wh=Q.ReactCurrentBatchConfig,ui=0,at=null,Tt=null,At=null,tu=!1,Sa=!1,ka=0,CE=0;function Ft(){throw Error(t(321))}function Eh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!An(n[a],s[a]))return!1;return!0}function Th(n,s,a,c,d,f){if(ui=f,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,eu.current=n===null||n.memoizedState===null?xE:DE,n=a(c,d),Sa){f=0;do{if(Sa=!1,ka=0,25<=f)throw Error(t(301));f+=1,At=Tt=null,s.updateQueue=null,eu.current=VE,n=a(c,d)}while(Sa)}if(eu.current=su,s=Tt!==null&&Tt.next!==null,ui=0,At=Tt=at=null,tu=!1,s)throw Error(t(300));return n}function Ih(){var n=ka!==0;return ka=0,n}function ir(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?at.memoizedState=At=n:At=At.next=n,At}function _n(){if(Tt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=Tt.next;var s=At===null?at.memoizedState:At.next;if(s!==null)At=s,Tt=n;else{if(n===null)throw Error(t(310));Tt=n,n={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},At===null?at.memoizedState=At=n:At=At.next=n}return At}function Aa(n,s){return typeof s=="function"?s(n):s}function Sh(n){var s=_n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Tt,d=c.baseQueue,f=a.pending;if(f!==null){if(d!==null){var w=d.next;d.next=f.next,f.next=w}c.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,c=c.baseState;var C=w=null,N=null,$=f;do{var re=$.lane;if((ui&re)===re)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var se={lane:re,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(C=N=se,w=c):N=N.next=se,at.lanes|=re,ci|=re}$=$.next}while($!==null&&$!==f);N===null?w=c:N.next=C,An(c,s.memoizedState)||(Zt=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do f=d.lane,at.lanes|=f,ci|=f,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function kh(n){var s=_n(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,f=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do f=n(f,w.action),w=w.next;while(w!==d);An(f,s.memoizedState)||(Zt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,c]}function Jp(){}function Zp(n,s){var a=at,c=_n(),d=s(),f=!An(c.memoizedState,d);if(f&&(c.memoizedState=d,Zt=!0),c=c.queue,Ah(nm.bind(null,a,c,n),[n]),c.getSnapshot!==s||f||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,Ca(9,tm.bind(null,a,c,d,s),void 0,null),Ct===null)throw Error(t(349));(ui&30)!==0||em(a,s,d)}return d}function em(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function tm(n,s,a,c){s.value=a,s.getSnapshot=c,rm(s)&&sm(n)}function nm(n,s,a){return a(function(){rm(s)&&sm(n)})}function rm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!An(n,a)}catch{return!0}}function sm(n){var s=Mr(n,1);s!==null&&xn(s,n,1,-1)}function im(n){var s=ir();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:n},s.queue=n,n=n.dispatch=NE.bind(null,at,n),[s.memoizedState,n]}function Ca(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function om(){return _n().memoizedState}function nu(n,s,a,c){var d=ir();at.flags|=n,d.memoizedState=Ca(1|s,a,void 0,c===void 0?null:c)}function ru(n,s,a,c){var d=_n();c=c===void 0?null:c;var f=void 0;if(Tt!==null){var w=Tt.memoizedState;if(f=w.destroy,c!==null&&Eh(c,w.deps)){d.memoizedState=Ca(s,a,f,c);return}}at.flags|=n,d.memoizedState=Ca(1|s,a,f,c)}function am(n,s){return nu(8390656,8,n,s)}function Ah(n,s){return ru(2048,8,n,s)}function lm(n,s){return ru(4,2,n,s)}function um(n,s){return ru(4,4,n,s)}function cm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function hm(n,s,a){return a=a!=null?a.concat([n]):null,ru(4,4,cm.bind(null,s,n),a)}function Ch(){}function dm(n,s){var a=_n();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Eh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function fm(n,s){var a=_n();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Eh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function pm(n,s,a){return(ui&21)===0?(n.baseState&&(n.baseState=!1,Zt=!0),n.memoizedState=a):(An(a,s)||(a=Zo(),at.lanes|=a,ci|=a,n.baseState=!0),s)}function RE(n,s){var a=ze;ze=a!==0&&4>a?a:4,n(!0);var c=wh.transition;wh.transition={};try{n(!1),s()}finally{ze=a,wh.transition=c}}function mm(){return _n().memoizedState}function PE(n,s,a){var c=vs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},gm(n))ym(s,a);else if(a=Gp(n,s,a,c),a!==null){var d=Kt();xn(a,n,c,d),vm(a,s,c)}}function NE(n,s,a){var c=vs(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(gm(n))ym(s,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var w=s.lastRenderedState,C=f(w,a);if(d.hasEagerState=!0,d.eagerState=C,An(C,w)){var N=s.interleaved;N===null?(d.next=d,ph(s)):(d.next=N.next,N.next=d),s.interleaved=d;return}}catch{}finally{}a=Gp(n,s,d,c),a!==null&&(d=Kt(),xn(a,n,c,d),vm(a,s,c))}}function gm(n){var s=n.alternate;return n===at||s!==null&&s===at}function ym(n,s){Sa=tu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function vm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ta(n,a)}}var su={readContext:vn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},xE={readContext:vn,useCallback:function(n,s){return ir().memoizedState=[n,s===void 0?null:s],n},useContext:vn,useEffect:am,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,nu(4194308,4,cm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return nu(4194308,4,n,s)},useInsertionEffect:function(n,s){return nu(4,2,n,s)},useMemo:function(n,s){var a=ir();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=ir();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=PE.bind(null,at,n),[c.memoizedState,n]},useRef:function(n){var s=ir();return n={current:n},s.memoizedState=n},useState:im,useDebugValue:Ch,useDeferredValue:function(n){return ir().memoizedState=n},useTransition:function(){var n=im(!1),s=n[0];return n=RE.bind(null,n[1]),ir().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=at,d=ir();if(st){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Ct===null)throw Error(t(349));(ui&30)!==0||em(c,s,a)}d.memoizedState=a;var f={value:a,getSnapshot:s};return d.queue=f,am(nm.bind(null,c,f,n),[n]),c.flags|=2048,Ca(9,tm.bind(null,c,f,a,s),void 0,null),a},useId:function(){var n=ir(),s=Ct.identifierPrefix;if(st){var a=br,c=Or;a=(c&~(1<<32-on(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ka++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=CE++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},DE={readContext:vn,useCallback:dm,useContext:vn,useEffect:Ah,useImperativeHandle:hm,useInsertionEffect:lm,useLayoutEffect:um,useMemo:fm,useReducer:Sh,useRef:om,useState:function(){return Sh(Aa)},useDebugValue:Ch,useDeferredValue:function(n){var s=_n();return pm(s,Tt.memoizedState,n)},useTransition:function(){var n=Sh(Aa)[0],s=_n().memoizedState;return[n,s]},useMutableSource:Jp,useSyncExternalStore:Zp,useId:mm,unstable_isNewReconciler:!1},VE={readContext:vn,useCallback:dm,useContext:vn,useEffect:Ah,useImperativeHandle:hm,useInsertionEffect:lm,useLayoutEffect:um,useMemo:fm,useReducer:kh,useRef:om,useState:function(){return kh(Aa)},useDebugValue:Ch,useDeferredValue:function(n){var s=_n();return Tt===null?s.memoizedState=n:pm(s,Tt.memoizedState,n)},useTransition:function(){var n=kh(Aa)[0],s=_n().memoizedState;return[n,s]},useMutableSource:Jp,useSyncExternalStore:Zp,useId:mm,unstable_isNewReconciler:!1};function Rn(n,s){if(n&&n.defaultProps){s=ce({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Rh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ce({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var iu={isMounted:function(n){return(n=n._reactInternals)?Sn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Kt(),d=vs(n),f=Lr(c,d);f.payload=s,a!=null&&(f.callback=a),s=ps(n,f,d),s!==null&&(xn(s,n,d,c),Xl(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Kt(),d=vs(n),f=Lr(c,d);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=ps(n,f,d),s!==null&&(xn(s,n,d,c),Xl(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Kt(),c=vs(n),d=Lr(a,c);d.tag=2,s!=null&&(d.callback=s),s=ps(n,d,c),s!==null&&(xn(s,n,c,a),Xl(s,n,c))}};function _m(n,s,a,c,d,f,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,f,w):s.prototype&&s.prototype.isPureReactComponent?!fa(a,c)||!fa(d,f):!0}function wm(n,s,a){var c=!1,d=hs,f=s.contextType;return typeof f=="object"&&f!==null?f=vn(f):(d=Jt(s)?si:jt.current,c=s.contextTypes,f=(c=c!=null)?oo(n,d):hs),s=new s(a,f),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=iu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=f),s}function Em(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&iu.enqueueReplaceState(s,s.state,null)}function Ph(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},mh(n);var f=s.contextType;typeof f=="object"&&f!==null?d.context=vn(f):(f=Jt(s)?si:jt.current,d.context=oo(n,f)),d.state=n.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Rh(n,s,f,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&iu.enqueueReplaceState(d,d.state,null),Jl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function mo(n,s){try{var a="",c=s;do a+=ue(c),c=c.return;while(c);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:n,source:s,stack:d,digest:null}}function Nh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function xh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var OE=typeof WeakMap=="function"?WeakMap:Map;function Tm(n,s,a){a=Lr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){du||(du=!0,Wh=c),xh(n,s)},a}function Im(n,s,a){a=Lr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){xh(n,s)}}var f=n.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){xh(n,s),typeof c!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Sm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new OE;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=KE.bind(null,n,s,a),s.then(n,n))}function km(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Am(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Lr(-1,1),s.tag=2,ps(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var bE=Q.ReactCurrentOwner,Zt=!1;function Gt(n,s,a,c){s.child=n===null?Wp(s,null,a,c):co(s,n.child,a,c)}function Cm(n,s,a,c,d){a=a.render;var f=s.ref;return fo(s,d),c=Th(n,s,a,c,f,d),a=Ih(),n!==null&&!Zt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,jr(n,s,d)):(st&&a&&ih(s),s.flags|=1,Gt(n,s,c,d),s.child)}function Rm(n,s,a,c,d){if(n===null){var f=a.type;return typeof f=="function"&&!Zh(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=f,Pm(n,s,f,c,d)):(n=vu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,(n.lanes&d)===0){var w=f.memoizedProps;if(a=a.compare,a=a!==null?a:fa,a(w,c)&&n.ref===s.ref)return jr(n,s,d)}return s.flags|=1,n=ws(f,c),n.ref=s.ref,n.return=s,s.child=n}function Pm(n,s,a,c,d){if(n!==null){var f=n.memoizedProps;if(fa(f,c)&&n.ref===s.ref)if(Zt=!1,s.pendingProps=c=f,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Zt=!0);else return s.lanes=n.lanes,jr(n,s,d)}return Dh(n,s,a,c,d)}function Nm(n,s,a){var c=s.pendingProps,d=c.children,f=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(yo,fn),fn|=a;else{if((a&1073741824)===0)return n=f!==null?f.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Xe(yo,fn),fn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Xe(yo,fn),fn|=c}else f!==null?(c=f.baseLanes|a,s.memoizedState=null):c=a,Xe(yo,fn),fn|=c;return Gt(n,s,d,a),s.child}function xm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Dh(n,s,a,c,d){var f=Jt(a)?si:jt.current;return f=oo(s,f),fo(s,d),a=Th(n,s,a,c,f,d),c=Ih(),n!==null&&!Zt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,jr(n,s,d)):(st&&c&&ih(s),s.flags|=1,Gt(n,s,a,d),s.child)}function Dm(n,s,a,c,d){if(Jt(a)){var f=!0;$l(s)}else f=!1;if(fo(s,d),s.stateNode===null)au(n,s),wm(s,a,c),Ph(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,C=s.memoizedProps;w.props=C;var N=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=vn($):($=Jt(a)?si:jt.current,$=oo(s,$));var re=a.getDerivedStateFromProps,se=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function";se||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||N!==$)&&Em(s,w,c,$),fs=!1;var ne=s.memoizedState;w.state=ne,Jl(s,c,w,d),N=s.memoizedState,C!==c||ne!==N||Xt.current||fs?(typeof re=="function"&&(Rh(s,a,re,c),N=s.memoizedState),(C=fs||_m(s,a,C,c,ne,N,$))?(se||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=N),w.props=c,w.state=N,w.context=$,c=C):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Kp(n,s),C=s.memoizedProps,$=s.type===s.elementType?C:Rn(s.type,C),w.props=$,se=s.pendingProps,ne=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=vn(N):(N=Jt(a)?si:jt.current,N=oo(s,N));var de=a.getDerivedStateFromProps;(re=typeof de=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==se||ne!==N)&&Em(s,w,c,N),fs=!1,ne=s.memoizedState,w.state=ne,Jl(s,c,w,d);var ve=s.memoizedState;C!==se||ne!==ve||Xt.current||fs?(typeof de=="function"&&(Rh(s,a,de,c),ve=s.memoizedState),($=fs||_m(s,a,$,c,ne,ve,N)||!1)?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ve,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ve,N)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ve),w.props=c,w.state=ve,w.context=N,c=$):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),c=!1)}return Vh(n,s,a,c,f,d)}function Vh(n,s,a,c,d,f){xm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Lp(s,a,!1),jr(n,s,f);c=s.stateNode,bE.current=s;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=co(s,n.child,null,f),s.child=co(s,null,C,f)):Gt(n,s,C,f),s.memoizedState=c.state,d&&Lp(s,a,!0),s.child}function Vm(n){var s=n.stateNode;s.pendingContext?bp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&bp(n,s.context,!1),gh(n,s.containerInfo)}function Om(n,s,a,c,d){return uo(),uh(d),s.flags|=256,Gt(n,s,a,c),s.child}var Oh={dehydrated:null,treeContext:null,retryLane:0};function bh(n){return{baseLanes:n,cachePool:null,transitions:null}}function bm(n,s,a){var c=s.pendingProps,d=ot.current,f=!1,w=(s.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(f=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Xe(ot,d&1),n===null)return lh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,f?(c=s.mode,f=s.child,w={mode:"hidden",children:w},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=w):f=_u(w,c,0,null),n=pi(n,c,a,null),f.return=s,n.return=s,f.sibling=n,s.child=f,s.child.memoizedState=bh(a),s.memoizedState=Oh,n):Mh(s,w));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return ME(n,s,w,c,C,d,a);if(f){f=c.fallback,w=s.mode,d=n.child,C=d.sibling;var N={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=N,s.deletions=null):(c=ws(d,N),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?f=ws(C,f):(f=pi(f,w,a,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,w=n.child.memoizedState,w=w===null?bh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},f.memoizedState=w,f.childLanes=n.childLanes&~a,s.memoizedState=Oh,c}return f=n.child,n=f.sibling,c=ws(f,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Mh(n,s){return s=_u({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function ou(n,s,a,c){return c!==null&&uh(c),co(s,n.child,null,a),n=Mh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ME(n,s,a,c,d,f,w){if(a)return s.flags&256?(s.flags&=-257,c=Nh(Error(t(422))),ou(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(f=c.fallback,d=s.mode,c=_u({mode:"visible",children:c.children},d,0,null),f=pi(f,d,w,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,(s.mode&1)!==0&&co(s,n.child,null,w),s.child.memoizedState=bh(w),s.memoizedState=Oh,f);if((s.mode&1)===0)return ou(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,f=Error(t(419)),c=Nh(f,c,void 0),ou(n,s,w,c)}if(C=(w&n.childLanes)!==0,Zt||C){if(c=Ct,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,Mr(n,d),xn(c,n,d,-1))}return Jh(),c=Nh(Error(t(421))),ou(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=QE.bind(null,n),d._reactRetry=s,null):(n=f.treeContext,dn=us(d.nextSibling),hn=s,st=!0,Cn=null,n!==null&&(gn[yn++]=Or,gn[yn++]=br,gn[yn++]=ii,Or=n.id,br=n.overflow,ii=s),s=Mh(s,c.children),s.flags|=4096,s)}function Mm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),fh(n.return,s,a)}function Lh(n,s,a,c,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=d)}function Lm(n,s,a){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if(Gt(n,s,c.children,a),c=ot.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mm(n,a,s);else if(n.tag===19)Mm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(ot,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Zl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Lh(s,!1,d,a,f);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Zl(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Lh(s,!0,a,null,f);break;case"together":Lh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function au(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function jr(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ci|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=ws(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=ws(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function LE(n,s,a){switch(s.tag){case 3:Vm(s),uo();break;case 5:Xp(s);break;case 1:Jt(s.type)&&$l(s);break;case 4:gh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Xe(Ql,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Xe(ot,ot.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?bm(n,s,a):(Xe(ot,ot.current&1),n=jr(n,s,a),n!==null?n.sibling:null);Xe(ot,ot.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Lm(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Xe(ot,ot.current),c)break;return null;case 22:case 23:return s.lanes=0,Nm(n,s,a)}return jr(n,s,a)}var jm,jh,Fm,Um;jm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},jh=function(){},Fm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,li(sr.current);var f=null;switch(a){case"input":d=vr(n,d),c=vr(n,c),f=[];break;case"select":d=ce({},d,{value:void 0}),c=ce({},c,{value:void 0}),f=[];break;case"textarea":d=zs(n,d),c=zs(n,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Ul)}kt(a,c);var w;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var C=d[$];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?f||(f=[]):(f=f||[]).push($,null));for($ in c){var N=c[$];if(C=d!=null?d[$]:void 0,c.hasOwnProperty($)&&N!==C&&(N!=null||C!=null))if($==="style")if(C){for(w in C)!C.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&C[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(f||(f=[]),f.push($,a)),a=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,C=C?C.__html:void 0,N!=null&&C!==N&&(f=f||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(f=f||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(N!=null&&$==="onScroll"&&et("scroll",n),f||C===N||(f=[])):(f=f||[]).push($,N))}a&&(f=f||[]).push("style",a);var $=f;(s.updateQueue=$)&&(s.flags|=4)}},Um=function(n,s,a,c){a!==c&&(s.flags|=4)};function Ra(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ut(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function jE(n,s,a){var c=s.pendingProps;switch(oh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return Jt(s.type)&&Bl(),Ut(s),null;case 3:return c=s.stateNode,po(),tt(Xt),tt(jt),_h(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Gl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Cn!==null&&(Qh(Cn),Cn=null))),jh(n,s),Ut(s),null;case 5:yh(s);var d=li(Ia.current);if(a=s.type,n!==null&&s.stateNode!=null)Fm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ut(s),null}if(n=li(sr.current),Gl(s)){c=s.stateNode,a=s.type;var f=s.memoizedProps;switch(c[rr]=s,c[va]=f,n=(s.mode&1)!==0,a){case"dialog":et("cancel",c),et("close",c);break;case"iframe":case"object":case"embed":et("load",c);break;case"video":case"audio":for(d=0;d<ma.length;d++)et(ma[d],c);break;case"source":et("error",c);break;case"img":case"image":case"link":et("error",c),et("load",c);break;case"details":et("toggle",c);break;case"input":Qr(c,f),et("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},et("invalid",c);break;case"textarea":Bs(c,f),et("invalid",c)}kt(a,f),d=null;for(var w in f)if(f.hasOwnProperty(w)){var C=f[w];w==="children"?typeof C=="string"?c.textContent!==C&&(f.suppressHydrationWarning!==!0&&Fl(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(f.suppressHydrationWarning!==!0&&Fl(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&et("scroll",c)}switch(a){case"input":Kr(c),Us(c,f,!0);break;case"textarea":Kr(c),Un(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Ul)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=$s(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[rr]=s,n[va]=c,jm(n,s,!1,!1),s.stateNode=n;e:{switch(w=Mi(a,c),a){case"dialog":et("cancel",n),et("close",n),d=c;break;case"iframe":case"object":case"embed":et("load",n),d=c;break;case"video":case"audio":for(d=0;d<ma.length;d++)et(ma[d],n);d=c;break;case"source":et("error",n),d=c;break;case"img":case"image":case"link":et("error",n),et("load",n),d=c;break;case"details":et("toggle",n),d=c;break;case"input":Qr(n,c),d=vr(n,c),et("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ce({},c,{value:void 0}),et("invalid",n);break;case"textarea":Bs(n,c),d=zs(n,c),et("invalid",n);break;default:d=c}kt(a,d),C=d;for(f in C)if(C.hasOwnProperty(f)){var N=C[f];f==="style"?Ye(n,N):f==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Oi(n,N)):f==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Er(n,N):typeof N=="number"&&Er(n,""+N):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?N!=null&&f==="onScroll"&&et("scroll",n):N!=null&&Y(n,f,N,w))}switch(a){case"input":Kr(n),Us(n,c,!1);break;case"textarea":Kr(n),Un(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ae(c.value));break;case"select":n.multiple=!!c.multiple,f=c.value,f!=null?Yt(n,!!c.multiple,f,!1):c.defaultValue!=null&&Yt(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Ul)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ut(s),null;case 6:if(n&&s.stateNode!=null)Um(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=li(Ia.current),li(sr.current),Gl(s)){if(c=s.stateNode,a=s.memoizedProps,c[rr]=s,(f=c.nodeValue!==a)&&(n=hn,n!==null))switch(n.tag){case 3:Fl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fl(c.nodeValue,a,(n.mode&1)!==0)}f&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[rr]=s,s.stateNode=c}return Ut(s),null;case 13:if(tt(ot),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)$p(),uo(),s.flags|=98560,f=!1;else if(f=Gl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(t(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));f[rr]=s}else uo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ut(s),f=!1}else Cn!==null&&(Qh(Cn),Cn=null),f=!0;if(!f)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ot.current&1)!==0?It===0&&(It=3):Jh())),s.updateQueue!==null&&(s.flags|=4),Ut(s),null);case 4:return po(),jh(n,s),n===null&&ga(s.stateNode.containerInfo),Ut(s),null;case 10:return dh(s.type._context),Ut(s),null;case 17:return Jt(s.type)&&Bl(),Ut(s),null;case 19:if(tt(ot),f=s.memoizedState,f===null)return Ut(s),null;if(c=(s.flags&128)!==0,w=f.rendering,w===null)if(c)Ra(f,!1);else{if(It!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=Zl(n),w!==null){for(s.flags|=128,Ra(f,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)f=a,n=c,f.flags&=14680066,w=f.alternate,w===null?(f.childLanes=0,f.lanes=n,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=w.childLanes,f.lanes=w.lanes,f.child=w.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=w.memoizedProps,f.memoizedState=w.memoizedState,f.updateQueue=w.updateQueue,f.type=w.type,n=w.dependencies,f.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(ot,ot.current&1|2),s.child}n=n.sibling}f.tail!==null&&Ze()>vo&&(s.flags|=128,c=!0,Ra(f,!1),s.lanes=4194304)}else{if(!c)if(n=Zl(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ra(f,!0),f.tail===null&&f.tailMode==="hidden"&&!w.alternate&&!st)return Ut(s),null}else 2*Ze()-f.renderingStartTime>vo&&a!==1073741824&&(s.flags|=128,c=!0,Ra(f,!1),s.lanes=4194304);f.isBackwards?(w.sibling=s.child,s.child=w):(a=f.last,a!==null?a.sibling=w:s.child=w,f.last=w)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Ze(),s.sibling=null,a=ot.current,Xe(ot,c?a&1|2:a&1),s):(Ut(s),null);case 22:case 23:return Xh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(fn&1073741824)!==0&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function FE(n,s){switch(oh(s),s.tag){case 1:return Jt(s.type)&&Bl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return po(),tt(Xt),tt(jt),_h(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return yh(s),null;case 13:if(tt(ot),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));uo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(ot),null;case 4:return po(),null;case 10:return dh(s.type._context),null;case 22:case 23:return Xh(),null;case 24:return null;default:return null}}var lu=!1,zt=!1,UE=typeof WeakSet=="function"?WeakSet:Set,ge=null;function go(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ht(n,s,c)}else a.current=null}function Fh(n,s,a){try{a()}catch(c){ht(n,s,c)}}var zm=!1;function zE(n,s){if(Xc=Pr,n=_p(),$c(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var w=0,C=-1,N=-1,$=0,re=0,se=n,ne=null;t:for(;;){for(var de;se!==a||d!==0&&se.nodeType!==3||(C=w+d),se!==f||c!==0&&se.nodeType!==3||(N=w+c),se.nodeType===3&&(w+=se.nodeValue.length),(de=se.firstChild)!==null;)ne=se,se=de;for(;;){if(se===n)break t;if(ne===a&&++$===d&&(C=w),ne===f&&++re===c&&(N=w),(de=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=de}a=C===-1||N===-1?null:{start:C,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jc={focusedElem:n,selectionRange:a},Pr=!1,ge=s;ge!==null;)if(s=ge,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ge=n;else for(;ge!==null;){s=ge;try{var ve=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var _e=ve.memoizedProps,pt=ve.memoizedState,U=s.stateNode,O=U.getSnapshotBeforeUpdate(s.elementType===s.type?_e:Rn(s.type,_e),pt);U.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){ht(s,s.return,ae)}if(n=s.sibling,n!==null){n.return=s.return,ge=n;break}ge=s.return}return ve=zm,zm=!1,ve}function Pa(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var f=d.destroy;d.destroy=void 0,f!==void 0&&Fh(s,a,f)}d=d.next}while(d!==c)}}function uu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Uh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Bm(n){var s=n.alternate;s!==null&&(n.alternate=null,Bm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[rr],delete s[va],delete s[nh],delete s[IE],delete s[SE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function $m(n){return n.tag===5||n.tag===3||n.tag===4}function Hm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$m(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ul));else if(c!==4&&(n=n.child,n!==null))for(zh(n,s,a),n=n.sibling;n!==null;)zh(n,s,a),n=n.sibling}function Bh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Bh(n,s,a),n=n.sibling;n!==null;)Bh(n,s,a),n=n.sibling}var Dt=null,Pn=!1;function ms(n,s,a){for(a=a.child;a!==null;)qm(n,s,a),a=a.sibling}function qm(n,s,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Ks,a)}catch{}switch(a.tag){case 5:zt||go(a,s);case 6:var c=Dt,d=Pn;Dt=null,ms(n,s,a),Dt=c,Pn=d,Dt!==null&&(Pn?(n=Dt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Dt.removeChild(a.stateNode));break;case 18:Dt!==null&&(Pn?(n=Dt,a=a.stateNode,n.nodeType===8?th(n.parentNode,a):n.nodeType===1&&th(n,a),is(n)):th(Dt,a.stateNode));break;case 4:c=Dt,d=Pn,Dt=a.stateNode.containerInfo,Pn=!0,ms(n,s,a),Dt=c,Pn=d;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,w=f.destroy;f=f.tag,w!==void 0&&((f&2)!==0||(f&4)!==0)&&Fh(a,s,w),d=d.next}while(d!==c)}ms(n,s,a);break;case 1:if(!zt&&(go(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){ht(a,s,C)}ms(n,s,a);break;case 21:ms(n,s,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,ms(n,s,a),zt=c):ms(n,s,a);break;default:ms(n,s,a)}}function Wm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new UE),s.forEach(function(c){var d=YE.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Nn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var f=n,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 5:Dt=C.stateNode,Pn=!1;break e;case 3:Dt=C.stateNode.containerInfo,Pn=!0;break e;case 4:Dt=C.stateNode.containerInfo,Pn=!0;break e}C=C.return}if(Dt===null)throw Error(t(160));qm(f,w,d),Dt=null,Pn=!1;var N=d.alternate;N!==null&&(N.return=null),d.return=null}catch($){ht(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Gm(s,n),s=s.sibling}function Gm(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Nn(s,n),or(n),c&4){try{Pa(3,n,n.return),uu(3,n)}catch(_e){ht(n,n.return,_e)}try{Pa(5,n,n.return)}catch(_e){ht(n,n.return,_e)}}break;case 1:Nn(s,n),or(n),c&512&&a!==null&&go(a,a.return);break;case 5:if(Nn(s,n),or(n),c&512&&a!==null&&go(a,a.return),n.flags&32){var d=n.stateNode;try{Er(d,"")}catch(_e){ht(n,n.return,_e)}}if(c&4&&(d=n.stateNode,d!=null)){var f=n.memoizedProps,w=a!==null?a.memoizedProps:f,C=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{C==="input"&&f.type==="radio"&&f.name!=null&&_r(d,f),Mi(C,w);var $=Mi(C,f);for(w=0;w<N.length;w+=2){var re=N[w],se=N[w+1];re==="style"?Ye(d,se):re==="dangerouslySetInnerHTML"?Oi(d,se):re==="children"?Er(d,se):Y(d,re,se,$)}switch(C){case"input":wr(d,f);break;case"textarea":Vi(d,f);break;case"select":var ne=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var de=f.value;de!=null?Yt(d,!!f.multiple,de,!1):ne!==!!f.multiple&&(f.defaultValue!=null?Yt(d,!!f.multiple,f.defaultValue,!0):Yt(d,!!f.multiple,f.multiple?[]:"",!1))}d[va]=f}catch(_e){ht(n,n.return,_e)}}break;case 6:if(Nn(s,n),or(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,f=n.memoizedProps;try{d.nodeValue=f}catch(_e){ht(n,n.return,_e)}}break;case 3:if(Nn(s,n),or(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{is(s.containerInfo)}catch(_e){ht(n,n.return,_e)}break;case 4:Nn(s,n),or(n);break;case 13:Nn(s,n),or(n),d=n.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(qh=Ze())),c&4&&Wm(n);break;case 22:if(re=a!==null&&a.memoizedState!==null,n.mode&1?(zt=($=zt)||re,Nn(s,n),zt=$):Nn(s,n),or(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!re&&(n.mode&1)!==0)for(ge=n,re=n.child;re!==null;){for(se=ge=re;ge!==null;){switch(ne=ge,de=ne.child,ne.tag){case 0:case 11:case 14:case 15:Pa(4,ne,ne.return);break;case 1:go(ne,ne.return);var ve=ne.stateNode;if(typeof ve.componentWillUnmount=="function"){c=ne,a=ne.return;try{s=c,ve.props=s.memoizedProps,ve.state=s.memoizedState,ve.componentWillUnmount()}catch(_e){ht(c,a,_e)}}break;case 5:go(ne,ne.return);break;case 22:if(ne.memoizedState!==null){Ym(se);continue}}de!==null?(de.return=ne,ge=de):Ym(se)}re=re.sibling}e:for(re=null,se=n;;){if(se.tag===5){if(re===null){re=se;try{d=se.stateNode,$?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(C=se.stateNode,N=se.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,C.style.display=Le("display",w))}catch(_e){ht(n,n.return,_e)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=$?"":se.memoizedProps}catch(_e){ht(n,n.return,_e)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===n)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===n)break e;for(;se.sibling===null;){if(se.return===null||se.return===n)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Nn(s,n),or(n),c&4&&Wm(n);break;case 21:break;default:Nn(s,n),or(n)}}function or(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if($m(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Er(d,""),c.flags&=-33);var f=Hm(n);Bh(n,f,d);break;case 3:case 4:var w=c.stateNode.containerInfo,C=Hm(n);zh(n,C,w);break;default:throw Error(t(161))}}catch(N){ht(n,n.return,N)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function BE(n,s,a){ge=n,Km(n)}function Km(n,s,a){for(var c=(n.mode&1)!==0;ge!==null;){var d=ge,f=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||lu;if(!w){var C=d.alternate,N=C!==null&&C.memoizedState!==null||zt;C=lu;var $=zt;if(lu=w,(zt=N)&&!$)for(ge=d;ge!==null;)w=ge,N=w.child,w.tag===22&&w.memoizedState!==null?Xm(d):N!==null?(N.return=w,ge=N):Xm(d);for(;f!==null;)ge=f,Km(f),f=f.sibling;ge=d,lu=C,zt=$}Qm(n)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,ge=f):Qm(n)}}function Qm(n){for(;ge!==null;){var s=ge;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:zt||uu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!zt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Rn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=s.updateQueue;f!==null&&Yp(s,f,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Yp(s,w,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var N=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var re=$.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&is(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||s.flags&512&&Uh(s)}catch(ne){ht(s,s.return,ne)}}if(s===n){ge=null;break}if(a=s.sibling,a!==null){a.return=s.return,ge=a;break}ge=s.return}}function Ym(n){for(;ge!==null;){var s=ge;if(s===n){ge=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ge=a;break}ge=s.return}}function Xm(n){for(;ge!==null;){var s=ge;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{uu(4,s)}catch(N){ht(s,a,N)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(N){ht(s,d,N)}}var f=s.return;try{Uh(s)}catch(N){ht(s,f,N)}break;case 5:var w=s.return;try{Uh(s)}catch(N){ht(s,w,N)}}}catch(N){ht(s,s.return,N)}if(s===n){ge=null;break}var C=s.sibling;if(C!==null){C.return=s.return,ge=C;break}ge=s.return}}var $E=Math.ceil,cu=Q.ReactCurrentDispatcher,$h=Q.ReactCurrentOwner,wn=Q.ReactCurrentBatchConfig,$e=0,Ct=null,yt=null,Vt=0,fn=0,yo=cs(0),It=0,Na=null,ci=0,hu=0,Hh=0,xa=null,en=null,qh=0,vo=1/0,Fr=null,du=!1,Wh=null,gs=null,fu=!1,ys=null,pu=0,Da=0,Gh=null,mu=-1,gu=0;function Kt(){return($e&6)!==0?Ze():mu!==-1?mu:mu=Ze()}function vs(n){return(n.mode&1)===0?1:($e&2)!==0&&Vt!==0?Vt&-Vt:AE.transition!==null?(gu===0&&(gu=Zo()),gu):(n=ze,n!==0||(n=window.event,n=n===void 0?16:Wi(n.type)),n)}function xn(n,s,a,c){if(50<Da)throw Da=0,Gh=null,Error(t(185));Js(n,a,c),(($e&2)===0||n!==Ct)&&(n===Ct&&(($e&2)===0&&(hu|=a),It===4&&_s(n,Vt)),tn(n,c),a===1&&$e===0&&(s.mode&1)===0&&(vo=Ze()+500,Hl&&ds()))}function tn(n,s){var a=n.callbackNode;Xs(n,s);var c=Ar(n,n===Ct?Vt:0);if(c===0)a!==null&&Fi(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Fi(a),s===1)n.tag===0?kE(Zm.bind(null,n)):jp(Zm.bind(null,n)),EE(function(){($e&6)===0&&ds()}),a=null;else{switch(Gn(c)){case 1:a=Ui;break;case 4:a=Yo;break;case 16:a=Gs;break;case 536870912:a=zi;break;default:a=Gs}a=ag(a,Jm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Jm(n,s){if(mu=-1,gu=0,($e&6)!==0)throw Error(t(327));var a=n.callbackNode;if(_o()&&n.callbackNode!==a)return null;var c=Ar(n,n===Ct?Vt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=yu(n,c);else{s=c;var d=$e;$e|=2;var f=tg();(Ct!==n||Vt!==s)&&(Fr=null,vo=Ze()+500,di(n,s));do try{WE();break}catch(C){eg(n,C)}while(!0);hh(),cu.current=f,$e=d,yt!==null?s=0:(Ct=null,Vt=0,s=It)}if(s!==0){if(s===2&&(d=Jo(n),d!==0&&(c=d,s=Kh(n,d))),s===1)throw a=Na,di(n,0),_s(n,c),tn(n,Ze()),a;if(s===6)_s(n,c);else{if(d=n.current.alternate,(c&30)===0&&!HE(d)&&(s=yu(n,c),s===2&&(f=Jo(n),f!==0&&(c=f,s=Kh(n,f))),s===1))throw a=Na,di(n,0),_s(n,c),tn(n,Ze()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:fi(n,en,Fr);break;case 3:if(_s(n,c),(c&130023424)===c&&(s=qh+500-Ze(),10<s)){if(Ar(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=eh(fi.bind(null,n,en,Fr),s);break}fi(n,en,Fr);break;case 4:if(_s(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-on(c);f=1<<w,w=s[w],w>d&&(d=w),c&=~f}if(c=d,c=Ze()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*$E(c/1960))-c,10<c){n.timeoutHandle=eh(fi.bind(null,n,en,Fr),c);break}fi(n,en,Fr);break;case 5:fi(n,en,Fr);break;default:throw Error(t(329))}}}return tn(n,Ze()),n.callbackNode===a?Jm.bind(null,n):null}function Kh(n,s){var a=xa;return n.current.memoizedState.isDehydrated&&(di(n,s).flags|=256),n=yu(n,s),n!==2&&(s=en,en=a,s!==null&&Qh(s)),n}function Qh(n){en===null?en=n:en.push.apply(en,n)}function HE(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],f=d.getSnapshot;d=d.value;try{if(!An(f(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _s(n,s){for(s&=~Hh,s&=~hu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-on(s),c=1<<a;n[a]=-1,s&=~c}}function Zm(n){if(($e&6)!==0)throw Error(t(327));_o();var s=Ar(n,0);if((s&1)===0)return tn(n,Ze()),null;var a=yu(n,s);if(n.tag!==0&&a===2){var c=Jo(n);c!==0&&(s=c,a=Kh(n,c))}if(a===1)throw a=Na,di(n,0),_s(n,s),tn(n,Ze()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,fi(n,en,Fr),tn(n,Ze()),null}function Yh(n,s){var a=$e;$e|=1;try{return n(s)}finally{$e=a,$e===0&&(vo=Ze()+500,Hl&&ds())}}function hi(n){ys!==null&&ys.tag===0&&($e&6)===0&&_o();var s=$e;$e|=1;var a=wn.transition,c=ze;try{if(wn.transition=null,ze=1,n)return n()}finally{ze=c,wn.transition=a,$e=s,($e&6)===0&&ds()}}function Xh(){fn=yo.current,tt(yo)}function di(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,wE(a)),yt!==null)for(a=yt.return;a!==null;){var c=a;switch(oh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Bl();break;case 3:po(),tt(Xt),tt(jt),_h();break;case 5:yh(c);break;case 4:po();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:dh(c.type._context);break;case 22:case 23:Xh()}a=a.return}if(Ct=n,yt=n=ws(n.current,null),Vt=fn=s,It=0,Na=null,Hh=hu=ci=0,en=xa=null,ai!==null){for(s=0;s<ai.length;s++)if(a=ai[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,f=a.pending;if(f!==null){var w=f.next;f.next=d,c.next=w}a.pending=c}ai=null}return n}function eg(n,s){do{var a=yt;try{if(hh(),eu.current=su,tu){for(var c=at.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}tu=!1}if(ui=0,At=Tt=at=null,Sa=!1,ka=0,$h.current=null,a===null||a.return===null){It=1,Na=s,yt=null;break}e:{var f=n,w=a.return,C=a,N=s;if(s=Vt,C.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,re=C,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var de=km(w);if(de!==null){de.flags&=-257,Am(de,w,C,f,s),de.mode&1&&Sm(f,$,s),s=de,N=$;var ve=s.updateQueue;if(ve===null){var _e=new Set;_e.add(N),s.updateQueue=_e}else ve.add(N);break e}else{if((s&1)===0){Sm(f,$,s),Jh();break e}N=Error(t(426))}}else if(st&&C.mode&1){var pt=km(w);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),Am(pt,w,C,f,s),uh(mo(N,C));break e}}f=N=mo(N,C),It!==4&&(It=2),xa===null?xa=[f]:xa.push(f),f=w;do{switch(f.tag){case 3:f.flags|=65536,s&=-s,f.lanes|=s;var U=Tm(f,N,s);Qp(f,U);break e;case 1:C=N;var O=f.type,B=f.stateNode;if((f.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(gs===null||!gs.has(B)))){f.flags|=65536,s&=-s,f.lanes|=s;var ae=Im(f,C,s);Qp(f,ae);break e}}f=f.return}while(f!==null)}rg(a)}catch(we){s=we,yt===a&&a!==null&&(yt=a=a.return);continue}break}while(!0)}function tg(){var n=cu.current;return cu.current=su,n===null?su:n}function Jh(){(It===0||It===3||It===2)&&(It=4),Ct===null||(ci&268435455)===0&&(hu&268435455)===0||_s(Ct,Vt)}function yu(n,s){var a=$e;$e|=2;var c=tg();(Ct!==n||Vt!==s)&&(Fr=null,di(n,s));do try{qE();break}catch(d){eg(n,d)}while(!0);if(hh(),$e=a,cu.current=c,yt!==null)throw Error(t(261));return Ct=null,Vt=0,It}function qE(){for(;yt!==null;)ng(yt)}function WE(){for(;yt!==null&&!Ws();)ng(yt)}function ng(n){var s=og(n.alternate,n,fn);n.memoizedProps=n.pendingProps,s===null?rg(n):yt=s,$h.current=null}function rg(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=jE(a,s,fn),a!==null){yt=a;return}}else{if(a=FE(a,s),a!==null){a.flags&=32767,yt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{It=6,yt=null;return}}if(s=s.sibling,s!==null){yt=s;return}yt=s=n}while(s!==null);It===0&&(It=5)}function fi(n,s,a){var c=ze,d=wn.transition;try{wn.transition=null,ze=1,GE(n,s,a,c)}finally{wn.transition=d,ze=c}return null}function GE(n,s,a,c){do _o();while(ys!==null);if(($e&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var f=a.lanes|a.childLanes;if(jc(n,f),n===Ct&&(yt=Ct=null,Vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||fu||(fu=!0,ag(Gs,function(){return _o(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=wn.transition,wn.transition=null;var w=ze;ze=1;var C=$e;$e|=4,$h.current=null,zE(n,a),Gm(a,n),fE(Jc),Pr=!!Xc,Jc=Xc=null,n.current=a,BE(a),kr(),$e=C,ze=w,wn.transition=f}else n.current=a;if(fu&&(fu=!1,ys=n,pu=d),f=n.pendingLanes,f===0&&(gs=null),Sl(a.stateNode),tn(n,Ze()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(du)throw du=!1,n=Wh,Wh=null,n;return(pu&1)!==0&&n.tag!==0&&_o(),f=n.pendingLanes,(f&1)!==0?n===Gh?Da++:(Da=0,Gh=n):Da=0,ds(),null}function _o(){if(ys!==null){var n=Gn(pu),s=wn.transition,a=ze;try{if(wn.transition=null,ze=16>n?16:n,ys===null)var c=!1;else{if(n=ys,ys=null,pu=0,($e&6)!==0)throw Error(t(331));var d=$e;for($e|=4,ge=n.current;ge!==null;){var f=ge,w=f.child;if((ge.flags&16)!==0){var C=f.deletions;if(C!==null){for(var N=0;N<C.length;N++){var $=C[N];for(ge=$;ge!==null;){var re=ge;switch(re.tag){case 0:case 11:case 15:Pa(8,re,f)}var se=re.child;if(se!==null)se.return=re,ge=se;else for(;ge!==null;){re=ge;var ne=re.sibling,de=re.return;if(Bm(re),re===$){ge=null;break}if(ne!==null){ne.return=de,ge=ne;break}ge=de}}}var ve=f.alternate;if(ve!==null){var _e=ve.child;if(_e!==null){ve.child=null;do{var pt=_e.sibling;_e.sibling=null,_e=pt}while(_e!==null)}}ge=f}}if((f.subtreeFlags&2064)!==0&&w!==null)w.return=f,ge=w;else e:for(;ge!==null;){if(f=ge,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Pa(9,f,f.return)}var U=f.sibling;if(U!==null){U.return=f.return,ge=U;break e}ge=f.return}}var O=n.current;for(ge=O;ge!==null;){w=ge;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,ge=B;else e:for(w=O;ge!==null;){if(C=ge,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:uu(9,C)}}catch(we){ht(C,C.return,we)}if(C===w){ge=null;break e}var ae=C.sibling;if(ae!==null){ae.return=C.return,ge=ae;break e}ge=C.return}}if($e=d,ds(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Ks,n)}catch{}c=!0}return c}finally{ze=a,wn.transition=s}}return!1}function sg(n,s,a){s=mo(a,s),s=Tm(n,s,1),n=ps(n,s,1),s=Kt(),n!==null&&(Js(n,1,s),tn(n,s))}function ht(n,s,a){if(n.tag===3)sg(n,n,a);else for(;s!==null;){if(s.tag===3){sg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(gs===null||!gs.has(c))){n=mo(a,n),n=Im(s,n,1),s=ps(s,n,1),n=Kt(),s!==null&&(Js(s,1,n),tn(s,n));break}}s=s.return}}function KE(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Kt(),n.pingedLanes|=n.suspendedLanes&a,Ct===n&&(Vt&a)===a&&(It===4||It===3&&(Vt&130023424)===Vt&&500>Ze()-qh?di(n,0):Hh|=a),tn(n,s)}function ig(n,s){s===0&&((n.mode&1)===0?s=1:(s=ns,ns<<=1,(ns&130023424)===0&&(ns=4194304)));var a=Kt();n=Mr(n,s),n!==null&&(Js(n,s,a),tn(n,a))}function QE(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),ig(n,a)}function YE(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),ig(n,a)}var og;og=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Xt.current)Zt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Zt=!1,LE(n,s,a);Zt=(n.flags&131072)!==0}else Zt=!1,st&&(s.flags&1048576)!==0&&Fp(s,Wl,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;au(n,s),n=s.pendingProps;var d=oo(s,jt.current);fo(s,a),d=Th(null,s,c,n,d,a);var f=Ih();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Jt(c)?(f=!0,$l(s)):f=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,mh(s),d.updater=iu,s.stateNode=d,d._reactInternals=s,Ph(s,c,n,a),s=Vh(null,s,c,!0,f,a)):(s.tag=0,st&&f&&ih(s),Gt(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(au(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=JE(c),n=Rn(c,n),d){case 0:s=Dh(null,s,c,n,a);break e;case 1:s=Dm(null,s,c,n,a);break e;case 11:s=Cm(null,s,c,n,a);break e;case 14:s=Rm(null,s,c,Rn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Rn(c,d),Dh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Rn(c,d),Dm(n,s,c,d,a);case 3:e:{if(Vm(s),n===null)throw Error(t(387));c=s.pendingProps,f=s.memoizedState,d=f.element,Kp(n,s),Jl(s,c,null,a);var w=s.memoizedState;if(c=w.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){d=mo(Error(t(423)),s),s=Om(n,s,c,a,d);break e}else if(c!==d){d=mo(Error(t(424)),s),s=Om(n,s,c,a,d);break e}else for(dn=us(s.stateNode.containerInfo.firstChild),hn=s,st=!0,Cn=null,a=Wp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(uo(),c===d){s=jr(n,s,a);break e}Gt(n,s,c,a)}s=s.child}return s;case 5:return Xp(s),n===null&&lh(s),c=s.type,d=s.pendingProps,f=n!==null?n.memoizedProps:null,w=d.children,Zc(c,d)?w=null:f!==null&&Zc(c,f)&&(s.flags|=32),xm(n,s),Gt(n,s,w,a),s.child;case 6:return n===null&&lh(s),null;case 13:return bm(n,s,a);case 4:return gh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=co(s,null,c,a):Gt(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Rn(c,d),Cm(n,s,c,d,a);case 7:return Gt(n,s,s.pendingProps,a),s.child;case 8:return Gt(n,s,s.pendingProps.children,a),s.child;case 12:return Gt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,f=s.memoizedProps,w=d.value,Xe(Ql,c._currentValue),c._currentValue=w,f!==null)if(An(f.value,w)){if(f.children===d.children&&!Xt.current){s=jr(n,s,a);break e}}else for(f=s.child,f!==null&&(f.return=s);f!==null;){var C=f.dependencies;if(C!==null){w=f.child;for(var N=C.firstContext;N!==null;){if(N.context===c){if(f.tag===1){N=Lr(-1,a&-a),N.tag=2;var $=f.updateQueue;if($!==null){$=$.shared;var re=$.pending;re===null?N.next=N:(N.next=re.next,re.next=N),$.pending=N}}f.lanes|=a,N=f.alternate,N!==null&&(N.lanes|=a),fh(f.return,a,s),C.lanes|=a;break}N=N.next}}else if(f.tag===10)w=f.type===s.type?null:f.child;else if(f.tag===18){if(w=f.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),fh(w,a,s),w=f.sibling}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===s){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}Gt(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,fo(s,a),d=vn(d),c=c(d),s.flags|=1,Gt(n,s,c,a),s.child;case 14:return c=s.type,d=Rn(c,s.pendingProps),d=Rn(c.type,d),Rm(n,s,c,d,a);case 15:return Pm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Rn(c,d),au(n,s),s.tag=1,Jt(c)?(n=!0,$l(s)):n=!1,fo(s,a),wm(s,c,d),Ph(s,c,d,a),Vh(null,s,c,!0,n,a);case 19:return Lm(n,s,a);case 22:return Nm(n,s,a)}throw Error(t(156,s.tag))};function ag(n,s){return Qo(n,s)}function XE(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(n,s,a,c){return new XE(n,s,a,c)}function Zh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function JE(n){if(typeof n=="function")return Zh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===j)return 11;if(n===ie)return 14}return 2}function ws(n,s){var a=n.alternate;return a===null?(a=En(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function vu(n,s,a,c,d,f){var w=2;if(c=n,typeof n=="function")Zh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case R:return pi(a.children,d,f,s);case k:w=8,d|=8;break;case P:return n=En(12,a,s,d|2),n.elementType=P,n.lanes=f,n;case T:return n=En(13,a,s,d),n.elementType=T,n.lanes=f,n;case Ee:return n=En(19,a,s,d),n.elementType=Ee,n.lanes=f,n;case Re:return _u(a,d,f,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case V:w=10;break e;case x:w=9;break e;case j:w=11;break e;case ie:w=14;break e;case Oe:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=En(w,a,s,d),s.elementType=n,s.type=c,s.lanes=f,s}function pi(n,s,a,c){return n=En(7,n,c,s),n.lanes=a,n}function _u(n,s,a,c){return n=En(22,n,c,s),n.elementType=Re,n.lanes=a,n.stateNode={isHidden:!1},n}function ed(n,s,a){return n=En(6,n,null,s),n.lanes=a,n}function td(n,s,a){return s=En(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function ZE(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ea(0),this.expirationTimes=ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function nd(n,s,a,c,d,f,w,C,N){return n=new ZE(n,s,a,C,N),s===1?(s=1,f===!0&&(s|=8)):s=0,f=En(3,null,null,s),n.current=f,f.stateNode=n,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},mh(f),n}function e0(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function lg(n){if(!n)return hs;n=n._reactInternals;e:{if(Sn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Jt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Jt(a))return Mp(n,a,s)}return s}function ug(n,s,a,c,d,f,w,C,N){return n=nd(a,c,!0,n,d,f,w,C,N),n.context=lg(null),a=n.current,c=Kt(),d=vs(a),f=Lr(c,d),f.callback=s??null,ps(a,f,d),n.current.lanes=d,Js(n,d,c),tn(n,c),n}function wu(n,s,a,c){var d=s.current,f=Kt(),w=vs(d);return a=lg(a),s.context===null?s.context=a:s.pendingContext=a,s=Lr(f,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ps(d,s,w),n!==null&&(xn(n,d,w,f),Xl(n,d,w)),w}function Eu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function cg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function rd(n,s){cg(n,s),(n=n.alternate)&&cg(n,s)}function t0(){return null}var hg=typeof reportError=="function"?reportError:function(n){console.error(n)};function sd(n){this._internalRoot=n}Tu.prototype.render=sd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));wu(n,s,null,null)},Tu.prototype.unmount=sd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;hi(function(){wu(null,n,null,null)}),s[Dr]=null}};function Tu(n){this._internalRoot=n}Tu.prototype.unstable_scheduleHydration=function(n){if(n){var s=sa();n={blockedOn:null,target:n,priority:s};for(var a=0;a<an.length&&s!==0&&s<an[a].priority;a++);an.splice(a,0,n),a===0&&Hi(n)}};function id(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Iu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function dg(){}function n0(n,s,a,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var $=Eu(w);f.call($)}}var w=ug(s,c,n,0,null,!1,!1,"",dg);return n._reactRootContainer=w,n[Dr]=w.current,ga(n.nodeType===8?n.parentNode:n),hi(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var $=Eu(N);C.call($)}}var N=nd(n,0,!1,null,null,!1,!1,"",dg);return n._reactRootContainer=N,n[Dr]=N.current,ga(n.nodeType===8?n.parentNode:n),hi(function(){wu(s,N,a,c)}),N}function Su(n,s,a,c,d){var f=a._reactRootContainer;if(f){var w=f;if(typeof d=="function"){var C=d;d=function(){var N=Eu(w);C.call(N)}}wu(s,w,n,d)}else w=n0(a,s,n,d,c);return Eu(w)}na=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=qe(s.pendingLanes);a!==0&&(ta(s,a|1),tn(s,Ze()),($e&6)===0&&(vo=Ze()+500,ds()))}break;case 13:hi(function(){var c=Mr(n,1);if(c!==null){var d=Kt();xn(c,n,1,d)}}),rd(n,1)}},Bi=function(n){if(n.tag===13){var s=Mr(n,134217728);if(s!==null){var a=Kt();xn(s,n,134217728,a)}rd(n,134217728)}},ra=function(n){if(n.tag===13){var s=vs(n),a=Mr(n,s);if(a!==null){var c=Kt();xn(a,n,s,c)}rd(n,s)}},sa=function(){return ze},ia=function(n,s){var a=ze;try{return ze=n,s()}finally{ze=a}},Tr=function(n,s,a){switch(s){case"input":if(wr(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=zl(c);if(!d)throw Error(t(90));Fs(c),wr(c,d)}}}break;case"textarea":Vi(n,a);break;case"select":s=a.value,s!=null&&Yt(n,!!a.multiple,s,!1)}},ml=Yh,gl=hi;var r0={usingClientEntryPoint:!1,Events:[_a,so,zl,Jr,Zr,Yh]},Va={findFiberByHostInstance:ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s0={bundleType:Va.bundleType,version:Va.version,rendererPackageName:Va.rendererPackageName,rendererConfig:Va.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Il(n),n===null?null:n.stateNode},findFiberByHostInstance:Va.findFiberByHostInstance||t0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ku.isDisabled&&ku.supportsFiber)try{Ks=ku.inject(s0),sn=ku}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r0,nn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!id(s))throw Error(t(200));return e0(n,s,null,a)},nn.createRoot=function(n,s){if(!id(n))throw Error(t(299));var a=!1,c="",d=hg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=nd(n,1,!1,null,null,a,!1,c,d),n[Dr]=s.current,ga(n.nodeType===8?n.parentNode:n),new sd(s)},nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Il(s),n=n===null?null:n.stateNode,n},nn.flushSync=function(n){return hi(n)},nn.hydrate=function(n,s,a){if(!Iu(s))throw Error(t(200));return Su(null,n,s,!0,a)},nn.hydrateRoot=function(n,s,a){if(!id(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,f="",w=hg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=ug(s,null,n,1,a??null,d,!1,f,w),n[Dr]=s.current,ga(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Tu(s)},nn.render=function(n,s,a){if(!Iu(s))throw Error(t(200));return Su(null,n,s,!1,a)},nn.unmountComponentAtNode=function(n){if(!Iu(n))throw Error(t(40));return n._reactRootContainer?(hi(function(){Su(null,null,n,!1,function(){n._reactRootContainer=null,n[Dr]=null})}),!0):!1},nn.unstable_batchedUpdates=Yh,nn.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Iu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Su(n,s,a,!1,c)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var wg;function f0(){if(wg)return ld.exports;wg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ld.exports=d0(),ld.exports}var Eg;function p0(){if(Eg)return Au;Eg=1;var r=f0();return Au.createRoot=r.createRoot,Au.hydrateRoot=r.hydrateRoot,Au}var m0=p0();const g0=mv(m0),y0={appTitle:"Film Keres",movies:"Filmek",tvShows:"Sorozatok",theaters:"Mozi",forYou:"Neked",searchMoviePlaceholder:"Film keresse...",searchTvPlaceholder:"Sorozat keresse...",watchlist:"Watchlist",filters:"Szrk",clearFilters:"Trls",sortBy:"Rendezs",sortMostPopular:"Legnpszerbb",sortBestRated:"Legjobb rtkels",sortNewest:"Legjabb",sortTitleAZ:"Cm (A-Z)",minimumRating:"Minimum rtkels",ratingAny:"Mindegy",releaseYear:"Megjelens ve",yearFrom:"vtl",yearTo:"vig",categories:"Kategrik",ageRating:"Korosztly",all:"Mind",streamingProviders:"Streaming szolgltatk",resetProviders:"Alaprtelmezett",showAllMovies:"Mind trlse",showingAllMovies:"Minden film megjelenik (nincs streaming szrs)",certKN:"Korhatr nlkl",cert6:"6 ven fellieknek",cert12:"12 ven fellieknek",cert16:"16 ven fellieknek",cert18:"18 ven fellieknek",certG:"Minden korosztlynak",certPG:"Szli felgyelettel",certPG13:"13 v felett",certR:"17 v alatt szlvel",certNC17:"18 v felett",tvShow:"Sorozat",movie:"Film",noMoviesFound:"Nem talltunk filmeket a megadott szrkkel.",noTvShowsFound:"Nem talltunk sorozatokat a megadott szrkkel.",tryDifferentFilters:"Prbld meg mdostani a keressi feltteleket.",loadingMovies:"Filmek betltse...",loadingTvShows:"Sorozatok betltse...",loadMoreMovies:"Tbb film betltse",loadMoreTvShows:"Tbb sorozat betltse",trailer:"Elzetes",inWatchlist:"Watchlistben",addToWatchlist:"Watchlisthez",minutes:"perc",seasons:"vad",episodes:"epizd",noDescription:"Nincs elrhet lers.",availableOnStreaming:"Elrhet streaming szolgltatknl:",withSubscription:"Elfizetssel:",rentable:"Klcsnzhet:",purchasable:"Megvsrolhat:",noStreamingProviders:"Jelenleg nincs elrhet streaming szolgltat.",viewOnJustWatch:"Megtekints a JustWatch-on",list:"Lista",add:"Hozzads",searchAnyMovieOrTv:"Keress brmilyen filmet vagy sorozatot...",search:"Keress",searching:"Keress...",noSearchResults:"Nincs tallat a keressre.",searchAnyInterest:"Keress r brmilyen filmre vagy sorozatra, ami rdekel!",addEvenIfNotAvailable:"Akkor is hozzadhatod, ha mg nem rhet el streamingnl.",checkingAvailability:"Elrhetsg ellenrzse...",watchlistEmpty:"A watchlist res.",clickAddTab:'Kattints a "+ Hozzads" flre filmek keresshez!',checking:"Ellenrzs...",available:"Elrhet",notAvailable:"Nem elrhet",addedOn:"Hozzadva",checkedToday:"Ma ellenrizve",checkedYesterday:"Tegnap ellenrizve",checkedDaysAgo:"{days} napja ellenrizve",checkedOnDate:"{date}-kor ellenrizve",refreshAvailability:"Elrhetsg frisstse",markAsWatched:"Megjells ltottknt",markAsUnwatched:"Megjells nem ltottknt",removeFromList:"Eltvolts a listbl",watchOn:"Megnzs",language:"Nyelv",hungarian:"Magyar",english:"English",signIn:"Bejelentkezs",signOut:"Kijelentkezs",syncingWatchlist:"Watchlist szinkronizls...",favorites:"Kedvencek",like:"Kedvelem",love:"Imdom",liked:"Kedvelt",loved:"Imdott",noFavorites:"Mg nincsenek kedvenceid.",filterAll:"sszes",trending:"Felkapott",nowPlaying:"Most a mozikban",upcoming:"Hamarosan",onTheAir:"Most adsban",showFilters:"Szrk megjelentse",hideFilters:"Szrk elrejtse",browseMode:"Lista tpusa",browseStreaming:"Streaming",browseTrending:"Felkapott",browseTopRated:"Legjobb rtkels",browseTheaters:"Mozikban",browseUpcoming:"Hamarosan",city:"Vros",allCities:"sszes vros",date:"Dtum",allDates:"sszes nap",today:"Ma",tomorrow:"Holnap",screenings:"Vettsek",noScreeningsFound:"Nincs vetts a kivlasztott szrkkel.",buyTickets:"Jegyvsrls",selectCityForScreenings:"Vlassz vrost a vettsek megtekintshez",recommendedForYou:"Neked ajnljuk",basedOn:"Ezek alapjn",noRecommendations:"Jellj meg filmeket imdottnak az ajnlsokhoz!",hideRecommendation:"Elrejts",blacklist:"Elrejtett",noBlacklistedItems:"Nincs elrejtett film vagy sorozat.",removeFromBlacklist:"Visszallts"},v0={appTitle:"Movie Search",movies:"Movies",tvShows:"TV Shows",theaters:"In Theaters",forYou:"For You",searchMoviePlaceholder:"Search movies...",searchTvPlaceholder:"Search TV shows...",watchlist:"Watchlist",filters:"Filters",clearFilters:"Clear",sortBy:"Sort by",sortMostPopular:"Most Popular",sortBestRated:"Highest Rated",sortNewest:"Newest",sortTitleAZ:"Title (A-Z)",minimumRating:"Minimum Rating",ratingAny:"Any",releaseYear:"Release Year",yearFrom:"From",yearTo:"To",categories:"Categories",ageRating:"Age Rating",all:"All",streamingProviders:"Streaming Providers",resetProviders:"Reset to default",showAllMovies:"Clear all",showingAllMovies:"Showing all movies (no streaming filter)",certKN:"No age restriction",cert6:"Ages 6 and up",cert12:"Ages 12 and up",cert16:"Ages 16 and up",cert18:"Ages 18 and up",certG:"General Audience",certPG:"Parental Guidance",certPG13:"Ages 13 and up",certR:"Restricted",certNC17:"Adults Only",tvShow:"TV Show",movie:"Movie",noMoviesFound:"No movies found with the current filters.",noTvShowsFound:"No TV shows found with the current filters.",tryDifferentFilters:"Try adjusting your search criteria.",loadingMovies:"Loading movies...",loadingTvShows:"Loading TV shows...",loadMoreMovies:"Load more movies",loadMoreTvShows:"Load more TV shows",trailer:"Trailer",inWatchlist:"In Watchlist",addToWatchlist:"Add to Watchlist",minutes:"min",seasons:"seasons",episodes:"episodes",noDescription:"No description available.",availableOnStreaming:"Available on streaming platforms:",withSubscription:"With subscription:",rentable:"Rent:",purchasable:"Buy:",noStreamingProviders:"Currently not available on streaming platforms.",viewOnJustWatch:"View on JustWatch",list:"List",add:"Add",searchAnyMovieOrTv:"Search for any movie or TV show...",search:"Search",searching:"Searching...",noSearchResults:"No results found.",searchAnyInterest:"Search for any movie or TV show you're interested in!",addEvenIfNotAvailable:"You can add it even if it's not streaming yet.",checkingAvailability:"Checking availability...",watchlistEmpty:"Your watchlist is empty.",clickAddTab:'Click "+ Add" tab to search for movies!',checking:"Checking...",available:"Available",notAvailable:"Not Available",addedOn:"Added",checkedToday:"Checked today",checkedYesterday:"Checked yesterday",checkedDaysAgo:"Checked {days} days ago",checkedOnDate:"Checked on {date}",refreshAvailability:"Refresh availability",markAsWatched:"Mark as watched",markAsUnwatched:"Mark as unwatched",removeFromList:"Remove from list",watchOn:"Watch on",language:"Language",hungarian:"Magyar",english:"English",signIn:"Sign In",signOut:"Sign Out",syncingWatchlist:"Syncing watchlist...",favorites:"Favorites",like:"Like",love:"Love",liked:"Liked",loved:"Loved",noFavorites:"No favorites yet.",filterAll:"All",trending:"Trending",nowPlaying:"Now Playing",upcoming:"Coming Soon",onTheAir:"On The Air",showFilters:"Show Filters",hideFilters:"Hide Filters",browseMode:"Browse",browseStreaming:"Streaming",browseTrending:"Trending",browseTopRated:"Top Rated",browseTheaters:"In Theaters",browseUpcoming:"Coming Soon",city:"City",allCities:"All cities",date:"Date",allDates:"All dates",today:"Today",tomorrow:"Tomorrow",screenings:"Screenings",noScreeningsFound:"No screenings found with the current filters.",buyTickets:"Buy Tickets",selectCityForScreenings:"Select a city to see screenings",recommendedForYou:"Recommended for You",basedOn:"Based on",noRecommendations:"Mark movies as loved to get recommendations!",hideRecommendation:"Hide",blacklist:"Hidden",noBlacklistedItems:"No hidden movies or TV shows.",removeFromBlacklist:"Restore"},_0={hu:y0,en:v0},gv=G.createContext(void 0),yv="movie-search-language";function w0(){if(typeof window<"u"){const r=localStorage.getItem(yv);if(r==="hu"||r==="en")return r;if(navigator.language.toLowerCase().startsWith("hu"))return"hu"}return"en"}function E0({children:r}){const[e,t]=G.useState(w0);G.useEffect(()=>{localStorage.setItem(yv,e),document.documentElement.lang=e},[e]);const i=l=>{t(l)},o=l=>_0[e][l]||l;return _.jsx(gv.Provider,{value:{language:e,setLanguage:i,t:o},children:r})}function yr(){const r=G.useContext(gv);if(!r)throw new Error("useI18n must be used within an I18nProvider");return r}const T0=()=>{};var Tg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},I0=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},_v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,E=l>>2,S=(l&3)<<4|m>>4;let A=(m&15)<<2|v>>6,M=v&63;g||(M=64,h||(A=64)),i.push(t[E],t[S],t[A],t[M])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(vv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):I0(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const S=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||v==null||S==null)throw new S0;const A=l<<2|m>>4;if(i.push(A),v!==64){const M=m<<4&240|v>>2;if(i.push(M),S!==64){const q=v<<6&192|S;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class S0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k0=function(r){const e=vv(r);return _v.encodeByteArray(e,!0)},Gu=function(r){return k0(r).replace(/\./g,"")},wv=function(r){try{return _v.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=()=>A0().__FIREBASE_DEFAULTS__,R0=()=>{if(typeof process>"u"||typeof Tg>"u")return;const r=Tg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},P0=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&wv(r[1]);return e&&JSON.parse(e)},mc=()=>{try{return T0()||C0()||R0()||P0()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ev=r=>{var e,t;return(t=(e=mc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},N0=r=>{const e=Ev(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Tv=()=>{var r;return(r=mc())==null?void 0:r.config},Iv=r=>{var e;return(e=mc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Gu(JSON.stringify(t)),Gu(JSON.stringify(h)),""].join(".")}const Fa={};function V0(){const r={prod:[],emulator:[]};for(const e of Object.keys(Fa))Fa[e]?r.emulator.push(e):r.prod.push(e);return r}function O0(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Ig=!1;function kv(r,e){if(typeof window>"u"||typeof document>"u"||!jo(window.location.host)||Fa[r]===e||Fa[r]||Ig)return;Fa[r]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",l=V0().prod.length>0;function h(){const A=document.getElementById(i);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,M){A.setAttribute("width","24"),A.setAttribute("id",M),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function v(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Ig=!0,h()},A}function E(A,M){A.setAttribute("id",M),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){const A=O0(i),M=t("text"),q=document.getElementById(M)||document.createElement("span"),F=t("learnmore"),b=document.getElementById(F)||document.createElement("a"),W=t("preprendIcon"),D=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Y=A.element;m(Y),E(b,F);const Q=v();g(D,W),Y.append(D,q,b,Q),document.body.appendChild(Y)}l?(q.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function b0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function M0(){var e;const r=(e=mc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function F0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U0(){const r=qt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function z0(){return!M0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B0(){try{return typeof indexedDB=="object"}catch{return!1}}function $0(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="FirebaseError";class Gr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=H0,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?q0(l,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Gr(o,m,i)}}function q0(r,e){return r.replace(W0,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const W0=/\{\$([^}]+)}/g;function G0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ii(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Sg(l)&&Sg(h)){if(!Ii(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Sg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function K0(r,e){const t=new Q0(r,e);return t.subscribe.bind(t)}class Q0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Y0(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=hd),o.error===void 0&&(o.error=hd),o.complete===void 0&&(o.complete=hd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y0(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r){return r&&r._delegate?r._delegate:r}class Si{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new x0;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z0(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:J0(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function J0(r){return r===mi?void 0:r}function Z0(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new X0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(je||(je={}));const tT={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},nT=je.INFO,rT={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},sT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=rT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sf{constructor(e){this.name=e,this._logLevel=nT,this._logHandler=sT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const iT=(r,e)=>e.some(t=>r instanceof t);let kg,Ag;function oT(){return kg||(kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aT(){return Ag||(Ag=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Av=new WeakMap,Cd=new WeakMap,Cv=new WeakMap,dd=new WeakMap,of=new WeakMap;function lT(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Rs(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Av.set(t,r)}).catch(()=>{}),of.set(e,r),e}function uT(r){if(Cd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Cd.set(r,e)}let Rd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Cd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Cv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function cT(r){Rd=r(Rd)}function hT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(fd(this),e,...t);return Cv.set(i,e.sort?e.sort():[e]),Rs(i)}:aT().includes(r)?function(...e){return r.apply(fd(this),e),Rs(Av.get(this))}:function(...e){return Rs(r.apply(fd(this),e))}}function dT(r){return typeof r=="function"?hT(r):(r instanceof IDBTransaction&&uT(r),iT(r,oT())?new Proxy(r,Rd):r)}function Rs(r){if(r instanceof IDBRequest)return lT(r);if(dd.has(r))return dd.get(r);const e=dT(r);return e!==r&&(dd.set(r,e),of.set(e,r)),e}const fd=r=>of.get(r);function fT(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=Rs(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Rs(h.result),g.oldVersion,g.newVersion,Rs(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const pT=["get","getKey","getAll","getAllKeys","count"],mT=["put","add","delete","clear"],pd=new Map;function Cg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(pd.get(e))return pd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=mT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||pT.includes(t)))return;const l=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return i&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&g.done]))[0]};return pd.set(e,l),l}cT(r=>({...r,get:(e,t,i)=>Cg(e,t)||r.get(e,t,i),has:(e,t)=>!!Cg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yT(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function yT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pd="@firebase/app",Rg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new sf("@firebase/app"),vT="@firebase/app-compat",_T="@firebase/analytics-compat",wT="@firebase/analytics",ET="@firebase/app-check-compat",TT="@firebase/app-check",IT="@firebase/auth",ST="@firebase/auth-compat",kT="@firebase/database",AT="@firebase/data-connect",CT="@firebase/database-compat",RT="@firebase/functions",PT="@firebase/functions-compat",NT="@firebase/installations",xT="@firebase/installations-compat",DT="@firebase/messaging",VT="@firebase/messaging-compat",OT="@firebase/performance",bT="@firebase/performance-compat",MT="@firebase/remote-config",LT="@firebase/remote-config-compat",jT="@firebase/storage",FT="@firebase/storage-compat",UT="@firebase/firestore",zT="@firebase/ai",BT="@firebase/firestore-compat",$T="firebase",HT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="[DEFAULT]",qT={[Pd]:"fire-core",[vT]:"fire-core-compat",[wT]:"fire-analytics",[_T]:"fire-analytics-compat",[TT]:"fire-app-check",[ET]:"fire-app-check-compat",[IT]:"fire-auth",[ST]:"fire-auth-compat",[kT]:"fire-rtdb",[AT]:"fire-data-connect",[CT]:"fire-rtdb-compat",[RT]:"fire-fn",[PT]:"fire-fn-compat",[NT]:"fire-iid",[xT]:"fire-iid-compat",[DT]:"fire-fcm",[VT]:"fire-fcm-compat",[OT]:"fire-perf",[bT]:"fire-perf-compat",[MT]:"fire-rc",[LT]:"fire-rc-compat",[jT]:"fire-gcs",[FT]:"fire-gcs-compat",[UT]:"fire-fst",[BT]:"fire-fst-compat",[zT]:"fire-vertex","fire-js":"fire-js",[$T]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Map,WT=new Map,xd=new Map;function Pg(r,e){try{r.container.addComponent(e)}catch(t){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function No(r){const e=r.name;if(xd.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;xd.set(e,r);for(const t of Ku.values())Pg(t,r);for(const t of WT.values())Pg(t,r);return!0}function af(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Dn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new sl("app","Firebase",GT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=HT;function Rv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Nd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ps.create("bad-app-name",{appName:String(o)});if(t||(t=Tv()),!t)throw Ps.create("no-options");const l=Ku.get(o);if(l){if(Ii(t,l.options)&&Ii(i,l.config))return l;throw Ps.create("duplicate-app",{appName:o})}const h=new eT(o);for(const g of xd.values())h.addComponent(g);const m=new KT(t,i,h);return Ku.set(o,m),m}function Pv(r=Nd){const e=Ku.get(r);if(!e&&r===Nd&&Tv())return Rv();if(!e)throw Ps.create("no-app",{appName:r});return e}function Ns(r,e,t){let i=qT[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(h.join(" "));return}No(new Si(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="firebase-heartbeat-database",YT=1,Wa="firebase-heartbeat-store";let md=null;function Nv(){return md||(md=fT(QT,YT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Wa)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ps.create("idb-open",{originalErrorMessage:r.message})})),md}async function XT(r){try{const t=(await Nv()).transaction(Wa),i=await t.objectStore(Wa).get(xv(r));return await t.done,i}catch(e){if(e instanceof Gr)$r.warn(e.message);else{const t=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(t.message)}}}async function Ng(r,e){try{const i=(await Nv()).transaction(Wa,"readwrite");await i.objectStore(Wa).put(e,xv(r)),await i.done}catch(t){if(t instanceof Gr)$r.warn(t.message);else{const i=Ps.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});$r.warn(i.message)}}}function xv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=1024,ZT=30;class e1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new n1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=xg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>ZT){const h=r1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){$r.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xg(),{heartbeatsToSend:i,unsentEntries:o}=t1(this._heartbeatsCache.heartbeats),l=Gu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return $r.warn(t),""}}}function xg(){return new Date().toISOString().substring(0,10)}function t1(r,e=JT){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Dg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Dg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class n1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B0()?$0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await XT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ng(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ng(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Dg(r){return Gu(JSON.stringify({version:2,heartbeats:r})).length}function r1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(r){No(new Si("platform-logger",e=>new gT(e),"PRIVATE")),No(new Si("heartbeat",e=>new e1(e),"PRIVATE")),Ns(Pd,Rg,r),Ns(Pd,Rg,"esm2020"),Ns("fire-js","")}s1("");function Dv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const i1=Dv,Vv=new sl("auth","Firebase",Dv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new sf("@firebase/auth");function o1(r,...e){Qu.logLevel<=je.WARN&&Qu.warn(`Auth (${Fo}): ${r}`,...e)}function Lu(r,...e){Qu.logLevel<=je.ERROR&&Qu.error(`Auth (${Fo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(r,...e){throw uf(r,...e)}function Mn(r,...e){return uf(r,...e)}function lf(r,e,t){const i={...i1(),[e]:t};return new sl("auth","Firebase",i).create(e,{appName:r.name})}function vi(r){return lf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function a1(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&mr(r,"argument-error"),lf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function uf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Vv.create(r,...e)}function Ne(r,e,...t){if(!r)throw uf(e,...t)}function zr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Lu(e),new Error(e)}function Hr(r,e){r||zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function l1(){return Vg()==="http:"||Vg()==="https:"}function Vg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l1()||j0()||"connection"in navigator)?navigator.onLine:!0}function c1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hr(t>e,"Short delay should be less than long delay!"),this.isMobile=b0()||F0()}get(){return u1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(r,e){Hr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f1=new ol(3e4,6e4);function hf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Uo(r,e,t,i,o={}){return bv(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const m=il({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:g,...l};return L0()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&jo(r.emulatorConfig.host)&&(v.credentials="include"),Ov.fetch()(await Mv(r,r.config.apiHost,t,m),v)})}async function bv(r,e,t){r._canInitEmulator=!1;const i={...h1,...e};try{const o=new m1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Cu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[g,v]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Cu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw Cu(r,"user-disabled",h);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw lf(r,E,v);mr(r,E)}}catch(o){if(o instanceof Gr)throw o;mr(r,"network-request-failed",{message:String(o)})}}async function p1(r,e,t,i,o={}){const l=await Uo(r,e,t,i,o);return"mfaPendingCredential"in l&&mr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Mv(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?cf(r.config,o):`${r.config.apiScheme}://${o}`;return d1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}class m1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Mn(this.auth,"network-request-failed")),f1.get())})}}function Cu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Mn(r,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(r,e){return Uo(r,"POST","/v1/accounts:delete",e)}async function Yu(r,e){return Uo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y1(r,e=!1){const t=Qt(r),i=await t.getIdToken(e),o=df(i);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Ua(gd(o.auth_time)),issuedAtTime:Ua(gd(o.iat)),expirationTime:Ua(gd(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function gd(r){return Number(r)*1e3}function df(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{const o=wv(t);return o?JSON.parse(o):(Lu("Failed to decode base64 JWT payload"),null)}catch(o){return Lu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Og(r){const e=df(r);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Gr&&v1(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function v1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ua(this.lastLoginAt),this.creationTime=Ua(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(r){var S;const e=r.auth,t=await r.getIdToken(),i=await Ga(r,Yu(e,{idToken:t}));Ne(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(S=o.providerUserInfo)!=null&&S.length?Lv(o.providerUserInfo):[],h=E1(r.providerData,l),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),v=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Vd(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,E)}async function w1(r){const e=Qt(r);await Xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E1(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Lv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(r,e){const t=await bv(r,{},async()=>{const i=il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await Mv(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:i};return r.emulatorConfig&&jo(r.emulatorConfig.host)&&(g.credentials="include"),Ov.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function I1(r,e){return Uo(r,"POST","/v2/accounts:revokeToken",hf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Og(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=Og(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await T1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new So;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ne(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ne(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(r,e){Ne(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Vn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new _1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return y1(this,e)}reload(){return w1(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Vn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Xu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(vi(this.auth));const e=await this.getIdToken();return await Ga(this,g1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,v=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:S,emailVerified:A,isAnonymous:M,providerData:q,stsTokenManager:F}=t;Ne(S&&F,e,"internal-error");const b=So.fromJSON(this.name,F);Ne(typeof S=="string",e,"internal-error"),Ts(i,e.name),Ts(o,e.name),Ne(typeof A=="boolean",e,"internal-error"),Ne(typeof M=="boolean",e,"internal-error"),Ts(l,e.name),Ts(h,e.name),Ts(m,e.name),Ts(g,e.name),Ts(v,e.name),Ts(E,e.name);const W=new Vn({uid:S,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:M,photoURL:h,phoneNumber:l,tenantId:m,stsTokenManager:b,createdAt:v,lastLoginAt:E});return q&&Array.isArray(q)&&(W.providerData=q.map(D=>({...D}))),g&&(W._redirectEventId=g),W}static async _fromIdTokenResponse(e,t,i=!1){const o=new So;o.updateFromServerResponse(t);const l=new Vn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Xu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Lv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new So;m.updateFromIdToken(i);const g=new Vn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Vd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=new Map;function Br(r){Hr(r instanceof Function,"Expected a class definition");let e=bg.get(r);return e?(Hr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,bg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jv.type="NONE";const Mg=jv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(r,e,t){return`firebase:${r}:${e}:${t}`}class ko{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ju(this.userKey,o.apiKey,l),this.fullPersistenceKey=ju("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Yu(this.auth,{idToken:e}).catch(()=>{});return t?Vn._fromGetAccountInfoResponse(this.auth,t,e):null}return Vn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ko(Br(Mg),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||Br(Mg);const h=ju(i,e.config.apiKey,e.name);let m=null;for(const v of t)try{const E=await v._get(h);if(E){let S;if(typeof E=="string"){const A=await Yu(e,{idToken:E}).catch(()=>{});if(!A)break;S=await Vn._fromGetAccountInfoResponse(e,A,E)}else S=Vn._fromJSON(e,E);v!==l&&(m=S),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new ko(l,e,i):(l=g[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new ko(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Bv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Fv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hv(e))return"Blackberry";if(qv(e))return"Webos";if(Uv(e))return"Safari";if((e.includes("chrome/")||zv(e))&&!e.includes("edge/"))return"Chrome";if($v(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Fv(r=qt()){return/firefox\//i.test(r)}function Uv(r=qt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zv(r=qt()){return/crios\//i.test(r)}function Bv(r=qt()){return/iemobile/i.test(r)}function $v(r=qt()){return/android/i.test(r)}function Hv(r=qt()){return/blackberry/i.test(r)}function qv(r=qt()){return/webos/i.test(r)}function ff(r=qt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function S1(r=qt()){var e;return ff(r)&&!!((e=window.navigator)!=null&&e.standalone)}function k1(){return U0()&&document.documentMode===10}function Wv(r=qt()){return ff(r)||$v(r)||qv(r)||Hv(r)||/windows phone/i.test(r)||Bv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(r,e=[]){let t;switch(r){case"Browser":t=Lg(qt());break;case"Worker":t=`${Lg(qt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,m)=>{try{const g=e(l);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(r,e={}){return Uo(r,"GET","/v2/passwordPolicy",hf(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=6;class P1{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??R1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jg(this),this.idTokenSubscription=new jg(this),this.beforeStateQueue=new A1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Br(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Yu(this,{idToken:e}),i=await Vn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Dn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=c1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(vi(this));const t=e?Qt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await C1(this),t=new P1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await I1(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Br(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&o1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function gc(r){return Qt(r)}class jg{constructor(e){this.auth=e,this.observer=null,this.addObserver=K0(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function x1(r){pf=r}function D1(r){return pf.loadJS(r)}function V1(){return pf.gapiScript}function O1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(r,e){const t=af(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ii(l,e??{}))return o;mr(o,"already-initialized")}return t.initialize({options:e})}function M1(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Br);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function L1(r,e,t){const i=gc(r);Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=Kv(e),{host:h,port:m}=j1(e),g=m===null?"":`:${m}`,v={url:`${l}//${h}${g}/`},E=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ne(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ne(Ii(v,i.config.emulator)&&Ii(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,jo(h)?(Sv(`${l}//${h}${g}`),kv("Auth",!0)):F1()}function Kv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function j1(r){const e=Kv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Fg(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Fg(h)}}}function Fg(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function F1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zr("not implemented")}_getIdTokenResponse(e){return zr("not implemented")}_linkToIdToken(e,t){return zr("not implemented")}_getReauthenticationResolver(e){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(r,e){return p1(r,"POST","/v1/accounts:signInWithIdp",hf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="http://localhost";class ki extends Qv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ki(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new ki(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Ao(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ao(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ao(e,t)}buildRequest(){const e={requestUri:U1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=il(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends mf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends al{constructor(){super("facebook.com")}static credential(e){return ki._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ki._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ur.credential(t,i)}catch{return null}}}Ur.GOOGLE_SIGN_IN_METHOD="google.com";Ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends al{constructor(){super("github.com")}static credential(e){return ki._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends al{constructor(){super("twitter.com")}static credential(e,t){return ki._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ks.credential(t,i)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Vn._fromIdTokenResponse(e,i,o),h=Ug(i);return new xo({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Ug(i);return new xo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Ug(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends Gr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ju.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ju(e,t,i,o)}}function Yv(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ju._fromErrorAndOperation(r,l,e,i):l})}async function z1(r,e,t=!1){const i=await Ga(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return xo._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(r,e,t=!1){const{auth:i}=r;if(Dn(i.app))return Promise.reject(vi(i));const o="reauthenticate";try{const l=await Ga(r,Yv(i,o,e,r),t);Ne(l.idToken,i,"internal-error");const h=df(l.idToken);Ne(h,i,"internal-error");const{sub:m}=h;return Ne(r.uid===m,i,"user-mismatch"),xo._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&mr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $1(r,e,t=!1){if(Dn(r.app))return Promise.reject(vi(r));const i="signIn",o=await Yv(r,i,e),l=await xo._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}function H1(r,e,t,i){return Qt(r).onIdTokenChanged(e,t,i)}function q1(r,e,t){return Qt(r).beforeAuthStateChanged(e,t)}function W1(r,e,t,i){return Qt(r).onAuthStateChanged(e,t,i)}function G1(r){return Qt(r).signOut()}const Zu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zu,"1"),this.storage.removeItem(Zu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=1e3,Q1=10;class Jv extends Xv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);k1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Q1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},K1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jv.type="LOCAL";const Y1=Jv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends Xv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Zv.type="SESSION";const e_=Zv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new yc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,l)),g=await X1(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,g)=>{const v=gf("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(S){const A=S;if(A.data.eventId===v)switch(A.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(A.data.response);break;default:clearTimeout(E),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function Z1(r){ur().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function eI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function nI(){return t_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="firebaseLocalStorageDb",rI=1,ec="firebaseLocalStorage",r_="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vc(r,e){return r.transaction([ec],e?"readwrite":"readonly").objectStore(ec)}function sI(){const r=indexedDB.deleteDatabase(n_);return new ll(r).toPromise()}function Od(){const r=indexedDB.open(n_,rI);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(ec,{keyPath:r_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(ec)?e(i):(i.close(),await sI(),e(await Od()))})})}async function zg(r,e,t){const i=vc(r,!0).put({[r_]:e,value:t});return new ll(i).toPromise()}async function iI(r,e){const t=vc(r,!1).get(e),i=await new ll(t).toPromise();return i===void 0?null:i.value}function Bg(r,e){const t=vc(r,!0).delete(e);return new ll(t).toPromise()}const oI=800,aI=3;class s_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Od(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>aI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yc._getInstance(nI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await eI(),!this.activeServiceWorker)return;this.sender=new J1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Od();return await zg(e,Zu,"1"),await Bg(e,Zu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>zg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>iI(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Bg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=vc(o,!1).getAll();return new ll(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}s_.type="LOCAL";const lI=s_;new ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(r,e){return e?Br(e):(Ne(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends Qv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ao(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uI(r){return $1(r.auth,new yf(r),r.bypassAuthState)}function cI(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),B1(t,new yf(r),r.bypassAuthState)}async function hI(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),z1(t,new yf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uI;case"linkViaPopup":case"linkViaRedirect":return hI;case"reauthViaPopup":case"reauthViaRedirect":return cI;default:mr(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=new ol(2e3,1e4);async function fI(r,e,t){if(Dn(r.app))return Promise.reject(Mn(r,"operation-not-supported-in-this-environment"));const i=gc(r);a1(r,e,mf);const o=i_(i,t);return new gi(i,"signInViaPopup",e,o).executeNotNull()}class gi extends o_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,gi.currentPopupAction&&gi.currentPopupAction.cancel(),gi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=gf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dI.get())};e()}}gi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="pendingRedirect",Fu=new Map;class mI extends o_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Fu.get(this.auth._key());if(!e){try{const i=await gI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Fu.set(this.auth._key(),e)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gI(r,e){const t=_I(e),i=vI(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function yI(r,e){Fu.set(r._key(),e)}function vI(r){return Br(r._redirectPersistence)}function _I(r){return ju(pI,r.config.apiKey,r.name)}async function wI(r,e,t=!1){if(Dn(r.app))return Promise.reject(vi(r));const i=gc(r),o=i_(i,e),h=await new mI(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=600*1e3;class TI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!II(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!a_(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Mn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EI&&this.cachedEventUids.clear(),this.cachedEventUids.has($g(e))}saveEventToCache(e){this.cachedEventUids.add($g(e)),this.lastProcessedEventTime=Date.now()}}function $g(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function a_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function II(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return a_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(r,e={}){return Uo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AI=/^https?/;async function CI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await SI(r);for(const t of e)try{if(RI(t))return}catch{}mr(r,"unauthorized-domain")}function RI(r){const e=Dd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!AI.test(t))return!1;if(kI.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=new ol(3e4,6e4);function Hg(){const r=ur().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function NI(r){return new Promise((e,t)=>{var o,l,h;function i(){Hg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hg(),t(Mn(r,"network-request-failed"))},timeout:PI.get()})}if((l=(o=ur().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=ur().gapi)!=null&&h.load)i();else{const m=O1("iframefcb");return ur()[m]=()=>{gapi.load?i():t(Mn(r,"network-request-failed"))},D1(`${V1()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Uu=null,e})}let Uu=null;function xI(r){return Uu=Uu||NI(r),Uu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=new ol(5e3,15e3),VI="__/auth/iframe",OI="emulator/auth/iframe",bI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LI(r){const e=r.config;Ne(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?cf(e,OI):`https://${r.config.authDomain}/${VI}`,i={apiKey:e.apiKey,appName:r.name,v:Fo},o=MI.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${il(i).slice(1)}`}async function jI(r){const e=await xI(r),t=ur().gapi;return Ne(t,r,"internal-error"),e.open({where:document.body,url:LI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bI,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Mn(r,"network-request-failed"),m=ur().setTimeout(()=>{l(h)},DI.get());function g(){ur().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UI=500,zI=600,BI="_blank",$I="http://localhost";class qg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HI(r,e,t,i=UI,o=zI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g={...FI,width:i.toString(),height:o.toString(),top:l,left:h},v=qt().toLowerCase();t&&(m=zv(v)?BI:t),Fv(v)&&(e=e||$I,g.scrollbars="yes");const E=Object.entries(g).reduce((A,[M,q])=>`${A}${M}=${q},`,"");if(S1(v)&&m!=="_self")return qI(e||"",m),new qg(null);const S=window.open(e||"",m,E);Ne(S,r,"popup-blocked");try{S.focus()}catch{}return new qg(S)}function qI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="__/auth/handler",GI="emulator/auth/handler",KI=encodeURIComponent("fac");async function Wg(r,e,t,i,o,l){Ne(r.config.authDomain,r,"auth-domain-config-required"),Ne(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Fo,eventId:o};if(e instanceof mf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",G0(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))h[E]=S}if(e instanceof al){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),v=g?`#${KI}=${encodeURIComponent(g)}`:"";return`${QI(r)}?${il(m).slice(1)}${v}`}function QI({config:r}){return r.emulator?cf(r,GI):`https://${r.authDomain}/${WI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="webStorageSupport";class YI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=e_,this._completeRedirectFn=wI,this._overrideRedirectResult=yI}async _openPopup(e,t,i,o){var h;Hr((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Wg(e,t,i,Dd(),o);return HI(e,l,gf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Wg(e,t,i,Dd(),o);return Z1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Hr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await jI(e),i=new TI(e);return t.register("authEvent",o=>(Ne(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yd,{type:yd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[yd];l!==void 0&&t(!!l),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Wv()||Uv()||ff()}}const XI=YI;var Gg="@firebase/auth",Kg="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eS(r){No(new Si("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Ne(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gv(r)},v=new N1(i,o,l,g);return M1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),No(new Si("auth-internal",e=>{const t=gc(e.getProvider("auth").getImmediate());return(i=>new JI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ns(Gg,Kg,ZI(r)),Ns(Gg,Kg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=300,nS=Iv("authIdTokenMaxAge")||tS;let Qg=null;const rS=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>nS)return;const o=t==null?void 0:t.token;Qg!==o&&(Qg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function sS(r=Pv()){const e=af(r,"auth");if(e.isInitialized())return e.getImmediate();const t=b1(r,{popupRedirectResolver:XI,persistence:[lI,Y1,e_]}),i=Iv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=rS(l.toString());q1(t,h,()=>h(t.currentUser)),H1(t,m=>h(m))}}const o=Ev("auth");return o&&L1(t,`http://${o}`),t}function iS(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}x1({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Mn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",iS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eS("Browser");var oS="firebase",aS="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ns(oS,aS,"app");var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,l_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,k){function P(){}P.prototype=k.prototype,R.F=k.prototype,R.prototype=new P,R.prototype.constructor=R,R.D=function(V,x,j){for(var T=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)T[Ee-2]=arguments[Ee];return k.prototype[x].apply(V,T)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,k,P){P||(P=0);const V=Array(16);if(typeof k=="string")for(var x=0;x<16;++x)V[x]=k.charCodeAt(P++)|k.charCodeAt(P++)<<8|k.charCodeAt(P++)<<16|k.charCodeAt(P++)<<24;else for(x=0;x<16;++x)V[x]=k[P++]|k[P++]<<8|k[P++]<<16|k[P++]<<24;k=R.g[0],P=R.g[1],x=R.g[2];let j=R.g[3],T;T=k+(j^P&(x^j))+V[0]+3614090360&4294967295,k=P+(T<<7&4294967295|T>>>25),T=j+(x^k&(P^x))+V[1]+3905402710&4294967295,j=k+(T<<12&4294967295|T>>>20),T=x+(P^j&(k^P))+V[2]+606105819&4294967295,x=j+(T<<17&4294967295|T>>>15),T=P+(k^x&(j^k))+V[3]+3250441966&4294967295,P=x+(T<<22&4294967295|T>>>10),T=k+(j^P&(x^j))+V[4]+4118548399&4294967295,k=P+(T<<7&4294967295|T>>>25),T=j+(x^k&(P^x))+V[5]+1200080426&4294967295,j=k+(T<<12&4294967295|T>>>20),T=x+(P^j&(k^P))+V[6]+2821735955&4294967295,x=j+(T<<17&4294967295|T>>>15),T=P+(k^x&(j^k))+V[7]+4249261313&4294967295,P=x+(T<<22&4294967295|T>>>10),T=k+(j^P&(x^j))+V[8]+1770035416&4294967295,k=P+(T<<7&4294967295|T>>>25),T=j+(x^k&(P^x))+V[9]+2336552879&4294967295,j=k+(T<<12&4294967295|T>>>20),T=x+(P^j&(k^P))+V[10]+4294925233&4294967295,x=j+(T<<17&4294967295|T>>>15),T=P+(k^x&(j^k))+V[11]+2304563134&4294967295,P=x+(T<<22&4294967295|T>>>10),T=k+(j^P&(x^j))+V[12]+1804603682&4294967295,k=P+(T<<7&4294967295|T>>>25),T=j+(x^k&(P^x))+V[13]+4254626195&4294967295,j=k+(T<<12&4294967295|T>>>20),T=x+(P^j&(k^P))+V[14]+2792965006&4294967295,x=j+(T<<17&4294967295|T>>>15),T=P+(k^x&(j^k))+V[15]+1236535329&4294967295,P=x+(T<<22&4294967295|T>>>10),T=k+(x^j&(P^x))+V[1]+4129170786&4294967295,k=P+(T<<5&4294967295|T>>>27),T=j+(P^x&(k^P))+V[6]+3225465664&4294967295,j=k+(T<<9&4294967295|T>>>23),T=x+(k^P&(j^k))+V[11]+643717713&4294967295,x=j+(T<<14&4294967295|T>>>18),T=P+(j^k&(x^j))+V[0]+3921069994&4294967295,P=x+(T<<20&4294967295|T>>>12),T=k+(x^j&(P^x))+V[5]+3593408605&4294967295,k=P+(T<<5&4294967295|T>>>27),T=j+(P^x&(k^P))+V[10]+38016083&4294967295,j=k+(T<<9&4294967295|T>>>23),T=x+(k^P&(j^k))+V[15]+3634488961&4294967295,x=j+(T<<14&4294967295|T>>>18),T=P+(j^k&(x^j))+V[4]+3889429448&4294967295,P=x+(T<<20&4294967295|T>>>12),T=k+(x^j&(P^x))+V[9]+568446438&4294967295,k=P+(T<<5&4294967295|T>>>27),T=j+(P^x&(k^P))+V[14]+3275163606&4294967295,j=k+(T<<9&4294967295|T>>>23),T=x+(k^P&(j^k))+V[3]+4107603335&4294967295,x=j+(T<<14&4294967295|T>>>18),T=P+(j^k&(x^j))+V[8]+1163531501&4294967295,P=x+(T<<20&4294967295|T>>>12),T=k+(x^j&(P^x))+V[13]+2850285829&4294967295,k=P+(T<<5&4294967295|T>>>27),T=j+(P^x&(k^P))+V[2]+4243563512&4294967295,j=k+(T<<9&4294967295|T>>>23),T=x+(k^P&(j^k))+V[7]+1735328473&4294967295,x=j+(T<<14&4294967295|T>>>18),T=P+(j^k&(x^j))+V[12]+2368359562&4294967295,P=x+(T<<20&4294967295|T>>>12),T=k+(P^x^j)+V[5]+4294588738&4294967295,k=P+(T<<4&4294967295|T>>>28),T=j+(k^P^x)+V[8]+2272392833&4294967295,j=k+(T<<11&4294967295|T>>>21),T=x+(j^k^P)+V[11]+1839030562&4294967295,x=j+(T<<16&4294967295|T>>>16),T=P+(x^j^k)+V[14]+4259657740&4294967295,P=x+(T<<23&4294967295|T>>>9),T=k+(P^x^j)+V[1]+2763975236&4294967295,k=P+(T<<4&4294967295|T>>>28),T=j+(k^P^x)+V[4]+1272893353&4294967295,j=k+(T<<11&4294967295|T>>>21),T=x+(j^k^P)+V[7]+4139469664&4294967295,x=j+(T<<16&4294967295|T>>>16),T=P+(x^j^k)+V[10]+3200236656&4294967295,P=x+(T<<23&4294967295|T>>>9),T=k+(P^x^j)+V[13]+681279174&4294967295,k=P+(T<<4&4294967295|T>>>28),T=j+(k^P^x)+V[0]+3936430074&4294967295,j=k+(T<<11&4294967295|T>>>21),T=x+(j^k^P)+V[3]+3572445317&4294967295,x=j+(T<<16&4294967295|T>>>16),T=P+(x^j^k)+V[6]+76029189&4294967295,P=x+(T<<23&4294967295|T>>>9),T=k+(P^x^j)+V[9]+3654602809&4294967295,k=P+(T<<4&4294967295|T>>>28),T=j+(k^P^x)+V[12]+3873151461&4294967295,j=k+(T<<11&4294967295|T>>>21),T=x+(j^k^P)+V[15]+530742520&4294967295,x=j+(T<<16&4294967295|T>>>16),T=P+(x^j^k)+V[2]+3299628645&4294967295,P=x+(T<<23&4294967295|T>>>9),T=k+(x^(P|~j))+V[0]+4096336452&4294967295,k=P+(T<<6&4294967295|T>>>26),T=j+(P^(k|~x))+V[7]+1126891415&4294967295,j=k+(T<<10&4294967295|T>>>22),T=x+(k^(j|~P))+V[14]+2878612391&4294967295,x=j+(T<<15&4294967295|T>>>17),T=P+(j^(x|~k))+V[5]+4237533241&4294967295,P=x+(T<<21&4294967295|T>>>11),T=k+(x^(P|~j))+V[12]+1700485571&4294967295,k=P+(T<<6&4294967295|T>>>26),T=j+(P^(k|~x))+V[3]+2399980690&4294967295,j=k+(T<<10&4294967295|T>>>22),T=x+(k^(j|~P))+V[10]+4293915773&4294967295,x=j+(T<<15&4294967295|T>>>17),T=P+(j^(x|~k))+V[1]+2240044497&4294967295,P=x+(T<<21&4294967295|T>>>11),T=k+(x^(P|~j))+V[8]+1873313359&4294967295,k=P+(T<<6&4294967295|T>>>26),T=j+(P^(k|~x))+V[15]+4264355552&4294967295,j=k+(T<<10&4294967295|T>>>22),T=x+(k^(j|~P))+V[6]+2734768916&4294967295,x=j+(T<<15&4294967295|T>>>17),T=P+(j^(x|~k))+V[13]+1309151649&4294967295,P=x+(T<<21&4294967295|T>>>11),T=k+(x^(P|~j))+V[4]+4149444226&4294967295,k=P+(T<<6&4294967295|T>>>26),T=j+(P^(k|~x))+V[11]+3174756917&4294967295,j=k+(T<<10&4294967295|T>>>22),T=x+(k^(j|~P))+V[2]+718787259&4294967295,x=j+(T<<15&4294967295|T>>>17),T=P+(j^(x|~k))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+k&4294967295,R.g[1]=R.g[1]+(x+(T<<21&4294967295|T>>>11))&4294967295,R.g[2]=R.g[2]+x&4294967295,R.g[3]=R.g[3]+j&4294967295}i.prototype.v=function(R,k){k===void 0&&(k=R.length);const P=k-this.blockSize,V=this.C;let x=this.h,j=0;for(;j<k;){if(x==0)for(;j<=P;)o(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<k;)if(V[x++]=R.charCodeAt(j++),x==this.blockSize){o(this,V),x=0;break}}else for(;j<k;)if(V[x++]=R[j++],x==this.blockSize){o(this,V),x=0;break}}this.h=x,this.o+=k},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var k=1;k<R.length-8;++k)R[k]=0;k=this.o*8;for(var P=R.length-8;P<R.length;++P)R[P]=k&255,k/=256;for(this.v(R),R=Array(16),k=0,P=0;P<4;++P)for(let V=0;V<32;V+=8)R[k++]=this.g[P]>>>V&255;return R};function l(R,k){var P=m;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=k(R)}function h(R,k){this.h=k;const P=[];let V=!0;for(let x=R.length-1;x>=0;x--){const j=R[x]|0;V&&j==k||(P[x]=j,V=!1)}this.g=P}var m={};function g(R){return-128<=R&&R<128?l(R,function(k){return new h([k|0],k<0?-1:0)}):new h([R|0],R<0?-1:0)}function v(R){if(isNaN(R)||!isFinite(R))return S;if(R<0)return b(v(-R));const k=[];let P=1;for(let V=0;R>=P;V++)k[V]=R/P|0,P*=4294967296;return new h(k,0)}function E(R,k){if(R.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(R.charAt(0)=="-")return b(E(R.substring(1),k));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=v(Math.pow(k,8));let V=S;for(let j=0;j<R.length;j+=8){var x=Math.min(8,R.length-j);const T=parseInt(R.substring(j,j+x),k);x<8?(x=v(Math.pow(k,x)),V=V.j(x).add(v(T))):(V=V.j(P),V=V.add(v(T)))}return V}var S=g(0),A=g(1),M=g(16777216);r=h.prototype,r.m=function(){if(F(this))return-b(this).m();let R=0,k=1;for(let P=0;P<this.g.length;P++){const V=this.i(P);R+=(V>=0?V:4294967296+V)*k,k*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(q(this))return"0";if(F(this))return"-"+b(this).toString(R);const k=v(Math.pow(R,6));var P=this;let V="";for(;;){const x=Q(P,k).g;P=W(P,x.j(k));let j=((P.g.length>0?P.g[0]:P.h)>>>0).toString(R);if(P=x,q(P))return j+V;for(;j.length<6;)j="0"+j;V=j+V}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function q(R){if(R.h!=0)return!1;for(let k=0;k<R.g.length;k++)if(R.g[k]!=0)return!1;return!0}function F(R){return R.h==-1}r.l=function(R){return R=W(this,R),F(R)?-1:q(R)?0:1};function b(R){const k=R.g.length,P=[];for(let V=0;V<k;V++)P[V]=~R.g[V];return new h(P,~R.h).add(A)}r.abs=function(){return F(this)?b(this):this},r.add=function(R){const k=Math.max(this.g.length,R.g.length),P=[];let V=0;for(let x=0;x<=k;x++){let j=V+(this.i(x)&65535)+(R.i(x)&65535),T=(j>>>16)+(this.i(x)>>>16)+(R.i(x)>>>16);V=T>>>16,j&=65535,T&=65535,P[x]=T<<16|j}return new h(P,P[P.length-1]&-2147483648?-1:0)};function W(R,k){return R.add(b(k))}r.j=function(R){if(q(this)||q(R))return S;if(F(this))return F(R)?b(this).j(b(R)):b(b(this).j(R));if(F(R))return b(this.j(b(R)));if(this.l(M)<0&&R.l(M)<0)return v(this.m()*R.m());const k=this.g.length+R.g.length,P=[];for(var V=0;V<2*k;V++)P[V]=0;for(V=0;V<this.g.length;V++)for(let x=0;x<R.g.length;x++){const j=this.i(V)>>>16,T=this.i(V)&65535,Ee=R.i(x)>>>16,ie=R.i(x)&65535;P[2*V+2*x]+=T*ie,D(P,2*V+2*x),P[2*V+2*x+1]+=j*ie,D(P,2*V+2*x+1),P[2*V+2*x+1]+=T*Ee,D(P,2*V+2*x+1),P[2*V+2*x+2]+=j*Ee,D(P,2*V+2*x+2)}for(R=0;R<k;R++)P[R]=P[2*R+1]<<16|P[2*R];for(R=k;R<2*k;R++)P[R]=0;return new h(P,0)};function D(R,k){for(;(R[k]&65535)!=R[k];)R[k+1]+=R[k]>>>16,R[k]&=65535,k++}function Y(R,k){this.g=R,this.h=k}function Q(R,k){if(q(k))throw Error("division by zero");if(q(R))return new Y(S,S);if(F(R))return k=Q(b(R),k),new Y(b(k.g),b(k.h));if(F(k))return k=Q(R,b(k)),new Y(b(k.g),k.h);if(R.g.length>30){if(F(R)||F(k))throw Error("slowDivide_ only works with positive integers.");for(var P=A,V=k;V.l(R)<=0;)P=he(P),V=he(V);var x=K(P,1),j=K(V,1);for(V=K(V,2),P=K(P,2);!q(V);){var T=j.add(V);T.l(R)<=0&&(x=x.add(P),j=T),V=K(V,1),P=K(P,1)}return k=W(R,x.j(k)),new Y(x,k)}for(x=S;R.l(k)>=0;){for(P=Math.max(1,Math.floor(R.m()/k.m())),V=Math.ceil(Math.log(P)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),j=v(P),T=j.j(k);F(T)||T.l(R)>0;)P-=V,j=v(P),T=j.j(k);q(j)&&(j=A),x=x.add(j),R=W(R,T)}return new Y(x,R)}r.B=function(R){return Q(this,R).h},r.and=function(R){const k=Math.max(this.g.length,R.g.length),P=[];for(let V=0;V<k;V++)P[V]=this.i(V)&R.i(V);return new h(P,this.h&R.h)},r.or=function(R){const k=Math.max(this.g.length,R.g.length),P=[];for(let V=0;V<k;V++)P[V]=this.i(V)|R.i(V);return new h(P,this.h|R.h)},r.xor=function(R){const k=Math.max(this.g.length,R.g.length),P=[];for(let V=0;V<k;V++)P[V]=this.i(V)^R.i(V);return new h(P,this.h^R.h)};function he(R){const k=R.g.length+1,P=[];for(let V=0;V<k;V++)P[V]=R.i(V)<<1|R.i(V-1)>>>31;return new h(P,R.h)}function K(R,k){const P=k>>5;k%=32;const V=R.g.length-P,x=[];for(let j=0;j<V;j++)x[j]=k>0?R.i(j+P)>>>k|R.i(j+P+1)<<32-k:R.i(j+P);return new h(x,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,l_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,xs=h}).apply(typeof Yg<"u"?Yg:typeof self<"u"?self:typeof window<"u"?window:{});var Ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u_,ba,c_,zu,bd,h_,d_,f_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ru=="object"&&Ru];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var y=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var z=u[I];if(!(z in y))break e;y=y[z]}u=u[u.length-1],I=y[u],p=p(I),p!=I&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var y=[],I;for(I in p)Object.prototype.hasOwnProperty.call(p,I)&&y.push([I,p[I]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function g(u,p,y){return u.call.apply(u.bind,arguments)}function v(u,p,y){return v=g,v.apply(null,arguments)}function E(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function S(u,p){function y(){}y.prototype=p.prototype,u.Z=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(I,z,H){for(var le=Array(arguments.length-2),De=2;De<arguments.length;De++)le[De-2]=arguments[De];return p.prototype[z].apply(I,le)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const p=u.length;if(p>0){const y=Array(p);for(let I=0;I<p;I++)y[I]=u[I];return y}return[]}function q(u,p){for(let I=1;I<arguments.length;I++){const z=arguments[I];var y=typeof z;if(y=y!="object"?y:z?Array.isArray(z)?"array":y:"null",y=="array"||y=="object"&&typeof z.length=="number"){y=u.length||0;const H=z.length||0;u.length=y+H;for(let le=0;le<H;le++)u[y+le]=z[le]}else u.push(z)}}class F{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function b(u){h.setTimeout(()=>{throw u},0)}function W(){var u=R;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class D{constructor(){this.h=this.g=null}add(p,y){const I=Y.get();I.set(p,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Y=new F(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let he,K=!1,R=new D,k=()=>{const u=Promise.resolve(void 0);he=()=>{u.then(P)}};function P(){for(var u;u=W();){try{u.h.call(u.g)}catch(y){b(y)}var p=Y;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}K=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};h.addEventListener("test",y,p),h.removeEventListener("test",y,p)}catch{}return u})();function T(u){return/^[\s\xa0]*$/.test(u)}function Ee(u,p){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}S(Ee,x),Ee.prototype.init=function(u,p){const y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),Oe=0;function Re(u,p,y,I,z){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!I,this.ha=z,this.key=++Oe,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ye(u,p,y){for(const I in u)p.call(y,u[I],I,u)}function ce(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function L(u){const p={};for(const y in u)p[y]=u[y];return p}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ke(u,p){let y,I;for(let z=1;z<arguments.length;z++){I=arguments[z];for(y in I)u[y]=I[y];for(let H=0;H<J.length;H++)y=J[H],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function te(u){this.src=u,this.g={},this.h=0}te.prototype.add=function(u,p,y,I,z){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const le=fe(u,p,I,z);return le>-1?(p=u[le],y||(p.fa=!1)):(p=new Re(p,this.src,H,!!I,z),p.fa=y,u.push(p)),p};function ue(u,p){const y=p.type;if(y in u.g){var I=u.g[y],z=Array.prototype.indexOf.call(I,p,void 0),H;(H=z>=0)&&Array.prototype.splice.call(I,z,1),H&&(oe(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function fe(u,p,y,I){for(let z=0;z<u.length;++z){const H=u[z];if(!H.da&&H.listener==p&&H.capture==!!y&&H.ha==I)return z}return-1}var X="closure_lm_"+(Math.random()*1e6|0),Ae={};function Me(u,p,y,I,z){if(Array.isArray(p)){for(let H=0;H<p.length;H++)Me(u,p[H],y,I,z);return null}return y=Us(y),u&&u[ie]?u.J(p,y,m(I)?!!I.capture:!1,z):dt(u,p,y,!1,I,z)}function dt(u,p,y,I,z,H){if(!p)throw Error("Invalid event type");const le=m(z)?!!z.capture:!!z;let De=_r(u);if(De||(u[X]=De=new te(u)),y=De.add(p,y,I,le,H),y.proxy)return y;if(I=Kr(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)j||(z=le),z===void 0&&(z=!1),u.addEventListener(p.toString(),I,z);else if(u.attachEvent)u.attachEvent(vr(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Kr(){function u(y){return p.call(u.src,u.listener,y)}const p=Qr;return u}function Fs(u,p,y,I,z){if(Array.isArray(p))for(var H=0;H<p.length;H++)Fs(u,p[H],y,I,z);else I=m(I)?!!I.capture:!!I,y=Us(y),u&&u[ie]?(u=u.i,H=String(p).toString(),H in u.g&&(p=u.g[H],y=fe(p,y,I,z),y>-1&&(oe(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete u.g[H],u.h--)))):u&&(u=_r(u))&&(p=u.g[p.toString()],u=-1,p&&(u=fe(p,y,I,z)),(y=u>-1?p[u]:null)&&Fn(y))}function Fn(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ie])ue(p.i,u);else{var y=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(y,I,u.capture):p.detachEvent?p.detachEvent(vr(y),I):p.addListener&&p.removeListener&&p.removeListener(I),(y=_r(p))?(ue(y,u),y.h==0&&(y.src=null,p[X]=null)):oe(u)}}}function vr(u){return u in Ae?Ae[u]:Ae[u]="on"+u}function Qr(u,p){if(u.da)u=!0;else{p=new Ee(p,this);const y=u.listener,I=u.ha||u.src;u.fa&&Fn(u),u=y.call(I,p)}return u}function _r(u){return u=u[X],u instanceof te?u:null}var wr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Us(u){return typeof u=="function"?u:(u[wr]||(u[wr]=function(p){return u.handleEvent(p)}),u[wr])}function ut(){V.call(this),this.i=new te(this),this.M=this,this.G=null}S(ut,V),ut.prototype[ie]=!0,ut.prototype.removeEventListener=function(u,p,y,I){Fs(this,u,p,y,I)};function it(u,p){var y,I=u.G;if(I)for(y=[];I;I=I.G)y.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new x(p,u);else if(p instanceof x)p.target=p.target||u;else{var z=p;p=new x(I,u),ke(p,z)}z=!0;let H,le;if(y)for(le=y.length-1;le>=0;le--)H=p.g=y[le],z=Yt(H,I,!0,p)&&z;if(H=p.g=u,z=Yt(H,I,!0,p)&&z,z=Yt(H,I,!1,p)&&z,y)for(le=0;le<y.length;le++)H=p.g=y[le],z=Yt(H,I,!1,p)&&z}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const y=u.g[p];for(let I=0;I<y.length;I++)oe(y[I]);delete u.g[p],u.h--}}this.G=null},ut.prototype.J=function(u,p,y,I){return this.i.add(String(u),p,!1,y,I)},ut.prototype.K=function(u,p,y,I){return this.i.add(String(u),p,!0,y,I)};function Yt(u,p,y,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let z=!0;for(let H=0;H<p.length;++H){const le=p[H];if(le&&!le.da&&le.capture==y){const De=le.listener,ft=le.ha||le.src;le.fa&&ue(u.i,le),z=De.call(ft,I)!==!1&&z}}return z&&!I.defaultPrevented}function zs(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(u,p||0)}function Bs(u){u.g=zs(()=>{u.g=null,u.i&&(u.i=!1,Bs(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Vi extends V{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Bs(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(u){V.call(this),this.h=u,this.g={}}S(Un,V);var $s=[];function Yr(u){ye(u.g,function(p,y){this.g.hasOwnProperty(y)&&Fn(p)},u),u.g={}}Un.prototype.N=function(){Un.Z.N.call(this),Yr(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=h.JSON.stringify,Oi=h.JSON.parse,Er=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Bn(){}function bi(){}var Le={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ye(){x.call(this,"d")}S(Ye,x);function Wt(){x.call(this,"c")}S(Wt,x);var kt={},Mi=null;function Xr(){return Mi=Mi||new ut}kt.Ia="serverreachability";function Li(u){x.call(this,kt.Ia,u)}S(Li,x);function Tr(u){const p=Xr();it(p,new Li(p))}kt.STAT_EVENT="statevent";function Ir(u,p){x.call(this,kt.STAT_EVENT,u),this.stat=p}S(Ir,x);function ct(u){const p=Xr();it(p,new Ir(p,u))}kt.Ja="timingevent";function Wo(u,p){x.call(this,kt.Ja,u),this.size=p}S(Wo,x);function Jr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Zr(){this.g=!0}Zr.prototype.ua=function(){this.g=!1};function ml(u,p,y,I,z,H){u.info(function(){if(u.g)if(H){var le="",De=H.split("&");for(let Ge=0;Ge<De.length;Ge++){var ft=De[Ge].split("=");if(ft.length>1){const gt=ft[0];ft=ft[1];const cn=gt.split("_");le=cn.length>=2&&cn[1]=="type"?le+(gt+"="+ft+"&"):le+(gt+"=redacted&")}}}else le=null;else le=H;return"XMLHTTP REQ ("+I+") [attempt "+z+"]: "+p+`
`+y+`
`+le})}function gl(u,p,y,I,z,H,le){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+z+"]: "+p+`
`+y+`
`+H+" "+le})}function $n(u,p,y,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Hs(u,y)+(I?" "+I:"")})}function yl(u,p){u.info(function(){return"TIMEOUT: "+p})}Zr.prototype.info=function(){};function Hs(u,p){if(!u.g)return p;if(!p)return null;try{const H=JSON.parse(p);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var y=H[u];if(!(y.length<2)){var I=y[1];if(Array.isArray(I)&&!(I.length<1)){var z=I[0];if(z!="noop"&&z!="stop"&&z!="close")for(let le=1;le<I.length;le++)I[le]=""}}}}return zn(H)}catch{return p}}var es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ts={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vl;function Sr(){}S(Sr,Bn),Sr.prototype.g=function(){return new XMLHttpRequest},vl=new Sr;function Hn(u){return encodeURIComponent(String(u))}function ji(u){var p=1;u=u.split(":");const y=[];for(;p>0&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function pn(u,p,y,I){this.j=u,this.i=p,this.l=y,this.S=I||1,this.V=new Un(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _l}function _l(){this.i=null,this.g="",this.h=!1}var wl={},Go={};function Sn(u,p,y){u.M=1,u.A=Ar(mn(p)),u.u=y,u.R=!0,Ko(u,null)}function Ko(u,p){u.F=Date.now(),qs(u),u.B=mn(u.A);var y=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),sa(y.i,"t",I),u.C=0,y=u.j.L,u.h=new _l,u.g=Nl(u.j,y?p:null,!u.u),u.P>0&&(u.O=new Vi(v(u.Y,u,u.g),u.P)),p=u.V,y=u.g,I=u.ba;var z="readystatechange";Array.isArray(z)||(z&&($s[0]=z.toString()),z=$s);for(let H=0;H<z.length;H++){const le=Me(y,z[H],I||p.handleEvent,!1,p.h||p);if(!le)break;p.g[le.key]=le}p=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Tr(),ml(u.i,u.v,u.B,u.l,u.S,u.u)}pn.prototype.ba=function(u){u=u.target;const p=this.O;p&&Xn(u)==3?p.j():this.Y(u)},pn.prototype.Y=function(u){try{if(u==this.g)e:{const De=Xn(this.g),ft=this.g.ya(),Ge=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Rl(this.g)))){this.K||De!=4||ft==7||(ft==8||Ge<=0?Tr(3):Tr(2)),Fi(this);var p=this.g.ca();this.X=p;var y=El(this);if(this.o=p==200,gl(this.i,this.v,this.B,this.l,this.S,De,p),this.o){if(this.U&&!this.L){t:{if(this.g){var I,z=this.g;if((I=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(I)){var H=I;break t}}H=null}if(u=H)$n(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,u);else{this.o=!1,this.m=3,ct(12),kr(this),Ws(this);break e}}if(this.R){u=!0;let gt;for(;!this.K&&this.C<y.length;)if(gt=Il(this,y),gt==Go){De==4&&(this.m=4,ct(14),u=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==wl){this.m=4,ct(15),$n(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else $n(this.i,this.l,gt,null),Ze(this,gt);if(Tl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||y.length!=0||this.h.h||(this.m=1,ct(16),u=!1),this.o=this.o&&u,!u)$n(this.i,this.l,y,"[Invalid Chunked Response]"),kr(this),Ws(this);else if(y.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),ti(le),le.P=!0,ct(11))}}else $n(this.i,this.l,y,null),Ze(this,y);De==4&&kr(this),this.o&&!this.K&&(De==4?Qi(this.j,this):(this.o=!1,qs(this)))}else oa(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),kr(this),Ws(this)}}}catch{}finally{}};function El(u){if(!Tl(u))return u.g.la();const p=Rl(u.g);if(p==="")return"";let y="";const I=p.length,z=Xn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return kr(u),Ws(u),"";u.h.i=new h.TextDecoder}for(let H=0;H<I;H++)u.h.h=!0,y+=u.h.i.decode(p[H],{stream:!(z&&H==I-1)});return p.length=0,u.h.g+=y,u.C=0,u.h.g}function Tl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Il(u,p){var y=u.C,I=p.indexOf(`
`,y);return I==-1?Go:(y=Number(p.substring(y,I)),isNaN(y)?wl:(I+=1,I+y>p.length?Go:(p=p.slice(I,I+y),u.C=I+y,p)))}pn.prototype.cancel=function(){this.K=!0,kr(this)};function qs(u){u.T=Date.now()+u.H,Qo(u,u.H)}function Qo(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Jr(v(u.aa,u),p)}function Fi(u){u.D&&(h.clearTimeout(u.D),u.D=null)}pn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(yl(this.i,this.B),this.M!=2&&(Tr(),ct(17)),kr(this),this.m=2,Ws(this)):Qo(this,this.T-u)};function Ws(u){u.j.I==0||u.K||Qi(u.j,u)}function kr(u){Fi(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Yr(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Ze(u,p){try{var y=u.j;if(y.I!=0&&(y.g==u||Xo(y.h,u))){if(!u.L&&Xo(y.h,u)&&y.I==3){try{var I=y.Ba.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var z=I;if(z[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)Ki(y),ln(y);else break e;er(y),ct(18)}}else y.xa=z[1],0<y.xa-y.K&&z[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Jr(v(y.Va,y),6e3));Gs(y.h)<=1&&y.ta&&(y.ta=void 0)}else un(y,11)}else if((u.L||y.g==u)&&Ki(y),!T(p))for(z=y.Ba.g.parse(p),p=0;p<z.length;p++){let Ge=z[p];const gt=Ge[0];if(!(gt<=y.K))if(y.K=gt,Ge=Ge[1],y.I==2)if(Ge[0]=="c"){y.M=Ge[1],y.ba=Ge[2];const cn=Ge[3];cn!=null&&(y.ka=cn,y.j.info("VER="+y.ka));const xr=Ge[4];xr!=null&&(y.za=xr,y.j.info("SVER="+y.za));const tr=Ge[5];tr!=null&&typeof tr=="number"&&tr>0&&(I=1.5*tr,y.O=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const nr=u.g;if(nr){const Ji=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ji){var H=I.h;H.g||Ji.indexOf("spdy")==-1&&Ji.indexOf("quic")==-1&&Ji.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(zi(H,H.h),H.h=null))}if(I.G){const ua=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;ua&&(I.wa=ua,qe(I.J,I.G,ua))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),I=y;var le=u;if(I.na=la(I,I.L?I.ba:null,I.W),le.L){Ks(I.h,le);var De=le,ft=I.O;ft&&(De.H=ft),De.D&&(Fi(De),qs(De)),I.g=le}else Lt(I);y.i.length>0&&Nr(y)}else Ge[0]!="stop"&&Ge[0]!="close"||un(y,7);else y.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?un(y,7):Wi(y):Ge[0]!="noop"&&y.l&&y.l.qa(Ge),y.A=0)}}Tr(4)}catch{}}var Lc=class{constructor(u,p){this.g=u,this.map=p}};function Ui(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Gs(u){return u.h?1:u.g?u.g.size:0}function Xo(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function zi(u,p){u.g?u.g.add(p):u.h=p}function Ks(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ui.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function sn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.G);return p}return M(u.i)}var Sl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function on(u,p){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const I=u[y].indexOf("=");let z,H=null;I>=0?(z=u[y].substring(0,I),H=u[y].substring(I+1)):z=u[y],p(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function qn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof qn?(this.l=u.l,Qs(this,u.j),this.o=u.o,this.g=u.g,Wn(this,u.u),this.h=u.h,ns(this,ia(u.i)),this.m=u.m):u&&(p=String(u).match(Sl))?(this.l=!1,Qs(this,p[1]||"",!0),this.o=Ys(p[2]||""),this.g=Ys(p[3]||"",!0),Wn(this,p[4]),this.h=Ys(p[5]||"",!0),ns(this,p[6]||"",!0),this.m=Ys(p[7]||"")):(this.l=!1,this.i=new ze(null,this.l))}qn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Xs(p,Zo,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Xs(p,Zo,!0),"@"),u.push(Hn(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Xs(y,y.charAt(0)=="/"?Js:ea,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Xs(y,ta)),u.join("")},qn.prototype.resolve=function(u){const p=mn(this);let y=!!u.j;y?Qs(p,u.j):y=!!u.o,y?p.o=u.o:y=!!u.g,y?p.g=u.g:y=u.u!=null;var I=u.h;if(y)Wn(p,u.u);else if(y=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var z=p.h.lastIndexOf("/");z!=-1&&(I=p.h.slice(0,z+1)+I)}if(z=I,z==".."||z==".")I="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){I=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let le=0;le<z.length;){const De=z[le++];De=="."?I&&le==z.length&&H.push(""):De==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),I&&le==z.length&&H.push("")):(H.push(De),I=!0)}I=H.join("/")}else I=z}return y?p.h=I:y=u.i.toString()!=="",y?ns(p,ia(u.i)):y=!!u.m,y&&(p.m=u.m),p};function mn(u){return new qn(u)}function Qs(u,p,y){u.j=y?Ys(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Wn(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function ns(u,p,y){p instanceof ze?(u.i=p,$i(u.i,u.l)):(y||(p=Xs(p,jc)),u.i=new ze(p,u.l))}function qe(u,p,y){u.i.set(p,y)}function Ar(u){return qe(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ys(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xs(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,Jo),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zo=/[#\/\?@]/g,ea=/[#\?:]/g,Js=/[#\?]/g,jc=/[#\?@]/g,ta=/#/g;function ze(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Gn(u){u.g||(u.g=new Map,u.h=0,u.i&&on(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=ze.prototype,r.add=function(u,p){Gn(this),this.i=null,u=Kn(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function na(u,p){Gn(u),p=Kn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Bi(u,p){return Gn(u),p=Kn(u,p),u.g.has(p)}r.forEach=function(u,p){Gn(this),this.g.forEach(function(y,I){y.forEach(function(z){u.call(p,z,I,this)},this)},this)};function ra(u,p){Gn(u);let y=[];if(typeof p=="string")Bi(u,p)&&(y=y.concat(u.g.get(Kn(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)y=y.concat(u[p]);return y}r.set=function(u,p){return Gn(this),this.i=null,u=Kn(this,u),Bi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=ra(this,u),u.length>0?String(u[0]):p):p};function sa(u,p,y){na(u,p),y.length>0&&(u.i=null,u.g.set(Kn(u,p),M(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let I=0;I<p.length;I++){var y=p[I];const z=Hn(y);y=ra(this,y);for(let H=0;H<y.length;H++){let le=z;y[H]!==""&&(le+="="+Hn(y[H])),u.push(le)}}return this.i=u.join("&")};function ia(u){const p=new ze;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Kn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function $i(u,p){p&&!u.j&&(Gn(u),u.i=null,u.g.forEach(function(y,I){const z=I.toLowerCase();I!=z&&(na(this,I),sa(this,z,y))},u)),u.j=p}function Qn(u,p){const y=new Zr;if(h.Image){const I=new Image;I.onload=E(Nt,y,"TestLoadImage: loaded",!0,p,I),I.onerror=E(Nt,y,"TestLoadImage: error",!1,p,I),I.onabort=E(Nt,y,"TestLoadImage: abort",!1,p,I),I.ontimeout=E(Nt,y,"TestLoadImage: timeout",!1,p,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function Yn(u,p){const y=new Zr,I=new AbortController,z=setTimeout(()=>{I.abort(),Nt(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(H=>{clearTimeout(z),H.ok?Nt(y,"TestPingServer: ok",!0,p):Nt(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(z),Nt(y,"TestPingServer: error",!1,p)})}function Nt(u,p,y,I,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),I(y)}catch{}}function Zs(){this.g=new Er}function Cr(u){this.i=u.Sb||null,this.h=u.ab||!1}S(Cr,Bn),Cr.prototype.g=function(){return new an(this.i,this.h)};function an(u,p){ut.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(an,ut),r=an.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,kn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;kl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function kl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?rs(this):kn(this),this.readyState==3&&kl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,rs(this))},r.Na=function(u){this.g&&(this.response=u,rs(this))},r.ga=function(){this.g&&rs(this)};function rs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,kn(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function kn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(an.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Al(u){let p="";return ye(u,function(y,I){p+=I,p+=":",p+=y,p+=`\r
`}),p}function Hi(u,p,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Al(y),typeof u=="string"?y!=null&&Hn(y):qe(u,p,y))}function Qe(u){ut.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Qe,ut);var Cl=/^https?$/i,Fc=["POST","PUT"];r=Qe.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vl.g(),this.g.onreadystatechange=A(v(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(H){ss(this,H);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var z in I)y.set(z,I[z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())y.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),z=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Fc,p,void 0)>=0)||I||z||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,le]of y)this.g.setRequestHeader(H,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){ss(this,H)}};function ss(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,is(u),Pr(u)}function is(u){u.A||(u.A=!0,it(u,"complete"),it(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,it(this,"complete"),it(this,"abort"),Pr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pr(this,!0)),Qe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Rr(this):this.Xa())},r.Xa=function(){Rr(this)};function Rr(u){if(u.h&&typeof l<"u"){if(u.v&&Xn(u)==4)setTimeout(u.Ca.bind(u),0);else if(it(u,"readystatechange"),Xn(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var I;if(I=H===0){let le=String(u.D).match(Sl)[1]||null;!le&&h.self&&h.self.location&&(le=h.self.location.protocol.slice(0,-1)),I=!Cl.test(le?le.toLowerCase():"")}y=I}if(y)it(u,"complete"),it(u,"success");else{u.o=6;try{var z=Xn(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",is(u)}}finally{Pr(u)}}}}function Pr(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,p||it(u,"ready");try{y.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Xn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Oi(p)}};function Rl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(u){const p={};u=(u.g&&Xn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(T(u[I]))continue;var y=ji(u[I]);const z=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=p[z]||[];p[z]=H,H.push(y)}ce(p,function(I){return I.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jn(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function qi(u){this.za=0,this.i=[],this.j=new Zr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jn("baseRetryDelayMs",5e3,u),this.Za=Jn("retryDelaySeedMs",1e4,u),this.Ta=Jn("forwardChannelMaxRetries",2,u),this.va=Jn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ui(u&&u.concurrentRequestLimit),this.Ba=new Zs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=qi.prototype,r.ka=8,r.I=1,r.connect=function(u,p,y,I){ct(0),this.W=u,this.H=p||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.J=la(this,null,this.W),Nr(this)};function Wi(u){if(Gi(u),u.I==3){var p=u.V++,y=mn(u.J);if(qe(y,"SID",u.M),qe(y,"RID",p),qe(y,"TYPE","terminate"),Zn(u,y),p=new pn(u,u.j,p),p.M=2,p.A=Ar(mn(y)),y=!1,h.navigator&&h.navigator.sendBeacon)try{y=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&h.Image&&(new Image().src=p.A,y=!0),y||(p.g=Nl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),qs(p)}ni(u)}function ln(u){u.g&&(ti(u),u.g.cancel(),u.g=null)}function Gi(u){ln(u),u.v&&(h.clearTimeout(u.v),u.v=null),Ki(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Nr(u){if(!Yo(u.h)&&!u.m){u.m=!0;var p=u.Ea;he||k(),K||(he(),K=!0),R.add(p,u),u.D=0}}function Pl(u,p){return Gs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Jr(v(u.Ea,u,p),Yi(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new pn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=L(H),ke(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=aa(this,z,p),y=mn(this.J),qe(y,"RID",u),qe(y,"CVER",22),this.G&&qe(y,"X-HTTP-Session-Id",this.G),Zn(this,y),H&&(this.R?p="headers="+Hn(Al(H))+"&"+p:this.u&&Hi(y,this.u,H)),zi(this.h,z),this.Ra&&qe(y,"TYPE","init"),this.S?(qe(y,"$req",p),qe(y,"SID","null"),z.U=!0,Sn(z,y,null)):Sn(z,y,p),this.I=2}}else this.I==3&&(u?ei(this,u):this.i.length==0||Yo(this.h)||ei(this))};function ei(u,p){var y;p?y=p.l:y=u.V++;const I=mn(u.J);qe(I,"SID",u.M),qe(I,"RID",y),qe(I,"AID",u.K),Zn(u,I),u.u&&u.o&&Hi(I,u.u,u.o),y=new pn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),p&&(u.i=p.G.concat(u.i)),p=aa(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),zi(u.h,y),Sn(y,I,p)}function Zn(u,p){u.H&&ye(u.H,function(y,I){qe(p,I,y)}),u.l&&ye({},function(y,I){qe(p,I,y)})}function aa(u,p,y){y=Math.min(u.i.length,y);const I=u.l?v(u.l.Ka,u.l,u):null;e:{var z=u.i;let De=-1;for(;;){const ft=["count="+y];De==-1?y>0?(De=z[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let Ge=!0;for(let gt=0;gt<y;gt++){var H=z[gt].g;const cn=z[gt].map;if(H-=De,H<0)De=Math.max(0,z[gt].g-100),Ge=!1;else try{H="req"+H+"_"||"";try{var le=cn instanceof Map?cn:Object.entries(cn);for(const[xr,tr]of le){let nr=tr;m(tr)&&(nr=zn(tr)),ft.push(H+xr+"="+encodeURIComponent(nr))}}catch(xr){throw ft.push(H+"type="+encodeURIComponent("_badmap")),xr}}catch{I&&I(cn)}}if(Ge){le=ft.join("&");break e}}le=void 0}return u=u.i.splice(0,y),p.G=u,le}function Lt(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;he||k(),K||(he(),K=!0),R.add(p,u),u.A=0}}function er(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Jr(v(u.Da,u),Yi(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,os(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Jr(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),ln(this),os(this))};function ti(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function os(u){u.g=new pn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=mn(u.na);qe(p,"RID","rpc"),qe(p,"SID",u.M),qe(p,"AID",u.K),qe(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&qe(p,"TO",u.ia),qe(p,"TYPE","xmlhttp"),Zn(u,p),u.u&&u.o&&Hi(p,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Ar(mn(p)),y.u=null,y.R=!0,Ko(y,u)}r.Va=function(){this.C!=null&&(this.C=null,ln(this),er(this),ct(19))};function Ki(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Qi(u,p){var y=null;if(u.g==p){Ki(u),ti(u),u.g=null;var I=2}else if(Xo(u.h,p))y=p.G,Ks(u.h,p),I=1;else return;if(u.I!=0){if(p.o)if(I==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var z=u.D;I=Xr(),it(I,new Wo(I,y)),Nr(u)}else Lt(u);else if(z=p.m,z==3||z==0&&p.X>0||!(I==1&&Pl(u,p)||I==2&&er(u)))switch(y&&y.length>0&&(p=u.h,p.i=p.i.concat(y)),z){case 1:un(u,5);break;case 4:un(u,10);break;case 3:un(u,6);break;default:un(u,2)}}}function Yi(u,p){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*p}function un(u,p){if(u.j.info("Error code "+p),p==2){var y=v(u.bb,u),I=u.Ua;const z=!I;I=new qn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qs(I,"https"),Ar(I),z?Qn(I.toString(),y):Yn(I.toString(),y)}else ct(2);u.I=0,u.l&&u.l.pa(p),ni(u),Gi(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function ni(u){if(u.I=0,u.ja=[],u.l){const p=sn(u.h);(p.length!=0||u.i.length!=0)&&(q(u.ja,p),q(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function la(u,p,y){var I=y instanceof qn?mn(y):new qn(y);if(I.g!="")p&&(I.g=p+"."+I.g),Wn(I,I.u);else{var z=h.location;I=z.protocol,p=p?p+"."+z.hostname:z.hostname,z=+z.port;const H=new qn(null);I&&Qs(H,I),p&&(H.g=p),z&&Wn(H,z),y&&(H.h=y),I=H}return y=u.G,p=u.wa,y&&p&&qe(I,y,p),qe(I,"VER",u.ka),Zn(u,I),I}function Nl(u,p,y){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Qe(new Cr({ab:y})):new Qe(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xl(){}r=xl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Xi(){}Xi.prototype.g=function(u,p){return new xt(u,p)};function xt(u,p){ut.call(this),this.g=new qi(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!T(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!T(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new as(this)}S(xt,ut),xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Wi(this.g)},xt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=zn(u),u=y);p.i.push(new Lc(p.Ya++,u)),p.I==3&&Nr(p)},xt.prototype.N=function(){this.g.l=null,delete this.j,Wi(this.g),delete this.g,xt.Z.N.call(this)};function Dl(u){Ye.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}S(Dl,Ye);function Vl(){Wt.call(this),this.status=1}S(Vl,Wt);function as(u){this.g=u}S(as,xl),as.prototype.ra=function(){it(this.g,"a")},as.prototype.qa=function(u){it(this.g,new Dl(u))},as.prototype.pa=function(u){it(this.g,new Vl)},as.prototype.oa=function(){it(this.g,"b")},Xi.prototype.createWebChannel=Xi.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,f_=function(){return new Xi},d_=function(){return Xr()},h_=kt,bd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,zu=es,ts.COMPLETE="complete",c_=ts,bi.EventType=Le,Le.OPEN="a",Le.CLOSE="b",Le.ERROR="c",Le.MESSAGE="d",ut.prototype.listen=ut.prototype.J,ba=bi,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,u_=Qe}).apply(typeof Ru<"u"?Ru:typeof self<"u"?self:typeof window<"u"?window:{});const Xg="@firebase/firestore",Jg="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new sf("@firebase/firestore");function wo(){return Ai.logLevel}function pe(r,...e){if(Ai.logLevel<=je.DEBUG){const t=e.map(vf);Ai.debug(`Firestore (${zo}): ${r}`,...t)}}function qr(r,...e){if(Ai.logLevel<=je.ERROR){const t=e.map(vf);Ai.error(`Firestore (${zo}): ${r}`,...t)}}function Do(r,...e){if(Ai.logLevel<=je.WARN){const t=e.map(vf);Ai.warn(`Firestore (${zo}): ${r}`,...t)}}function vf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,p_(r,i,t)}function p_(r,e,t){let i=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw qr(i),new Error(i)}function We(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||p_(e,o,i)}function Ve(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($t.UNAUTHENTICATED)))}shutdown(){}}class uS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class cS{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _i,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _i)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new m_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class hS{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dS{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new hS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=l=>{l.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,pe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Zg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=pS(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Fe(r,e){return r<e?-1:r>e?1:0}function Md(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return vd(o)===vd(l)?Fe(o,l):vd(o)?1:-1}return Fe(r.length,e.length)}const mS=55296,gS=57343;function vd(r){const e=r.charCodeAt(0);return e>=mS&&e<=gS}function Vo(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="__name__";class ar{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ce(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=ar.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const i=ar.isNumericId(e),o=ar.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ar.extractNumericId(e).compare(ar.extractNumericId(t)):Md(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class Je extends ar{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Je(t)}static emptyPath(){return new Je([])}}const yS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends ar{construct(e,t,i){return new bt(e,t,i)}static isValidIdentifier(e){return yS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ey}static keyField(){return new bt([ey])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new me(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new me(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new me(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(l(),o++)}if(l(),h)throw new me(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(Je.fromString(e))}static fromName(e){return new Te(Je.fromString(e).popFirst(5))}static empty(){return new Te(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(r,e,t){if(!t)throw new me(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function vS(r,e,t,i){if(e===!0&&i===!0)throw new me(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ty(r){if(!Te.isDocumentKey(r))throw new me(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ny(r){if(Te.isDocumentKey(r))throw new me(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function y_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function _c(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function wi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new me(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_c(r);throw new me(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(r,e){const t={typeString:r};return e&&(t.value=e),t}function ul(r,e){if(!y_(r))throw new me(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new me(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=-62135596800,sy=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*sy);return new nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ry)throw new me(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sy}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ul(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ry;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:wt("string",nt._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new nt(0,0))}static max(){return new xe(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=-1;function _S(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(i===1e9?new nt(t+1,0):new nt(t,i));return new Vs(o,Te.empty(),e)}function wS(r){return new Vs(r.readTime,r.key,Ka)}class Vs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Vs(xe.min(),Te.empty(),Ka)}static max(){return new Vs(xe.max(),Te.empty(),Ka)}}function ES(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(r.documentKey,e.documentKey),t!==0?t:Fe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==TS)throw r;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,i)=>{t(e)}))}static reject(e){return new ee(((t,i)=>{i(e)}))}static waitFor(e){return new ee(((t,i)=>{let o=0,l=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++l,h&&l===o&&t()}),(g=>i(g)))})),h=!0,l===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next((o=>o?ee.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new ee(((i,o)=>{const l=e.length,h=new Array(l);let m=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next((E=>{h[v]=E,++m,m===l&&i(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new ee(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function SS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $o(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=-1;function Ec(r){return r==null}function tc(r){return r===0&&1/r==-1/0}function kS(r){return typeof r=="number"&&Number.isInteger(r)&&!tc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="";function AS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=iy(e)),e=CS(r.get(t),e);return iy(e)}function CS(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case v_:t+="";break;default:t+=l}}return t}function iy(r){return r+v_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ri(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function __(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pu(this.root,e,this.comparator,!0)}}class Pu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ay(this.data.getIterator())}getIteratorFrom(e){return new ay(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class ay{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new On([])}unionWith(e){let t=new St(bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new On(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new w_("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const RS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(r){if(We(!!r,39018),typeof r=="string"){let e=0;const t=RS.exec(r);if(We(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(r.seconds),nanos:mt(r.nanos)}}function mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function bs(r){return typeof r=="string"?Mt.fromBase64String(r):Mt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="server_timestamp",T_="__type__",I_="__previous_value__",S_="__local_write_time__";function Ef(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[T_])==null?void 0:i.stringValue)===E_}function Tc(r){const e=r.mapValue.fields[I_];return Ef(e)?Tc(e):e}function Qa(r){const e=Os(r.mapValue.fields[S_].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,i,o,l,h,m,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=E}}const nc="(default)";class Ya{constructor(e,t){this.projectId=e,this.database=t||nc}static empty(){return new Ya("","")}get isDefaultDatabase(){return this.database===nc}isEqual(e){return e instanceof Ya&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="__type__",NS="__max__",Nu={mapValue:{}},A_="__vector__",rc="value";function Ms(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ef(r)?4:DS(r)?9007199254740991:xS(r)?10:11:Ce(28295,{value:r})}function gr(r,e){if(r===e)return!0;const t=Ms(r);if(t!==Ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Qa(r).isEqual(Qa(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Os(o.timestampValue),m=Os(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return bs(o.bytesValue).isEqual(bs(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return mt(o.geoPointValue.latitude)===mt(l.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return mt(o.integerValue)===mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=mt(o.doubleValue),m=mt(l.doubleValue);return h===m?tc(h)===tc(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return Vo(r.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(oy(h)!==oy(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!gr(h[g],m[g])))return!1;return!0})(r,e);default:return Ce(52216,{left:r})}}function Xa(r,e){return(r.values||[]).find((t=>gr(t,e)))!==void 0}function Oo(r,e){if(r===e)return 0;const t=Ms(r),i=Ms(e);if(t!==i)return Fe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const m=mt(l.integerValue||l.doubleValue),g=mt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(r,e);case 3:return ly(r.timestampValue,e.timestampValue);case 4:return ly(Qa(r),Qa(e));case 5:return Md(r.stringValue,e.stringValue);case 6:return(function(l,h){const m=bs(l),g=bs(h);return m.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const m=l.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const E=Fe(m[v],g[v]);if(E!==0)return E}return Fe(m.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const m=Fe(mt(l.latitude),mt(h.latitude));return m!==0?m:Fe(mt(l.longitude),mt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return uy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var A,M,q,F;const m=l.fields||{},g=h.fields||{},v=(A=m[rc])==null?void 0:A.arrayValue,E=(M=g[rc])==null?void 0:M.arrayValue,S=Fe(((q=v==null?void 0:v.values)==null?void 0:q.length)||0,((F=E==null?void 0:E.values)==null?void 0:F.length)||0);return S!==0?S:uy(v,E)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Nu.mapValue&&h===Nu.mapValue)return 0;if(l===Nu.mapValue)return 1;if(h===Nu.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),v=h.fields||{},E=Object.keys(v);g.sort(),E.sort();for(let S=0;S<g.length&&S<E.length;++S){const A=Md(g[S],E[S]);if(A!==0)return A;const M=Oo(m[g[S]],v[E[S]]);if(M!==0)return M}return Fe(g.length,E.length)})(r.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function ly(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Fe(r,e);const t=Os(r),i=Os(e),o=Fe(t.seconds,i.seconds);return o!==0?o:Fe(t.nanos,i.nanos)}function uy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Oo(t[o],i[o]);if(l)return l}return Fe(t.length,i.length)}function bo(r){return Ld(r)}function Ld(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Os(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return bs(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Te.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Ld(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Ld(t.fields[h])}`;return o+"}"})(r.mapValue):Ce(61005,{value:r})}function Bu(r){switch(Ms(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tc(r);return e?16+Bu(e):16;case 5:return 2*r.stringValue.length;case 6:return bs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Bu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Ri(i.fields,((l,h)=>{o+=l.length+Bu(h)})),o})(r.mapValue);default:throw Ce(13486,{value:r})}}function cy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function jd(r){return!!r&&"integerValue"in r}function Tf(r){return!!r&&"arrayValue"in r}function hy(r){return!!r&&"nullValue"in r}function dy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function $u(r){return!!r&&"mapValue"in r}function xS(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[k_])==null?void 0:i.stringValue)===A_}function za(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ri(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=za(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=za(r.arrayValue.values[t]);return e}return{...r}}function DS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===NS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!$u(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(t)}setAll(e){let t=bt.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=za(h):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());$u(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];$u(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ri(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Tn(za(this.value))}}function C_(r){const e=[];return Ri(r.fields,((t,i)=>{const o=new bt([t]);if($u(i)){const l=C_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,t,i,o,l,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ht(e,0,xe.min(),xe.min(),xe.min(),Tn.empty(),0)}static newFoundDocument(e,t,i,o){return new Ht(e,1,t,xe.min(),i,o,0)}static newNoDocument(e,t){return new Ht(e,2,t,xe.min(),xe.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new Ht(e,3,t,xe.min(),xe.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t){this.position=e,this.inclusive=t}}function fy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=Te.comparator(Te.fromName(h.referenceValue),t.key):i=Oo(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function py(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!gr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function VS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{}class _t extends R_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new bS(e,t,i):t==="array-contains"?new jS(e,i):t==="in"?new FS(e,i):t==="not-in"?new US(e,i):t==="array-contains-any"?new zS(e,i):new _t(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new MS(e,i):new LS(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oo(t,this.value)):t!==null&&Ms(this.value)===Ms(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends R_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ln(e,t)}matches(e){return P_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function P_(r){return r.op==="and"}function N_(r){return OS(r)&&P_(r)}function OS(r){for(const e of r.filters)if(e instanceof Ln)return!1;return!0}function Fd(r){if(r instanceof _t)return r.field.canonicalString()+r.op.toString()+bo(r.value);if(N_(r))return r.filters.map((e=>Fd(e))).join(",");{const e=r.filters.map((t=>Fd(t))).join(",");return`${r.op}(${e})`}}function x_(r,e){return r instanceof _t?(function(i,o){return o instanceof _t&&i.op===o.op&&i.field.isEqual(o.field)&&gr(i.value,o.value)})(r,e):r instanceof Ln?(function(i,o){return o instanceof Ln&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,m)=>l&&x_(h,o.filters[m])),!0):!1})(r,e):void Ce(19439)}function D_(r){return r instanceof _t?(function(t){return`${t.field.canonicalString()} ${t.op} ${bo(t.value)}`})(r):r instanceof Ln?(function(t){return t.op.toString()+" {"+t.getFilters().map(D_).join(" ,")+"}"})(r):"Filter"}class bS extends _t{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class MS extends _t{constructor(e,t){super(e,"in",t),this.keys=V_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class LS extends _t{constructor(e,t){super(e,"not-in",t),this.keys=V_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function V_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class jS extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tf(t)&&Xa(t.arrayValue,this.value)}}class FS extends _t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xa(this.value.arrayValue,t)}}class US extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xa(this.value.arrayValue,t)}}class zS extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Xa(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t=null,i=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Te=null}}function my(r,e=null,t=[],i=[],o=null,l=null,h=null){return new BS(r,e,t,i,o,l,h)}function If(r){const e=Ve(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Fd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Ec(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>bo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>bo(i))).join(",")),e.Te=t}return e.Te}function Sf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!VS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!x_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!py(r.startAt,e.startAt)&&py(r.endAt,e.endAt)}function Ud(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t=null,i=[],o=[],l=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $S(r,e,t,i,o,l,h,m){return new cl(r,e,t,i,o,l,h,m)}function kf(r){return new cl(r)}function gy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function O_(r){return r.collectionGroup!==null}function Ba(r){const e=Ve(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new St(bt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ic(l,i))})),t.has(bt.keyField().canonicalString())||e.Ie.push(new ic(bt.keyField(),i))}return e.Ie}function cr(r){const e=Ve(r);return e.Ee||(e.Ee=HS(e,Ba(r))),e.Ee}function HS(r,e){if(r.limitType==="F")return my(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new ic(o.field,l)}));const t=r.endAt?new sc(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new sc(r.startAt.position,r.startAt.inclusive):null;return my(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function zd(r,e){const t=r.filters.concat([e]);return new cl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Bd(r,e,t){return new cl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ic(r,e){return Sf(cr(r),cr(e))&&r.limitType===e.limitType}function b_(r){return`${If(cr(r))}|lt:${r.limitType}`}function Eo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>D_(o))).join(", ")}]`),Ec(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>bo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>bo(o))).join(",")),`Target(${i})`})(cr(r))}; limitType=${r.limitType})`}function Sc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Te.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Ba(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,g){const v=fy(h,m,g);return h.inclusive?v<=0:v<0})(i.startAt,Ba(i),o)||i.endAt&&!(function(h,m,g){const v=fy(h,m,g);return h.inclusive?v>=0:v>0})(i.endAt,Ba(i),o))})(r,e)}function qS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function M_(r){return(e,t)=>{let i=!1;for(const o of Ba(r)){const l=WS(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function WS(r,e,t){const i=r.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,h,m){const g=h.data.field(l),v=m.data.field(l);return g!==null&&v!==null?Oo(g,v):Ce(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ri(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return __(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new lt(Te.comparator);function Wr(){return GS}const L_=new lt(Te.comparator);function Ma(...r){let e=L_;for(const t of r)e=e.insert(t.key,t);return e}function j_(r){let e=L_;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function yi(){return $a()}function F_(){return $a()}function $a(){return new Pi((r=>r.toString()),((r,e)=>r.isEqual(e)))}const KS=new lt(Te.comparator),QS=new St(Te.comparator);function Ue(...r){let e=QS;for(const t of r)e=e.add(t);return e}const YS=new St(Fe);function XS(){return YS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function U_(r){return{integerValue:""+r}}function JS(r,e){return kS(e)?U_(e):Af(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(){this._=void 0}}function ZS(r,e,t){return r instanceof oc?(function(o,l){const h={fields:{[T_]:{stringValue:E_},[S_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ef(l)&&(l=Tc(l)),l&&(h.fields[I_]=l),{mapValue:h}})(t,e):r instanceof Ja?B_(r,e):r instanceof Za?$_(r,e):(function(o,l){const h=z_(o,l),m=yy(h)+yy(o.Ae);return jd(h)&&jd(o.Ae)?U_(m):Af(o.serializer,m)})(r,e)}function ek(r,e,t){return r instanceof Ja?B_(r,e):r instanceof Za?$_(r,e):t}function z_(r,e){return r instanceof ac?(function(i){return jd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class oc extends kc{}class Ja extends kc{constructor(e){super(),this.elements=e}}function B_(r,e){const t=H_(e);for(const i of r.elements)t.some((o=>gr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Za extends kc{constructor(e){super(),this.elements=e}}function $_(r,e){let t=H_(e);for(const i of r.elements)t=t.filter((o=>!gr(o,i)));return{arrayValue:{values:t}}}class ac extends kc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function yy(r){return mt(r.integerValue||r.doubleValue)}function H_(r){return Tf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function tk(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof Ja&&o instanceof Ja||i instanceof Za&&o instanceof Za?Vo(i.elements,o.elements,gr):i instanceof ac&&o instanceof ac?gr(i.Ae,o.Ae):i instanceof oc&&o instanceof oc})(r.transform,e.transform)}class nk{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ac{}function q_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Cf(r.key,hr.none()):new hl(r.key,r.data,hr.none());{const t=r.data,i=Tn.empty();let o=new St(bt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ni(r.key,i,new On(o.toArray()),hr.none())}}function rk(r,e,t){r instanceof hl?(function(o,l,h){const m=o.value.clone(),g=_y(o.fieldTransforms,l,h.transformResults);m.setAll(g),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Ni?(function(o,l,h){if(!Hu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=_y(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(W_(o)),g.setAll(m),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ha(r,e,t,i){return r instanceof hl?(function(l,h,m,g){if(!Hu(l.precondition,h))return m;const v=l.value.clone(),E=wy(l.fieldTransforms,g,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof Ni?(function(l,h,m,g){if(!Hu(l.precondition,h))return m;const v=wy(l.fieldTransforms,g,h),E=h.data;return E.setAll(W_(l)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((S=>S.field)))})(r,e,t,i):(function(l,h,m){return Hu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,t)}function sk(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=z_(i.transform,o||null);l!=null&&(t===null&&(t=Tn.empty()),t.set(i.field,l))}return t||null}function vy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Vo(i,o,((l,h)=>tk(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hl extends Ac{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ni extends Ac{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function W_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function _y(r,e,t){const i=new Map;We(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);i.set(l.field,ek(h,m,t[o]))}return i}function wy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,ZS(l,h,e))}return i}class Cf extends Ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ik extends Ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&rk(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ha(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ha(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=F_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const g=q_(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,i)=>vy(t,i)))&&Vo(this.baseMutations,e.baseMutations,((t,i)=>vy(t,i)))}}class Rf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return KS})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Rf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Be;function uk(r){switch(r){case Z.OK:return Ce(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ce(15467,{code:r})}}function G_(r){if(r===void 0)return qr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case vt.OK:return Z.OK;case vt.CANCELLED:return Z.CANCELLED;case vt.UNKNOWN:return Z.UNKNOWN;case vt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case vt.INTERNAL:return Z.INTERNAL;case vt.UNAVAILABLE:return Z.UNAVAILABLE;case vt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case vt.NOT_FOUND:return Z.NOT_FOUND;case vt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case vt.ABORTED:return Z.ABORTED;case vt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case vt.DATA_LOSS:return Z.DATA_LOSS;default:return Ce(39323,{code:r})}}(Be=vt||(vt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=new xs([4294967295,4294967295],0);function Ey(r){const e=ck().encode(r),t=new l_;return t.update(e),new Uint8Array(t.digest())}function Ty(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xs([t,i],0),new xs([o,l],0)]}class Pf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new La(`Invalid padding: ${t}`);if(i<0)throw new La(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new La(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xs.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(xs.fromNumber(i)));return o.compare(hk)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ey(e),[i,o]=Ty(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Pf(l,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=Ey(e),[i,o]=Ty(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class La extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,dl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Cc(xe.min(),o,new lt(Fe),Wr(),Ue())}}class dl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new dl(i,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class K_{constructor(e,t){this.targetId=e,this.Ce=t}}class Q_{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Iy{constructor(){this.ve=0,this.Fe=Sy(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),i=Ue();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ce(38017,{changeType:l})}})),new dl(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Sy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wr(),this.Je=xu(),this.He=xu(),this.Ye=new lt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Ud(l))if(i===0){const h=new Te(l.path);this.et(t,h,Ht.newNoDocument(h,xe.min()))}else We(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),g=m?this.ct(m,e,h):1;if(g!==0){this.it(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=bs(i).toUint8Array()}catch(g){if(g instanceof w_)return Do("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Pf(h,o,l)}catch(g){return Do(g instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const m=this.ot(h);if(m){if(l.current&&Ud(m.target)){const g=new Te(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Ht.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=Ue();this.He.forEach(((l,h)=>{let m=!0;h.forEachWhile((g=>{const v=this.ot(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Cc(e,t,this.Ye,this.je,i);return this.je=Wr(),this.Je=xu(),this.He=xu(),this.Ye=new lt(Fe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Iy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new St(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new St(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Iy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function xu(){return new lt(Te.comparator)}function Sy(){return new lt(Te.comparator)}const fk={asc:"ASCENDING",desc:"DESCENDING"},pk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mk={and:"AND",or:"OR"};class gk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $d(r,e){return r.useProto3Json||Ec(e)?e:{value:e}}function lc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function yk(r,e){return lc(r,e.toTimestamp())}function dr(r){return We(!!r,49232),xe.fromTimestamp((function(t){const i=Os(t);return new nt(i.seconds,i.nanos)})(r))}function Nf(r,e){return Hd(r,e).canonicalString()}function Hd(r,e){const t=(function(o){return new Je(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function X_(r){const e=Je.fromString(r);return We(nw(e),10190,{key:e.toString()}),e}function qd(r,e){return Nf(r.databaseId,e.path)}function _d(r,e){const t=X_(e);if(t.get(1)!==r.databaseId.projectId)throw new me(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new me(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Te(Z_(t))}function J_(r,e){return Nf(r.databaseId,e)}function vk(r){const e=X_(r);return e.length===4?Je.emptyPath():Z_(e)}function Wd(r){return new Je(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Z_(r){return We(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ky(r,e,t){return{name:qd(r,e),fields:t.value.mapValue.fields}}function _k(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ce(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(We(E===void 0||typeof E=="string",58123),Mt.fromBase64String(E||"")):(We(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Mt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const E=v.code===void 0?Z.UNKNOWN:G_(v.code);return new me(E,v.message||"")})(h);t=new Q_(i,o,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=_d(r,i.document.name),l=dr(i.document.updateTime),h=i.document.createTime?dr(i.document.createTime):xe.min(),m=new Tn({mapValue:{fields:i.document.fields}}),g=Ht.newFoundDocument(o,l,h,m),v=i.targetIds||[],E=i.removedTargetIds||[];t=new qu(v,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=_d(r,i.document),l=i.readTime?dr(i.readTime):xe.min(),h=Ht.newNoDocument(o,l),m=i.removedTargetIds||[];t=new qu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=_d(r,i.document),l=i.removedTargetIds||[];t=new qu([],l,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new lk(o,l),m=i.targetId;t=new K_(m,h)}}return t}function wk(r,e){let t;if(e instanceof hl)t={update:ky(r,e.key,e.value)};else if(e instanceof Cf)t={delete:qd(r,e.key)};else if(e instanceof Ni)t={update:ky(r,e.key,e.data),updateMask:Pk(e.fieldMask)};else{if(!(e instanceof ik))return Ce(16599,{Vt:e.type});t={verify:qd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const m=h.transform;if(m instanceof oc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ja)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Za)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ac)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:yk(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(r,e.precondition)),t}function Ek(r,e){return r&&r.length>0?(We(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?dr(o.updateTime):dr(l);return h.isEqual(xe.min())&&(h=dr(l)),new nk(h,o.transformResults||[])})(t,e)))):[]}function Tk(r,e){return{documents:[J_(r,e.path)]}}function Ik(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=J_(r,o);const l=(function(v){if(v.length!==0)return tw(Ln.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((E=>(function(A){return{field:To(A.field),direction:Ak(A.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=$d(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function Sk(r){let e=vk(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(S){const A=ew(S);return A instanceof Ln&&N_(A)?A.getFilters():[A]})(t.where));let h=[];t.orderBy&&(h=(function(S){return S.map((A=>(function(q){return new ic(Io(q.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(S){let A;return A=typeof S=="object"?S.value:S,Ec(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(S){const A=!!S.before,M=S.values||[];return new sc(M,A)})(t.startAt));let v=null;return t.endAt&&(v=(function(S){const A=!S.before,M=S.values||[];return new sc(M,A)})(t.endAt)),$S(e,o,h,l,m,"F",g,v)}function kk(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ew(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Io(t.unaryFilter.field);return _t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return _t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return _t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(t.unaryFilter.field);return _t.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(r):r.fieldFilter!==void 0?(function(t){return _t.create(Io(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ln.create(t.compositeFilter.filters.map((i=>ew(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(r):Ce(30097,{filter:r})}function Ak(r){return fk[r]}function Ck(r){return pk[r]}function Rk(r){return mk[r]}function To(r){return{fieldPath:r.canonicalString()}}function Io(r){return bt.fromServerFormat(r.fieldPath)}function tw(r){return r instanceof _t?(function(t){if(t.op==="=="){if(dy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NAN"}};if(hy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NAN"}};if(hy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(t.field),op:Ck(t.op),value:t.value}}})(r):r instanceof Ln?(function(t){const i=t.getFilters().map((o=>tw(o)));return i.length===1?i[0]:{compositeFilter:{op:Rk(t.op),filters:i}}})(r):Ce(54877,{filter:r})}function Pk(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function nw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t,i,o,l=xe.min(),h=xe.min(),m=Mt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.yt=e}}function xk(r){const e=Sk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.Cn=new Vk}addToCollectionParentIndex(e,t){return this.Cn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Vs.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class Vk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new St(Je.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new St(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rw=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(rw,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mo(0)}static cr(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="LruGarbageCollector",Ok=1048576;function Ry([r,e],[t,i]){const o=Fe(r,t);return o===0?Fe(e,i):o}class bk{constructor(e){this.Ir=e,this.buffer=new St(Ry),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Ry(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Mk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(Cy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?pe(Cy,"Ignoring IndexedDB error during garbage collection: ",t):await Bo(t)}await this.Vr(3e5)}))}}class Lk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(wc.ce);const i=new bk(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Ay)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ay):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,m,g,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(i=S,m=Date.now(),this.removeTargets(e,i,t)))).next((S=>(l=S,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((S=>(v=Date.now(),wo()<=je.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${S} documents in `+(v-g)+`ms
Total Duration: ${v-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:S}))))}}function jk(r,e){return new Lk(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.changes=new Pi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ha(i.mutation,o,On.empty(),nt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ue()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ue()){const o=yi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ma();return l.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=yi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ue())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let l=Wr();const h=$a(),m=(function(){return $a()})();return t.forEach(((g,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Ni)?l=l.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),Ha(E.mutation,v,E.mutation.getFieldMask(),nt.now())):h.set(v.key,On.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((v,E)=>h.set(v,E))),t.forEach(((v,E)=>m.set(v,new Uk(E,h.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=$a();let o=new lt(((h,m)=>h-m)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((g=>{const v=t.get(g);if(v===null)return;let E=i.get(g)||On.empty();E=m.applyToLocalView(v,E),i.set(g,E);const S=(o.get(m.batchId)||Ue()).add(g);o=o.insert(m.batchId,S)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,E=g.value,S=F_();E.forEach((A=>{if(!l.has(A)){const M=q_(t.get(A),i.get(A));M!==null&&S.set(A,M),l=l.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ee.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):O_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):ee.resolve(yi());let m=Ka,g=l;return h.next((v=>ee.forEach(v,((E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),l.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next((A=>{g=g.insert(E,A)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,g,v,Ue()))).next((E=>({batchId:m,changes:j_(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let o=Ma();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ma();return this.indexManager.getCollectionParents(e,l).next((m=>ee.forEach(m,(g=>{const v=(function(S,A){return new cl(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((S,A)=>{h=h.insert(S,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((g,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,Ht.newInvalidDocument(E)))}));let m=Ma();return h.forEach(((g,v)=>{const E=l.get(g);E!==void 0&&Ha(E.mutation,v,On.empty(),nt.now()),Sc(t,v)&&(m=m.insert(g,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:dr(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:xk(o.bundledQuery),readTime:dr(o.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.overlays=new lt(Te.comparator),this.qr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=yi();return ee.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const o=yi(),l=t.length+1,h=new Te(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new lt(((v,E)=>v-E));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=yi(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const m=yi(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,E)=>m.set(v,E))),!(m.size()>=o)););return ee.resolve(m)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new ak(t,i));let l=this.qr.get(t);l===void 0&&(l=Ue(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this.Qr=new St(Pt.$r),this.Ur=new St(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Pt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Pt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Te(new Je([])),i=new Pt(t,e),o=new Pt(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new Je([])),i=new Pt(t,e),o=new Pt(t,e+1);let l=Ue();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Pt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Pt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new St(Pt.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ok(l,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Pt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(h)}lookupMutationBatch(e,t){return ee.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?wf:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Pt(t,0),o=new Pt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const m=this.Xr(h.Yr);l.push(m)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(Fe);return t.forEach((o=>{const l=new Pt(o,0),h=new Pt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(m=>{i=i.add(m.Yr)}))})),ee.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Te.isDocumentKey(l)||(l=l.child(""));const h=new Pt(new Te(l),0);let m=new St(Fe);return this.Zr.forEachWhile((g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(m=m.add(g.Yr)),!0)}),h),ee.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ee.forEach(t.mutations,(o=>{const l=new Pt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Pt(t,0),o=this.Zr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.ri=e,this.docs=(function(){return new lt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let i=Wr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Ht.newInvalidDocument(o))})),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Wr();const h=t.path,m=new Te(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:E}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||ES(wS(E),i)<=0||(o.has(E.key)||Sc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ce(9500)}ii(e,t){return ee.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Gk(this)}getSize(e){return ee.resolve(this.size)}}class Gk extends Fk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ee.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.persistence=e,this.si=new Pi((t=>If(t)),Sf),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new xf,this.targetCount=0,this.ai=Mo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ee.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Pr(t),ee.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ee.waitFor(l).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.ui={},this.overlays={},this.ci=new wc(0),this.li=!1,this.li=!0,this.hi=new Hk,this.referenceDelegate=e(this),this.Pi=new Kk(this),this.indexManager=new Dk,this.remoteDocumentCache=(function(o){return new Wk(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new Nk(t),this.Ii=new Bk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $k,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new qk(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new Qk(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return ee.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Qk extends IS{constructor(e){super(),this.currentSequenceNumber=e}}class Df{constructor(e){this.persistence=e,this.Ri=new xf,this.Vi=null}static mi(e){return new Df(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(i=>{const o=Te.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,xe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class uc{constructor(e,t){this.persistence=e,this.pi=new Pi((i=>AS(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=jk(this,t)}static mi(e,t){return new uc(e,t)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ee.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?ee.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(i++,l.removeEntry(h,xe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bu(e.data.value)),t}br(e,t,i){return ee.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ee.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ue(),o=Ue();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Vf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return z0()?8:SS(qt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new Yk;return this.Ss(e,t,h).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(wo()<=je.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(wo()<=je.DEBUG&&pe("QueryEngine","Query:",Eo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(wo()<=je.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):ee.resolve())}ys(e,t){if(gy(t))return ee.resolve(null);let i=cr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Bd(t,null,"F"),i=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Ue(...l);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const v=this.Ds(t,m);return this.Cs(t,v,h,g.readTime)?this.ys(e,Bd(t,null,"F")):this.vs(e,v,t,g)}))))})))))}ws(e,t,i,o){return gy(t)||o.isEqual(xe.min())?ee.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?ee.resolve(null):(wo()<=je.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Eo(t)),this.vs(e,h,t,_S(o,Ka)).next((m=>m)))}))}Ds(e,t){let i=new St(M_(e));return t.forEach(((o,l)=>{Sc(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return wo()<=je.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Eo(t)),this.ps.getDocumentsMatchingQuery(e,t,Vs.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="LocalStore",Jk=3e8;class Zk{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new lt(Fe),this.xs=new Pi((l=>If(l)),Sf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function eA(r,e,t,i){return new Zk(r,e,t,i)}async function iw(r,e){const t=Ve(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],m=[];let g=Ue();for(const v of o){h.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}for(const v of l){m.push(v.batchId);for(const E of v.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next((v=>({Ls:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function tA(r,e){const t=Ve(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,v,E){const S=v.batch,A=S.keys();let M=ee.resolve();return A.forEach((q=>{M=M.next((()=>E.getEntry(g,q))).next((F=>{const b=v.docVersions.get(q);We(b!==null,48541),F.version.compareTo(b)<0&&(S.applyToRemoteDocument(F,v),F.isValidDocument()&&(F.setReadTime(v.commitVersion),E.addEntry(F)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(g,S)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Ue();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function ow(r){const e=Ve(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function nA(r,e){const t=Ve(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((E,S)=>{const A=o.get(S);if(!A)return;m.push(t.Pi.removeMatchingKeys(l,E.removedDocuments,S).next((()=>t.Pi.addMatchingKeys(l,E.addedDocuments,S))));let M=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(S)!==null?M=M.withResumeToken(Mt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,i)),o=o.insert(S,M),(function(F,b,W){return F.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=Jk?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(A,M,E)&&m.push(t.Pi.updateTargetData(l,M))}));let g=Wr(),v=Ue();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),m.push(rA(l,h,e.documentUpdates).next((E=>{g=E.ks,v=E.qs}))),!i.isEqual(xe.min())){const E=t.Pi.getLastRemoteSnapshotVersion(l).next((S=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(E)}return ee.waitFor(m).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,v))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function rA(r,e,t){let i=Ue(),o=Ue();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Wr();return t.forEach(((m,g)=>{const v=l.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):pe(Of,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function sA(r,e){const t=Ve(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=wf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function iA(r,e){const t=Ve(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,ee.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new As(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Gd(r,e,t){const i=Ve(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!$o(h))throw h;pe(Of,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Py(r,e,t){const i=Ve(r);let o=xe.min(),l=Ue();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,E){const S=Ve(g),A=S.xs.get(E);return A!==void 0?ee.resolve(S.Ms.get(A)):S.Pi.getTargetData(v,E)})(i,h,cr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:xe.min(),t?l:Ue()))).next((m=>(oA(i,qS(e),m),{documents:m,Qs:l})))))}function oA(r,e,t){let i=r.Os.get(e)||xe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class Ny{constructor(){this.activeTargetIds=XS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aA{constructor(){this.Mo=new Ny,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ny,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="ConnectivityMonitor";class Dy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(xy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(xy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function Kd(){return Du===null?Du=(function(){return 268435456+Math.round(2147483648*Math.random())})():Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="RestConnection",uA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===nc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=Kd(),m=this.zo(e,t.toUriEncodedString());pe(wd,`Sending RPC '${e}' ${h}:`,m,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:v}=new URL(m),E=jo(v);return this.Jo(e,m,g,i,E).then((S=>(pe(wd,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw Do(wd,`RPC '${e}' ${h} failed with error: `,S,"url: ",m,"request:",i),S}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=uA[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class dA extends cA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=Kd();return new Promise(((m,g)=>{const v=new u_;v.setWithCredentials(!0),v.listenOnce(c_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case zu.NO_ERROR:const S=v.getResponseJson();pe(Bt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),m(S);break;case zu.TIMEOUT:pe(Bt,`RPC '${e}' ${h} timed out`),g(new me(Z.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const A=v.getStatus();if(pe(Bt,`RPC '${e}' ${h} failed with status:`,A,"response text:",v.getResponseText()),A>0){let M=v.getResponseJson();Array.isArray(M)&&(M=M[0]);const q=M==null?void 0:M.error;if(q&&q.status&&q.message){const F=(function(W){const D=W.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(D)>=0?D:Z.UNKNOWN})(q.status);g(new me(F,q.message))}else g(new me(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new me(Z.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{pe(Bt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);pe(Bt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",E,i,15)}))}T_(e,t,i){const o=Kd(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=f_(),m=d_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=l.join("");pe(Bt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const S=h.createWebChannel(E,g);this.I_(S);let A=!1,M=!1;const q=new hA({Yo:b=>{M?pe(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(A||(pe(Bt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),pe(Bt,`RPC '${e}' stream ${o} sending:`,b),S.send(b))},Zo:()=>S.close()}),F=(b,W,D)=>{b.listen(W,(Y=>{try{D(Y)}catch(Q){setTimeout((()=>{throw Q}),0)}}))};return F(S,ba.EventType.OPEN,(()=>{M||(pe(Bt,`RPC '${e}' stream ${o} transport opened.`),q.o_())})),F(S,ba.EventType.CLOSE,(()=>{M||(M=!0,pe(Bt,`RPC '${e}' stream ${o} transport closed`),q.a_(),this.E_(S))})),F(S,ba.EventType.ERROR,(b=>{M||(M=!0,Do(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,b.name,"Message:",b.message),q.a_(new me(Z.UNAVAILABLE,"The operation could not be completed")))})),F(S,ba.EventType.MESSAGE,(b=>{var W;if(!M){const D=b.data[0];We(!!D,16349);const Y=D,Q=(Y==null?void 0:Y.error)||((W=Y[0])==null?void 0:W.error);if(Q){pe(Bt,`RPC '${e}' stream ${o} received error:`,Q);const he=Q.status;let K=(function(P){const V=vt[P];if(V!==void 0)return G_(V)})(he),R=Q.message;K===void 0&&(K=Z.INTERNAL,R="Unknown error status: "+he+" with message "+Q.message),M=!0,q.a_(new me(K,R)),S.close()}else pe(Bt,`RPC '${e}' stream ${o} received:`,D),q.u_(D)}})),F(m,h_.STAT_EVENT,(b=>{b.stat===bd.PROXY?pe(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===bd.NOPROXY&&pe(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(r){return new gk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="PersistentStream";class lw{constructor(e,t,i,o,l,h,m,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new me(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(Vy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(Vy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fA extends lw{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=_k(this.serializer,e),i=(function(l){if(!("targetChange"in l))return xe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?xe.min():h.readTime?dr(h.readTime):xe.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Wd(this.serializer),t.addTarget=(function(l,h){let m;const g=h.target;if(m=Ud(g)?{documents:Tk(l,g)}:{query:Ik(l,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Y_(l,h.resumeToken);const v=$d(l,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(xe.min())>0){m.readTime=lc(l,h.snapshotVersion.toTimestamp());const v=$d(l,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const i=kk(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Wd(this.serializer),t.removeTarget=e,this.q_(t)}}class pA extends lw{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Ek(e.writeResults,e.commitTime),i=dr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Wd(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>wk(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{}class gA extends mA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,Hd(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(Z.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,Hd(t,i),o,h,m,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new me(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qr(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="RemoteStore";class vA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{xi(this)&&(pe(Ci,"Restarting streams for network reachability change."),await(async function(g){const v=Ve(g);v.Ea.add(4),await fl(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Pc(v)})(this))}))})),this.Ra=new yA(i,o)}}async function Pc(r){if(xi(r))for(const e of r.da)await e(!0)}async function fl(r){for(const e of r.da)await e(!1)}function uw(r,e){const t=Ve(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),jf(t)?Lf(t):Ho(t).O_()&&Mf(t,e))}function bf(r,e){const t=Ve(r),i=Ho(t);t.Ia.delete(e),i.O_()&&cw(t,e),t.Ia.size===0&&(i.O_()?i.L_():xi(t)&&t.Ra.set("Unknown"))}function Mf(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(r).Y_(e)}function cw(r,e){r.Va.Ue(e),Ho(r).Z_(e)}function Lf(r){r.Va=new dk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ho(r).start(),r.Ra.ua()}function jf(r){return xi(r)&&!Ho(r).x_()&&r.Ia.size>0}function xi(r){return Ve(r).Ea.size===0}function hw(r){r.Va=void 0}async function _A(r){r.Ra.set("Online")}async function wA(r){r.Ia.forEach(((e,t)=>{Mf(r,e)}))}async function EA(r,e){hw(r),jf(r)?(r.Ra.ha(e),Lf(r)):r.Ra.set("Unknown")}async function TA(r,e,t){if(r.Ra.set("Online"),e instanceof Q_&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(r,e)}catch(i){pe(Ci,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cc(r,i)}else if(e instanceof qu?r.Va.Ze(e):e instanceof K_?r.Va.st(e):r.Va.tt(e),!t.isEqual(xe.min()))try{const i=await ow(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const m=l.Va.Tt(h);return m.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const E=l.Ia.get(v);E&&l.Ia.set(v,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,v)=>{const E=l.Ia.get(g);if(!E)return;l.Ia.set(g,E.withResumeToken(Mt.EMPTY_BYTE_STRING,E.snapshotVersion)),cw(l,g);const S=new As(E.target,g,v,E.sequenceNumber);Mf(l,S)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){pe(Ci,"Failed to raise snapshot:",i),await cc(r,i)}}async function cc(r,e,t){if(!$o(e))throw e;r.Ea.add(1),await fl(r),r.Ra.set("Offline"),t||(t=()=>ow(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{pe(Ci,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Pc(r)}))}function dw(r,e){return e().catch((t=>cc(r,t,e)))}async function Nc(r){const e=Ve(r),t=Ls(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wf;for(;IA(e);)try{const o=await sA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,SA(e,o)}catch(o){await cc(e,o)}fw(e)&&pw(e)}function IA(r){return xi(r)&&r.Ta.length<10}function SA(r,e){r.Ta.push(e);const t=Ls(r);t.O_()&&t.X_&&t.ea(e.mutations)}function fw(r){return xi(r)&&!Ls(r).x_()&&r.Ta.length>0}function pw(r){Ls(r).start()}async function kA(r){Ls(r).ra()}async function AA(r){const e=Ls(r);for(const t of r.Ta)e.ea(t.mutations)}async function CA(r,e,t){const i=r.Ta.shift(),o=Rf.from(i,e,t);await dw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Nc(r)}async function RA(r,e){e&&Ls(r).X_&&await(async function(i,o){if((function(h){return uk(h)&&h!==Z.ABORTED})(o.code)){const l=i.Ta.shift();Ls(i).B_(),await dw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Nc(i)}})(r,e),fw(r)&&pw(r)}async function Oy(r,e){const t=Ve(r);t.asyncQueue.verifyOperationInProgress(),pe(Ci,"RemoteStore received new credentials");const i=xi(t);t.Ea.add(3),await fl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pc(t)}async function PA(r,e){const t=Ve(r);e?(t.Ea.delete(2),await Pc(t)):e||(t.Ea.add(2),await fl(t),t.Ra.set("Unknown"))}function Ho(r){return r.ma||(r.ma=(function(t,i,o){const l=Ve(t);return l.sa(),new fA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:_A.bind(null,r),t_:wA.bind(null,r),r_:EA.bind(null,r),H_:TA.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),jf(r)?Lf(r):r.Ra.set("Unknown")):(await r.ma.stop(),hw(r))}))),r.ma}function Ls(r){return r.fa||(r.fa=(function(t,i,o){const l=Ve(t);return l.sa(),new pA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:kA.bind(null,r),r_:RA.bind(null,r),ta:AA.bind(null,r),na:CA.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Nc(r)):(await r.fa.stop(),r.Ta.length>0&&(pe(Ci,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,m=new Ff(e,t,h,o,l);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uf(r,e){if(qr("AsyncQueue",`${e}: ${r}`),$o(r))return new me(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=Ma(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Co;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(){this.ga=new lt(Te.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Lo{constructor(e,t,i,o,l,h,m,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new Lo(e,t,Co.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xA{constructor(){this.queries=My(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ve(t),l=o.queries;o.queries=My(),l.forEach(((h,m)=>{for(const g of m.Sa)g.onError(i)}))})(this,new me(Z.ABORTED,"Firestore shutting down"))}}function My(){return new Pi((r=>b_(r)),Ic)}async function DA(r,e){const t=Ve(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new NA,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Uf(h,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&zf(t)}async function VA(r,e){const t=Ve(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function OA(r,e){const t=Ve(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.Sa)m.Fa(o)&&(i=!0);h.wa=o}}i&&zf(t)}function bA(r,e,t){const i=Ve(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function zf(r){r.Ca.forEach((e=>{e.next()}))}var Qd,Ly;(Ly=Qd||(Qd={})).Ma="default",Ly.Cache="cache";class MA{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.key=e}}class gw{constructor(e){this.key=e}}class LA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=M_(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new by,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,S)=>{const A=o.get(E),M=Sc(this.query,S)?S:null,q=!!A&&this.mutatedKeys.has(A.key),F=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let b=!1;A&&M?A.data.isEqual(M.data)?q!==F&&(i.track({type:3,doc:M}),b=!0):this.su(A,M)||(i.track({type:2,doc:M}),b=!0,(g&&this.eu(M,g)>0||v&&this.eu(M,v)<0)&&(m=!0)):!A&&M?(i.track({type:0,doc:M}),b=!0):A&&!M&&(i.track({type:1,doc:A}),b=!0,(g||v)&&(m=!0)),b&&(M?(h=h.add(M),l=F?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{tu:h,iu:i,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,S)=>(function(M,q){const F=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:b})}};return F(M)-F(q)})(E.type,S.type)||this.eu(E.doc,S.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,v=g!==this.Za;return this.Za=g,h.length!==0||v?{snapshot:new Lo(this.query,e.tu,l,h,e.mutatedKeys,g===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new by,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new gw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new mw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bf="SyncEngine";class jA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class FA{constructor(e){this.key=e,this.hu=!1}}class UA{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Pi((m=>b_(m)),Ic),this.Iu=new Map,this.Eu=new Set,this.du=new lt(Te.comparator),this.Au=new Map,this.Ru=new xf,this.Vu={},this.mu=new Map,this.fu=Mo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zA(r,e,t=!0){const i=Tw(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await yw(i,e,t,!0),o}async function BA(r,e){const t=Tw(r);await yw(t,e,!0,!1)}async function yw(r,e,t,i){const o=await iA(r.localStore,cr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return i&&(m=await $A(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&uw(r.remoteStore,o),m}async function $A(r,e,t,i,o){r.pu=(S,A,M)=>(async function(F,b,W,D){let Y=b.view.ru(W);Y.Cs&&(Y=await Py(F.localStore,b.query,!1).then((({documents:R})=>b.view.ru(R,Y))));const Q=D&&D.targetChanges.get(b.targetId),he=D&&D.targetMismatches.get(b.targetId)!=null,K=b.view.applyChanges(Y,F.isPrimaryClient,Q,he);return Fy(F,b.targetId,K.au),K.snapshot})(r,S,A,M);const l=await Py(r.localStore,e,!0),h=new LA(e,l.Qs),m=h.ru(l.documents),g=dl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(m,r.isPrimaryClient,g);Fy(r,t,v.au);const E=new jA(e,t,h);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function HA(r,e,t){const i=Ve(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Ic(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Gd(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&bf(i.remoteStore,o.targetId),Yd(i,o.targetId)})).catch(Bo)):(Yd(i,o.targetId),await Gd(i.localStore,o.targetId,!0))}async function qA(r,e){const t=Ve(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),bf(t.remoteStore,i.targetId))}async function WA(r,e,t){const i=ZA(r);try{const o=await(function(h,m){const g=Ve(h),v=nt.now(),E=m.reduce(((M,q)=>M.add(q.key)),Ue());let S,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let q=Wr(),F=Ue();return g.Ns.getEntries(M,E).next((b=>{q=b,q.forEach(((W,D)=>{D.isValidDocument()||(F=F.add(W))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,q))).next((b=>{S=b;const W=[];for(const D of m){const Y=sk(D,S.get(D.key).overlayedDocument);Y!=null&&W.push(new Ni(D.key,Y,C_(Y.value.mapValue),hr.exists(!0)))}return g.mutationQueue.addMutationBatch(M,v,W,m)})).next((b=>{A=b;const W=b.applyToLocalDocumentSet(S,F);return g.documentOverlayCache.saveOverlays(M,b.batchId,W)}))})).then((()=>({batchId:A.batchId,changes:j_(S)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let v=h.Vu[h.currentUser.toKey()];v||(v=new lt(Fe)),v=v.insert(m,g),h.Vu[h.currentUser.toKey()]=v})(i,o.batchId,t),await pl(i,o.changes),await Nc(i.remoteStore)}catch(o){const l=Uf(o,"Failed to persist write");t.reject(l)}}async function vw(r,e){const t=Ve(r);try{const i=await nA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?We(h.hu,14607):o.removedDocuments.size>0&&(We(h.hu,42227),h.hu=!1))})),await pl(t,i,e)}catch(i){await Bo(i)}}function jy(r,e,t){const i=Ve(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Ve(h);g.onlineState=m;let v=!1;g.queries.forEach(((E,S)=>{for(const A of S.Sa)A.va(m)&&(v=!0)})),v&&zf(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GA(r,e,t){const i=Ve(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new lt(Te.comparator);h=h.insert(l,Ht.newNoDocument(l,xe.min()));const m=Ue().add(l),g=new Cc(xe.min(),new Map,new lt(Fe),h,m);await vw(i,g),i.du=i.du.remove(l),i.Au.delete(e),$f(i)}else await Gd(i.localStore,e,!1).then((()=>Yd(i,e,t))).catch(Bo)}async function KA(r,e){const t=Ve(r),i=e.batch.batchId;try{const o=await tA(t.localStore,e);ww(t,i,null),_w(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await pl(t,o)}catch(o){await Bo(o)}}async function QA(r,e,t){const i=Ve(r);try{const o=await(function(h,m){const g=Ve(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return g.mutationQueue.lookupMutationBatch(v,m).next((S=>(We(S!==null,37113),E=S.keys(),g.mutationQueue.removeMutationBatch(v,S)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>g.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);ww(i,e,t),_w(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await pl(i,o)}catch(o){await Bo(o)}}function _w(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function ww(r,e,t){const i=Ve(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Yd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||Ew(r,i)}))}function Ew(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(bf(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),$f(r))}function Fy(r,e,t){for(const i of t)i instanceof mw?(r.Ru.addReference(i.key,e),YA(r,i)):i instanceof gw?(pe(Bf,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||Ew(r,i.key)):Ce(19791,{wu:i})}function YA(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(pe(Bf,"New document in limbo: "+t),r.Eu.add(i),$f(r))}function $f(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Te(Je.fromString(e)),i=r.fu.next();r.Au.set(i,new FA(t)),r.du=r.du.insert(t,i),uw(r.remoteStore,new As(cr(kf(t.path)),i,"TargetPurposeLimboResolution",wc.ce))}}async function pl(r,e,t){const i=Ve(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,g)=>{h.push(i.pu(g,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const S=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(v){o.push(v);const S=Vf.As(g.targetId,v);l.push(S)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,v){const E=Ve(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ee.forEach(v,(A=>ee.forEach(A.Es,(M=>E.persistence.referenceDelegate.addReference(S,A.targetId,M))).next((()=>ee.forEach(A.ds,(M=>E.persistence.referenceDelegate.removeReference(S,A.targetId,M)))))))))}catch(S){if(!$o(S))throw S;pe(Of,"Failed to update sequence numbers: "+S)}for(const S of v){const A=S.targetId;if(!S.fromCache){const M=E.Ms.get(A),q=M.snapshotVersion,F=M.withLastLimboFreeSnapshotVersion(q);E.Ms=E.Ms.insert(A,F)}}})(i.localStore,l))}async function XA(r,e){const t=Ve(r);if(!t.currentUser.isEqual(e)){pe(Bf,"User change. New user:",e.toKey());const i=await iw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new me(Z.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await pl(t,i.Ls)}}function JA(r,e){const t=Ve(r),i=t.Au.get(e);if(i&&i.hu)return Ue().add(i.key);{let o=Ue();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function Tw(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GA.bind(null,e),e.Pu.H_=OA.bind(null,e.eventManager),e.Pu.yu=bA.bind(null,e.eventManager),e}function ZA(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QA.bind(null,e),e}class hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eA(this.persistence,new Xk,e.initialUser,this.serializer)}Cu(e){return new sw(Df.mi,this.serializer)}Du(e){return new aA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hc.provider={build:()=>new hc};class eC extends hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof uc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Mk(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new sw((i=>uc.mi(i,t)),this.serializer)}}class Xd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=XA.bind(null,this.syncEngine),await PA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xA})()}createDatastore(e){const t=Rc(e.databaseInfo.databaseId),i=(function(l){return new dA(l)})(e.databaseInfo);return(function(l,h,m,g){return new gA(l,h,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,m){return new vA(i,o,l,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>jy(this.syncEngine,t,0)),(function(){return Dy.v()?new Dy:new lA})())}createSyncEngine(e,t){return(function(o,l,h,m,g,v,E){const S=new UA(o,l,h,m,g,v);return E&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ve(o);pe(Ci,"RemoteStore shutting down."),l.Ea.add(5),await fl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Xd.provider={build:()=>new Xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="FirestoreClient";class nC{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=_f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{pe(js,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(pe(js,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Uf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Td(r,e){r.asyncQueue.verifyOperationInProgress(),pe(js,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await iw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Uy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await rC(r);pe(js,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Oy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Oy(e.remoteStore,o))),r._onlineComponents=e}async function rC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){pe(js,"Using user provided OfflineComponentProvider");try{await Td(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Do("Error using user provided cache. Falling back to memory cache: "+t),await Td(r,new hc)}}else pe(js,"Using default OfflineComponentProvider"),await Td(r,new eC(void 0));return r._offlineComponents}async function Iw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(pe(js,"Using user provided OnlineComponentProvider"),await Uy(r,r._uninitializedComponentsProvider._online)):(pe(js,"Using default OnlineComponentProvider"),await Uy(r,new Xd))),r._onlineComponents}function sC(r){return Iw(r).then((e=>e.syncEngine))}async function zy(r){const e=await Iw(r),t=e.eventManager;return t.onListen=zA.bind(null,e.syncEngine),t.onUnlisten=HA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=BA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=qA.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firestore.googleapis.com",$y=!0;class Hy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kw,this.ssl=$y}else this.host=e.host,this.ssl=e.ssl??$y;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ok)throw new me(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new me(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new me(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new me(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new lS;switch(i.type){case"firstParty":return new dS(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=By.get(t);i&&(pe("ComponentProvider","Removing Datastore"),By.delete(t),i.terminate())})(this),Promise.resolve()}}function iC(r,e,t,i={}){var v;r=wi(r,xc);const o=jo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(Sv(`https://${m}`),kv("Firestore",!0)),l.host!==kw&&l.host!==m&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:o,emulatorOptions:i};if(!Ii(g,h)&&(r._setSettings(g),i.mockUserToken)){let E,S;if(typeof i.mockUserToken=="string")E=i.mockUserToken,S=$t.MOCK_USER;else{E=D0(i.mockUserToken,(v=r._app)==null?void 0:v.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new me(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new $t(A)}r._authCredentials=new uS(new m_(E,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new qo(this.firestore,e,this._query)}}class Et{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ul(t,Et._jsonSchema))return new Et(e,i||null,new Te(Je.fromString(t.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:wt("string",Et._jsonSchemaVersion),referencePath:wt("string")};class Ds extends qo{constructor(e,t,i){super(e,t,kf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Te(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function Hf(r,e,...t){if(r=Qt(r),g_("collection","path",e),r instanceof xc){const i=Je.fromString(e,...t);return ny(i),new Ds(r,null,i)}{if(!(r instanceof Et||r instanceof Ds))throw new me(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return ny(i),new Ds(r.firestore,null,i)}}function Di(r,e,...t){if(r=Qt(r),arguments.length===1&&(e=_f.newId()),g_("doc","path",e),r instanceof xc){const i=Je.fromString(e,...t);return ty(i),new Et(r,null,new Te(i))}{if(!(r instanceof Et||r instanceof Ds))throw new me(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Je.fromString(e,...t));return ty(i),new Et(r.firestore,r instanceof Ds?r.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="AsyncQueue";class Wy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aw(this,"async_queue_retry"),this._c=()=>{const i=Ed();i&&pe(qy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Ed();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ed();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new _i;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$o(e))throw e;pe(qy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,qr("INTERNAL UNHANDLED ERROR: ",Gy(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Ff.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:Gy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Gy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1})(r,["next","error","complete"])}class el extends xc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Wy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wy(e),this._firestoreClient=void 0,await e}}}function oC(r,e){const t=typeof r=="object"?r:Pv(),i=typeof r=="string"?r:nc,o=af(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=N0("firestore");l&&iC(o,...l)}return o}function Aw(r){if(r._terminated)throw new me(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||aC(r),r._firestoreClient}function aC(r){var i,o,l;const e=r._freezeSettings(),t=(function(m,g,v,E){return new PS(m,g,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Sw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new nC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._byteString=e}static fromBase64String(e){try{return new In(Mt.fromBase64String(e))}catch(t){throw new me(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new In(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:In._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ul(e,In._jsonSchema))return In.fromBase64String(e.bytes)}}In._jsonSchemaVersion="firestore/bytes/1.0",In._jsonSchema={type:wt("string",In._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fr._jsonSchemaVersion}}static fromJSON(e){if(ul(e,fr._jsonSchema))return new fr(e.latitude,e.longitude)}}fr._jsonSchemaVersion="firestore/geoPoint/1.0",fr._jsonSchema={type:wt("string",fr._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ul(e,pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pr(e.vectorValues);throw new me(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pr._jsonSchemaVersion="firestore/vectorValue/1.0",pr._jsonSchema={type:wt("string",pr._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=/^__.*__$/;class uC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new hl(e,this.data,t,this.fieldTransforms)}}function Rw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:r})}}class Wf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return dc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rw(this.Ac)&&lC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Rc(e)}Cc(e,t,i,o=!1){return new Wf({Ac:e,methodName:t,Dc:i,path:bt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pw(r){const e=r._freezeSettings(),t=Rc(r._databaseId);return new cC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function hC(r,e,t,i,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);Dw("Data must be an object, but it was:",h,i);const m=Nw(i,h);let g,v;if(l.merge)g=new On(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const S of l.mergeFields){const A=fC(e,S,t);if(!h.contains(A))throw new me(Z.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);mC(E,A)||E.push(A)}g=new On(E),v=h.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,v=h.fieldTransforms;return new uC(new Tn(m),g,v)}function dC(r,e,t,i=!1){return Gf(t,r.Cc(i?4:3,e))}function Gf(r,e){if(xw(r=Qt(r)))return Dw("Unsupported field value:",e,r),Nw(r,e);if(r instanceof Cw)return(function(i,o){if(!Rw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const m of i){let g=Gf(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return JS(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=nt.fromDate(i);return{timestampValue:lc(o.serializer,l)}}if(i instanceof nt){const l=new nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lc(o.serializer,l)}}if(i instanceof fr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof In)return{bytesValue:Y_(o.serializer,i._byteString)};if(i instanceof Et){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Nf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof pr)return(function(h,m){return{mapValue:{fields:{[k_]:{stringValue:A_},[rc]:{arrayValue:{values:h.toArray().map((v=>{if(typeof v!="number")throw m.Sc("VectorValues must only contain numeric values.");return Af(m.serializer,v)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${_c(i)}`)})(r,e)}function Nw(r,e){const t={};return __(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ri(r,((i,o)=>{const l=Gf(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function xw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof fr||r instanceof In||r instanceof Et||r instanceof Cw||r instanceof pr)}function Dw(r,e,t){if(!xw(t)||!y_(t)){const i=_c(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function fC(r,e,t){if((e=Qt(e))instanceof qf)return e._internalPath;if(typeof e=="string")return Vw(r,e);throw dc("Field path arguments must be of type string or ",r,!1,void 0,t)}const pC=new RegExp("[~\\*/\\[\\]]");function Vw(r,e,t){if(e.search(pC)>=0)throw dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new qf(...e.split("."))._internalPath}catch{throw dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function dc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new me(Z.INVALID_ARGUMENT,m+r+g)}function mC(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class gC extends Ow{data(){return super.data()}}function bw(r,e){return typeof e=="string"?Vw(r,e):e instanceof qf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new me(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kf{}class vC extends Kf{}function Qf(r,e,...t){let i=[];e instanceof Kf&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((g=>g instanceof Xf)).length,m=l.filter((g=>g instanceof Yf)).length;if(h>1||h>0&&m>0)throw new me(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Yf extends vC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Yf(e,t,i)}_apply(e){const t=this._parse(e);return Mw(e._query,t),new qo(e.firestore,e.converter,zd(e._query,t))}_parse(e){const t=Pw(e.firestore);return(function(l,h,m,g,v,E,S){let A;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new me(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Yy(S,E);const q=[];for(const F of S)q.push(Qy(g,l,F));A={arrayValue:{values:q}}}else A=Qy(g,l,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Yy(S,E),A=dC(m,h,S,E==="in"||E==="not-in");return _t.create(v,E,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Xf extends Kf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const m=l.getFlattenedFilters();for(const g of m)Mw(h,g),h=zd(h,g)})(e._query,t),new qo(e.firestore,e.converter,zd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Qy(r,e,t){if(typeof(t=Qt(t))=="string"){if(t==="")throw new me(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O_(e)&&t.indexOf("/")!==-1)throw new me(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!Te.isDocumentKey(i))throw new me(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return cy(r,new Te(i))}if(t instanceof Et)return cy(r,t._key);throw new me(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_c(t)}.`)}function Yy(r,e){if(!Array.isArray(r)||r.length===0)throw new me(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mw(r,e){const t=(function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new me(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _C{convertValue(e,t="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ri(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[rc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>mt(h.doubleValue)));return new pr(t)}convertGeoPoint(e){return new fr(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Tc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Qa(e));default:return null}}convertTimestamp(e){const t=Os(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);We(nw(i),9688,{name:e});const o=new Ya(i.get(1),i.get(3)),l=new Te(i.popFirst(5));return o.isEqual(t)||qr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ei extends Ow{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(bw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ei._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ei._jsonSchema={type:wt("string",Ei._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class Wu extends Ei{data(e={}){return super.data(e)}}class Ro{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ja(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Wu(this._firestore,this._userDataWriter,i.key,i,new ja(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Wu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ja(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new Wu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ja(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:EC(m.type),doc:g,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_f.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function EC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:wt("string",Ro._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class Lw extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}function Dc(r,e,t){r=wi(r,Et);const i=wi(r.firestore,el),o=wC(r.converter,e);return jw(i,[hC(Pw(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,hr.none())])}function Jf(r){return jw(wi(r.firestore,el),[new Cf(r._key,hr.none())])}function Zf(r,...e){var g,v,E;r=Qt(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Ky(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ky(e[i])){const S=e[i];e[i]=(g=S.next)==null?void 0:g.bind(S),e[i+1]=(v=S.error)==null?void 0:v.bind(S),e[i+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,h,m;if(r instanceof Et)h=wi(r.firestore,el),m=kf(r._key.path),l={next:S=>{e[i]&&e[i](TC(h,r,S))},error:e[i+1],complete:e[i+2]};else{const S=wi(r,qo);h=wi(S.firestore,el),m=S._query;const A=new Lw(h);l={next:M=>{e[i]&&e[i](new Ro(h,A,S,M))},error:e[i+1],complete:e[i+2]},yC(r._query)}return(function(A,M,q,F){const b=new tC(F),W=new MA(M,b,q);return A.asyncQueue.enqueueAndForget((async()=>DA(await zy(A),W))),()=>{b.Nu(),A.asyncQueue.enqueueAndForget((async()=>VA(await zy(A),W)))}})(Aw(h),m,o,l)}function jw(r,e){return(function(i,o){const l=new _i;return i.asyncQueue.enqueueAndForget((async()=>WA(await sC(i),o,l))),l.promise})(Aw(r),e)}function TC(r,e,t){const i=t.docs.get(e._key),o=new Lw(r);return new Ei(r,o,e._key,i,new ja(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){zo=o})(Fo),No(new Si("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),m=new el(new cS(i.getProvider("auth-internal")),new fS(h,i.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new me(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ya(v.options.projectId,E)})(h,o),h);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Ns(Xg,Jg,e),Ns(Xg,Jg,"esm2020")})();const IC={apiKey:"AIzaSyD2N3dF2lfgFCU7MTUOfXAmBOiEcjWb4II",authDomain:"movie-search-c7e29.firebaseapp.com",projectId:"movie-search-c7e29",storageBucket:"movie-search-c7e29.firebasestorage.app",messagingSenderId:"360706376856",appId:"1:360706376856:web:7bc9921aaea6a4ef327ced"},Fw=Rv(IC),Id=sS(Fw),ep=oC(Fw),SC=new Ur,Uw=G.createContext(void 0);function kC({children:r}){const[e,t]=G.useState(null),[i,o]=G.useState(!0);G.useEffect(()=>{const m=W1(Id,g=>{t(g),o(!1)});return()=>m()},[]);const l=async()=>{try{await fI(Id,SC)}catch(m){throw console.error("Error signing in with Google:",m),m}},h=async()=>{try{await G1(Id)}catch(m){throw console.error("Error signing out:",m),m}};return _.jsx(Uw.Provider,{value:{user:e,loading:i,signInWithGoogle:l,signOut:h},children:r})}function Vc(){const r=G.useContext(Uw);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),Xy=r=>{const e=CC(r);return e.charAt(0).toUpperCase()+e.slice(1)},zw=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),RC=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=G.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...m},g)=>G.createElement("svg",{ref:g,...PC,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:zw("lucide",o),...!l&&!RC(m)&&{"aria-hidden":"true"},...m},[...h.map(([v,E])=>G.createElement(v,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=(r,e)=>{const t=G.forwardRef(({className:i,...o},l)=>G.createElement(NC,{ref:l,iconNode:e,className:zw(`lucide-${AC(Xy(r))}`,`lucide-${r}`,i),...o}));return t.displayName=Xy(r),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],DC=Ke("bookmark-check",xC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],OC=Ke("calendar",VC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Bw=Ke("check",bC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],LC=Ke("chevron-left",MC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],FC=Ke("chevron-right",jC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zC=Ke("circle-check-big",UC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],$C=Ke("circle-x",BC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],qC=Ke("cloud",HC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],tp=Ke("eye-off",WC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],KC=Ke("eye",GC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],$w=Ke("film",QC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Ti=Ke("heart",YC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],fc=Ke("image-off",XC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Po=Ke("loader-circle",JC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],eR=Ke("log-in",ZC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nR=Ke("log-out",tR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],sR=Ke("map-pin",rR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],oR=Ke("play",iR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Jd=Ke("plus",aR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jy=Ke("refresh-cw",lR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],cR=Ke("rotate-ccw",uR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Zy=Ke("search",hR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],fR=Ke("sliders-horizontal",dR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],tl=Ke("star",pR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],qa=Ke("thumbs-up",mR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],yR=Ke("ticket",gR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Hw=Ke("trash-2",vR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ev=Ke("user",_R);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nl=Ke("x",wR);function ER(){const{language:r,setLanguage:e,t}=yr(),i=o=>{e(o.target.value)};return _.jsx("div",{className:"language-selector",children:_.jsxs("select",{value:r,onChange:i,className:"language-select","aria-label":t("language"),children:[_.jsx("option",{value:"hu",children:""}),_.jsx("option",{value:"en",children:""})]})})}const TR=({syncing:r,onFavoritesClick:e})=>{const{user:t,loading:i,signInWithGoogle:o,signOut:l}=Vc(),{t:h}=yr(),[m,g]=G.useState(!1),v=G.useRef(null);G.useEffect(()=>{const A=M=>{v.current&&!v.current.contains(M.target)&&g(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const E=async()=>{try{await o()}catch(A){console.error("Sign in failed:",A)}},S=async()=>{try{await l(),g(!1)}catch(A){console.error("Sign out failed:",A)}};return i?_.jsx("div",{className:"user-menu__loading",children:_.jsx(ev,{size:18})}):t?_.jsxs("div",{className:"user-menu",ref:v,children:[_.jsxs("button",{className:"user-menu__trigger",onClick:()=>g(!m),"aria-expanded":m,children:[t.photoURL?_.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"user-menu__avatar"}):_.jsx("div",{className:"user-menu__avatar-placeholder",children:_.jsx(ev,{size:16})}),r&&_.jsx("span",{className:"user-menu__sync-indicator",title:h("syncingWatchlist"),children:_.jsx(qC,{size:12})})]}),m&&_.jsxs("div",{className:"user-menu__dropdown",children:[_.jsxs("div",{className:"user-menu__user-info",children:[t.photoURL&&_.jsx("img",{src:t.photoURL,alt:"",className:"user-menu__dropdown-avatar"}),_.jsxs("div",{className:"user-menu__user-details",children:[_.jsx("span",{className:"user-menu__user-name",children:t.displayName}),_.jsx("span",{className:"user-menu__user-email",children:t.email})]})]}),_.jsx("div",{className:"user-menu__divider"}),_.jsxs("button",{className:"user-menu__option",onClick:()=>{e==null||e(),g(!1)},children:[_.jsx(Ti,{size:16}),_.jsx("span",{children:h("favorites")})]}),_.jsxs("button",{className:"user-menu__option",onClick:S,children:[_.jsx(nR,{size:16}),_.jsx("span",{children:h("signOut")})]})]})]}):_.jsxs("button",{className:"user-menu__sign-in",onClick:E,children:[_.jsx(eR,{size:16}),_.jsx("span",{className:"user-menu__sign-in-text",children:h("signIn")})]})},IR=({onSearch:r,mediaType:e,browseMode:t,onMediaTypeChange:i,onTheatersClick:o,onWatchlistClick:l,watchlistCount:h,syncing:m,onFavoritesClick:g,favoritesCount:v=0,showFilters:E,onFiltersToggle:S})=>{const[A,M]=G.useState(""),[q,F]=G.useState(!1),{t:b}=yr(),W=Q=>{Q.preventDefault(),r(A)},D=()=>{M(""),r(""),F(!1)},Y=()=>{F(!q)};return _.jsx("header",{className:"header",children:_.jsxs("div",{className:"header__content",children:[_.jsxs("div",{className:"header__brand",children:[_.jsx($w,{size:24}),_.jsx("span",{className:"header__title",children:b("appTitle")})]}),_.jsxs("div",{className:"header__media-toggle","data-active":t==="theaters"?"theaters":e==="tv"?"tv":"movie",children:[_.jsx("div",{className:"header__media-slider"}),_.jsx("button",{className:`header__media-btn ${e==="movie"&&t!=="theaters"?"active":""}`,onClick:()=>i("movie"),children:b("movies")}),_.jsx("button",{className:`header__media-btn ${e==="tv"?"active":""}`,onClick:()=>i("tv"),children:b("tvShows")}),_.jsx("button",{className:`header__media-btn ${t==="theaters"?"active":""}`,onClick:o,children:b("theaters")})]}),_.jsx("button",{className:"header__search-toggle",onClick:Y,"aria-label":b("searchMoviePlaceholder"),children:_.jsx(Zy,{size:18})}),S&&_.jsx("button",{className:`header__filter-toggle ${E?"active":""}`,onClick:S,"aria-label":b("showFilters"),children:_.jsx(fR,{size:18})}),_.jsx("form",{className:`header__search ${q?"mobile-open":""}`,onSubmit:W,children:_.jsxs("div",{className:"header__search-wrapper",children:[_.jsx(Zy,{size:16,className:"header__search-icon"}),_.jsx("input",{type:"text",placeholder:b(e==="tv"?"searchTvPlaceholder":"searchMoviePlaceholder"),value:A,onChange:Q=>M(Q.target.value),className:"header__search-input",autoFocus:q}),(A||q)&&_.jsx("button",{type:"button",className:"header__search-clear",onClick:D,children:_.jsx(nl,{size:14})})]})}),_.jsxs("button",{className:"header__watchlist-btn",onClick:l,children:[_.jsx(DC,{size:18}),_.jsx("span",{className:"header__watchlist-text",children:b("watchlist")}),h>0&&_.jsx("span",{className:"header__watchlist-count",children:h})]}),g&&_.jsxs("button",{className:"header__favorites-btn",onClick:g,children:[_.jsx(Ti,{size:18}),_.jsx("span",{className:"header__favorites-text",children:b("favorites")}),v>0&&_.jsx("span",{className:"header__favorites-count",children:v})]}),_.jsxs("div",{className:"header__actions",children:[_.jsx(ER,{}),_.jsx(TR,{syncing:m,onFavoritesClick:g})]})]})})},SR="a9b57b24fd99c4b6ad86f746a0f985e6",kR="https://api.themoviedb.org/3",AR="https://image.tmdb.org/t/p",bn={poster:{small:"w185",medium:"w342",large:"w500"},logo:{small:"w45",medium:"w92"}},lr=(r,e=bn.poster.medium)=>r?`${AR}/${e}${r}`:"/placeholder-movie.svg",jn="HU",CR="hu-HU",tv=new Date().getFullYear(),nv=Array.from({length:tv-1989},(r,e)=>tv-e),RR=({genres:r,providers:e,certifications:t,selectedGenres:i,selectedProviders:o,selectedCertification:l,sortBy:h,minRating:m=0,yearFrom:g,yearTo:v,browseMode:E="streaming",availableCities:S=[],availableDates:A=[],selectedCity:M="",selectedDate:q="",onCityChange:F,onDateChange:b,onGenreChange:W,onProviderChange:D,onCertificationChange:Y,onSortChange:Q,onRatingChange:he,onYearFromChange:K,onYearToChange:R,onBrowseModeChange:k,onClearFilters:P,onResetProviders:V,onClearProviders:x,mediaType:j,isCollapsed:T=!1,onToggleCollapse:Ee})=>{const{t:ie}=yr(),Oe=X=>{const Ae=new Date(X),Me=new Date;Me.setHours(0,0,0,0);const dt=new Date(Me);return dt.setDate(dt.getDate()+1),Ae.toDateString()===Me.toDateString()?ie("today"):Ae.toDateString()===dt.toDateString()?ie("tomorrow"):Ae.toLocaleDateString("hu-HU",{weekday:"short",month:"short",day:"numeric"})},Re=[{value:"popularity.desc",label:ie("sortMostPopular")},{value:"vote_average.desc",label:ie("sortBestRated")},{value:"primary_release_date.desc",label:ie("sortNewest")},{value:"title.asc",label:ie("sortTitleAZ")}],oe=[{value:"popularity.desc",label:ie("sortMostPopular")},{value:"vote_average.desc",label:ie("sortBestRated")},{value:"first_air_date.desc",label:ie("sortNewest")},{value:"name.asc",label:ie("sortTitleAZ")}],ye=[{value:0,label:ie("ratingAny")},{value:6,label:"6+ "},{value:7,label:"7+ "},{value:8,label:"8+ "},{value:9,label:"9+ "}],ce={KN:ie("certKN"),6:ie("cert6"),12:ie("cert12"),16:ie("cert16"),18:ie("cert18"),G:ie("certG"),PG:ie("certPG"),"PG-13":ie("certPG13"),R:ie("certR"),"NC-17":ie("certNC17")},L=X=>{i.includes(X)?W(i.filter(Ae=>Ae!==X)):W([...i,X])},J=X=>{o.includes(X)?D(o.filter(Ae=>Ae!==X)):D([...o,X])},ke=i.length>0||o.length>0||l!==""||m>0||g!==void 0||v!==void 0||M!==""||q!==""||E!=="streaming",te=j==="movie"?[{value:"streaming",label:ie("browseStreaming")},{value:"trending",label:ie("browseTrending")},{value:"top_rated",label:ie("browseTopRated")},{value:"theaters",label:ie("browseTheaters")},{value:"upcoming",label:ie("browseUpcoming")},{value:"forYou",label:ie("forYou")}]:[{value:"streaming",label:ie("browseStreaming")},{value:"trending",label:ie("browseTrending")},{value:"top_rated",label:ie("browseTopRated")},{value:"forYou",label:ie("forYou")}],ue=j==="tv"?oe:Re,fe=i.length+o.length+(l?1:0)+(m>0?1:0)+(g?1:0)+(v?1:0)+(M?1:0)+(q?1:0);return _.jsxs("aside",{className:`filter-panel ${T?"collapsed":""}`,children:[Ee&&_.jsxs("button",{className:"filter-panel__toggle",onClick:Ee,title:ie(T?"showFilters":"hideFilters"),children:[T?_.jsx(FC,{size:20}):_.jsx(LC,{size:20}),T&&fe>0&&_.jsx("span",{className:"filter-panel__badge",children:fe})]}),_.jsxs("div",{className:"filter-panel__content",children:[_.jsxs("div",{className:"filter-panel__header",children:[_.jsx("h2",{children:ie("filters")}),ke&&_.jsx("button",{className:"filter-panel__clear",onClick:P,children:ie("clearFilters")})]}),k&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:ie("browseMode")}),_.jsx("div",{className:"filter-chips",children:te.map(X=>_.jsx("button",{className:`filter-chip ${E===X.value?"active":""}`,onClick:()=>k(X.value),children:X.label},X.value))})]}),(E==="streaming"||E==="theaters"||E==="forYou")&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:ie("sortBy")}),_.jsx("select",{value:h,onChange:X=>Q(X.target.value),className:"filter-select",children:ue.map(X=>_.jsx("option",{value:X.value,children:X.label},X.value))})]}),E==="theaters"&&S.length>0&&F&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:ie("city")}),_.jsxs("select",{value:M,onChange:X=>F(X.target.value),className:"filter-select",children:[_.jsx("option",{value:"",children:ie("allCities")}),S.map(X=>_.jsx("option",{value:X,children:X},X))]})]}),E==="theaters"&&A.length>0&&b&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:ie("date")}),_.jsxs("div",{className:"filter-chips filter-chips--dates",children:[_.jsx("button",{className:`filter-chip ${q===""?"active":""}`,onClick:()=>b(""),children:ie("allDates")}),A.map(X=>_.jsx("button",{className:`filter-chip ${q===X?"active":""}`,onClick:()=>b(X),children:Oe(X)},X))]})]}),(E==="streaming"||E==="theaters"||E==="forYou")&&he&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:ie("minimumRating")}),_.jsx("div",{className:"filter-chips",children:ye.map(X=>_.jsx("button",{className:`filter-chip ${m===X.value?"active":""}`,onClick:()=>he(X.value),children:X.label},X.value))})]}),(E==="streaming"||E==="theaters"||E==="forYou")&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:ie("categories")}),_.jsx("div",{className:"filter-chips",children:r.map(X=>_.jsx("button",{className:`filter-chip ${i.includes(X.id)?"active":""}`,onClick:()=>L(X.id),children:X.name},X.id))})]}),(E==="streaming"||E==="forYou")&&_.jsxs(_.Fragment,{children:[(K||R)&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:ie("releaseYear")}),_.jsxs("div",{className:"filter-year-range",children:[_.jsxs("select",{value:g||"",onChange:X=>K==null?void 0:K(X.target.value?parseInt(X.target.value):void 0),className:"filter-select filter-select--small",children:[_.jsx("option",{value:"",children:ie("yearFrom")}),nv.map(X=>_.jsx("option",{value:X,children:X},X))]}),_.jsx("span",{className:"filter-year-separator",children:"-"}),_.jsxs("select",{value:v||"",onChange:X=>R==null?void 0:R(X.target.value?parseInt(X.target.value):void 0),className:"filter-select filter-select--small",children:[_.jsx("option",{value:"",children:ie("yearTo")}),nv.map(X=>_.jsx("option",{value:X,children:X},X))]})]})]}),j==="movie"&&_.jsxs("section",{className:"filter-section",children:[_.jsx("h3",{children:ie("ageRating")}),_.jsxs("div",{className:"filter-chips",children:[_.jsx("button",{className:`filter-chip ${l===""?"active":""}`,onClick:()=>Y(""),children:ie("all")}),t.map(X=>_.jsx("button",{className:`filter-chip ${l===X.certification?"active":""}`,onClick:()=>Y(X.certification),title:ce[X.certification]||X.meaning,children:X.certification},X.certification))]})]}),E==="streaming"&&_.jsxs("section",{className:"filter-section",children:[_.jsxs("div",{className:"filter-section__header",children:[_.jsx("h3",{children:ie("streamingProviders")}),(V||x)&&_.jsx("div",{className:"filter-provider-actions",children:o.length===0?_.jsx("button",{className:"filter-provider-toggle",onClick:V,title:ie("resetProviders"),children:ie("resetProviders")}):_.jsx("button",{className:"filter-provider-toggle",onClick:x,title:ie("showAllMovies"),children:ie("showAllMovies")})})]}),o.length===0&&_.jsx("p",{className:"filter-provider-info",children:ie("showingAllMovies")}),_.jsx("div",{className:"filter-providers",children:e.map(X=>_.jsx("button",{className:`filter-provider ${o.includes(X.provider_id)?"active":""}`,onClick:()=>J(X.provider_id),title:X.provider_name,children:_.jsx("img",{src:lr(X.logo_path,bn.logo.medium),alt:X.provider_name})},X.provider_id))})]})]})]})]})},pc=(r,e)=>`${e}_${r}`,np=r=>Hf(ep,"users",r,"favorites"),Zd=async(r,e)=>{const t=Di(np(r),pc(e.id,e.mediaType));await Dc(t,e)},Sd=async(r,e,t)=>{const i=Di(np(r),pc(e,t));await Jf(i)},PR=(r,e,t)=>{const i=Qf(np(r));return Zf(i,o=>{const l=[];o.forEach(h=>{l.push(h.data())}),l.sort((h,m)=>new Date(m.addedAt).getTime()-new Date(h.addedAt).getTime()),e(l)},o=>{console.error("Firestore favorites subscription error:",o),t==null||t(o)})},NR=(r,e)=>{const t=new Map;return e.forEach(i=>{t.set(pc(i.id,i.mediaType),i)}),r.forEach(i=>{const o=pc(i.id,i.mediaType),l=t.get(o);l?t.set(o,{...l,liked:l.liked||i.liked,loved:l.loved||i.loved}):t.set(o,i)}),Array.from(t.values()).sort((i,o)=>new Date(o.addedAt).getTime()-new Date(i.addedAt).getTime())},xR=async(r,e)=>{const t=e.map(i=>Zd(r,i));await Promise.all(t)},qw="movie-search-favorites",rv=r=>"title"in r,sv=()=>{if(typeof window>"u")return[];const r=localStorage.getItem(qw);if(r)try{return JSON.parse(r)}catch(e){console.error("Failed to parse favorites:",e)}return[]},Vu=r=>{localStorage.setItem(qw,JSON.stringify(r))},Oc=()=>{const{user:r}=Vc(),[e,t]=G.useState([]),[i,o]=G.useState(!0),[l,h]=G.useState(!1),m=G.useRef(!1),g=G.useRef(null);G.useEffect(()=>{const F=sv();t(F),o(!1)},[]),G.useEffect(()=>{if(!r){g.current=null,m.current=!1;return}g.current!==r.uid&&(g.current=r.uid,m.current=!1),h(!0);const F=PR(r.uid,async b=>{if(m.current)t(b),Vu(b);else{m.current=!0;const W=sv();if(W.length>0){const D=NR(W,b);t(D),Vu(D);const Y=W.filter(Q=>!b.some(he=>he.id===Q.id&&he.mediaType===Q.mediaType));if(Y.length>0)try{await xR(r.uid,Y)}catch(Q){console.error("Failed to sync local favorites to cloud:",Q)}}else t(b),Vu(b)}h(!1)},b=>{console.error("Favorites subscription error:",b),h(!1)});return()=>F()},[r]),G.useEffect(()=>{!i&&!l&&Vu(e)},[e,i,l]);const v=G.useCallback((F,b)=>{const W=e.find(Q=>Q.id===F.id&&Q.mediaType===b);if(W)return W;const D=rv(F)?F.title:F.name,Y=rv(F)?F.release_date:F.first_air_date;return{id:F.id,mediaType:b,title:D,posterPath:F.poster_path,releaseDate:Y,voteAverage:F.vote_average,addedAt:new Date().toISOString(),liked:!1,loved:!1}},[e]),E=G.useCallback(async(F,b)=>{const W=v(F,b),D=!W.liked;if(!D&&!W.loved){if(t(Q=>Q.filter(he=>!(he.id===F.id&&he.mediaType===b))),r)try{await Sd(r.uid,F.id,b)}catch(Q){console.error("Failed to remove favorite from cloud:",Q)}return}const Y={...W,liked:D};if(t(Q=>Q.some(K=>K.id===F.id&&K.mediaType===b)?Q.map(K=>K.id===F.id&&K.mediaType===b?Y:K):[Y,...Q]),r)try{await Zd(r.uid,Y)}catch(Q){console.error("Failed to update favorite in cloud:",Q)}},[r,v]),S=G.useCallback(async(F,b)=>{const W=v(F,b),D=!W.loved;if(!D&&!W.liked){if(t(Q=>Q.filter(he=>!(he.id===F.id&&he.mediaType===b))),r)try{await Sd(r.uid,F.id,b)}catch(Q){console.error("Failed to remove favorite from cloud:",Q)}return}const Y={...W,loved:D};if(t(Q=>Q.some(K=>K.id===F.id&&K.mediaType===b)?Q.map(K=>K.id===F.id&&K.mediaType===b?Y:K):[Y,...Q]),r)try{await Zd(r.uid,Y)}catch(Q){console.error("Failed to update favorite in cloud:",Q)}},[r,v]),A=G.useCallback(async(F,b)=>{if(t(W=>W.filter(D=>!(D.id===F&&D.mediaType===b))),r)try{await Sd(r.uid,F,b)}catch(W){console.error("Failed to remove favorite from cloud:",W)}},[r]),M=G.useCallback((F,b)=>{const W=e.find(D=>D.id===F&&D.mediaType===b);return(W==null?void 0:W.liked)??!1},[e]),q=G.useCallback((F,b)=>{const W=e.find(D=>D.id===F&&D.mediaType===b);return(W==null?void 0:W.loved)??!1},[e]);return{items:e,loading:i,syncing:l,toggleLike:E,toggleLove:S,isLiked:M,isLoved:q,removeFavorite:A}},iv=r=>"title"in r,DR=({item:r,onClick:e,mediaType:t})=>{const{t:i}=yr(),{toggleLike:o,toggleLove:l,isLiked:h,isLoved:m}=Oc(),g=iv(r)?r.title:r.name,v=iv(r)?r.release_date:r.first_air_date,E=v?new Date(v).getFullYear():"N/A",S=r.vote_average?r.vote_average.toFixed(1):"N/A",A=h(r.id,t),M=m(r.id,t),q=b=>{b.stopPropagation(),o(r,t)},F=b=>{b.stopPropagation(),l(r,t)};return _.jsxs("article",{className:"movie-card",onClick:()=>e==null?void 0:e(r),children:[_.jsxs("div",{className:"movie-card__poster",children:[_.jsx("img",{src:lr(r.poster_path,bn.poster.medium),alt:g,loading:"lazy"}),_.jsxs("div",{className:"movie-card__rating",children:[_.jsx(tl,{size:14,fill:"currentColor"}),S]}),t==="tv"&&_.jsx("div",{className:"movie-card__badge",children:i("tvShow")}),_.jsxs("div",{className:"movie-card__favorites",children:[_.jsx("button",{className:`movie-card__fav-btn movie-card__like ${A?"active":""}`,onClick:q,title:i("like"),children:_.jsx(qa,{size:14,fill:A?"currentColor":"none"})}),_.jsx("button",{className:`movie-card__fav-btn movie-card__love ${M?"active":""}`,onClick:F,title:i("love"),children:_.jsx(Ti,{size:14,fill:M?"currentColor":"none"})})]})]}),_.jsxs("div",{className:"movie-card__info",children:[_.jsx("h3",{className:"movie-card__title",children:g}),_.jsx("p",{className:"movie-card__year",children:E})]})]})},VR=()=>_.jsxs("article",{className:"skeleton-card",children:[_.jsx("div",{className:"skeleton-card__poster",children:_.jsx("div",{className:"skeleton-shimmer"})}),_.jsxs("div",{className:"skeleton-card__info",children:[_.jsx("div",{className:"skeleton-card__title",children:_.jsx("div",{className:"skeleton-shimmer"})}),_.jsx("div",{className:"skeleton-card__year",children:_.jsx("div",{className:"skeleton-shimmer"})})]})]}),OR=12,ov=({items:r,loading:e,onItemClick:t,onLoadMore:i,hasMore:o,mediaType:l,onHideItem:h})=>{const{t:m}=yr();return e&&r.length===0?_.jsx("div",{className:"movie-grid-container",children:_.jsx("div",{className:"movie-grid",children:Array.from({length:OR}).map((g,v)=>_.jsx(VR,{},v))})}):!e&&r.length===0?_.jsxs("div",{className:"movie-grid__empty",children:[_.jsx("p",{children:m(l==="tv"?"noTvShowsFound":"noMoviesFound")}),_.jsx("p",{children:m("tryDifferentFilters")})]}):_.jsxs("div",{className:"movie-grid-container",children:[_.jsx("div",{className:"movie-grid",children:r.map(g=>_.jsxs("div",{className:"movie-grid__item-wrapper",children:[_.jsx(DR,{item:g,onClick:t,mediaType:l}),h&&_.jsx("button",{className:"movie-grid__hide-btn",onClick:v=>{v.stopPropagation(),h(g)},title:m("hideRecommendation"),children:_.jsx(tp,{size:14})})]},g.id))}),e&&_.jsxs("div",{className:"movie-grid__loading",children:[_.jsx("div",{className:"spinner"}),_.jsx("p",{children:m(l==="tv"?"loadingTvShows":"loadingMovies")})]}),!e&&o&&_.jsx("button",{className:"movie-grid__load-more",onClick:i,children:m(l==="tv"?"loadMoreTvShows":"loadMoreMovies")})]})},rt=async(r,e={})=>{const t=new URLSearchParams({api_key:SR,language:CR,...e}),i=await fetch(`${kR}${r}?${t}`);if(!i.ok)throw new Error(`TMDB API error: ${i.status}`);return i.json()},bR=async()=>(await rt("/genre/movie/list")).genres,MR=async()=>(await rt("/watch/providers/movie",{watch_region:jn})).results,LR=async()=>{const r=await rt("/certification/movie/list");return r.certifications.HU||r.certifications.US||[]},jR=async(r=1,e={})=>{const t={page:r.toString(),region:jn,sort_by:e.sortBy||"popularity.desc"};return e.providers&&e.providers.length>0&&(t.watch_region=jn,t.with_watch_monetization_types="flatrate",t.with_watch_providers=e.providers.join("|")),e.genres&&e.genres.length>0&&(t.with_genres=e.genres.join(",")),e.certification&&(t.certification_country="HU",t.certification=e.certification),e.minRating&&e.minRating>0&&(t["vote_average.gte"]=e.minRating.toString(),t["vote_count.gte"]="50"),e.yearFrom&&(t["primary_release_date.gte"]=`${e.yearFrom}-01-01`),e.yearTo&&(t["primary_release_date.lte"]=`${e.yearTo}-12-31`),rt("/discover/movie",t)},FR=async r=>rt(`/movie/${r}`),ef=async r=>{const e=await rt(`/movie/${r}/watch/providers`);return e.results[jn]||e.results.US||null},Ww=async(r,e=1)=>rt("/search/movie",{query:r,page:e.toString(),include_adult:"false"}),Gw=async(r,e=1)=>rt("/search/tv",{query:r,page:e.toString(),include_adult:"false"}),UR=async()=>(await rt("/genre/tv/list")).genres,zR=async()=>(await rt("/watch/providers/tv",{watch_region:jn})).results,BR=async(r=1,e={})=>{const t={page:r.toString(),sort_by:e.sortBy||"popularity.desc"};return e.providers&&e.providers.length>0&&(t.watch_region=jn,t.with_watch_monetization_types="flatrate",t.with_watch_providers=e.providers.join("|")),e.genres&&e.genres.length>0&&(t.with_genres=e.genres.join(",")),e.minRating&&e.minRating>0&&(t["vote_average.gte"]=e.minRating.toString(),t["vote_count.gte"]="50"),e.yearFrom&&(t["first_air_date.gte"]=`${e.yearFrom}-01-01`),e.yearTo&&(t["first_air_date.lte"]=`${e.yearTo}-12-31`),rt("/discover/tv",t)},$R=async r=>rt(`/tv/${r}`),tf=async r=>{const e=await rt(`/tv/${r}/watch/providers`);return e.results[jn]||e.results.US||null},HR=async r=>{const e=await rt(`/movie/${r}/videos`,{language:"hu-HU"});return e.results.length===0?(await rt(`/movie/${r}/videos`,{language:"en-US"})).results:e.results},qR=async r=>{const e=await rt(`/tv/${r}/videos`,{language:"hu-HU"});return e.results.length===0?(await rt(`/tv/${r}/videos`,{language:"en-US"})).results:e.results},av=async(r,e)=>r==="movie"?HR(e):qR(e),lv=r=>{const e=r.filter(o=>o.site==="YouTube"&&(o.type==="Trailer"||o.type==="Teaser")),t=e.find(o=>o.official);if(t)return t;if(e.length>0)return e[0];const i=r.filter(o=>o.site==="YouTube");return i.length>0?i[0]:null},WR=async(r="week")=>rt(`/trending/movie/${r}`,{region:jn}),GR=async(r="week")=>rt(`/trending/tv/${r}`),KR=async(r=1)=>rt("/movie/upcoming",{page:r.toString(),region:jn}),QR=async(r=1)=>rt("/movie/top_rated",{page:r.toString(),region:jn}),YR=async(r=1)=>rt("/tv/top_rated",{page:r.toString()}),uv=async(r=1)=>rt("/movie/now_playing",{page:r.toString(),region:jn});let Ou=null;const bc=async()=>{if(Ou)return Ou;try{const e=await fetch("/movie-search/data/cinema.json");return e.ok?(Ou=await e.json(),Ou):(console.warn("Hungarian cinema data not available"),null)}catch(r){return console.error("Error loading Hungarian cinema data:",r),null}},XR=async r=>{try{const e=await bc();if(!e)return console.warn("Hungarian cinema data not available, falling back to TMDB"),uv(1);let t=e.movies;if(r!=null&&r.city&&(t=t.filter(i=>i.cities.includes(r.city))),r!=null&&r.date&&(t=t.filter(i=>i.dates.includes(r.date))),r!=null&&r.genres&&r.genres.length>0&&(t=t.filter(i=>r.genres.some(o=>i.genre_ids.includes(o)))),r!=null&&r.minRating&&r.minRating>0&&(t=t.filter(i=>i.vote_average>=r.minRating)),r!=null&&r.sortBy)switch(r.sortBy){case"vote_average.desc":t.sort((i,o)=>o.vote_average-i.vote_average);break;case"primary_release_date.desc":t.sort((i,o)=>new Date(o.release_date).getTime()-new Date(i.release_date).getTime());break;case"title.asc":t.sort((i,o)=>i.title.localeCompare(o.title));break;case"screenings.desc":t.sort((i,o)=>o.screeningCount-i.screeningCount);break;default:t.sort((i,o)=>o.screeningCount-i.screeningCount)}return{page:1,results:t,total_pages:1,total_results:t.length}}catch(e){return console.error("Error loading Hungarian cinema data:",e),uv(1)}},JR=async(r,e=1)=>rt(`/movie/${r}/recommendations`,{page:e.toString()}),ZR=async(r,e=1)=>rt(`/tv/${r}/recommendations`,{page:e.toString()}),Cs=[1899,8,119,337,1773,2],nf=Cs,eP=(r="movie")=>{const[e,t]=G.useState([]),[i,o]=G.useState([]),[l,h]=G.useState([]),[m,g]=G.useState(!0),[v,E]=G.useState(null);return G.useEffect(()=>{(async()=>{g(!0),E(null);try{const[A,M,q]=await Promise.all([r==="tv"?UR():bR(),r==="tv"?zR():MR(),LR()]);t(A);const F=M.sort((b,W)=>{const D=Cs.includes(b.provider_id),Y=Cs.includes(W.provider_id);return D&&!Y?-1:!D&&Y?1:D&&Y?Cs.indexOf(b.provider_id)-Cs.indexOf(W.provider_id):(b.display_priority||999)-(W.display_priority||999)});o(F),h(q)}catch(A){E(A instanceof Error?A.message:"Hiba trtnt a szrk betltsekor")}finally{g(!1)}})()},[r]),{genres:e,providers:i,certifications:l,loading:m,error:v}},rl=(r,e)=>`${e}_${r}`,Mc=r=>Hf(ep,"users",r,"watchlist"),Kw=async(r,e)=>{const t=Di(Mc(r),rl(e.id,e.mediaType));await Dc(t,e)},tP=async(r,e,t)=>{const i=Di(Mc(r),rl(e,t));await Jf(i)},kd=async(r,e)=>{const t=Di(Mc(r),rl(e.id,e.mediaType));await Dc(t,e)},nP=(r,e,t)=>{const i=Qf(Mc(r));return Zf(i,o=>{const l=[];o.forEach(h=>{l.push(h.data())}),l.sort((h,m)=>new Date(m.addedAt).getTime()-new Date(h.addedAt).getTime()),e(l)},o=>{console.error("Firestore subscription error:",o),t==null||t(o)})},rP=(r,e)=>{const t=new Map;return e.forEach(i=>{t.set(rl(i.id,i.mediaType),i)}),r.forEach(i=>{const o=rl(i.id,i.mediaType),l=t.get(o);l?new Date(i.addedAt)>new Date(l.addedAt)&&t.set(o,{...i,watched:l.watched||i.watched}):t.set(o,i)}),Array.from(t.values()).sort((i,o)=>new Date(o.addedAt).getTime()-new Date(i.addedAt).getTime())},sP=async(r,e)=>{const t=e.map(i=>Kw(r,i));await Promise.all(t)},Qw="movie-search-watchlist",cv=r=>"title"in r,hv=()=>{if(typeof window>"u")return[];const r=localStorage.getItem(Qw);if(r)try{return JSON.parse(r)}catch(e){console.error("Failed to parse watchlist:",e)}return[]},bu=r=>{localStorage.setItem(Qw,JSON.stringify(r))},rp=()=>{const{user:r}=Vc(),[e,t]=G.useState([]),[i,o]=G.useState(!0),[l,h]=G.useState(!1),[m,g]=G.useState(null),v=G.useRef(!1),E=G.useRef(null);G.useEffect(()=>{const W=hv();t(W),o(!1)},[]),G.useEffect(()=>{if(!r){E.current=null,v.current=!1;return}E.current!==r.uid&&(E.current=r.uid,v.current=!1),h(!0);const W=nP(r.uid,async D=>{if(v.current)t(D),bu(D);else{v.current=!0;const Y=hv();if(Y.length>0){const Q=rP(Y,D);t(Q),bu(Q);const he=Y.filter(K=>!D.some(R=>R.id===K.id&&R.mediaType===K.mediaType));if(he.length>0)try{await sP(r.uid,he)}catch(K){console.error("Failed to sync local items to cloud:",K)}}else t(D),bu(D)}h(!1)},D=>{console.error("Watchlist subscription error:",D),h(!1)});return()=>W()},[r]),G.useEffect(()=>{!i&&!l&&bu(e)},[e,i,l]);const S=G.useCallback(async(W,D)=>{const Y=cv(W)?W.title:W.name,Q=cv(W)?W.release_date:W.first_air_date,he={id:W.id,mediaType:D,title:Y,posterPath:W.poster_path,releaseDate:Q,voteAverage:W.vote_average,addedAt:new Date().toISOString(),watched:!1};if(t(K=>K.some(R=>R.id===W.id&&R.mediaType===D)?K:[he,...K]),r)try{await Kw(r.uid,he)}catch(K){console.error("Failed to add item to cloud:",K)}},[r]),A=G.useCallback(async(W,D)=>{if(t(Y=>Y.filter(Q=>!(Q.id===W&&Q.mediaType===D))),r)try{await tP(r.uid,W,D)}catch(Y){console.error("Failed to remove item from cloud:",Y)}},[r]),M=G.useCallback(async(W,D)=>{let Y=null;if(t(Q=>Q.map(he=>he.id===W&&he.mediaType===D?(Y={...he,watched:!he.watched},Y):he)),r&&Y)try{await kd(r.uid,Y)}catch(Q){console.error("Failed to update item in cloud:",Q)}},[r]),q=G.useCallback((W,D)=>e.some(Y=>Y.id===W&&Y.mediaType===D),[e]),F=G.useCallback(async()=>{if(e.filter(Y=>Y.availability===void 0).length===0)return;o(!0);const D=await Promise.all(e.map(async Y=>{if(Y.availability!==void 0)return Y;try{const Q=Y.mediaType==="movie"?await ef(Y.id):await tf(Y.id),K=[...(Q==null?void 0:Q.flatrate)||[],...(Q==null?void 0:Q.rent)||[],...(Q==null?void 0:Q.buy)||[]].some(k=>nf.includes(k.provider_id)),R={...Y,availability:Q,isAvailable:K,lastChecked:new Date().toISOString()};if(r)try{await kd(r.uid,R)}catch(k){console.error("Failed to update availability in cloud:",k)}return R}catch(Q){return console.error(`Failed to check availability for ${Y.title}:`,Q),Y}}));t(D),o(!1)},[e,r]),b=G.useCallback(async(W,D)=>{g(W);try{const Y=D==="movie"?await ef(W):await tf(W),he=[...(Y==null?void 0:Y.flatrate)||[],...(Y==null?void 0:Y.rent)||[],...(Y==null?void 0:Y.buy)||[]].some(R=>nf.includes(R.provider_id));let K=null;if(t(R=>R.map(k=>k.id===W&&k.mediaType===D?(K={...k,availability:Y,isAvailable:he,lastChecked:new Date().toISOString()},K):k)),r&&K)try{await kd(r.uid,K)}catch(R){console.error("Failed to update availability in cloud:",R)}}catch(Y){console.error(`Failed to refresh availability for item ${W}:`,Y)}finally{g(null)}},[r]);return{items:e,loading:i,syncing:l,refreshingId:m,addItem:S,removeItem:A,toggleWatched:M,isInWatchlist:q,checkAvailability:F,refreshItemAvailability:b}},Ad=(r,e,t)=>{const i=encodeURIComponent(t),o={8:`https://www.netflix.com/search?q=${i}`,9:`https://www.amazon.com/s?k=${i}&i=instant-video`,119:`https://www.amazon.com/s?k=${i}&i=instant-video`,337:"https://www.disneyplus.com/hu-hu/browse/search",384:`https://play.hbomax.com/search/result?q=${i}`,1899:`https://play.hbomax.com/search/result?q=${i}`,350:`https://tv.apple.com/search?term=${i}`,2:`https://tv.apple.com/search?term=${i}`,15:`https://www.hulu.com/search?q=${i}`,531:`https://www.paramountplus.com/search/?q=${i}`,386:`https://www.peacocktv.com/search?q=${i}`,283:`https://www.crunchyroll.com/search?q=${i}`,188:`https://www.youtube.com/results?search_query=${i}`,3:`https://play.google.com/store/search?q=${i}&c=movies`,7:`https://www.vudu.com/content/movies/search?searchString=${i}`,68:`https://www.microsoft.com/en-us/search/shop/movies-tv?q=${i}`,1773:`https://www.skyshowtime.com/search?q=${i}`};return o[r]?o[r]:`https://www.google.com/search?q=${encodeURIComponent(e+" "+t)}`},dv=r=>"title"in r,iP=r=>"runtime"in r,oP=({item:r,mediaType:e,browseMode:t,initialCity:i,basedOn:o,onClose:l})=>{const[h,m]=G.useState(null),[g,v]=G.useState(null),[E,S]=G.useState(null),[A,M]=G.useState(!1),[q,F]=G.useState(!0),[b,W]=G.useState(null),[D,Y]=G.useState(""),[Q,he]=G.useState(""),{t:K}=yr(),{addItem:R,removeItem:k,isInWatchlist:P}=rp(),{toggleLike:V,toggleLove:x,isLiked:j,isLoved:T}=Oc(),Ee=P(r.id,e),ie=j(r.id,e),Oe=T(r.id,e),Re=dv(r)?r.title:r.name,oe=dv(r)?r.release_date:r.first_air_date,ye=oe?new Date(oe).getFullYear():"N/A";G.useEffect(()=>{(async()=>{F(!0);try{if(e==="tv"){const[ue,fe,X]=await Promise.all([$R(r.id),tf(r.id),av("tv",r.id)]);m(ue),v(fe),S(lv(X))}else{const[ue,fe,X]=await Promise.all([FR(r.id),ef(r.id),av("movie",r.id)]);m(ue),v(fe),S(lv(X))}}catch(ue){console.error("Error fetching details:",ue)}finally{F(!1)}})()},[r.id,e]),G.useEffect(()=>{t==="theaters"&&e==="movie"&&bc().then(te=>{if(te){const ue=te.movies.find(fe=>fe.id===r.id);ue&&(W(ue),ue.cities.length>0&&!D&&(i&&ue.cities.includes(i)?Y(i):Y(ue.cities[0])))}})},[t,e,r.id,D,i]),G.useEffect(()=>{const te=ue=>{ue.key==="Escape"&&(A?M(!1):l())};return document.addEventListener("keydown",te),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",te),document.body.style.overflow=""}},[l,A]);const ce=()=>{if(!b||!D)return[];const te=b.screenings[D]||[];return Q?te.filter(ue=>ue.date===Q):te},L=()=>{const te=ce(),ue={};return te.forEach(fe=>{ue[fe.cinemaName]||(ue[fe.cinemaName]={}),ue[fe.cinemaName][fe.date]||(ue[fe.cinemaName][fe.date]=[]),ue[fe.cinemaName][fe.date].push(fe)}),Object.values(ue).forEach(fe=>{Object.values(fe).forEach(X=>{X.sort((Ae,Me)=>Ae.time.localeCompare(Me.time))})}),ue},J=te=>{const ue=new Date(te),fe=new Date;fe.setHours(0,0,0,0);const X=new Date(fe);return X.setDate(X.getDate()+1),ue.toDateString()===fe.toDateString()?K("today"):ue.toDateString()===X.toDateString()?K("tomorrow"):ue.toLocaleDateString("hu-HU",{weekday:"short",month:"short",day:"numeric"})},ke=()=>h?iP(h)?h.runtime?`${h.runtime} ${K("minutes")}`:null:`${h.number_of_seasons} ${K("seasons")}, ${h.number_of_episodes} ${K("episodes")}`:null;return _.jsx("div",{className:"modal-overlay",onClick:l,children:_.jsxs("div",{className:"modal-content",onClick:te=>te.stopPropagation(),children:[_.jsx("button",{className:"modal-close",onClick:l,children:_.jsx(nl,{size:24})}),A&&E&&_.jsx("div",{className:"trailer-overlay",onClick:()=>M(!1),children:_.jsxs("div",{className:"trailer-container",onClick:te=>te.stopPropagation(),children:[_.jsx("button",{className:"trailer-close",onClick:()=>M(!1),children:_.jsx(nl,{size:24})}),_.jsx("iframe",{src:`https://www.youtube.com/embed/${E.key}?autoplay=1`,title:E.name,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})}),_.jsxs("div",{className:"modal-body",children:[_.jsxs("div",{className:"modal-poster",children:[_.jsx("img",{src:lr(r.poster_path,bn.poster.large),alt:Re}),_.jsxs("div",{className:"poster-buttons",children:[E&&_.jsxs("button",{className:"trailer-button",onClick:()=>M(!0),children:[_.jsx(oR,{size:16})," ",K("trailer")]}),_.jsxs("div",{className:"favorite-buttons",children:[_.jsx("button",{className:`favorite-button like-button ${ie?"active":""}`,onClick:()=>V(r,e),title:K("like"),children:_.jsx(qa,{size:16,fill:ie?"currentColor":"none"})}),_.jsx("button",{className:`favorite-button love-button ${Oe?"active":""}`,onClick:()=>x(r,e),title:K("love"),children:_.jsx(Ti,{size:16,fill:Oe?"currentColor":"none"})})]}),_.jsx("button",{className:`watchlist-button ${Ee?"in-list":""}`,onClick:()=>{Ee?k(r.id,e):R(r,e)},children:Ee?_.jsxs(_.Fragment,{children:[_.jsx(Bw,{size:16})," ",K("inWatchlist")]}):_.jsxs(_.Fragment,{children:[_.jsx(Jd,{size:16})," ",K("addToWatchlist")]})})]})]}),_.jsxs("div",{className:"modal-info",children:[_.jsx("h2",{className:"modal-title",children:Re}),_.jsxs("div",{className:"modal-meta",children:[_.jsx("span",{className:"modal-year",children:ye}),ke()&&_.jsx("span",{className:"modal-runtime",children:ke()}),_.jsxs("span",{className:"modal-rating",children:[_.jsx(tl,{size:16,fill:"currentColor"})," ",r.vote_average.toFixed(1)]})]}),(h==null?void 0:h.genres)&&_.jsx("div",{className:"modal-genres",children:h.genres.map(te=>_.jsx("span",{className:"modal-genre",children:te.name},te.id))}),o&&o.length>0&&_.jsxs("div",{className:"modal-based-on",children:[_.jsxs("span",{className:"based-on-label",children:[K("basedOn"),":"]}),_.jsx("span",{className:"based-on-movies",children:o.join(", ")})]}),(h==null?void 0:h.tagline)&&_.jsxs("p",{className:"modal-tagline",children:['"',h.tagline,'"']}),_.jsx("p",{className:"modal-overview",children:r.overview||K("noDescription")}),q&&_.jsx("div",{className:"modal-loading",children:_.jsx(Po,{size:32,className:"spin"})}),g&&_.jsxs("div",{className:"modal-providers",children:[_.jsx("h3",{children:K("availableOnStreaming")}),g.flatrate&&g.flatrate.length>0&&_.jsxs("div",{className:"provider-section",children:[_.jsx("span",{className:"provider-label",children:K("withSubscription")}),_.jsx("div",{className:"provider-list",children:g.flatrate.map(te=>_.jsx("a",{href:Ad(te.provider_id,te.provider_name,Re),target:"_blank",rel:"noopener noreferrer",className:"provider-link-icon",title:te.provider_name,children:_.jsx("img",{src:lr(te.logo_path,bn.logo.medium),alt:te.provider_name})},te.provider_id))})]}),g.rent&&g.rent.length>0&&_.jsxs("div",{className:"provider-section",children:[_.jsx("span",{className:"provider-label",children:K("rentable")}),_.jsx("div",{className:"provider-list",children:g.rent.map(te=>_.jsx("a",{href:Ad(te.provider_id,te.provider_name,Re),target:"_blank",rel:"noopener noreferrer",className:"provider-link-icon",title:te.provider_name,children:_.jsx("img",{src:lr(te.logo_path,bn.logo.medium),alt:te.provider_name})},te.provider_id))})]}),g.buy&&g.buy.length>0&&_.jsxs("div",{className:"provider-section",children:[_.jsx("span",{className:"provider-label",children:K("purchasable")}),_.jsx("div",{className:"provider-list",children:g.buy.map(te=>_.jsx("a",{href:Ad(te.provider_id,te.provider_name,Re),target:"_blank",rel:"noopener noreferrer",className:"provider-link-icon",title:te.provider_name,children:_.jsx("img",{src:lr(te.logo_path,bn.logo.medium),alt:te.provider_name})},te.provider_id))})]}),!g.flatrate&&!g.rent&&!g.buy&&_.jsx("p",{className:"no-providers",children:K("noStreamingProviders")})]}),t==="theaters"&&b&&_.jsxs("div",{className:"modal-screenings",children:[_.jsxs("h3",{children:[_.jsx(yR,{size:18})," ",K("screenings")]}),_.jsxs("div",{className:"screenings-filters",children:[_.jsxs("div",{className:"screenings-filter",children:[_.jsx(sR,{size:16}),_.jsx("select",{value:D,onChange:te=>Y(te.target.value),className:"screenings-select",children:b.cities.map(te=>_.jsx("option",{value:te,children:te},te))})]}),_.jsxs("div",{className:"screenings-filter",children:[_.jsx(OC,{size:16}),_.jsxs("select",{value:Q,onChange:te=>he(te.target.value),className:"screenings-select",children:[_.jsx("option",{value:"",children:K("allDates")}),b.dates.map(te=>_.jsx("option",{value:te,children:J(te)},te))]})]})]}),_.jsx("div",{className:"screenings-list",children:Object.entries(L()).length>0?Object.entries(L()).sort(([te],[ue])=>te.localeCompare(ue)).map(([te,ue])=>_.jsxs("div",{className:"screenings-cinema-block",children:[_.jsx("div",{className:"screenings-cinema-header",children:te}),_.jsx("div",{className:"screenings-dates-container",children:Object.entries(ue).sort(([fe],[X])=>fe.localeCompare(X)).map(([fe,X])=>_.jsxs("div",{className:"screenings-date-row",children:[_.jsx("span",{className:"screenings-date-label",children:J(fe)}),_.jsx("div",{className:"screenings-times",children:X.map((Ae,Me)=>_.jsx("a",{href:Ae.bookingLink||"#",target:"_blank",rel:"noopener noreferrer",className:"screening-time",title:Ae.auditorium,children:Ae.time},Me))})]},fe))})]},te)):_.jsx("p",{className:"no-screenings",children:K("noScreeningsFound")})})]})]})]})]})})},fv=r=>"title"in r,aP=({onClose:r,onItemClick:e})=>{const{t,language:i}=yr(),{items:o,loading:l,refreshingId:h,removeItem:m,toggleWatched:g,addItem:v,isInWatchlist:E,checkAvailability:S,refreshItemAvailability:A}=rp(),[M,q]=G.useState("list"),[F,b]=G.useState(""),[W,D]=G.useState("movie"),[Y,Q]=G.useState([]),[he,K]=G.useState(!1),R=o.filter(T=>T.isAvailable===void 0).length;G.useEffect(()=>{R>0&&M==="list"&&!l&&S()},[M,R,S,l]);const k=async T=>{if(T.preventDefault(),!!F.trim()){K(!0);try{if(W==="movie"){const Ee=await Ww(F);Q(Ee.results.map(ie=>({...ie,mediaType:"movie"})))}else{const Ee=await Gw(F);Q(Ee.results.map(ie=>({...ie,mediaType:"tv"})))}}catch(Ee){console.error("Search error:",Ee)}finally{K(!1)}}},P=T=>new Date(T).toLocaleDateString(i==="hu"?"hu-HU":"en-GB"),V=T=>{if(!T)return null;const Ee=new Date(T),Oe=new Date().getTime()-Ee.getTime(),Re=Math.floor(Oe/(1e3*60*60*24));return Re===0?t("checkedToday"):Re===1?t("checkedYesterday"):Re<7?t("checkedDaysAgo").replace("{days}",String(Re)):t("checkedOnDate").replace("{date}",P(T))},x=T=>T.isAvailable===void 0?{icon:_.jsx(Po,{size:14,className:"spin"}),text:t("checking"),className:"checking"}:T.isAvailable?{icon:_.jsx(zC,{size:14}),text:t("available"),className:"available"}:{icon:_.jsx($C,{size:14}),text:t("notAvailable"),className:"unavailable"},j=T=>T.availability?[...T.availability.flatrate||[],...T.availability.rent||[],...T.availability.buy||[]].filter((Oe,Re,oe)=>nf.includes(Oe.provider_id)&&oe.findIndex(ye=>ye.provider_id===Oe.provider_id)===Re):[];return _.jsx("div",{className:"watchlist-overlay",onClick:r,children:_.jsxs("div",{className:"watchlist-panel",onClick:T=>T.stopPropagation(),children:[_.jsxs("div",{className:"watchlist-header",children:[_.jsx("h2",{children:t("watchlist")}),_.jsx("button",{className:"watchlist-close",onClick:r,children:_.jsx(nl,{size:24})})]}),_.jsxs("div",{className:"watchlist-tabs",children:[_.jsxs("button",{className:`watchlist-tab ${M==="list"?"active":""}`,onClick:()=>q("list"),children:[_.jsx($w,{size:16})," ",t("list")," (",o.length,")"]}),_.jsxs("button",{className:`watchlist-tab ${M==="search"?"active":""}`,onClick:()=>q("search"),children:[_.jsx(Jd,{size:16})," ",t("add")]})]}),M==="search"&&_.jsxs("div",{className:"watchlist-search",children:[_.jsxs("form",{onSubmit:k,children:[_.jsxs("div",{className:"search-type-toggle",children:[_.jsx("button",{type:"button",className:`search-type-btn ${W==="movie"?"active":""}`,onClick:()=>D("movie"),children:t("movie")}),_.jsx("button",{type:"button",className:`search-type-btn ${W==="tv"?"active":""}`,onClick:()=>D("tv"),children:t("tvShow")})]}),_.jsxs("div",{className:"search-input-row",children:[_.jsx("input",{type:"text",placeholder:t("searchAnyMovieOrTv"),value:F,onChange:T=>b(T.target.value),className:"watchlist-search-input"}),_.jsx("button",{type:"submit",className:"watchlist-search-btn",disabled:he,children:he?"...":t("search")})]})]}),he?_.jsxs("div",{className:"watchlist-loading",children:[_.jsx(Po,{size:40,className:"spin"}),_.jsx("p",{children:t("searching")})]}):Y.length>0?_.jsx("div",{className:"search-results",children:Y.map(T=>{const Ee=fv(T)?T.title:T.name,ie=fv(T)?T.release_date:T.first_air_date,Oe=E(T.id,T.mediaType);return _.jsxs("div",{className:"search-result-item",children:[_.jsx("div",{className:"search-result-poster",children:T.poster_path?_.jsx("img",{src:lr(T.poster_path,bn.poster.small),alt:Ee}):_.jsx("div",{className:"no-poster",children:_.jsx(fc,{size:20})})}),_.jsxs("div",{className:"search-result-info",children:[_.jsx("h4",{children:Ee}),_.jsxs("div",{className:"search-result-meta",children:[_.jsx("span",{className:"media-type-badge",children:T.mediaType==="movie"?t("movie"):t("tvShow")}),ie&&_.jsx("span",{children:ie.split("-")[0]}),_.jsxs("span",{className:"rating",children:[_.jsx(tl,{size:12,fill:"currentColor"})," ",T.vote_average.toFixed(1)]})]})]}),_.jsx("button",{className:`add-to-list-btn ${Oe?"in-list":""}`,onClick:()=>{Oe?m(T.id,T.mediaType):v(T,T.mediaType)},children:Oe?_.jsx(Bw,{size:18}):_.jsx(Jd,{size:18})})]},`${T.mediaType}-${T.id}`)})}):F&&!he?_.jsx("div",{className:"watchlist-empty",children:_.jsx("p",{children:t("noSearchResults")})}):_.jsxs("div",{className:"watchlist-empty",children:[_.jsx("p",{children:t("searchAnyInterest")}),_.jsx("p",{className:"hint",children:t("addEvenIfNotAvailable")})]})]}),M==="list"&&_.jsxs(_.Fragment,{children:[l?_.jsxs("div",{className:"watchlist-loading",children:[_.jsx(Po,{size:40,className:"spin"}),_.jsx("p",{children:t("checkingAvailability")})]}):o.length===0?_.jsxs("div",{className:"watchlist-empty",children:[_.jsx("p",{children:t("watchlistEmpty")}),_.jsx("p",{children:t("clickAddTab")})]}):_.jsx("div",{className:"watchlist-items",children:o.map(T=>{var Oe;const Ee=x(T),ie=j(T);return _.jsxs("div",{className:`watchlist-item ${T.watched?"watched":""}`,children:[_.jsx("div",{className:"watchlist-item-poster",onClick:()=>e(T.id,T.mediaType),children:T.posterPath?_.jsx("img",{src:`https://image.tmdb.org/t/p/w92${T.posterPath}`,alt:T.title}):_.jsx("div",{className:"no-poster",children:_.jsx(fc,{size:24})})}),_.jsxs("div",{className:"watchlist-item-info",children:[_.jsx("h3",{className:"watchlist-item-title",onClick:()=>e(T.id,T.mediaType),children:T.title}),_.jsxs("div",{className:"watchlist-item-meta",children:[_.jsx("span",{className:"media-type-badge",children:T.mediaType==="movie"?t("movie"):t("tvShow")}),T.releaseDate&&_.jsx("span",{className:"release-year",children:T.releaseDate.split("-")[0]}),_.jsxs("span",{className:"rating",children:[_.jsx(tl,{size:12,fill:"currentColor"})," ",T.voteAverage.toFixed(1)]})]}),_.jsxs("div",{className:`availability-status ${Ee.className}`,children:[Ee.icon," ",Ee.text]}),ie.length>0&&((Oe=T.availability)==null?void 0:Oe.link)&&_.jsx("div",{className:"watchlist-providers",children:ie.map(Re=>{var oe;return _.jsx("a",{href:(oe=T.availability)==null?void 0:oe.link,target:"_blank",rel:"noopener noreferrer",className:"provider-icon-link",title:`${t("watchOn")}: ${Re.provider_name}`,children:_.jsx("img",{src:lr(Re.logo_path,bn.logo.small),alt:Re.provider_name})},Re.provider_id)})}),_.jsxs("div",{className:"watchlist-item-dates",children:[_.jsxs("span",{className:"date-added",children:[t("addedOn"),": ",P(T.addedAt)]}),T.lastChecked&&_.jsx("span",{className:"date-checked",children:V(T.lastChecked)})]})]}),_.jsxs("div",{className:"watchlist-item-actions",children:[_.jsx("button",{className:`btn-refresh-item ${h===T.id?"refreshing":""}`,onClick:()=>A(T.id,T.mediaType),disabled:h===T.id,title:t("refreshAvailability"),children:_.jsx(Jy,{size:18})}),_.jsx("button",{className:`btn-watched ${T.watched?"active":""}`,onClick:()=>g(T.id,T.mediaType),title:T.watched?t("markAsUnwatched"):t("markAsWatched"),children:T.watched?_.jsx(KC,{size:18}):_.jsx(tp,{size:18})}),_.jsx("button",{className:"btn-remove",onClick:()=>m(T.id,T.mediaType),title:t("removeFromList"),children:_.jsx(Hw,{size:18})})]})]},`${T.mediaType}-${T.id}`)})}),o.length>0&&!l&&_.jsx("div",{className:"watchlist-footer",children:_.jsxs("button",{className:"btn-refresh",onClick:S,children:[_.jsx(Jy,{size:16})," ",t("refreshAvailability")]})})]})]})})},Yw=(r,e)=>`${e}_${r}`,sp=r=>Hf(ep,"users",r,"blacklist"),Xw=async(r,e)=>{const t=Di(sp(r),Yw(e.id,e.mediaType));await Dc(t,e)},lP=async(r,e,t)=>{const i=Di(sp(r),Yw(e,t));await Jf(i)},uP=(r,e,t)=>{const i=Qf(sp(r));return Zf(i,o=>{const l=[];o.forEach(h=>{l.push(h.data())}),l.sort((h,m)=>new Date(m.addedAt).getTime()-new Date(h.addedAt).getTime()),e(l)},o=>{console.error("Firestore blacklist subscription error:",o),t==null||t(o)})},cP=async(r,e)=>{const t=e.map(i=>Xw(r,i));await Promise.all(t)},Jw="movie-search-blacklist",hP=r=>"title"in r,pv=()=>{if(typeof window>"u")return[];const r=localStorage.getItem(Jw);if(r)try{return JSON.parse(r)}catch(e){console.error("Failed to parse blacklist:",e)}return[]},Mu=r=>{localStorage.setItem(Jw,JSON.stringify(r))},dP=(r,e)=>{const t=new Map;return e.forEach(i=>{t.set(`${i.mediaType}_${i.id}`,i)}),r.forEach(i=>{const o=`${i.mediaType}_${i.id}`;t.has(o)||t.set(o,i)}),Array.from(t.values()).sort((i,o)=>new Date(o.addedAt).getTime()-new Date(i.addedAt).getTime())},Zw=()=>{const{user:r}=Vc(),[e,t]=G.useState([]),[i,o]=G.useState(!0),[l,h]=G.useState(!1),m=G.useRef(!1),g=G.useRef(null);G.useEffect(()=>{const A=pv();t(A),o(!1)},[]),G.useEffect(()=>{if(!r){g.current=null,m.current=!1;return}g.current!==r.uid&&(g.current=r.uid,m.current=!1),h(!0);const A=uP(r.uid,async M=>{if(m.current)t(M),Mu(M);else{m.current=!0;const q=pv();if(q.length>0){const F=dP(q,M);t(F),Mu(F);const b=q.filter(W=>!M.some(D=>D.id===W.id&&D.mediaType===W.mediaType));if(b.length>0)try{await cP(r.uid,b)}catch(W){console.error("Failed to sync local blacklist to cloud:",W)}}else t(M),Mu(M)}h(!1)},M=>{console.error("Blacklist subscription error:",M),h(!1)});return()=>A()},[r]),G.useEffect(()=>{!i&&!l&&Mu(e)},[e,i,l]);const v=G.useCallback(async(A,M)=>{const q=hP(A)?A.title:A.name,F={id:A.id,mediaType:M,title:q,posterPath:A.poster_path,addedAt:new Date().toISOString()};if(t(b=>b.some(D=>D.id===A.id&&D.mediaType===M)?b:[F,...b]),r)try{await Xw(r.uid,F)}catch(b){console.error("Failed to add to blacklist in cloud:",b)}},[r]),E=G.useCallback(async(A,M)=>{if(t(q=>q.filter(F=>!(F.id===A&&F.mediaType===M))),r)try{await lP(r.uid,A,M)}catch(q){console.error("Failed to remove from blacklist in cloud:",q)}},[r]),S=G.useCallback((A,M)=>e.some(q=>q.id===A&&q.mediaType===M),[e]);return{items:e,loading:i,syncing:l,addToBlacklist:v,removeFromBlacklist:E,isBlacklisted:S}},fP=({onClose:r,onItemClick:e})=>{const{t,language:i}=yr(),{items:o,loading:l,removeFavorite:h,toggleLike:m,toggleLove:g}=Oc(),{items:v,loading:E,removeFromBlacklist:S}=Zw(),[A,M]=G.useState("all"),q=o.filter(D=>A==="liked"?D.liked:A==="loved"?D.loved:!0),F=o.filter(D=>D.liked).length,b=o.filter(D=>D.loved).length,W=D=>new Date(D).toLocaleDateString(i==="hu"?"hu-HU":"en-GB");return _.jsx("div",{className:"favorites-overlay",onClick:r,children:_.jsxs("div",{className:"favorites-panel",onClick:D=>D.stopPropagation(),children:[_.jsxs("div",{className:"favorites-header",children:[_.jsx("h2",{children:t("favorites")}),_.jsx("button",{className:"favorites-close",onClick:r,children:_.jsx(nl,{size:24})})]}),_.jsxs("div",{className:"favorites-filters",children:[_.jsxs("button",{className:`favorites-filter ${A==="all"?"active":""}`,onClick:()=>M("all"),children:[t("filterAll")," (",o.length,")"]}),_.jsxs("button",{className:`favorites-filter ${A==="liked"?"active":""}`,onClick:()=>M("liked"),children:[_.jsx(qa,{size:14})," ",t("liked")," (",F,")"]}),_.jsxs("button",{className:`favorites-filter ${A==="loved"?"active":""}`,onClick:()=>M("loved"),children:[_.jsx(Ti,{size:14})," ",t("loved")," (",b,")"]}),_.jsxs("button",{className:`favorites-filter favorites-filter--blacklist ${A==="blacklist"?"active":""}`,onClick:()=>M("blacklist"),children:[_.jsx(tp,{size:14})," ",t("blacklist")," (",v.length,")"]})]}),_.jsx("div",{className:"favorites-content",children:A==="blacklist"?E?_.jsx("div",{className:"favorites-loading",children:_.jsx(Po,{size:40,className:"spin"})}):v.length===0?_.jsx("div",{className:"favorites-empty",children:_.jsx("p",{children:t("noBlacklistedItems")})}):_.jsx("div",{className:"favorites-items",children:v.map(D=>_.jsxs("div",{className:"favorites-item favorites-item--blacklist",children:[_.jsx("div",{className:"favorites-item-poster",onClick:()=>e(D.id,D.mediaType),children:D.posterPath?_.jsx("img",{src:lr(D.posterPath,bn.poster.small),alt:D.title}):_.jsx("div",{className:"no-poster",children:_.jsx(fc,{size:24})})}),_.jsxs("div",{className:"favorites-item-info",children:[_.jsx("h3",{className:"favorites-item-title",onClick:()=>e(D.id,D.mediaType),children:D.title}),_.jsx("div",{className:"favorites-item-meta",children:_.jsx("span",{className:"media-type-badge",children:D.mediaType==="movie"?t("movie"):t("tvShow")})}),_.jsxs("div",{className:"favorites-item-date",children:[t("addedOn"),": ",W(D.addedAt)]})]}),_.jsx("div",{className:"favorites-item-actions",children:_.jsx("button",{className:"btn-restore",onClick:()=>S(D.id,D.mediaType),title:t("removeFromBlacklist"),children:_.jsx(cR,{size:18})})})]},`blacklist-${D.mediaType}-${D.id}`))}):l?_.jsx("div",{className:"favorites-loading",children:_.jsx(Po,{size:40,className:"spin"})}):q.length===0?_.jsx("div",{className:"favorites-empty",children:_.jsx("p",{children:t("noFavorites")})}):_.jsx("div",{className:"favorites-items",children:q.map(D=>_.jsxs("div",{className:"favorites-item",children:[_.jsx("div",{className:"favorites-item-poster",onClick:()=>e(D.id,D.mediaType),children:D.posterPath?_.jsx("img",{src:lr(D.posterPath,bn.poster.small),alt:D.title}):_.jsx("div",{className:"no-poster",children:_.jsx(fc,{size:24})})}),_.jsxs("div",{className:"favorites-item-info",children:[_.jsx("h3",{className:"favorites-item-title",onClick:()=>e(D.id,D.mediaType),children:D.title}),_.jsxs("div",{className:"favorites-item-meta",children:[_.jsx("span",{className:"media-type-badge",children:D.mediaType==="movie"?t("movie"):t("tvShow")}),D.releaseDate&&_.jsx("span",{className:"release-year",children:D.releaseDate.split("-")[0]}),_.jsxs("span",{className:"rating",children:[_.jsx(tl,{size:12,fill:"currentColor"})," ",D.voteAverage.toFixed(1)]})]}),_.jsxs("div",{className:"favorites-item-badges",children:[D.liked&&_.jsxs("span",{className:"badge badge-liked",children:[_.jsx(qa,{size:12})," ",t("liked")]}),D.loved&&_.jsxs("span",{className:"badge badge-loved",children:[_.jsx(Ti,{size:12})," ",t("loved")]})]}),_.jsxs("div",{className:"favorites-item-date",children:[t("addedOn"),": ",W(D.addedAt)]})]}),_.jsxs("div",{className:"favorites-item-actions",children:[_.jsx("button",{className:`btn-like ${D.liked?"active":""}`,onClick:()=>{const Y={id:D.id,title:D.title,name:D.title,poster_path:D.posterPath,release_date:D.releaseDate,first_air_date:D.releaseDate,vote_average:D.voteAverage,overview:"",original_title:D.title,original_name:D.title,backdrop_path:null,vote_count:0,genre_ids:[],adult:!1,popularity:0};m(Y,D.mediaType)},title:t("like"),children:_.jsx(qa,{size:18,fill:D.liked?"currentColor":"none"})}),_.jsx("button",{className:`btn-love ${D.loved?"active":""}`,onClick:()=>{const Y={id:D.id,title:D.title,name:D.title,poster_path:D.posterPath,release_date:D.releaseDate,first_air_date:D.releaseDate,vote_average:D.voteAverage,overview:"",original_title:D.title,original_name:D.title,backdrop_path:null,vote_count:0,genre_ids:[],adult:!1,popularity:0};g(Y,D.mediaType)},title:t("love"),children:_.jsx(Ti,{size:18,fill:D.loved?"currentColor":"none"})}),_.jsx("button",{className:"btn-remove",onClick:()=>h(D.id,D.mediaType),title:t("removeFromList"),children:_.jsx(Hw,{size:18})})]})]},`${D.mediaType}-${D.id}`))})})]})})},pP=(r={})=>{const[e,t]=G.useState([]),[i,o]=G.useState(!0),[l,h]=G.useState(null),[m,g]=G.useState(1),[v,E]=G.useState(0),[S,A]=G.useState(0),M=r.mediaType||"movie",q=r.browseMode||"streaming",F=G.useCallback(async(D,Y=!1)=>{o(!0),h(null);try{let Q;r.searchQuery&&r.searchQuery.trim()?M==="tv"?Q=await Gw(r.searchQuery.trim(),D):Q=await Ww(r.searchQuery.trim(),D):q==="trending"?M==="tv"?Q=await GR("week"):Q=await WR("week"):q==="upcoming"&&M==="movie"?Q=await KR(D):q==="top_rated"?M==="tv"?Q=await YR(D):Q=await QR(D):q==="theaters"&&M==="movie"?Q=await XR({city:r.city,date:r.date,genres:r.genres,minRating:r.minRating,sortBy:r.sortBy}):M==="tv"?Q=await BR(D,{genres:r.genres,providers:r.providers,sortBy:r.sortBy,minRating:r.minRating,yearFrom:r.yearFrom,yearTo:r.yearTo}):Q=await jR(D,{genres:r.genres,certification:r.certification,providers:r.providers,sortBy:r.sortBy,minRating:r.minRating,yearFrom:r.yearFrom,yearTo:r.yearTo}),t(he=>Y?[...he,...Q.results]:Q.results),E(Q.total_pages),A(Q.total_results),g(D)}catch(Q){const he=M==="tv"?"Hiba trtnt a sorozatok betltsekor":"Hiba trtnt a filmek betltsekor";h(Q instanceof Error?Q.message:he)}finally{o(!1)}},[M,q,r.genres,r.certification,r.providers,r.sortBy,r.minRating,r.yearFrom,r.yearTo,r.city,r.date,r.searchQuery]);G.useEffect(()=>{t([]),F(1,!1)},[F]);const b=G.useCallback(()=>{m<v&&!i&&F(m+1,!0)},[m,v,i,F]),W=G.useCallback(()=>{t([]),F(1,!1)},[F]);return{items:e,loading:i,error:l,page:m,totalPages:v,totalResults:S,loadMore:b,refresh:W}},mP=(r,e=20,t="movie",i="streaming")=>{const[o,l]=G.useState([]),[h,m]=G.useState(!1),[g,v]=G.useState(null),E=G.useRef(null),S=G.useCallback(async()=>{const M=r.filter(q=>q.loved);if(M.length===0){l([]),m(!1);return}E.current&&E.current.abort(),E.current=new AbortController,m(!0),v(null);try{const q=new Map,F=new Set(r.map(K=>`${K.mediaType}_${K.id}`));let b=null;if(i==="theaters"){const K=await bc();K&&(b=new Set(K.movies.map(R=>R.id)))}const W=i==="theaters"?"movie":t,D=i==="theaters"?M.filter(K=>K.mediaType==="movie"):M.filter(K=>K.mediaType===W);if(D.length===0){l([]),m(!1);return}const Y=D.map(async K=>{try{if(K.mediaType==="movie"){const R=await JR(K.id);return{basedOn:K.title,mediaType:"movie",results:R.results}}else{const R=await ZR(K.id);return{basedOn:K.title,mediaType:"tv",results:R.results}}}catch(R){return console.warn(`Failed to get recommendations for ${K.title}:`,R),null}}),Q=await Promise.all(Y);for(const K of Q)if(K&&!(i!=="theaters"&&K.mediaType!==W))for(const R of K.results){const k=`${K.mediaType}_${R.id}`;if(!F.has(k)&&!(i==="theaters"&&b&&!b.has(R.id)))if(q.has(k)){const P=q.get(k);P.score+=1,P.basedOn.includes(K.basedOn)||P.basedOn.push(K.basedOn)}else q.set(k,{item:R,mediaType:K.mediaType,score:1,basedOn:[K.basedOn]})}const he=Array.from(q.values()).sort((K,R)=>R.score!==K.score?R.score-K.score:R.item.vote_average-K.item.vote_average).slice(0,e);l(he)}catch(q){if(q instanceof Error&&q.name==="AbortError")return;console.error("Failed to fetch recommendations:",q),v("Failed to load recommendations")}finally{m(!1)}},[r,e,t,i]);G.useEffect(()=>(S(),()=>{E.current&&E.current.abort()}),[S]);const A=G.useCallback(()=>{S()},[S]);return{recommendations:o,loading:h,error:g,refresh:A}};function gP(){const[r,e]=G.useState("movie"),[t,i]=G.useState("streaming"),[o,l]=G.useState([]),[h,m]=G.useState(Cs),[g,v]=G.useState(""),[E,S]=G.useState("popularity.desc"),[A,M]=G.useState(0),[q,F]=G.useState(void 0),[b,W]=G.useState(void 0),[D,Y]=G.useState(""),[Q,he]=G.useState(""),[K,R]=G.useState([]),[k,P]=G.useState([]),[V,x]=G.useState(""),[j,T]=G.useState(null),[Ee,ie]=G.useState(!1),[Oe,Re]=G.useState(!1),[oe,ye]=G.useState(!1),[ce,L]=G.useState(!1),[J,ke]=G.useState("movie"),[te,ue]=G.useState(void 0),{items:fe,syncing:X}=rp(),{items:Ae,syncing:Me}=Oc(),{addToBlacklist:dt,isBlacklisted:Kr}=Zw(),{recommendations:Fs,loading:Fn}=mP(Ae,t==="forYou"?100:20,r,t==="forYou"?"streaming":t),vr=Fs.filter(Le=>!Kr(Le.item.id,Le.mediaType)),Qr=t==="forYou"?vr.filter(Le=>{const Ye=Le.item;if(o.length>0&&!Ye.genre_ids.some(kt=>o.includes(kt))||A>0&&Ye.vote_average<A)return!1;const Wt="release_date"in Ye?Ye.release_date:"first_air_date"in Ye?Ye.first_air_date:"";if(Wt){const kt=parseInt(Wt.split("-")[0],10);if(q&&kt<q||b&&kt>b)return!1}return!0}):vr,{t:_r}=yr(),{genres:wr,providers:Us,certifications:ut,loading:it}=eP(r);G.useEffect(()=>{t==="theaters"&&bc().then(Le=>{Le&&(R(Le.cities),P(Le.dates))})},[t]);const{items:Yt,loading:zs,page:Bs,totalPages:Vi,loadMore:Un}=pP({mediaType:r,browseMode:t,genres:o.length>0?o:void 0,certification:r==="movie"&&g||void 0,providers:h.length>0?h:void 0,sortBy:E,minRating:A>0?A:void 0,yearFrom:q,yearTo:b,city:D||void 0,date:Q||void 0,searchQuery:V||void 0}),$s=G.useCallback(Le=>{e(Le),i("streaming"),l([]),v("")},[]),Yr=G.useCallback(()=>{e("movie"),i("theaters"),l([]),v(""),Y(""),he("")},[]),zn=G.useCallback(Le=>{i(Le)},[]),Oi=G.useCallback(()=>{i("streaming"),l([]),m(Cs),v(""),S("popularity.desc"),M(0),F(void 0),W(void 0),Y(""),he(""),x("")},[]),Er=G.useCallback(()=>{m(Cs)},[]),Bn=G.useCallback(()=>{m([])},[]),bi=G.useCallback(Le=>{x(Le),Le.trim()&&i("streaming")},[]);return _.jsxs("div",{className:"app",children:[_.jsx(IR,{onSearch:bi,mediaType:r,browseMode:t,onMediaTypeChange:$s,onTheatersClick:Yr,onWatchlistClick:()=>ye(!0),watchlistCount:fe.length,syncing:X||Me,onFavoritesClick:()=>L(!0),favoritesCount:Ae.length,showFilters:Ee||!Oe,onFiltersToggle:()=>{window.innerWidth>1024?Re(!Oe):ie(!Ee)}}),_.jsxs("main",{className:"main-content",children:[_.jsx("button",{className:"filters-toggle",onClick:()=>ie(!Ee),children:_r(Ee?"hideFilters":"showFilters")}),_.jsxs("div",{className:`content-layout ${Oe?"filters-collapsed":""}`,children:[_.jsx("div",{className:`filters-container ${Ee?"show":""}`,children:!it&&_.jsx(RR,{genres:wr,providers:Us,certifications:ut,selectedGenres:o,selectedProviders:h,selectedCertification:g,sortBy:E,minRating:A,yearFrom:q,yearTo:b,browseMode:t,availableCities:K,availableDates:k,selectedCity:D,selectedDate:Q,onCityChange:Y,onDateChange:he,onGenreChange:l,onProviderChange:m,onCertificationChange:v,onSortChange:S,onRatingChange:M,onYearFromChange:F,onYearToChange:W,onBrowseModeChange:zn,onClearFilters:Oi,onResetProviders:Er,onClearProviders:Bn,mediaType:r,isCollapsed:Oe,onToggleCollapse:()=>Re(!Oe)})}),_.jsx("div",{className:"movies-container",children:t==="forYou"?_.jsx(ov,{items:Qr.map(Le=>Le.item),loading:Fn,onItemClick:Le=>{const Ye=Qr.find(Wt=>Wt.item.id===Le.id);T(Le),ke((Ye==null?void 0:Ye.mediaType)||r),ue(Ye==null?void 0:Ye.basedOn)},onLoadMore:()=>{},hasMore:!1,mediaType:r,onHideItem:Le=>{const Ye=Qr.find(Wt=>Wt.item.id===Le.id);Ye&&dt(Le,Ye.mediaType)}}):_.jsx(ov,{items:Yt,loading:zs,onItemClick:Le=>{T(Le),ke(r),ue(void 0)},onLoadMore:Un,hasMore:Bs<Vi,mediaType:r})})]})]}),j&&_.jsx(oP,{item:j,mediaType:J,browseMode:t,initialCity:D,basedOn:te,onClose:()=>T(null)}),oe&&_.jsx(aP,{onClose:()=>ye(!1),onItemClick:()=>{ye(!1)}}),ce&&_.jsx(fP,{onClose:()=>L(!1),onItemClick:(Le,Ye)=>{const Wt=Yt.find(kt=>kt.id===Le);T(Wt||{id:Le,poster_path:null,backdrop_path:null,overview:"",vote_average:0,vote_count:0,genre_ids:[],adult:!1,popularity:0,...Ye==="movie"?{title:"",original_title:"",release_date:""}:{name:"",original_name:"",first_air_date:""}}),ke(Ye),ue(void 0),L(!1)}})]})}g0.createRoot(document.getElementById("root")).render(_.jsx(u0.StrictMode,{children:_.jsx(kC,{children:_.jsx(E0,{children:_.jsx(gP,{})})})}));
